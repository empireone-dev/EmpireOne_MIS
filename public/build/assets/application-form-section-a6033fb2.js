import{a as le,r as x,j as e,e as se}from"./app-23fe097d.js";import r from"./input2-603ab6c0.js";import m from"./select-2174f399.js";import ie from"./select2-6887958a.js";import{u as re,a as te}from"./index.esm-b1c80ba5.js";import{r as ne,p as oe,c as ce,b as me}from"./barangay-94589600.js";import de from"./checkbox-fa1521c6.js";import{d as xe}from"./applicant-thunk-31fead58.js";import{P as pe}from"./PlusIcon-c4a5349b.js";import{U as ge}from"./index-854df75e.js";import{m as p}from"./index-5ccea73b.js";import{I as fe}from"./InboxOutlined-d1b08dc3.js";import"./applicant-record-service-9da45029.js";import"./applicant-final-service-a1d04fab.js";import"./Dragger-74469990.js";import"./genStyleUtils-e721c455.js";import"./typeof-7fd5df1e.js";import"./presets-0018ddb5.js";import"./defineProperty-a12e71b5.js";import"./AntdIcon-dce0f1f6.js";import"./regeneratorRuntime-92fa3873.js";import"./asyncToGenerator-8c72b493.js";import"./pickAttrs-7625f11d.js";import"./useId-25facbbc.js";import"./useZIndex-fc34f806.js";import"./collapse-97de76d4.js";import"./fade-6485fe96.js";import"./LoadingOutlined-18db2609.js";import"./omit-644b1847.js";import"./useForceUpdate-64a10434.js";import"./Compact-e520a717.js";import"./useSize-e3cef5db.js";import"./button-7cf3af98.js";import"./UnstableContext-ccdd146b.js";import"./DeleteOutlined-4fc36ee8.js";import"./EyeOutlined-25900422.js";import"./CheckCircleFilled-39eb9ed3.js";import"./CheckOutlined-1a7b39e3.js";import"./CloseCircleFilled-46d19a79.js";import"./CloseOutlined-66a93086.js";import"./index-0632402a.js";import"./ContextIsolator-da00e637.js";import"./useLocale-3d7a3aba.js";import"./InfoCircleFilled-1931916b.js";import"./KeyCode-0aff68e0.js";const{Dragger:ue}=ge;function oa(){var S,q,_,C,M,P,k,I,E,F,A,D;le(a=>a.app);const[L,H]=x.useState([]),[R,U]=x.useState([]),[B,$]=x.useState([]),[j,v]=x.useState({});x.useState(!1);const[y,W]=x.useState(!1),[g,N]=x.useState([]),{register:s,handleSubmit:K,formState:{errors:l,isSubmitting:w},reset:T,control:z}=re({defaultValues:{work_experience:[{company:"",position:"",started_at:"",end_at:""}]}}),{fields:Q,append:X,remove:Y}=te({control:z,name:"work_experience"}),Z=async a=>{const i=o=>new Promise((c,h)=>{const d=new FileReader;d.onload=()=>c(d.result),d.onerror=b=>h(b),d.readAsDataURL(o)}),n=Array.from(a).filter(o=>!g.some(c=>c.file.name===o.name&&c.file.size===o.size&&c.file.lastModified===o.lastModified)),u=await Promise.all(n.map(async o=>({file:o,files:await i(o)})));N(o=>[...o,...u])};console.log("files",g);const ee={name:"file",multiple:!1,accept:"application/pdf",method:"GET",action:"https://660d2bd96ddfa2943b33731c.mockapi.io/api/upload",onChange(a){const{status:i}=a.file;if(i!=="uploading"&&console.log(a.file,a.fileList),i==="done"){const t=a.fileList.map(n=>n.originFileObj).filter(Boolean);Z(t),p.success(`${a.file.name} file uploaded successfully.`)}else i==="error"&&p.error(`${a.file.name} file upload failed.`)},onRemove(a){return N(i=>i.filter(t=>t.file.name!==a.name)),!0}},ae=async a=>{var i;if(g.length===0){p.error("CV file is required. Please upload your CV.");return}try{const t=await se.dispatch(xe({...a,province:JSON.parse(a==null?void 0:a.province).name,city:JSON.parse(a==null?void 0:a.city).name,region:JSON.parse(a==null?void 0:a.region).name,files:g.map(n=>n.files),is_experience:y}));T(),N([]),p.success("Application has been submitted successfully")}catch(t){((i=t==null?void 0:t.response)==null?void 0:i.status)===422?p.error("Application failed: Data validation error or already exists"):p.error("Something went wrong. Please try again later.")}};function f(a){if(console.log("dadwa",a.target.value),a.target.name=="region"){const i=JSON.parse(a.target.value),t=oe.filter(n=>n.region_code===i.region_code);H(t),v({...j,[a.target.name]:i.name})}else if(a.target.name=="province"){const i=JSON.parse(a.target.value),t=ce.filter(n=>n.province_code===i.province_code);U(t),v({...j,[a.target.name]:i.name})}else if(a.target.name=="city"){const i=JSON.parse(a.target.value),t=me.filter(n=>n.city_code===i.city_code);$(t),v({...j,[a.target.name]:i.name})}}return e.jsx(e.Fragment,{children:e.jsx("div",{className:"h-screen overflow-hidden ",children:e.jsx("div",{className:"bg-cover bg-[url('/images/SCemp.jpg')] transition-colors duration-300 h-full overflow-y-scroll",children:e.jsx("div",{className:"container mx-auto px-2 flex justify-center",children:e.jsxs("div",{className:"bg-white shadow-2xl shadow-black rounded-lg p-6 mt-12 w-full",children:[e.jsx("div",{className:"flex items-center justify-center p-3",children:e.jsx("img",{className:"w-60",src:"images/newlogo.png",alt:"logo"})}),e.jsx("div",{className:"flex text-2xl items-center justify-center",children:e.jsx("h1",{className:"text-center",children:e.jsx("b",{children:"ONLINE APPLICATION FORM"})})}),e.jsxs("form",{onSubmit:K(ae),className:"space-y-4 px-1 py-8",children:[e.jsx("h1",{className:"text-xl font-semibold mb-3 text-gray-900 ",children:"Site Information"}),e.jsx("div",{className:"w-full lg:w-1/2 lg:flex-row flex-none",children:e.jsx(m,{register:{...s("site",{required:!1})},options:[{label:"San Carlos",value:"San Carlos"},{label:"Carcar",value:"Carcar"}],label:"Site",name:"site"})}),e.jsx("h1",{className:"text-xl font-semibold mb-3 text-gray-900 ",children:"Personal Information"}),e.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row",children:[e.jsx("div",{className:"flex-1",children:e.jsx(r,{register:{...s("fname",{required:"First Name is required"})},errorMessage:(S=l==null?void 0:l.fname)==null?void 0:S.message,name:"fname",label:"First Name",type:"text"})}),e.jsx("div",{className:"flex-1",children:e.jsx(r,{register:{...s("mname",{required:"Middle Name is required"})},errorMessage:(q=l==null?void 0:l.mname)==null?void 0:q.message,name:"mname",label:"Middle Name",type:"text"})}),e.jsx("div",{className:"flex-1",children:e.jsx(r,{register:{...s("lname",{required:"Last Name is required"})},errorMessage:(_=l==null?void 0:l.lname)==null?void 0:_.message,name:"lname",label:"Last Name",type:"text"})}),e.jsx("div",{className:"flex-none lg:w-24 lg:flex-row",children:e.jsx(m,{register:{...s("suffix",{required:!1})},options:[{label:"--",value:""},{label:"Sr.",value:"Sr."},{label:"Jr.",value:"Jr."},{label:"II",value:"II"},{label:"III",value:"III"},{label:"IV",value:"IV"},{label:"V",value:"V"}],label:"Suffix",name:"name"})})]}),e.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row",children:[e.jsx("div",{className:"flex-1",children:e.jsx(ie,{register:{...s("gender",{required:"Gender is required"})},options:[{label:"Male",value:"Male"},{label:"Female",value:"Female"}],errorMessage:(C=l==null?void 0:l.gender)==null?void 0:C.message,label:"Gender",name:"gender"})}),e.jsx("div",{className:"flex-1",children:e.jsx(r,{register:{...s("dob",{required:"Date of Birth is required"})},errorMessage:(M=l==null?void 0:l.dob)==null?void 0:M.message,name:"dob",label:"Date of Birth",type:"date"})})]}),e.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row",children:[e.jsx("div",{className:"flex-1",children:e.jsx(r,{register:{...s("email",{required:"Email is required"})},errorMessage:(P=l==null?void 0:l.email)==null?void 0:P.message,name:"email",label:"Email",type:"email"})}),e.jsx("div",{className:"flex-1",children:e.jsx(r,{register:{...s("phone",{required:"Phone is required"})},errorMessage:(k=l==null?void 0:l.phone)==null?void 0:k.message,name:"phone",label:"Phone",type:"number"})})]}),e.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row",children:[e.jsx("div",{className:"flex-1",children:e.jsx(m,{register:{...s("marital",{required:!1})},options:[{label:"Single",value:"Single"},{label:"Married",value:"Married"},{label:"Widowed",value:"Widowed"},{label:"Divorced",value:"Divorced"}],label:"Marital Status",name:"marital"})}),e.jsx("div",{className:"flex-1",children:e.jsx(r,{register:{...s("religion",{required:!1})},name:"religion",label:"Religion",type:"text"})}),e.jsx("div",{className:"flex-1",children:e.jsx(r,{register:{...s("nationality",{required:!1})},name:"nationality",label:"Nationality",type:"text"})})]}),e.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row",children:[e.jsx("div",{className:"flex-1",children:e.jsx(r,{register:{...s("mmname",{required:!1})},name:"mmname",label:"Mother's maiden name",type:"text"})}),e.jsx("div",{className:"flex-1",children:e.jsx(r,{register:{...s("ffname",{required:!1})},name:"ffname",label:"Father's fullname",type:"text"})})]}),e.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row",children:[e.jsx("div",{className:"flex-1",children:e.jsx(m,{register:{...s("educ",{required:!1})},options:[{label:"Highest Educational Attainmen",value:"Highest Educational Attainmen"},{label:"Elementary Undergraduate",value:"Elementary Undergraduate"},{label:"Elementary Graduate",value:"Elementary Graduate"},{label:"Highschool/K-12 Undergraduate",value:"Highschool/K-12 Undergraduate"},{label:"Highschool/K-12 Graduate",value:"Highschool/K-12 Graduate"},{label:"College Level",value:"College Level"},{label:"College Graduate",value:"College Graduate"},{label:"Vocational Graduate",value:"Vocational Graduate"},{label:"Masteral Degree",value:"Masteral Degree"},{label:"Doctoral Degree",value:"Doctoral Degree"}],label:"Highest Educational Attainment",name:"educ"})}),e.jsx("div",{className:"flex-1",children:e.jsx(r,{register:{...s("courset",{required:!1})},name:"courset",label:"Course taken",type:"text"})})]}),e.jsx("h1",{className:"text-xl font-semibold mb-3 text-gray-900 ",children:"Address Information"}),e.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row",children:[e.jsx("div",{className:"flex-1",children:e.jsx(m,{register:{...s("region",{required:"Please Select Region"})},onChange:a=>f(a),options:ne.map(a=>({label:a.region_name,value:JSON.stringify({name:a.region_name,region_code:a.region_code})})),errorMessage:(I=l==null?void 0:l.region)==null?void 0:I.message,label:"Region",name:"region"})}),e.jsx("div",{className:"flex-1",children:e.jsx(m,{register:{...s("province",{required:"Please Select Province"})},onChange:a=>f(a),options:L.map(a=>({label:a.province_name,value:JSON.stringify({name:a.province_name,province_code:a.province_code})})),errorMessage:(E=l==null?void 0:l.province)==null?void 0:E.message,label:"Province",name:"province"})}),e.jsx("div",{className:"flex-1",children:e.jsx(m,{register:{...s("city",{required:"Please Select City"})},onChange:a=>f(a),options:R.map(a=>({label:a.city_name,value:JSON.stringify({name:a.city_name,city_code:a.city_code})})),errorMessage:(F=l==null?void 0:l.city)==null?void 0:F.message,name:"city",label:"City/Municipality"})})]}),e.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row",children:[e.jsx("div",{className:"flex-1",children:e.jsx(m,{register:{...s("brgy",{required:"Please Select Barangay"})},onChange:a=>f(a),options:B.map(a=>({label:a.brgy_name,value:a.brgy_name})),errorMessage:(A=l==null?void 0:l.brgy)==null?void 0:A.message,name:"brgy",label:"Barangay"})}),e.jsx("div",{className:"flex-1",children:e.jsx(r,{register:{...s("lot",{required:"House/Lot No., Street, Purok/Sitio is required"})},errorMessage:(D=l==null?void 0:l.lot)==null?void 0:D.message,name:"lot",label:"House/Lot No., Street, Purok/Sitio",type:"text"})})]}),e.jsx("h1",{className:"text-xl font-semibold mb-3 text-gray-900 ",children:"Government ID Information"}),e.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row",children:[e.jsx("div",{className:"flex-1",children:e.jsx(r,{register:{...s("sss",{})},name:"sss",label:"SSS",type:"number"})}),e.jsx("div",{className:"flex-1",children:e.jsx(r,{register:{...s("pagibig",{})},name:"pagibig",label:"Pagibig",type:"number"})})]}),e.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row",children:[e.jsx("div",{className:"flex-1",children:e.jsx(r,{register:{...s("tin",{})},name:"tin",label:"Tin",type:"number"})}),e.jsx("div",{className:"flex-1",children:e.jsx(r,{register:{...s("philh",{})},name:"philh",label:"Philhealth No.",type:"number"})})]}),e.jsx("h1",{className:"text-xl font-semibold mb-3 text-gray-900 ",children:"Working Experience"}),e.jsxs("div",{className:"flex-col",children:[e.jsx("div",{className:"flex items-center mb-3 justify-between",children:e.jsx(de,{label:"With Working Experience?",name:"hasExperience",onChange:a=>W(a.target.checked)})}),y&&e.jsx("div",{className:"flex flex-col gap-3 w-full",children:Q.map((a,i)=>{var t,n,u,o,c,h,d,b,O,G,V,J;return e.jsxs("div",{className:"flex flex-col border border-blue-500 rounded-lg p-4 w-full gap-4",children:[i!==0&&e.jsx("div",{className:"flex w-full justify-end",children:e.jsx("button",{type:"button",onClick:()=>Y(i),className:"bg-red-500 text-white px-2 py-1 rounded",children:"✕"})}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-3 w-full",children:[e.jsx(r,{register:{...s(`work_experience.${i}.company`,{required:"Company is required"})},errorMessage:(u=(n=(t=l==null?void 0:l.work_experience)==null?void 0:t[i])==null?void 0:n.company)==null?void 0:u.message,name:"company",label:"Company",type:"text",className:"w-full"}),e.jsx(r,{register:{...s(`work_experience.${i}.position`,{required:"Position is required"})},errorMessage:(h=(c=(o=l==null?void 0:l.work_experience)==null?void 0:o[i])==null?void 0:c.position)==null?void 0:h.message,name:"position",label:"Position",type:"text",className:"w-full"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-3 w-full",children:[e.jsx(r,{register:{...s(`work_experience.${i}.started_at`,{required:"Started at is required"})},errorMessage:(O=(b=(d=l==null?void 0:l.work_experience)==null?void 0:d[i])==null?void 0:b.started_at)==null?void 0:O.message,label:"Started At",type:"date",className:"w-full"}),e.jsx(r,{register:{...s(`work_experience.${i}.end_at`,{required:"End at is required"})},errorMessage:(J=(V=(G=l==null?void 0:l.work_experience)==null?void 0:G[i])==null?void 0:V.end_at)==null?void 0:J.message,label:"End At",type:"date",className:"w-full"})]})]},a.id)})}),y&&e.jsxs("button",{type:"button",onClick:()=>X({name:""}),className:"bg-blue-600 text-white justify-center items-center px-4 flex gap-2 py-2 rounded-md w-full mt-4",children:[e.jsx(pe,{className:"h-6"})," Experience"]})]}),e.jsx("h1",{className:"text-xl font-semibold mb-3 text-gray-900 ",children:"Emergency Contact Information"}),e.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row",children:[e.jsx("div",{className:"flex-1",children:e.jsx(r,{register:{...s("ename",{required:!1})},name:"ename",label:"Emergency Contact Fullname",type:"text"})}),e.jsx("div",{className:"flex-1",children:e.jsx(r,{register:{...s("eaddress",{required:!1})},name:"eaddress",label:"Address",type:"text"})})]}),e.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row",children:[e.jsx("div",{className:"flex-1",children:e.jsx(r,{register:{...s("relationship",{required:!1})},name:"relationship",label:"Relationship",type:"text"})}),e.jsx("div",{className:"flex-1",children:e.jsx(r,{register:{...s("ephone",{required:!1})},name:"ephone",label:"Contact No.",type:"number"})})]}),e.jsx("br",{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["CV Upload ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(ue,{...ee,children:[e.jsx("p",{className:"ant-upload-drag-icon",children:e.jsx(fe,{})}),e.jsx("p",{className:"ant-upload-text",children:"Click or drag PDF file to this area to upload your CV"}),e.jsx("p",{className:"ant-upload-hint",children:"Support for a single or bulk upload. Only PDF files are allowed."})]}),g.length===0&&e.jsx("p",{className:"text-red-500 text-sm",children:"Please upload your CV or resume here in PDF format."})]}),e.jsx("div",{className:"flex items-end justify-end",children:e.jsx("button",{disabled:w,type:"submit",className:"bg-blue-600 w-full hover:bg-blue-500 text-white px-4 py-2 rounded",children:w?"Submitting...":"Submit"})})]})]})})})})})}export{oa as default};

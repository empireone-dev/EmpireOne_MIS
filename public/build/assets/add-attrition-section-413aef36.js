import{h as U,l as H,r as i,b as N,j as e,e as _}from"./app-32a458ad.js";import{s as B}from"./user-service-eca58262.js";import{M}from"./index-59c10b48.js";import{U as W}from"./UserAddOutlined-6d3e6c7e.js";import{m as x}from"./index-3e3463fd.js";import{U as $}from"./UserDeleteOutlined-1798d0d5.js";async function q(){return(await U.get("/api/employee_attrition")).data}async function z(r){return(await axios.post("/api/attrition",r)).data}function G(){return async function(r,n){const d=(await q()).data;console.log("result",d),r(H.actions.setEmployeeAttritions(d))}}function I(r){return async function(n,d){return await z(r)}}function J(){var b,f,g,h,y,j,w,v,k,S;const[r,n]=i.useState(!1),[d,m]=i.useState("");N(t=>t.employees);const[O,A]=i.useState([]),[s,E]=i.useState({});N(t=>t.app);const[l,C]=i.useState({}),[P,u]=i.useState(!1),[o,p]=i.useState({reason:"",resignationReasonSelect:"",dismissalReasonSelect:""}),T=t=>{const{value:c}=t.target;p({...o,reason:c,resignationReasonSelect:"",dismissalReasonSelect:""})};async function D(t){t.preventDefault();const c=await B({search:d});A(c.data)}async function F(t){var c,R;u(!0);try{const a=await _.dispatch(I({...s,...o}));a.status=="success"?(console.log("ressss",a.status),await _.dispatch(G()),x.success("Successfully Added"),u(!1),n(!1)):(x.error("Employee has been already added to Attrition Records"),u(!1),n(!1))}catch(a){(R=(c=a==null?void 0:a.response)==null?void 0:c.data)!=null&&R.errors?C(a.response.data.errors):x.error("An error occurred. Please try again later."),u(!1)}}const L=O.filter(t=>t.employee!==null&&t.employee!==0);return console.log("employeesasda",s),e.jsxs("div",{className:"my-2",children:[e.jsx("div",{class:"inline-flex rounded-md bg-white shadow-2xl",role:"group",children:e.jsxs("button",{type:"button",onClick:()=>n(!0),class:"inline-flex items-center px-4 py-2 text-sm font-medium text-blue-500 bg-transparent border border-blue-500 rounded-lg hover:bg-blue-500 hover:text-white focus:z-10 focus:ring-2 focus:ring-blue-500 focus:bg-blue-500 focus:text-white      gap-1",children:[e.jsx($,{className:"text-xl"}),"Select Employee Attirition"]})}),e.jsxs(M,{title:"Select Employee Attrition",centered:!0,open:r,onOk:()=>F(),onCancel:()=>n(!1),width:1e3,okText:"Submit",confirmLoading:P,cancelText:"Cancel",children:[e.jsxs("form",{onSubmit:D,class:"flex items-center w-full mx-auto",children:[e.jsx("label",{for:"simple-search",class:"sr-only",children:"Search"}),e.jsxs("div",{class:"relative w-full",children:[e.jsx("div",{class:"absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none",children:e.jsx(W,{})}),e.jsx("input",{onChange:t=>m(t.target.value),type:"text",id:"simple-search",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full ps-10 p-2.5",placeholder:"Search employee..."})]}),e.jsxs("button",{type:"submit",class:"p-2.5 ms-2 text-sm font-medium text-white bg-blue-700 rounded-lg border border-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 ",children:[e.jsx("svg",{class:"w-4 h-4","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",children:e.jsx("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"})}),e.jsx("span",{class:"sr-only",children:"Search"})]})]}),e.jsx("ul",{role:"list",className:"divide-y divide-gray-100 my-3",children:L.map(t=>e.jsxs("li",{className:"flex items-center justify-between gap-x-6 bg-blue-200 rounded-lg px-3",children:[e.jsx("div",{className:"min-w-0 my-3",children:e.jsxs("div",{className:"flex items-start gap-x-3 font-bold",children:[t.fname," ",t.lname]})}),e.jsx("div",{className:"flex flex-none items-center gap-x-4",children:e.jsxs("a",{onClick:()=>E(t),href:t.href,className:"hidden rounded-md bg-white px-2.5 py-1.5 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:block",children:["Choose",e.jsxs("span",{className:"sr-only",children:[", ",t.name]})]})})]},t.id))}),e.jsx("form",{class:"w-full h-full",children:e.jsxs("div",{class:"flex flex-col -mx-3 mb-6",children:[e.jsxs("div",{class:"w-full px-3",children:[e.jsx("label",{class:"block uppercase tracking-wide  text-xs font-bold mb-1 mt-2",children:"Employee No."}),e.jsx("input",{class:"appearance-none block w-full   border border-gray-400 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",id:"grid-text",type:"text",value:s.app_id,placeholder:"",readOnly:!0})]}),e.jsxs("div",{className:"flex flex-1 ",children:[e.jsxs("div",{class:"w-full px-3",children:[e.jsx("label",{class:"block uppercase tracking-wide  text-xs font-bold mb-1 mt-2",children:"job Position"}),e.jsx("input",{value:(b=s==null?void 0:s.employee)==null?void 0:b.position,class:"appearance-none block w-full   border border-gray-400 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",id:"grid-text",type:"text",placeholder:"",readOnly:!0})]}),e.jsxs("div",{class:"w-full px-3",children:[e.jsx("label",{class:"block uppercase tracking-wide  text-xs font-bold mb-1 mt-2",children:"Department"}),e.jsx("input",{value:(f=s==null?void 0:s.employee)==null?void 0:f.dept,class:"appearance-none block w-full   border border-gray-400 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",id:"grid-text",type:"text",placeholder:"",readOnly:!0})]}),e.jsxs("div",{class:"w-full px-3",children:[e.jsxs("label",{class:"block uppercase tracking-wide  text-xs font-bold mb-1 mt-2",children:["Account ",e.jsx("i",{children:"(If Applicable)"})]}),e.jsx("input",{value:((g=s==null?void 0:s.employee)==null?void 0:g.account)??"",class:"appearance-none block w-full   border border-gray-400 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",id:"grid-text",type:"text",placeholder:"",readOnly:!0})]})]}),e.jsxs("div",{className:"flex flex-1",children:[e.jsxs("div",{class:"w-full px-3",children:[e.jsx("label",{class:"block uppercase tracking-wide  text-xs font-bold mb-1 mt-2",children:"Supervisor"}),e.jsx("input",{value:(((y=(h=s==null?void 0:s.employee)==null?void 0:h.user)==null?void 0:y.employee_fname)??"")+" "+(((w=(j=s==null?void 0:s.employee)==null?void 0:j.user)==null?void 0:w.employee_lname)??""),class:"appearance-none block w-full   border border-gray-400 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",id:"grid-text",type:"text",placeholder:"",readOnly:!0})]}),e.jsxs("div",{class:"w-full px-3",children:[e.jsx("label",{class:"block uppercase tracking-wide  text-xs font-bold mb-1 mt-2",children:"EOGS Email"}),e.jsx("input",{value:((v=s==null?void 0:s.employee)==null?void 0:v.eogs)??"",class:"appearance-none block w-full   border border-gray-400 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",id:"grid-text",type:"email",placeholder:"",readOnly:!0})]})]}),e.jsxs("div",{className:"flex flex-1",children:[e.jsxs("div",{class:"w-full px-3",children:[e.jsx("label",{class:"block uppercase tracking-wide  text-xs font-bold mb-1 mt-2",children:"Hired Date"}),e.jsx("input",{class:"appearance-none block w-full   border border-gray-400 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",id:"grid-text",type:"text",value:((k=s==null?void 0:s.employee)==null?void 0:k.hired)??"",placeholder:"",readOnly:!0})]}),e.jsxs("div",{class:"w-full px-3",children:[e.jsx("label",{class:"block uppercase tracking-wide  text-xs font-bold mb-1 mt-2",children:"Status"}),e.jsx("input",{value:((S=s==null?void 0:s.employee)==null?void 0:S.status)??"",class:"appearance-none block w-full   border border-gray-400 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",id:"grid-text",type:"text",placeholder:"",readOnly:!0})]})]}),e.jsxs("div",{className:"flex flex-1",children:[e.jsxs("div",{class:"w-full px-3",children:[e.jsx("label",{class:"block uppercase tracking-wide  text-xs font-bold mb-1 mt-2",children:"Separation Date"}),e.jsx("input",{onChange:t=>p({...o,[t.target.name]:t.target.value}),value:o.separation||"",name:"separation",className:`appearance-none block w-full border py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white ${l!=null&&l.separation?"border-red-500":"border-gray-400"} rounded focus:border-gray-500`,id:"grid-text",type:"date",placeholder:"",required:!0}),(l==null?void 0:l.separation)&&e.jsx("span",{className:"text-red-500 text-sm mt-1",children:"Please input date of separation."})]}),e.jsxs("div",{class:"w-full px-3",children:[e.jsx("label",{class:"block uppercase tracking-wide  text-xs font-bold mb-1 mt-2",children:"Reason for Separation"}),e.jsxs("select",{onChange:T,className:`appearance-none block w-full border py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white ${l!=null&&l.reason?"border-red-500":"border-gray-400"} rounded focus:border-gray-500`,name:"reason",value:o.reason||"",required:!0,children:[e.jsx("option",{value:""}),e.jsx("option",{value:"Resigned",children:"Resignation"}),e.jsx("option",{value:"Dismissal",children:"Dismissal"}),e.jsx("option",{value:"Terminated",children:"Terminated"}),e.jsx("option",{value:"End of Contract",children:"End of Contract"}),e.jsx("option",{value:"EOPE",children:"EOPE (End of Probationary Employment)"}),e.jsx("option",{value:"AWOL",children:"AWOL (Absent Without Official Leave)"})]}),(l==null?void 0:l.reason)&&e.jsx("span",{className:"text-red-500 text-sm mt-1",children:"Please select reason of separation."})]})]}),o.reason==="Resignation"&&e.jsxs("div",{className:"w-full px-3",id:"resignationReason",children:[e.jsx("label",{className:"block uppercase tracking-wide text-xs font-bold mb-1 mt-2",htmlFor:"resignationReasonSelect",children:"Reason for Resignation:"}),e.jsxs("select",{name:"resignationReasonSelect",id:"resignationReasonSelect",className:"appearance-none block w-full border border-gray-400 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",onChange:t=>p({...o,resignationReasonSelect:t.target.value}),children:[e.jsx("option",{value:""}),e.jsx("option",{children:"Shift Career Path"}),e.jsx("option",{children:"Health Reason"}),e.jsx("option",{children:"Pursue Education"}),e.jsx("option",{children:"Family Care"}),e.jsx("option",{children:"Higher Salary"}),e.jsx("option",{children:"Higher Position"}),e.jsx("option",{children:"Better Job Scope"}),e.jsx("option",{children:"Better Environment"})]})]}),o.reason==="Dismissal"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"w-full px-3",id:"dismissalReason",children:[e.jsx("label",{className:"block uppercase tracking-wide text-xs font-bold mb-1 mt-2",htmlFor:"dismissalReasonSelect",children:"Reason for Dismissal:"}),e.jsxs("select",{name:"dismissalReasonSelect",id:"dismissalReasonSelect",className:"appearance-none block w-full border border-gray-400 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",onChange:t=>p({...o,dismissalReasonSelect:t.target.value}),children:[e.jsx("option",{value:""}),e.jsx("option",{children:"Policy Violations"}),e.jsx("option",{children:"Performance"}),e.jsx("option",{children:"Others"})]})]}),e.jsxs("div",{className:"w-full px-3",id:"TerminationReport",children:[e.jsx("label",{className:"block uppercase tracking-wide text-xs font-bold mb-1 mt-2",htmlFor:"TerminationReportSelect",children:"Upload Termination Report:"}),e.jsx("input",{type:"file",name:"TerminationReportSelect[]",id:"TerminationReportSelect",className:"appearance-none block w-full border border-gray-400 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",accept:".jpg, .jpeg, .png, .pdf",multiple:!0})]})]})]})})]})]})}const ee=Object.freeze(Object.defineProperty({__proto__:null,default:J},Symbol.toStringTag,{value:"Module"}));export{J as A,ee as a,G as g};

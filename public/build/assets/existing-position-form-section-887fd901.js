import{a as d,r as i,j as e,A as m,h as w,e as y}from"./app-35cff88f.js";import{c as C}from"./erf-record-thunk-e085bc81.js";import{h as f}from"./moment-a9aaa855.js";import{m as S}from"./index-8f875786.js";import"./erf-record-service-70cacee3.js";import"./genStyleUtils-c65086aa.js";import"./presets-8e6255b8.js";import"./useZIndex-da7ece3e.js";import"./AntdIcon-5c27c55f.js";import"./UnstableContext-9b7cf7bd.js";import"./asyncToGenerator-38d933b9.js";import"./CheckCircleFilled-6b22b031.js";import"./CloseCircleFilled-f5786c98.js";import"./InfoCircleFilled-8c1c3886.js";import"./KeyCode-a039b644.js";import"./pickAttrs-c7371058.js";import"./CloseOutlined-6f57969e.js";function L(){const{job_positions:u}=d(t=>t.job_positions),{erfCount:x}=d(t=>t.departments),{user:o}=d(t=>t.app),[p,c]=i.useState(!1),[l,r]=i.useState({department:"",budgetCost:"",jobTitle:"",jobType:"",personnel:"",dateNeed:"",positionStatus:"",sourcingMethod:"",justification:"",site:(o==null?void 0:o.site)||""}),[h,j]=i.useState(0),[T,b]=i.useState("");i.useEffect(()=>{(async()=>{try{const s=await w.get("/api/applications/today");j(s.data.count)}catch(s){console.error("Error fetching application count:",s)}})()},[]),i.useEffect(()=>{r(t=>({...t,ref_id:g()}))},[x]);const g=()=>{const s=f(new Date).format("MMDDYYYY"),n=(h+x).toString().padStart(2,"0");return`${s}${n}`},v=t=>{const s=t.target.value,n=u.find(a=>a.jPosition===s);r(n?a=>({...a,department:n.outsourcing_erf.department,budgetCost:n.salary,jobTitle:s}):a=>({...a,department:"",budgetCost:"",jobTitle:s})),b(s)},N=async()=>{c(!0);try{await y.dispatch(C({submitted:f().format("YYYY-MM-DD"),...l,...o})),S.success("Successfully Added!"),setTimeout(()=>{c(!1),m.visit("/admin/sourcing/resource_requests/erf_record")},2e3)}catch(t){console.error("Error submitting ERF:",t),c(!1)}};return e.jsx("div",{children:e.jsxs("form",{children:[e.jsx("h1",{className:"text-xl font-semibold mb-3 text-gray-900 mt-6 text-center",children:"EMPLOYEE REQUISITION FORM"}),e.jsx("h1",{className:"text-lg",children:e.jsx("b",{children:"Instructions/Hiring Information"})}),e.jsxs("p",{children:["  Use this form to initiate the recruitment process for all new and existing staff. Please complete all applicable sections of this form."," ",e.jsx("b",{children:"NO OFFERS should be made, either verbally or in written form, before all approvals on the form are completed"}),"."]}),e.jsx("input",{onChange:t=>r({...l,site:t.target.value}),value:(l==null?void 0:l.site)??"",type:"hidden"}),e.jsxs("div",{className:"flex flex-1 w-full gap-4 mb-4 mt-4",children:[e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsx("label",{children:e.jsx("b",{children:"Reference No."})}),e.jsx("input",{type:"text",value:l.ref_id||"",className:"border p-2 rounded w-full",readOnly:!0})]}),e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsx("label",{children:e.jsx("b",{children:"Job Title"})}),e.jsxs("select",{className:"border p-2 rounded w-full",onChange:v,value:l.jobTitle,children:[e.jsx("option",{value:""}),u.filter(t=>t.status==="Approved").map((t,s)=>e.jsx("option",{value:t.jPosition,children:t.jPosition},s))]})]})]}),e.jsxs("div",{className:"flex flex-1 w-full gap-4 mb-4",children:[e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsx("label",{children:e.jsx("b",{children:"Job Type"})}),e.jsxs("select",{onChange:t=>r({...l,jobType:t.target.value}),className:"border p-2 rounded w-full",value:l.jobType,children:[e.jsx("option",{value:""}),e.jsx("option",{value:"Full Time",children:"Full Time"}),e.jsx("option",{value:"Part Time",children:"Part Time"}),e.jsx("option",{value:"Temporary",children:"Temporary"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsx("label",{children:e.jsx("b",{children:"No. of Required Personnel"})}),e.jsx("input",{type:"number",className:"border p-2 rounded w-full",onChange:t=>r({...l,personnel:t.target.value})})]}),e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsx("label",{children:e.jsx("b",{children:"Date Needed"})}),e.jsx("input",{type:"date",className:"border p-2 rounded w-full",onChange:t=>r({...l,dateNeed:t.target.value})})]})]}),e.jsxs("div",{className:"flex flex-1 w-full gap-4 mb-4",children:[e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsx("label",{children:e.jsx("b",{children:"Position Status"})}),e.jsxs("select",{onChange:t=>r({...l,positionStatus:t.target.value}),className:"border p-2 rounded w-full",value:l.positionStatus,children:[e.jsx("option",{value:""}),e.jsx("option",{children:"Replacement"}),e.jsx("option",{children:"Reorganization"}),e.jsx("option",{children:"Other"})]})]}),e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsx("label",{children:e.jsx("b",{children:"Department"})}),e.jsx("input",{type:"text",value:l.department,className:"border p-2 rounded w-full",readOnly:!0})]}),e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsx("label",{children:e.jsx("b",{children:"Sourcing Method"})}),e.jsxs("select",{onChange:t=>r({...l,sourcingMethod:t.target.value}),className:"border p-2 rounded w-full",value:l.sourcingMethod,children:[e.jsx("option",{value:""}),e.jsx("option",{children:"Internal Candidates"}),e.jsx("option",{children:"External Candidates"}),e.jsx("option",{children:"Both"})]})]})]}),e.jsxs("div",{className:"w-full flex flex-col mb-4",children:[e.jsx("label",{children:e.jsx("b",{children:"Reason or Justification of the Request"})}),e.jsx("textarea",{className:"border h-40 p-2 rounded w-full",onChange:t=>r({...l,justification:t.target.value})})]}),e.jsxs("div",{className:"flex flex-1 w-full gap-4 mb-4",children:[e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsx("label",{children:e.jsx("b",{children:"Manager Submitting Request"})}),e.jsx("input",{type:"text",value:`${(o==null?void 0:o.employee_fname)||""} ${(o==null?void 0:o.employee_lname)||""}`,className:"border p-2 rounded w-full",readOnly:!0})]}),e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsx("label",{children:e.jsx("b",{children:"Budget/Cost per head:"})}),e.jsx("input",{type:"text",value:l.budgetCost,className:"border p-2 rounded w-full",readOnly:!0})]})]}),e.jsxs("div",{className:"flex flex-1 gap-2 justify-end items-center",children:[e.jsx("button",{className:"rounded-md hover:bg-blue-100 w-32 h-10 mt-2",type:"button",onClick:()=>m.visit("/admin/sourcing/resource_requests/erf_record"),children:"Back"}),e.jsx("button",{className:"bg-blue-600 rounded-md hover:bg-blue-700 text-white w-32 h-10 mt-2",type:"button",onClick:N,disabled:p,children:p?"Submitting...":"Submit"})]})]})})}export{L as default};

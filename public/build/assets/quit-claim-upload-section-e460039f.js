import{r as b,j as e,s as S}from"./store-be97c391.js";import{u as k}from"./app-01c4a1d4.js";import D from"./upload-quit-claim-section-8983516c.js";import{e as L,g as P}from"./employee-attrition-thunk-68484627.js";import{m as t}from"./index-e80d9aaf.js";import{L as A}from"./UnstableContext-01ba27e5.js";import{F as I}from"./FileJpgOutlined-55395146.js";import"./XMarkIcon-886a6eb0.js";import"./FilePdfOutlined-27d6355c.js";import"./warning-ac26fe93.js";import"./defineProperty-83f36300.js";import"./toPropertyKey-d8419463.js";import"./typeof-7fd5df1e.js";import"./AntdIcon-82eb93c5.js";import"./genStyleUtils-83711dd6.js";import"./createSuper-f29e89b0.js";import"./index-f1fabc55.js";import"./CheckCircleFilled-f89d34a4.js";import"./CloseCircleFilled-e2e4fb9f.js";import"./InfoCircleFilled-ab1820b1.js";import"./KeyCode-18fe19fc.js";import"./pickAttrs-049dda3d.js";import"./useZIndex-d02e6d6e.js";import"./CloseOutlined-f4fef2dd.js";import"./regeneratorRuntime-92fa3873.js";import"./asyncToGenerator-8c72b493.js";function ce(){var j;const{employee_attritions:c}=k(s=>s.employee_attritions),{applicant:p}=k(s=>s.final_rate),[o,m]=b.useState(!1),[E,h]=b.useState(null),[d,g]=b.useState(null);(j=p==null?void 0:p.joboffer)==null||j.find(s=>s.status=="Contract Signing"),window.location.pathname.split("/")[3];const l=c==null?void 0:c[0],a=s=>s==null||s===""||s==="undefined"?"":s;console.log("file",d);async function U(){var s,i,u,n,x,w,N,v,y,O,F;try{if(m(!0),!d){t.error("Please select a file to upload."),m(!1);return}const r=await C(d);console.log("File to upload:",d.name),console.log("Base64 file size:",r.length);const f=await S.dispatch(L({files:[r],app_id:(s=l==null?void 0:l.applicant)==null?void 0:s.app_id,emp_id:l==null?void 0:l.emp_id,fname:(i=l==null?void 0:l.applicant)==null?void 0:i.fname,mname:(u=l==null?void 0:l.applicant)==null?void 0:u.mname,lname:(n=l==null?void 0:l.applicant)==null?void 0:n.lname,email:(x=l==null?void 0:l.applicant)==null?void 0:x.email,site:(w=l==null?void 0:l.applicant)==null?void 0:w.site}));if(((N=f==null?void 0:f.payload)==null?void 0:N.status)==="already_exists"){t.warning("You have already uploaded a quit claim. Multiple uploads are not allowed.");return}await S.dispatch(P()),t.success("Quit claim uploaded successfully!"),g(null),h(null)}catch(r){console.error("Upload error:",r),((y=(v=r==null?void 0:r.response)==null?void 0:v.data)==null?void 0:y.status)==="already_exists"?t.warning("You have already uploaded a quit claim. Multiple uploads are not allowed."):(F=(O=r==null?void 0:r.response)==null?void 0:O.data)!=null&&F.error?t.error(r.response.data.error):t.error("Failed to upload quit claim. Please try again.")}finally{m(!1)}}const C=s=>new Promise((i,u)=>{const n=new FileReader;n.readAsDataURL(s),n.onload=()=>i(n.result),n.onerror=x=>u(x)});return console.log("attrition",l),console.log("attritions",c),e.jsx("div",{children:e.jsx("div",{className:"h-screen overflow-hidden",children:e.jsx("div",{className:"bg-cover bg-[url('/images/SCemp.jpg')] transition-colors duration-300 h-full overflow-y-scroll",children:e.jsx("div",{className:"container mx-auto flex justify-center",children:e.jsxs("div",{className:"bg-white shadow-2xl shadow-black rounded-lg p-6 mt-12 w-full",children:[e.jsx("div",{className:"flex items-center justify-center p-3",children:e.jsx("img",{className:"w-60",src:"/images/newlogo.png",alt:"logo"})}),e.jsx("div",{className:"flex text-2xl items-center justify-center",children:e.jsx("h1",{children:e.jsx("b",{children:"UPLOAD SIGNED QUIT CLAIM"})})}),e.jsxs("form",{className:"border rounded-lg p-3.5",children:[e.jsxs("div",{className:"flex flex-col w-full mb-4",children:[e.jsx("label",{htmlFor:"",children:e.jsx("b",{children:"Employee No."})}),e.jsx("div",{className:"flex flex-1 gap-3",children:e.jsx("input",{value:a(l==null?void 0:l.emp_id),type:"text",placeholder:"Employee No",className:"border p-2 rounded w-full",readOnly:!0})})]}),e.jsx("div",{className:"flex flex-col lg:flex-row flex-1 gap-4",children:e.jsxs("div",{className:"flex flex-col w-full mb-4",children:[e.jsx("label",{htmlFor:"",className:"text-sm sm:text-base",children:e.jsx("b",{children:"Full Name"})}),e.jsx("div",{className:"flex flex-1",children:e.jsx("input",{type:"text",className:"border p-2 rounded w-full text-sm sm:text-base",value:l!=null&&l.applicant?`${a(l.applicant.fname)} ${a(l.applicant.mname)} ${a(l.applicant.lname)} ${a(l.applicant.suffix)}`.replace(/\s+/g," ").trim():"",readOnly:!0,placeholder:"Full Name"})})]})}),e.jsxs("div",{className:"flex flex-1 gap-4 mb-1 w-full",children:[e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"text-sm sm:text-base",children:e.jsx("b",{children:"Job Position"})}),e.jsx("input",{class:"appearance-none block w-full   border border-gray-400 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",type:"text",value:a(l==null?void 0:l.position),readOnly:!0})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"text-sm sm:text-base",children:e.jsx("b",{children:"Department"})}),e.jsx("input",{class:"appearance-none block w-full   border border-gray-400 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",type:"text",value:a(l==null?void 0:l.dept),readOnly:!0})]})]}),e.jsxs("div",{className:"flex flex-1 gap-4 mb-1 w-full",children:[e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"text-sm sm:text-base",children:e.jsx("b",{children:"EOGS Email"})}),e.jsx("input",{class:"appearance-none block w-full   border border-gray-400 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",type:"email",value:a(l==null?void 0:l.eogs),readOnly:!0})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"text-sm sm:text-base",children:e.jsx("b",{children:"Employment Status"})}),e.jsx("input",{className:"appearance-none block w-full   border border-gray-400 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",type:"text",value:a(l==null?void 0:l.status),readOnly:!0})]})]}),e.jsxs("div",{className:"flex flex-1 gap-4 mb-1 w-full",children:[e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"text-sm sm:text-base",children:e.jsx("b",{children:"Hired Date"})}),e.jsx("input",{className:"appearance-none block w-full   border border-gray-400 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",type:"text",value:a(l==null?void 0:l.hired),readOnly:!0})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"text-sm sm:text-base",children:e.jsx("b",{children:"Separation Date"})}),e.jsx("input",{className:"appearance-none block w-full   border border-gray-400 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",type:"text",value:a(l==null?void 0:l.separation),readOnly:!0})]})]}),e.jsxs("div",{className:"flex flex-1 gap-4 w-full",children:[e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"text-sm sm:text-base",children:e.jsx("b",{children:"Reason for Separation"})}),e.jsx("input",{class:"appearance-none block w-full   border border-gray-400 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",type:"text",value:a(l==null?void 0:l.reas),readOnly:!0})]}),e.jsxs("div",{class:"w-full",children:[e.jsx("label",{className:"text-sm sm:text-base",children:e.jsx("b",{children:"Reason for End of Contract"})}),e.jsx("input",{class:"appearance-none block w-full   border border-gray-400 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",type:"text",value:a(l==null?void 0:l.reas),readOnly:!0})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"text-sm sm:text-base",children:e.jsx("b",{children:"Exit Interview & Clearance Status"})}),e.jsx("input",{class:"appearance-none block w-full   border border-gray-400 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",type:"text",value:a(l==null?void 0:l.estatus),readOnly:!0})]})]}),e.jsx(D,{uploadedFile:E,setFile:g,setUploadedFile:h}),e.jsx("div",{className:"flex mt-4",children:e.jsxs("button",{type:"button",className:`bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg w-full ${o||!d?"cursor-not-allowed opacity-75":""}`,onClick:U,disabled:o||!d,children:[o?e.jsx(A,{spin:!0}):e.jsx(I,{}),o?" UPLOADING...":" UPLOAD"]})})]})]})})})})})}export{ce as default};

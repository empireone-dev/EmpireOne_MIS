import{r as l,j as e}from"./app-3b4d12e4.js";function C({question:s,onChange:f,onAnswerChange:h,answer:a}){const[u,b]=l.useState(!!a),[n,i]=l.useState(!1),[c,w]=l.useState(null);l.useState(0),l.useEffect(()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const t=window.SpeechRecognition||window.webkitSpeechRecognition,r=new t;r.continuous=!0,r.interimResults=!0,r.lang="en-US",r.maxAlternatives=1;let g="";r.onresult=o=>{let p="";for(let d=o.resultIndex;d<o.results.length;d++){const x=o.results[d][0].transcript;o.results[d].isFinal?g+=x:p+=x}const R=(a||"")+g+p;h(s,R)},r.onstart=()=>{console.log("Speech recognition started"),g=""},r.onend=()=>{console.log("Speech recognition ended"),i(!1)},r.onerror=o=>{console.error("Speech recognition error:",o.error),i(!1),o.error==="not-allowed"?alert("Microphone access denied. Please allow microphone access and try again."):o.error==="no-speech"?console.log("No speech detected"):o.error==="network"&&alert("Network error occurred. Please check your internet connection.")},w(r)}else console.warn("Speech recognition not supported in this browser")},[a,s,h]);const m=t=>{b(t.target.checked),f(t)},S=t=>{h(s,t.target.value)},v=()=>{if(c&&!n)try{i(!0),c.start()}catch(t){console.error("Error starting speech recognition:",t),i(!1),alert("Error starting speech recognition. Please try again.")}},j=()=>{if(c&&n){try{c.stop()}catch(t){console.error("Error stopping speech recognition:",t)}i(!1)}},k=()=>{n?j():v()};return e.jsxs("div",{className:"mb-4 ",children:[e.jsxs("div",{className:"flex items-center mb-3 gap-1",children:[e.jsx("input",{onChange:m,id:"default-checkbox",type:"checkbox",checked:u,value:s,className:"w-4 h-4 text-blue-600 bg-gray-100 border-black rounded focus:ring-blue-500 focus:ring-2"}),e.jsx("h1",{children:e.jsx("b",{children:s})})]}),u&&e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{className:"w-full p-2 pr-12 border rounded border-gray-400",placeholder:"Your answer...",value:a||"",onChange:S,rows:4}),c&&e.jsx("button",{type:"button",onClick:k,className:`absolute top-2 right-2 p-2 rounded-full transition-colors ${n?"bg-red-500 hover:bg-red-600 text-white":"bg-blue-500 hover:bg-blue-600 text-white"}`,title:n?"Stop recording":"Start voice input",children:e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:n?e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8 7a2 2 0 114 0v4a2 2 0 11-4 0V7z",clipRule:"evenodd"}):e.jsx("path",{fillRule:"evenodd",d:"M7 4a3 3 0 016 0v4a3 3 0 11-6 0V4zm4 10.93A7.001 7.001 0 0017 8a1 1 0 10-2 0A5 5 0 015 8a1 1 0 00-2 0 7.001 7.001 0 006 6.93V17H6a1 1 0 100 2h8a1 1 0 100-2h-3v-2.07z",clipRule:"evenodd"})})}),n&&e.jsx("div",{className:"absolute -top-8 right-0 bg-red-500 text-white px-2 py-1 rounded text-xs",children:"Listening..."})]})]})}export{C as default};

import{_ as N,C as A,f as Me,k as Be,b as Z,u as Re}from"./genStyleUtils-4580025e.js";import{r as l,R as O}from"./store-390fb298.js";import{c as Le,u as ze,f as oe,h as Ae,C as le,g as _e,d as We}from"./index-106e82e7.js";import{g as De}from"./UnstableContext-7378e3cf.js";import{C as He}from"./CheckCircleFilled-86eaac8f.js";import{C as Ve}from"./CloseCircleFilled-6acc96d4.js";import{E as qe,I as Qe}from"./InfoCircleFilled-253828cf.js";import{f as Xe,c as w}from"./warning-08302788.js";import{u as Ge,z as Ze,C as Ue}from"./useZIndex-8e4767d5.js";import{g as z}from"./useId-ed53c619.js";import{B as D,c as re}from"./button-8b289c09.js";import{C as se}from"./CloseOutlined-6e5db208.js";import{u as ae,D as Ye,p as Je,a as Ke,P as et}from"./index-3ef2e8e4.js";import{C as tt}from"./ContextIsolator-227c6fee.js";import{u as nt,p as U}from"./useClosable-0f353356.js";import{u as ce}from"./KeyCode-89d47f4b.js";import{S as ot}from"./Skeleton-2559ef33.js";import{u as H}from"./useLocale-a405c724.js";import{w as lt}from"./PurePanel-afa21b71.js";function rt(){const[e,n]=l.useState([]),r=l.useCallback(t=>(n(o=>[].concat(N(o),[t])),()=>{n(o=>o.filter(a=>a!==t))}),[]);return[e,r]}function _(e){return!!(e!=null&&e.then)}const st=e=>{const{type:n,children:r,prefixCls:t,buttonProps:o,close:a,autoFocus:b,emitEvent:f,isSilent:c,quitOnNullishReturnValue:v,actionFn:s}=e,d=l.useRef(!1),u=l.useRef(null),[C,y]=Le(!1),m=function(){a==null||a.apply(void 0,arguments)};l.useEffect(()=>{let i=null;return b&&(i=setTimeout(()=>{var x;(x=u.current)===null||x===void 0||x.focus({preventScroll:!0})})),()=>{i&&clearTimeout(i)}},[]);const g=i=>{_(i)&&(y(!0),i.then(function(){y(!1,!0),m.apply(void 0,arguments),d.current=!1},x=>{if(y(!1,!0),d.current=!1,!(c!=null&&c()))return Promise.reject(x)}))},p=i=>{if(d.current)return;if(d.current=!0,!s){m();return}let x;if(f){if(x=s(i),v&&!_(x)){d.current=!1,m(i);return}}else if(s.length)x=s(a),d.current=!1;else if(x=s(),!_(x)){m();return}g(x)};return l.createElement(D,Object.assign({},re(n),{onClick:p,loading:C,prefixCls:t},o,{ref:u}),r)},ie=st,M=O.createContext({}),{Provider:ue}=M,at=()=>{const{autoFocusButton:e,cancelButtonProps:n,cancelTextLocale:r,isSilent:t,mergedOkCancel:o,rootPrefixCls:a,close:b,onCancel:f,onConfirm:c}=l.useContext(M);return o?O.createElement(ie,{isSilent:t,actionFn:f,close:function(){b==null||b.apply(void 0,arguments),c==null||c(!1)},autoFocus:e==="cancel",buttonProps:n,prefixCls:`${a}-btn`},r):null},Y=at,ct=()=>{const{autoFocusButton:e,close:n,isSilent:r,okButtonProps:t,rootPrefixCls:o,okTextLocale:a,okType:b,onConfirm:f,onOk:c}=l.useContext(M);return O.createElement(ie,{isSilent:r,type:b||"primary",actionFn:c,close:function(){n==null||n.apply(void 0,arguments),f==null||f(!0)},autoFocus:e==="ok",buttonProps:t,prefixCls:`${o}-btn`},a)},J=ct,it=()=>Xe()&&window.document.documentElement;function K(){}const ut=l.createContext({add:K,remove:K});function ft(e){const n=l.useContext(ut),r=l.useRef(null);return ze(o=>{if(o){const a=e?o.querySelector(e):o;n.add(a),r.current=a}else n.remove(r.current)})}const dt=()=>{const{cancelButtonProps:e,cancelTextLocale:n,onCancel:r}=l.useContext(M);return O.createElement(D,Object.assign({onClick:r},e),n)},ee=dt,mt=()=>{const{confirmLoading:e,okButtonProps:n,okType:r,okTextLocale:t,onOk:o}=l.useContext(M);return O.createElement(D,Object.assign({},re(r),{loading:e,onClick:o},n),t)},te=mt;function fe(e,n){return O.createElement("span",{className:`${e}-close-x`},n||O.createElement(se,{className:`${e}-close-icon`}))}const de=e=>{const{okText:n,okType:r="primary",cancelText:t,confirmLoading:o,onOk:a,onCancel:b,okButtonProps:f,cancelButtonProps:c,footer:v}=e,[s]=H("Modal",oe()),d=n||(s==null?void 0:s.okText),u=t||(s==null?void 0:s.cancelText),C={confirmLoading:o,okButtonProps:f,cancelButtonProps:c,okTextLocale:d,cancelTextLocale:u,okType:r,onOk:a,onCancel:b},y=O.useMemo(()=>C,N(Object.values(C)));let m;return typeof v=="function"||typeof v>"u"?(m=O.createElement(O.Fragment,null,O.createElement(ee,null),O.createElement(te,null)),typeof v=="function"&&(m=v(m,{OkBtn:te,CancelBtn:ee})),m=O.createElement(ue,{value:y},m)):m=v,O.createElement(Ae,{disabled:!1},m)};var Ct=globalThis&&globalThis.__rest||function(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(r[t[o]]=e[t[o]]);return r};let W;const gt=e=>{W={x:e.pageX,y:e.pageY},setTimeout(()=>{W=null},100)};it()&&document.documentElement.addEventListener("click",gt,!0);const pt=e=>{var n;const{getPopupContainer:r,getPrefixCls:t,direction:o,modal:a}=l.useContext(A),b=j=>{const{onCancel:$}=e;$==null||$(j)},f=j=>{const{onOk:$}=e;$==null||$(j)},{prefixCls:c,className:v,rootClassName:s,open:d,wrapClassName:u,centered:C,getContainer:y,focusTriggerAfterClose:m=!0,style:g,visible:p,width:i=520,footer:x,classNames:h,styles:T,children:k,loading:F}=e,S=Ct(e,["prefixCls","className","rootClassName","open","wrapClassName","centered","getContainer","focusTriggerAfterClose","style","visible","width","footer","classNames","styles","children","loading"]),E=t("modal",c),V=t(),q=ce(E),[Ee,Q,$e]=ae(E,q),Te=w(u,{[`${E}-centered`]:C??(a==null?void 0:a.centered),[`${E}-wrap-rtl`]:o==="rtl"}),je=x!==null&&!F?l.createElement(de,Object.assign({},e,{onOk:f,onCancel:b})):null,[X,G,we]=nt(U(e),U(a),{closable:!0,closeIcon:l.createElement(se,{className:`${E}-close-icon`}),closeIconRender:j=>fe(E,j)}),Ne=ft(`.${E}-content`),[Se,Ie]=Ge("Modal",S.zIndex),[ke,R]=l.useMemo(()=>i&&typeof i=="object"?[void 0,i]:[i,void 0],[i]),Fe=l.useMemo(()=>{const j={};return R&&Object.keys(R).forEach($=>{const L=R[$];L!==void 0&&(j[`--${E}-${$}-width`]=typeof L=="number"?`${L}px`:L)}),j},[R]);return Ee(l.createElement(tt,{form:!0,space:!0},l.createElement(Ze.Provider,{value:Ie},l.createElement(Ye,Object.assign({width:ke},S,{zIndex:Se,getContainer:y===void 0?r:y,prefixCls:E,rootClassName:w(Q,s,$e,q),footer:je,visible:d??p,mousePosition:(n=S.mousePosition)!==null&&n!==void 0?n:W,onClose:b,closable:X&&{disabled:we,closeIcon:G},closeIcon:G,focusTriggerAfterClose:m,transitionName:z(V,"zoom",e.transitionName),maskTransitionName:z(V,"fade",e.maskTransitionName),className:w(Q,v,a==null?void 0:a.className),style:Object.assign(Object.assign(Object.assign({},a==null?void 0:a.style),g),Fe),classNames:Object.assign(Object.assign(Object.assign({},a==null?void 0:a.classNames),h),{wrapper:w(Te,h==null?void 0:h.wrapper)}),styles:Object.assign(Object.assign({},a==null?void 0:a.styles),T),panelRef:Ne}),F?l.createElement(ot,{active:!0,title:!1,paragraph:{rows:4},className:`${E}-body-skeleton`}):k))))},me=pt,bt=e=>{const{componentCls:n,titleFontSize:r,titleLineHeight:t,modalConfirmIconSize:o,fontSize:a,lineHeight:b,modalTitleHeight:f,fontHeight:c,confirmBodyPadding:v}=e,s=`${n}-confirm`;return{[s]:{"&-rtl":{direction:"rtl"},[`${e.antCls}-modal-header`]:{display:"none"},[`${s}-body-wrapper`]:Object.assign({},Be()),[`&${n} ${n}-body`]:{padding:v},[`${s}-body`]:{display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${e.iconCls}`]:{flex:"none",fontSize:o,marginInlineEnd:e.confirmIconMarginInlineEnd,marginTop:e.calc(e.calc(c).sub(o).equal()).div(2).equal()},[`&-has-title > ${e.iconCls}`]:{marginTop:e.calc(e.calc(f).sub(o).equal()).div(2).equal()}},[`${s}-paragraph`]:{display:"flex",flexDirection:"column",flex:"auto",rowGap:e.marginXS,maxWidth:`calc(100% - ${Z(e.marginSM)})`},[`${e.iconCls} + ${s}-paragraph`]:{maxWidth:`calc(100% - ${Z(e.calc(e.modalConfirmIconSize).add(e.marginSM).equal())})`},[`${s}-title`]:{color:e.colorTextHeading,fontWeight:e.fontWeightStrong,fontSize:r,lineHeight:t},[`${s}-content`]:{color:e.colorText,fontSize:a,lineHeight:b},[`${s}-btns`]:{textAlign:"end",marginTop:e.confirmBtnsMarginTop,[`${e.antCls}-btn + ${e.antCls}-btn`]:{marginBottom:0,marginInlineStart:e.marginXS}}},[`${s}-error ${s}-body > ${e.iconCls}`]:{color:e.colorError},[`${s}-warning ${s}-body > ${e.iconCls},
        ${s}-confirm ${s}-body > ${e.iconCls}`]:{color:e.colorWarning},[`${s}-info ${s}-body > ${e.iconCls}`]:{color:e.colorInfo},[`${s}-success ${s}-body > ${e.iconCls}`]:{color:e.colorSuccess}}},vt=Me(["Modal","confirm"],e=>{const n=Je(e);return[bt(n)]},Ke,{order:-1e3});var xt=globalThis&&globalThis.__rest||function(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(r[t[o]]=e[t[o]]);return r};function Ce(e){const{prefixCls:n,icon:r,okText:t,cancelText:o,confirmPrefixCls:a,type:b,okCancel:f,footer:c,locale:v}=e,s=xt(e,["prefixCls","icon","okText","cancelText","confirmPrefixCls","type","okCancel","footer","locale"]);let d=r;if(!r&&r!==null)switch(b){case"info":d=l.createElement(Qe,null);break;case"success":d=l.createElement(He,null);break;case"error":d=l.createElement(Ve,null);break;default:d=l.createElement(qe,null)}const u=f??b==="confirm",C=e.autoFocusButton===null?!1:e.autoFocusButton||"ok",[y]=H("Modal"),m=v||y,g=t||(u?m==null?void 0:m.okText:m==null?void 0:m.justOkText),p=o||(m==null?void 0:m.cancelText),i=Object.assign({autoFocusButton:C,cancelTextLocale:p,okTextLocale:g,mergedOkCancel:u},s),x=l.useMemo(()=>i,N(Object.values(i))),h=l.createElement(l.Fragment,null,l.createElement(Y,null),l.createElement(J,null)),T=e.title!==void 0&&e.title!==null,k=`${a}-body`;return l.createElement("div",{className:`${a}-body-wrapper`},l.createElement("div",{className:w(k,{[`${k}-has-title`]:T})},d,l.createElement("div",{className:`${a}-paragraph`},T&&l.createElement("span",{className:`${a}-title`},e.title),l.createElement("div",{className:`${a}-content`},e.content))),c===void 0||typeof c=="function"?l.createElement(ue,{value:x},l.createElement("div",{className:`${a}-btns`},typeof c=="function"?c(h,{OkBtn:J,CancelBtn:Y}):h)):c,l.createElement(vt,{prefixCls:n}))}const yt=e=>{const{close:n,zIndex:r,maskStyle:t,direction:o,prefixCls:a,wrapClassName:b,rootPrefixCls:f,bodyStyle:c,closable:v=!1,onConfirm:s,styles:d}=e,u=`${a}-confirm`,C=e.width||416,y=e.style||{},m=e.mask===void 0?!0:e.mask,g=e.maskClosable===void 0?!1:e.maskClosable,p=w(u,`${u}-${e.type}`,{[`${u}-rtl`]:o==="rtl"},e.className),[,i]=Re(),x=l.useMemo(()=>r!==void 0?r:i.zIndexPopupBase+Ue,[r,i]);return l.createElement(me,Object.assign({},e,{className:p,wrapClassName:w({[`${u}-centered`]:!!e.centered},b),onCancel:()=>{n==null||n({triggerCancel:!0}),s==null||s(!1)},title:"",footer:null,transitionName:z(f||"","zoom",e.transitionName),maskTransitionName:z(f||"","fade",e.maskTransitionName),mask:m,maskClosable:g,style:y,styles:Object.assign({body:c,mask:t},d),width:C,zIndex:x,closable:v}),l.createElement(Ce,Object.assign({},e,{confirmPrefixCls:u})))},ge=e=>{const{rootPrefixCls:n,iconPrefixCls:r,direction:t,theme:o}=e;return l.createElement(le,{prefixCls:n,iconPrefixCls:r,direction:t,theme:o},l.createElement(yt,Object.assign({},e)))},Ot=[],I=Ot;let pe="";function be(){return pe}const ht=e=>{var n,r;const{prefixCls:t,getContainer:o,direction:a}=e,b=oe(),f=l.useContext(A),c=be()||f.getPrefixCls(),v=t||`${c}-modal`;let s=o;return s===!1&&(s=void 0),O.createElement(ge,Object.assign({},e,{rootPrefixCls:c,prefixCls:v,iconPrefixCls:f.iconPrefixCls,theme:f.theme,direction:a??f.direction,locale:(r=(n=f.locale)===null||n===void 0?void 0:n.Modal)!==null&&r!==void 0?r:b,getContainer:s}))};function B(e){const n=_e(),r=document.createDocumentFragment();let t=Object.assign(Object.assign({},e),{close:c,open:!0}),o,a;function b(){for(var s,d=arguments.length,u=new Array(d),C=0;C<d;C++)u[C]=arguments[C];if(u.some(g=>g==null?void 0:g.triggerCancel)){var m;(s=e.onCancel)===null||s===void 0||(m=s).call.apply(m,[e,()=>{}].concat(N(u.slice(1))))}for(let g=0;g<I.length;g++)if(I[g]===c){I.splice(g,1);break}a()}function f(s){clearTimeout(o),o=setTimeout(()=>{const d=n.getPrefixCls(void 0,be()),u=n.getIconPrefixCls(),C=n.getTheme(),y=O.createElement(ht,Object.assign({},s));a=De()(O.createElement(le,{prefixCls:d,iconPrefixCls:u,theme:C},n.holderRender?n.holderRender(y):y),r)})}function c(){for(var s=arguments.length,d=new Array(s),u=0;u<s;u++)d[u]=arguments[u];t=Object.assign(Object.assign({},t),{open:!1,afterClose:()=>{typeof e.afterClose=="function"&&e.afterClose(),b.apply(this,d)}}),t.visible&&delete t.visible,f(t)}function v(s){typeof s=="function"?t=s(t):t=Object.assign(Object.assign({},t),s),f(t)}return f(t),I.push(c),{destroy:c,update:v}}function ve(e){return Object.assign(Object.assign({},e),{type:"warning"})}function xe(e){return Object.assign(Object.assign({},e),{type:"info"})}function ye(e){return Object.assign(Object.assign({},e),{type:"success"})}function Oe(e){return Object.assign(Object.assign({},e),{type:"error"})}function he(e){return Object.assign(Object.assign({},e),{type:"confirm"})}function Pt(e){let{rootPrefixCls:n}=e;pe=n}var Et=globalThis&&globalThis.__rest||function(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(r[t[o]]=e[t[o]]);return r};const $t=(e,n)=>{var r,{afterClose:t,config:o}=e,a=Et(e,["afterClose","config"]);const[b,f]=l.useState(!0),[c,v]=l.useState(o),{direction:s,getPrefixCls:d}=l.useContext(A),u=d("modal"),C=d(),y=()=>{var i;t(),(i=c.afterClose)===null||i===void 0||i.call(c)},m=function(){var i;f(!1);for(var x=arguments.length,h=new Array(x),T=0;T<x;T++)h[T]=arguments[T];if(h.some(S=>S==null?void 0:S.triggerCancel)){var F;(i=c.onCancel)===null||i===void 0||(F=i).call.apply(F,[c,()=>{}].concat(N(h.slice(1))))}};l.useImperativeHandle(n,()=>({destroy:m,update:i=>{v(x=>Object.assign(Object.assign({},x),i))}}));const g=(r=c.okCancel)!==null&&r!==void 0?r:c.type==="confirm",[p]=H("Modal",We.Modal);return l.createElement(ge,Object.assign({prefixCls:u,rootPrefixCls:C},c,{close:m,open:b,afterClose:y,okText:c.okText||(g?p==null?void 0:p.okText:p==null?void 0:p.justOkText),direction:c.direction||s,cancelText:c.cancelText||(p==null?void 0:p.cancelText)},a))},Tt=l.forwardRef($t);let ne=0;const jt=l.memo(l.forwardRef((e,n)=>{const[r,t]=rt();return l.useImperativeHandle(n,()=>({patchElement:t}),[]),l.createElement(l.Fragment,null,r)}));function wt(){const e=l.useRef(null),[n,r]=l.useState([]);l.useEffect(()=>{n.length&&(N(n).forEach(b=>{b()}),r([]))},[n]);const t=l.useCallback(a=>function(f){var c;ne+=1;const v=l.createRef();let s;const d=new Promise(g=>{s=g});let u=!1,C;const y=l.createElement(Tt,{key:`modal-${ne}`,config:a(f),ref:v,afterClose:()=>{C==null||C()},isSilent:()=>u,onConfirm:g=>{s(g)}});return C=(c=e.current)===null||c===void 0?void 0:c.patchElement(y),C&&I.push(C),{destroy:()=>{function g(){var p;(p=v.current)===null||p===void 0||p.destroy()}v.current?g():r(p=>[].concat(N(p),[g]))},update:g=>{function p(){var i;(i=v.current)===null||i===void 0||i.update(g)}v.current?p():r(i=>[].concat(N(i),[p]))},then:g=>(u=!0,d.then(g))}},[]);return[l.useMemo(()=>({info:t(xe),success:t(ye),error:t(Oe),warning:t(ve),confirm:t(he)}),[]),l.createElement(jt,{key:"modal-holder",ref:e})]}var Nt=globalThis&&globalThis.__rest||function(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(r[t[o]]=e[t[o]]);return r};const St=e=>{const{prefixCls:n,className:r,closeIcon:t,closable:o,type:a,title:b,children:f,footer:c}=e,v=Nt(e,["prefixCls","className","closeIcon","closable","type","title","children","footer"]),{getPrefixCls:s}=l.useContext(A),d=s(),u=n||s("modal"),C=ce(d),[y,m,g]=ae(u,C),p=`${u}-confirm`;let i={};return a?i={closable:o??!1,title:"",footer:"",children:l.createElement(Ce,Object.assign({},e,{prefixCls:u,confirmPrefixCls:p,rootPrefixCls:d,content:f}))}:i={closable:o??!0,title:b,footer:c!==null&&l.createElement(de,Object.assign({},e)),children:f},y(l.createElement(et,Object.assign({prefixCls:u,className:w(m,`${u}-pure-panel`,a&&p,a&&`${p}-${a}`,r,g,C)},v,{closeIcon:fe(u,t),closable:o},i)))},It=lt(St);function Pe(e){return B(ve(e))}const P=me;P.useModal=wt;P.info=function(n){return B(xe(n))};P.success=function(n){return B(ye(n))};P.error=function(n){return B(Oe(n))};P.warning=Pe;P.warn=Pe;P.confirm=function(n){return B(he(n))};P.destroyAll=function(){for(;I.length;){const n=I.pop();n&&n()}};P.config=Pt;P._InternalPanelDoNotUseOrYouWillBeFired=It;const Yt=P;export{Yt as M};

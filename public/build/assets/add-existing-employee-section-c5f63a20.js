import{r as o,s as y,j as e,d as N}from"./store-62f7920c.js";import{u,a as pe}from"./app-0431b0b6.js";import{r as ue,p as xe,c as fe,b as ge}from"./barangay-94589600.js";import"./moment-a9aaa855.js";import K from"./select2-6c223463.js";import{D as he}from"./Dragger-d534f2da.js";import{a as be}from"./applicant-thunk-6393715d.js";import x from"./select-be872f8f.js";import{s as je}from"./employee-section-thunk-cbdecbed.js";import"./index-58841399.js";import{g as ve}from"./job-title-thunk-e35b8bba.js";import{g as ye}from"./department-thunk-ff7b3e46.js";import{u as Ne}from"./index.esm-7fbf97aa.js";import t from"./input2-bd35d1a5.js";import Se from"./checkbox-4463e289.js";import{M as _e}from"./index-3175aa13.js";import{m as S}from"./index-5da224f5.js";import{U as we}from"./UserAddOutlined-f60a6ce7.js";import{I as qe}from"./InboxOutlined-6eaa62c1.js";import"./genStyleUtils-15f8d671.js";import"./typeof-7fd5df1e.js";import"./warning-2d1cca5c.js";import"./defineProperty-83f36300.js";import"./toPropertyKey-d8419463.js";import"./createSuper-f29e89b0.js";import"./shadow-599e9a46.js";import"./regeneratorRuntime-92fa3873.js";import"./asyncToGenerator-8c72b493.js";import"./pickAttrs-3aceaf38.js";import"./useId-01403974.js";import"./index-f7d6c8e7.js";import"./collapse-97de76d4.js";import"./fade-a7663f58.js";import"./AntdIcon-65317f45.js";import"./UnstableContext-b14c2ed9.js";import"./omit-644b1847.js";import"./useForceUpdate-c945eda3.js";import"./Compact-38a4c63f.js";import"./useSize-a88e28b8.js";import"./button-447eedd6.js";import"./DeleteOutlined-2a80ae17.js";import"./DownloadOutlined-95f0e6ca.js";import"./EyeOutlined-fc430ed1.js";import"./progress-12f19a79.js";import"./CheckCircleFilled-03b44592.js";import"./CheckOutlined-a675b2d1.js";import"./CloseCircleFilled-c845312c.js";import"./CloseOutlined-4c6c4fc7.js";import"./index-330efa51.js";import"./index-0b9846e6.js";import"./ContextIsolator-8904c261.js";import"./useZIndex-8e23c1bd.js";import"./useLocale-59fd1d6e.js";import"./applicant-record-service-6fceb66d.js";import"./applicant-final-service-783dc1ef.js";import"./employee-service-b99c8d76.js";import"./erf-record-service-60035090.js";import"./InfoCircleFilled-ac5c32ea.js";import"./index-f3c8dac4.js";import"./KeyCode-df1ca81f.js";import"./index-a97f45b0.js";import"./useClosable-6a09e984.js";import"./Skeleton-38bca778.js";import"./PurePanel-57fab624.js";function Ha(){var A,I,P,L,F,O,T,H,G,J,R,$;const[_,w]=o.useState(!1),{job_positions:z}=u(a=>a.job_positions),{departments:Q}=u(a=>a.departments),{accounts:X}=u(a=>a.accounts),{users:M}=u(a=>a.app),{user:f}=u(a=>a.app);o.useState(!1),o.useState(!1),o.useState(null);const[Y,Z]=o.useState(null);o.useState({});const[E,q]=o.useState([]),[Ce,ee]=o.useState(0),{applicantForm:d}=u(a=>a.applicants),[ae,le]=o.useState([]),[se,ie]=o.useState([]),[te,re]=o.useState([]),[C,ne]=o.useState(!1),g=pe(),{register:i,handleSubmit:oe,formState:{errors:l,isSubmitting:k},reset:ce,control:Me}=Ne({defaultValues:{work_experience:[{company:"",position:"",started_at:"",end_at:""}]}});o.useEffect(()=>{_&&(y.dispatch(ve()),y.dispatch(ye()))},[_]),o.useEffect(()=>{(async()=>{ee(0)})(),Z(!1)},[]),console.log("query",d);async function D(a){console.log("aaaaaaaaaaaaaaaaa",a);try{await y.dispatch(je({...a,province:JSON.parse(a==null?void 0:a.province).name,city:JSON.parse(a==null?void 0:a.city).name,region:JSON.parse(a==null?void 0:a.region).name,site:f.site,files:E.map(s=>s.files),is_experience:C})),await y.dispatch(be()),S.success("Employee Saved successfully"),ce(),q([]),w(!1)}catch(s){console.log("bbbbbb",s),S.error("Employee failed to saved")}}function h(a){if(a.target.name=="region"){const s=JSON.parse(a.target.value),r=xe.filter(n=>n.region_code===s.region_code);le(r),g(N({...d,[a.target.name]:s.name}))}else if(a.target.name=="province"){const s=JSON.parse(a.target.value),r=fe.filter(n=>n.province_code===s.province_code);ie(r),g(N({...d,[a.target.name]:s.name}))}else if(a.target.name=="city"){const s=JSON.parse(a.target.value),r=ge.filter(n=>n.city_code===s.city_code);re(r),g(N({...d,[a.target.name]:s.name}))}else g(N({...d,[a.target.name]:a.target.value}))}const me=async a=>{const s=c=>new Promise((m,j)=>{const p=new FileReader;p.onload=()=>m(p.result),p.onerror=v=>j(v),p.readAsDataURL(c)}),n=Array.from(a).filter(c=>!E.some(m=>m.file.name===c.name&&m.file.size===c.size&&m.file.lastModified===c.lastModified)),b=await Promise.all(n.map(async c=>({file:c,files:await s(c)})));q(c=>[...c,...b])},de={name:"file",multiple:!0,method:"GET",action:"https://660d2bd96ddfa2943b33731c.mockapi.io/api/upload",onChange(a){const{status:s}=a.file;if(s!=="uploading"&&console.log(a.file,a.fileList),s==="done"){const r=a.fileList.map(n=>n.originFileObj).filter(Boolean);me(r),S.success(`${a.file.name} file uploaded successfully.`)}else s==="error"&&S.error(`${a.file.name} file upload failed.`)},onRemove(a){return q(s=>s.filter(r=>r.file.name!==a.name)),!0}};return console.log("ssssssssss",M),e.jsxs("div",{className:"my-2",children:[e.jsx("div",{class:"inline-flex rounded-md shadow-sm",role:"group",children:e.jsxs("button",{type:"button",onClick:()=>w(!0),class:"inline-flex items-center px-4 py-2 text-sm font-medium text-blue-500 bg-transparent border border-blue-500 rounded-lg hover:bg-blue-500 hover:text-white focus:z-10 focus:ring-2 focus:ring-blue-500 focus:bg-blue-500 focus:text-white      gap-1",children:[e.jsx(we,{className:"text-xl"}),"Add Existing Employee"]})}),e.jsx(_e,{title:"Existing Employee",confirmLoading:Y,open:_,onOk:D,onCancel:()=>w(!1),width:1200,okText:"Save",cancelText:"Cancel",footer:null,children:e.jsxs("form",{onSubmit:oe(D),className:"space-y-4 px-8 py-8",children:[e.jsx("h1",{className:"text-xl font-semibold mb-3 text-gray-900 ",children:"Personal Information"}),e.jsx("div",{className:"flex-1",children:e.jsx(t,{register:{...i("app_id",{required:"Employee ID is required"})},errorMessage:(A=l==null?void 0:l.app_id)==null?void 0:A.message,name:"app_id",label:"Employee ID",type:"text"})}),e.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row",children:[e.jsx("div",{className:"flex-1",children:e.jsx(t,{register:{...i("fname",{required:"First Name is required"})},errorMessage:(I=l==null?void 0:l.fname)==null?void 0:I.message,name:"fname",label:"First Name",type:"text"})}),e.jsx("div",{className:"flex-1",children:e.jsx(t,{register:{...i("mname",{})},name:"mname",label:"Middle Name",type:"text"})}),e.jsx("div",{className:"flex-1",children:e.jsx(t,{register:{...i("lname",{required:"Last Name is required"})},errorMessage:(P=l==null?void 0:l.lname)==null?void 0:P.message,name:"lname",label:"Last Name",type:"text"})}),e.jsx("div",{className:"flex-none w-24",children:e.jsx(K,{register:{...i("suffix",{required:!1})},options:[{label:"--",value:""},{label:"Sr.",value:"Sr."},{label:"Jr.",value:"Jr."},{label:"II",value:"II"},{label:"III",value:"III"},{label:"IV",value:"IV"},{label:"V",value:"V"}],label:"Suffix",name:"suffix"})})]}),e.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row",children:[e.jsx("div",{className:"flex-1",children:e.jsx(K,{register:{...i("gender",{required:"Gender is required"})},options:[{label:"Male",value:"Male"},{label:"Female",value:"Female"}],errorMessage:(L=l==null?void 0:l.gender)==null?void 0:L.message,label:"Gender",name:"gender"})}),e.jsx("div",{className:"flex-1",children:e.jsx(t,{register:{...i("dob",{required:"Date of Birth is required"})},errorMessage:(F=l==null?void 0:l.dob)==null?void 0:F.message,name:"dob",label:"Date of Birth",type:"date"})})]}),e.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row",children:[e.jsx("div",{className:"flex-1",children:e.jsx(t,{register:{...i("email",{required:"Email is required"})},errorMessage:(O=l==null?void 0:l.email)==null?void 0:O.message,name:"email",label:"Email",type:"email"})}),e.jsx("div",{className:"flex-1",children:e.jsx(t,{register:{...i("phone",{required:"Phone is required"})},errorMessage:(T=l==null?void 0:l.phone)==null?void 0:T.message,name:"phone",label:"Phone",type:"number"})})]}),e.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row",children:[e.jsx("div",{className:"flex-1",children:e.jsx(x,{register:{...i("marital",{required:!1})},options:[{label:"Single",value:"Single"},{label:"Married",value:"Married"},{label:"Widowed",value:"Widowed"},{label:"Divorced",value:"Divorced"}],label:"Marital Status",name:"marital"})}),e.jsx("div",{className:"flex-1",children:e.jsx(t,{register:{...i("religion",{required:!1})},name:"religion",label:"Religion",type:"text"})}),e.jsx("div",{className:"flex-1",children:e.jsx(t,{register:{...i("nationality",{required:!1})},name:"nationality",label:"Nationality",type:"text"})})]}),e.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row",children:[e.jsx("div",{className:"flex-1",children:e.jsx(t,{register:{...i("mmname",{required:!1})},name:"mmname",label:"Mother's maiden name",type:"text"})}),e.jsx("div",{className:"flex-1",children:e.jsx(t,{register:{...i("ffname",{required:!1})},name:"ffname",label:"Father's fullname",type:"text"})})]}),e.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row",children:[e.jsx("div",{className:"flex-1",children:e.jsx(x,{register:{...i("educ",{required:!1})},options:[{label:"Highest Educational Attainmen",value:"Highest Educational Attainmen"},{label:"Elementary Undergraduate",value:"Elementary Undergraduate"},{label:"Elementary Graduate",value:"Elementary Graduate"},{label:"Highschool/K-12 Undergraduate",value:"Highschool/K-12 Undergraduate"},{label:"Highschool/K-12 Graduate",value:"Highschool/K-12 Graduate"},{label:"College Level",value:"College Level"},{label:"College Graduate",value:"College Graduate"},{label:"Vocational Graduate",value:"Vocational Graduate"},{label:"Masteral Degree",value:"Masteral Degree"},{label:"Doctoral Degree",value:"Doctoral Degree"}],label:"Highest Educational Attainment",name:"educ"})}),e.jsx("div",{className:"flex-1",children:e.jsx(t,{register:{...i("courset",{required:!1})},name:"courset",label:"Course taken",type:"text"})})]}),e.jsx("div",{className:"flex flex-1 gap-4",children:e.jsx("div",{className:"flex flex-col w-full mb-4",children:e.jsxs("div",{className:"flex flex-1 gap-3",children:[e.jsxs("select",{...i("position",{required:!1}),name:"position",className:"border p-2 rounded  w-full",children:[e.jsx("option",{disabled:!0,selected:!0,value:"",children:"Job Position"}),z.filter(a=>a.site==="San Carlos").map((a,s)=>e.jsx("option",{value:a.jPosition,children:a.jPosition},s))]}),e.jsxs("select",{...i("dept",{required:!1}),name:"dept",className:"border p-2 rounded  w-full",children:[e.jsx("option",{disabled:!0,selected:!0,value:"",children:"Department"}),Q.filter(a=>a.site==="San Carlos").map((a,s)=>e.jsx("option",{value:a.dept,children:a.dept},s))]}),e.jsxs("select",{...i("account",{required:!1}),name:"account",className:"border p-2 rounded  w-full",children:[e.jsx("option",{disabled:!0,selected:!0,value:"",children:"Account (If Applicable)"}),X.map((a,s)=>e.jsx("option",{value:a.acc,children:a.acc},s))]})]})})}),e.jsx("div",{className:"flex flex-1 gap-4",children:e.jsx("div",{className:"flex flex-col w-full mb-4",children:e.jsxs("div",{className:"flex flex-1 gap-3",children:[e.jsxs("select",{...i("sup_id",{required:!1}),name:"sup_id",value:d.sup_id,className:"border p-2 rounded  w-full",children:[e.jsx("option",{disabled:!0,selected:!0,value:"",children:"Supervisor"}),M.filter(a=>(!(f!=null&&f.site)||a.site===f.site||!a.site)&&["Manager","Account Manager","Supervisor","Team Leader","Director","CEO","HR Lead","TQA Manager","TQA Director","IT Manager","I.T Manager","IT Lead","I.T Lead","Compliance Officer","Site Admin","Talent Acquisition Manager","HR Director","Director of Operations","Operations Manager","Site Director","Site Manager","Director, Learning Leadership & Development","Director, Accounting & Finance","Director, Marketing & Communications","Director, Quality & Training"].includes(a.position)).sort((a,s)=>{const r=`${a.employee_fname} ${a.employee_lname}`.toLowerCase(),n=`${s.employee_fname} ${s.employee_lname}`.toLowerCase();return r.localeCompare(n)}).map(a=>e.jsxs("option",{value:a.id,children:[a.employee_fname," ",a.employee_lname]},a.id))]}),e.jsx(t,{register:{...i("hired",{required:!1})},value:d.hired??"",name:"hired",label:"Hired Date",type:"date"}),e.jsxs("select",{...i("status",{required:!1}),name:"status",className:"border p-2 rounded  w-full",required:!0,children:[e.jsx("option",{disabled:!0,selected:!0,children:"Employee Status"}),e.jsx("option",{children:" Probationary"}),e.jsx("option",{children:" Regular"}),e.jsx("option",{children:" Contractual"}),e.jsx("option",{children:" Trainee Fallout"})]})]})})}),e.jsx("h1",{className:"text-xl font-semibold mb-3 text-gray-900 ",children:"Address Information"}),e.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row",children:[e.jsx("div",{className:"flex-1",children:e.jsx(x,{register:{...i("region",{required:"Please Select Region"})},onChange:a=>h(a),options:ue.map(a=>({label:a.region_name,value:JSON.stringify({name:a.region_name,region_code:a.region_code})})),errorMessage:(H=l==null?void 0:l.region)==null?void 0:H.message,label:"Region",name:"region"})}),e.jsx("div",{className:"flex-1",children:e.jsx(x,{register:{...i("province",{required:"Please Select Province"})},onChange:a=>h(a),options:ae.map(a=>({label:a.province_name,value:JSON.stringify({name:a.province_name,province_code:a.province_code})})),errorMessage:(G=l==null?void 0:l.province)==null?void 0:G.message,label:"Province",name:"province"})}),e.jsx("div",{className:"flex-1",children:e.jsx(x,{register:{...i("city",{required:"Please Select City"})},onChange:a=>h(a),options:se.map(a=>({label:a.city_name,value:JSON.stringify({name:a.city_name,city_code:a.city_code})})),errorMessage:(J=l==null?void 0:l.city)==null?void 0:J.message,name:"city",label:"City/Municipality"})})]}),e.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row",children:[e.jsx("div",{className:"flex-1",children:e.jsx(x,{register:{...i("brgy",{required:"Please Select Barangay"})},onChange:a=>h(a),options:te.map(a=>({label:a.brgy_name,value:a.brgy_name})),errorMessage:(R=l==null?void 0:l.brgy)==null?void 0:R.message,name:"brgy",label:"Barangay"})}),e.jsx("div",{className:"flex-1",children:e.jsx(t,{register:{...i("lot",{required:"House/Lot No., Street, Purok/Sitio is required"})},errorMessage:($=l==null?void 0:l.lot)==null?void 0:$.message,name:"lot",label:"House/Lot No., Street, Purok/Sitio",type:"text"})})]}),e.jsx("h1",{className:"text-xl font-semibold mb-3 text-gray-900 ",children:"Government ID Information"}),e.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row",children:[e.jsx("div",{className:"flex-1",children:e.jsx(t,{register:{...i("sss",{})},name:"sss",label:"SSS",type:"number"})}),e.jsx("div",{className:"flex-1",children:e.jsx(t,{register:{...i("pagibig",{})},name:"pagibig",label:"Pagibig",type:"number"})})]}),e.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row",children:[e.jsx("div",{className:"flex-1",children:e.jsx(t,{register:{...i("tin",{})},name:"tin",label:"Tin",type:"number"})}),e.jsx("div",{className:"flex-1",children:e.jsx(t,{register:{...i("philh",{})},name:"philh",label:"Philhealth No.",type:"number"})})]}),e.jsx("h1",{className:"text-xl font-semibold mb-3 text-gray-900 ",children:"Working Experience"}),e.jsxs("div",{className:"flex-col",children:[e.jsxs("div",{className:"flex items-center mb-3 justify-between",children:[e.jsx(Se,{label:"With Working Experience?",name:"hasExperience",onChange:a=>ne(a.target.checked)}),C&&e.jsxs("button",{type:"button",onClick:()=>append({name:""}),className:"bg-blue-600 text-white px-4 flex gap-2 py-2 rounded",children:[e.jsx(PlusIcon,{className:"h-6"})," Experience"]})]}),C&&e.jsx("div",{className:"flex gap-3 flex-col",children:fields.map((a,s)=>{var r,n,b,c,m,j,p,v,B,U,V,W;return e.jsxs("div",{className:"flex items-center border border-blue-500 rounded-lg p-3 flex-col w-full gap-4",children:[s!=0&&e.jsx("div",{className:"flex w-full items-end justify-end",children:e.jsx("button",{type:"button",onClick:()=>remove(s),className:"bg-red-500 text-white px-2 py-1 rounded",children:"âœ•"})}),e.jsxs("div",{className:"w-full flex gap-3",children:[e.jsx(t,{register:{...i(`work_experience.${s}.company`,{required:"Company is required"})},errorMessage:(b=(n=(r=l==null?void 0:l.work_experience)==null?void 0:r[s])==null?void 0:n.company)==null?void 0:b.message,name:"company",label:"Company",type:"text"}),e.jsx(t,{register:{...i(`work_experience.${s}.position`,{required:"Position is required"})},errorMessage:(j=(m=(c=l==null?void 0:l.work_experience)==null?void 0:c[s])==null?void 0:m.position)==null?void 0:j.message,name:"position",label:"Position",type:"text"})]}),e.jsxs("div",{className:"w-full flex gap-3",children:[e.jsx(t,{register:{...i(`work_experience.${s}.started_at`,{required:"Started at is required"})},errorMessage:(B=(v=(p=l==null?void 0:l.work_experience)==null?void 0:p[s])==null?void 0:v.started_at)==null?void 0:B.message,label:"Started At",type:"date"}),e.jsx(t,{register:{...i(`work_experience.${s}.end_at`,{required:"End at is required"})},errorMessage:(W=(V=(U=l==null?void 0:l.work_experience)==null?void 0:U[s])==null?void 0:V.end_at)==null?void 0:W.message,label:"End At",type:"date"})]})]},a.id)})})]}),e.jsx("h1",{className:"text-xl font-semibold mb-3 text-gray-900 ",children:"Emergency Contact Information"}),e.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row",children:[e.jsx("div",{className:"flex-1",children:e.jsx(t,{register:{...i("ename",{required:!1})},name:"ename",label:"Emergency Contact Fullname",type:"text"})}),e.jsx("div",{className:"flex-1",children:e.jsx(t,{register:{...i("eaddress",{required:!1})},name:"eaddress",label:"Address",type:"text"})})]}),e.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row",children:[e.jsx("div",{className:"flex-1",children:e.jsx(t,{register:{...i("relationship",{required:!1})},name:"relationship",label:"Relationship",type:"text"})}),e.jsx("div",{className:"flex-1",children:e.jsx(t,{register:{...i("ephone",{required:!1})},name:"ephone",label:"Contact No.",type:"number"})})]}),e.jsx("br",{}),e.jsxs(he,{...de,children:[e.jsx("p",{className:"ant-upload-drag-icon",children:e.jsx(qe,{})}),e.jsx("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload your CV"}),e.jsx("p",{className:"ant-upload-hint",children:"Support for a single or bulk upload. Strictly prohibited from uploading company data or other banned files."})]}),e.jsx("div",{className:"flex items-end justify-end",children:e.jsx("button",{disabled:k,type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded",children:k?"Submitting...":"Submit"})})]})})]})}export{Ha as default};

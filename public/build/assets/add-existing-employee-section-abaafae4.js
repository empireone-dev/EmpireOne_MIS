var sr=Object.defineProperty;var ir=(t,n,e)=>n in t?sr(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e;var u=(t,n,e)=>(ir(t,typeof n!="symbol"?n+"":n,e),e);import{r as Q,a as Ve,u as rr,e as St,j as f,t as At}from"./app-76a466f1.js";import{r as or,p as ar,c as lr,b as cr}from"./barangay-94589600.js";import"./moment-a9aaa855.js";import Xn from"./select2-0deb97de.js";import{D as ur}from"./Dragger-e946a9f9.js";import{g as hr}from"./applicant-thunk-fc431d93.js";import Je from"./select-61c1e754.js";import{d as fr}from"./employee-section-thunk-254e9683.js";import{g as dr}from"./job-title-thunk-1f027e41.js";import{g as gr}from"./department-thunk-01589427.js";import{u as pr}from"./index.esm-b36a57d5.js";import $ from"./input2-52ba35c8.js";import mr from"./checkbox-bdb270cd.js";import{M as _r}from"./index-eef1b7f6.js";import{m as Tt}from"./index-c503428c.js";import{U as yr}from"./UserAddOutlined-52089cc4.js";import{I as wr}from"./InboxOutlined-9d79971a.js";import"./genStyleUtils-a49c4ead.js";import"./typeof-7fd5df1e.js";import"./presets-c649e437.js";import"./toPropertyKey-d8419463.js";import"./createSuper-c7e84a61.js";import"./AntdIcon-0bbc11d7.js";import"./regeneratorRuntime-92fa3873.js";import"./asyncToGenerator-8c72b493.js";import"./pickAttrs-b5a272d1.js";import"./useId-9f68226f.js";import"./useZIndex-94001cbf.js";import"./collapse-97de76d4.js";import"./fade-3c8749a0.js";import"./UnstableContext-e4618081.js";import"./omit-644b1847.js";import"./useForceUpdate-63ab3fab.js";import"./Compact-09f837bd.js";import"./useSize-00d10fa1.js";import"./button-9c7f41a7.js";import"./DeleteOutlined-078a6c06.js";import"./EyeOutlined-0feb943a.js";import"./CheckCircleFilled-86678702.js";import"./CheckOutlined-599073b8.js";import"./CloseCircleFilled-83711d14.js";import"./CloseOutlined-c7e67805.js";import"./index-e3e81e45.js";import"./index-ea8a40c5.js";import"./ContextIsolator-9dbaed43.js";import"./useLocale-1774a0c6.js";import"./applicant-record-service-ef7a2b75.js";import"./applicant-final-service-a1d04fab.js";import"./employee-service-96f64e5b.js";import"./erf-record-service-3a788fd5.js";import"./InfoCircleFilled-8115bcaa.js";import"./index-28412605.js";import"./KeyCode-b08e801b.js";import"./useClosable-d88f953d.js";import"./Skeleton-ec0c7b59.js";import"./PurePanel-1289bfbf.js";var br=typeof global=="object"&&global&&global.Object===Object&&global;const Zs=br;var xr=typeof self=="object"&&self&&self.Object===Object&&self,vr=Zs||xr||Function("return this")();const de=vr;var Pr=de.Symbol;const fe=Pr;var Qs=Object.prototype,kr=Qs.hasOwnProperty,Sr=Qs.toString,Ye=fe?fe.toStringTag:void 0;function Ar(t){var n=kr.call(t,Ye),e=t[Ye];try{t[Ye]=void 0;var s=!0}catch{}var i=Sr.call(t);return s&&(n?t[Ye]=e:delete t[Ye]),i}var Tr=Object.prototype,Er=Tr.toString;function Or(t){return Er.call(t)}var Rr="[object Null]",Nr="[object Undefined]",Yn=fe?fe.toStringTag:void 0;function je(t){return t==null?t===void 0?Nr:Rr:Yn&&Yn in Object(t)?Ar(t):Or(t)}function _e(t){return t!=null&&typeof t=="object"}var Mr="[object Symbol]";function pn(t){return typeof t=="symbol"||_e(t)&&je(t)==Mr}function Cr(t,n){for(var e=-1,s=t==null?0:t.length,i=Array(s);++e<s;)i[e]=n(t[e],e,t);return i}var Br=Array.isArray;const Te=Br;var $r=1/0,es=fe?fe.prototype:void 0,ts=es?es.toString:void 0;function Xs(t){if(typeof t=="string")return t;if(Te(t))return Cr(t,Xs)+"";if(pn(t))return ts?ts.call(t):"";var n=t+"";return n=="0"&&1/t==-$r?"-0":n}function Ee(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}var Ir="[object AsyncFunction]",Fr="[object Function]",jr="[object GeneratorFunction]",Lr="[object Proxy]";function Ys(t){if(!Ee(t))return!1;var n=je(t);return n==Fr||n==jr||n==Ir||n==Lr}var qr=de["__core-js_shared__"];const Ut=qr;var ns=function(){var t=/[^.]+$/.exec(Ut&&Ut.keys&&Ut.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function zr(t){return!!ns&&ns in t}var Dr=Function.prototype,Vr=Dr.toString;function Le(t){if(t!=null){try{return Vr.call(t)}catch{}try{return t+""}catch{}}return""}var Jr=/[\\^$.*+?()[\]{}|]/g,Ur=/^\[object .+?Constructor\]$/,Gr=Function.prototype,Wr=Object.prototype,Kr=Gr.toString,Hr=Wr.hasOwnProperty,Zr=RegExp("^"+Kr.call(Hr).replace(Jr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Qr(t){if(!Ee(t)||zr(t))return!1;var n=Ys(t)?Zr:Ur;return n.test(Le(t))}function Xr(t,n){return t==null?void 0:t[n]}function qe(t,n){var e=Xr(t,n);return Qr(e)?e:void 0}var Yr=qe(de,"WeakMap");const en=Yr;var ss=Object.create,eo=function(){function t(){}return function(n){if(!Ee(n))return{};if(ss)return ss(n);t.prototype=n;var e=new t;return t.prototype=void 0,e}}();const to=eo;function no(t,n){var e=-1,s=t.length;for(n||(n=Array(s));++e<s;)n[e]=t[e];return n}var so=function(){try{var t=qe(Object,"defineProperty");return t({},"",{}),t}catch{}}();const is=so;function io(t,n){for(var e=-1,s=t==null?0:t.length;++e<s&&n(t[e],e,t)!==!1;);return t}var ro=9007199254740991,oo=/^(?:0|[1-9]\d*)$/;function ao(t,n){var e=typeof t;return n=n??ro,!!n&&(e=="number"||e!="symbol"&&oo.test(t))&&t>-1&&t%1==0&&t<n}function ei(t,n,e){n=="__proto__"&&is?is(t,n,{configurable:!0,enumerable:!0,value:e,writable:!0}):t[n]=e}function mn(t,n){return t===n||t!==t&&n!==n}var lo=Object.prototype,co=lo.hasOwnProperty;function ti(t,n,e){var s=t[n];(!(co.call(t,n)&&mn(s,e))||e===void 0&&!(n in t))&&ei(t,n,e)}function Lt(t,n,e,s){var i=!e;e||(e={});for(var r=-1,o=n.length;++r<o;){var a=n[r],l=s?s(e[a],t[a],a,e,t):void 0;l===void 0&&(l=t[a]),i?ei(e,a,l):ti(e,a,l)}return e}var uo=9007199254740991;function ni(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=uo}function si(t){return t!=null&&ni(t.length)&&!Ys(t)}var ho=Object.prototype;function _n(t){var n=t&&t.constructor,e=typeof n=="function"&&n.prototype||ho;return t===e}function fo(t,n){for(var e=-1,s=Array(t);++e<t;)s[e]=n(e);return s}var go="[object Arguments]";function rs(t){return _e(t)&&je(t)==go}var ii=Object.prototype,po=ii.hasOwnProperty,mo=ii.propertyIsEnumerable,_o=rs(function(){return arguments}())?rs:function(t){return _e(t)&&po.call(t,"callee")&&!mo.call(t,"callee")};const yo=_o;function wo(){return!1}var ri=typeof exports=="object"&&exports&&!exports.nodeType&&exports,os=ri&&typeof module=="object"&&module&&!module.nodeType&&module,bo=os&&os.exports===ri,as=bo?de.Buffer:void 0,xo=as?as.isBuffer:void 0,vo=xo||wo;const Bt=vo;var Po="[object Arguments]",ko="[object Array]",So="[object Boolean]",Ao="[object Date]",To="[object Error]",Eo="[object Function]",Oo="[object Map]",Ro="[object Number]",No="[object Object]",Mo="[object RegExp]",Co="[object Set]",Bo="[object String]",$o="[object WeakMap]",Io="[object ArrayBuffer]",Fo="[object DataView]",jo="[object Float32Array]",Lo="[object Float64Array]",qo="[object Int8Array]",zo="[object Int16Array]",Do="[object Int32Array]",Vo="[object Uint8Array]",Jo="[object Uint8ClampedArray]",Uo="[object Uint16Array]",Go="[object Uint32Array]",j={};j[jo]=j[Lo]=j[qo]=j[zo]=j[Do]=j[Vo]=j[Jo]=j[Uo]=j[Go]=!0;j[Po]=j[ko]=j[Io]=j[So]=j[Fo]=j[Ao]=j[To]=j[Eo]=j[Oo]=j[Ro]=j[No]=j[Mo]=j[Co]=j[Bo]=j[$o]=!1;function Wo(t){return _e(t)&&ni(t.length)&&!!j[je(t)]}function yn(t){return function(n){return t(n)}}var oi=typeof exports=="object"&&exports&&!exports.nodeType&&exports,it=oi&&typeof module=="object"&&module&&!module.nodeType&&module,Ko=it&&it.exports===oi,Gt=Ko&&Zs.process,Ho=function(){try{var t=it&&it.require&&it.require("util").types;return t||Gt&&Gt.binding&&Gt.binding("util")}catch{}}();const He=Ho;var ls=He&&He.isTypedArray,Zo=ls?yn(ls):Wo;const ai=Zo;var Qo=Object.prototype,Xo=Qo.hasOwnProperty;function li(t,n){var e=Te(t),s=!e&&yo(t),i=!e&&!s&&Bt(t),r=!e&&!s&&!i&&ai(t),o=e||s||i||r,a=o?fo(t.length,String):[],l=a.length;for(var c in t)(n||Xo.call(t,c))&&!(o&&(c=="length"||i&&(c=="offset"||c=="parent")||r&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||ao(c,l)))&&a.push(c);return a}function ci(t,n){return function(e){return t(n(e))}}var Yo=ci(Object.keys,Object);const ea=Yo;var ta=Object.prototype,na=ta.hasOwnProperty;function sa(t){if(!_n(t))return ea(t);var n=[];for(var e in Object(t))na.call(t,e)&&e!="constructor"&&n.push(e);return n}function wn(t){return si(t)?li(t):sa(t)}function ia(t){var n=[];if(t!=null)for(var e in Object(t))n.push(e);return n}var ra=Object.prototype,oa=ra.hasOwnProperty;function aa(t){if(!Ee(t))return ia(t);var n=_n(t),e=[];for(var s in t)s=="constructor"&&(n||!oa.call(t,s))||e.push(s);return e}function bn(t){return si(t)?li(t,!0):aa(t)}var la=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ca=/^\w*$/;function ua(t,n){if(Te(t))return!1;var e=typeof t;return e=="number"||e=="symbol"||e=="boolean"||t==null||pn(t)?!0:ca.test(t)||!la.test(t)||n!=null&&t in Object(n)}var ha=qe(Object,"create");const ut=ha;function fa(){this.__data__=ut?ut(null):{},this.size=0}function da(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}var ga="__lodash_hash_undefined__",pa=Object.prototype,ma=pa.hasOwnProperty;function _a(t){var n=this.__data__;if(ut){var e=n[t];return e===ga?void 0:e}return ma.call(n,t)?n[t]:void 0}var ya=Object.prototype,wa=ya.hasOwnProperty;function ba(t){var n=this.__data__;return ut?n[t]!==void 0:wa.call(n,t)}var xa="__lodash_hash_undefined__";function va(t,n){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=ut&&n===void 0?xa:n,this}function Ie(t){var n=-1,e=t==null?0:t.length;for(this.clear();++n<e;){var s=t[n];this.set(s[0],s[1])}}Ie.prototype.clear=fa;Ie.prototype.delete=da;Ie.prototype.get=_a;Ie.prototype.has=ba;Ie.prototype.set=va;function Pa(){this.__data__=[],this.size=0}function qt(t,n){for(var e=t.length;e--;)if(mn(t[e][0],n))return e;return-1}var ka=Array.prototype,Sa=ka.splice;function Aa(t){var n=this.__data__,e=qt(n,t);if(e<0)return!1;var s=n.length-1;return e==s?n.pop():Sa.call(n,e,1),--this.size,!0}function Ta(t){var n=this.__data__,e=qt(n,t);return e<0?void 0:n[e][1]}function Ea(t){return qt(this.__data__,t)>-1}function Oa(t,n){var e=this.__data__,s=qt(e,t);return s<0?(++this.size,e.push([t,n])):e[s][1]=n,this}function be(t){var n=-1,e=t==null?0:t.length;for(this.clear();++n<e;){var s=t[n];this.set(s[0],s[1])}}be.prototype.clear=Pa;be.prototype.delete=Aa;be.prototype.get=Ta;be.prototype.has=Ea;be.prototype.set=Oa;var Ra=qe(de,"Map");const ht=Ra;function Na(){this.size=0,this.__data__={hash:new Ie,map:new(ht||be),string:new Ie}}function Ma(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}function zt(t,n){var e=t.__data__;return Ma(n)?e[typeof n=="string"?"string":"hash"]:e.map}function Ca(t){var n=zt(this,t).delete(t);return this.size-=n?1:0,n}function Ba(t){return zt(this,t).get(t)}function $a(t){return zt(this,t).has(t)}function Ia(t,n){var e=zt(this,t),s=e.size;return e.set(t,n),this.size+=e.size==s?0:1,this}function xe(t){var n=-1,e=t==null?0:t.length;for(this.clear();++n<e;){var s=t[n];this.set(s[0],s[1])}}xe.prototype.clear=Na;xe.prototype.delete=Ca;xe.prototype.get=Ba;xe.prototype.has=$a;xe.prototype.set=Ia;var Fa="Expected a function";function xn(t,n){if(typeof t!="function"||n!=null&&typeof n!="function")throw new TypeError(Fa);var e=function(){var s=arguments,i=n?n.apply(this,s):s[0],r=e.cache;if(r.has(i))return r.get(i);var o=t.apply(this,s);return e.cache=r.set(i,o)||r,o};return e.cache=new(xn.Cache||xe),e}xn.Cache=xe;var ja=500;function La(t){var n=xn(t,function(s){return e.size===ja&&e.clear(),s}),e=n.cache;return n}var qa=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,za=/\\(\\)?/g,Da=La(function(t){var n=[];return t.charCodeAt(0)===46&&n.push(""),t.replace(qa,function(e,s,i,r){n.push(i?r.replace(za,"$1"):s||e)}),n});const Va=Da;function Ja(t){return t==null?"":Xs(t)}function ui(t,n){return Te(t)?t:ua(t,n)?[t]:Va(Ja(t))}var Ua=1/0;function hi(t){if(typeof t=="string"||pn(t))return t;var n=t+"";return n=="0"&&1/t==-Ua?"-0":n}function fi(t,n){n=ui(n,t);for(var e=0,s=n.length;t!=null&&e<s;)t=t[hi(n[e++])];return e&&e==s?t:void 0}function Ga(t,n,e){var s=t==null?void 0:fi(t,n);return s===void 0?e:s}function di(t,n){for(var e=-1,s=n.length,i=t.length;++e<s;)t[i+e]=n[e];return t}var Wa=ci(Object.getPrototypeOf,Object);const vn=Wa;var Ka="[object Object]",Ha=Function.prototype,Za=Object.prototype,gi=Ha.toString,Qa=Za.hasOwnProperty,Xa=gi.call(Object);function tn(t){if(!_e(t)||je(t)!=Ka)return!1;var n=vn(t);if(n===null)return!0;var e=Qa.call(n,"constructor")&&n.constructor;return typeof e=="function"&&e instanceof e&&gi.call(e)==Xa}function Ya(t,n,e){var s=-1,i=t.length;n<0&&(n=-n>i?0:i+n),e=e>i?i:e,e<0&&(e+=i),i=n>e?0:e-n>>>0,n>>>=0;for(var r=Array(i);++s<i;)r[s]=t[s+n];return r}function el(){this.__data__=new be,this.size=0}function tl(t){var n=this.__data__,e=n.delete(t);return this.size=n.size,e}function nl(t){return this.__data__.get(t)}function sl(t){return this.__data__.has(t)}var il=200;function rl(t,n){var e=this.__data__;if(e instanceof be){var s=e.__data__;if(!ht||s.length<il-1)return s.push([t,n]),this.size=++e.size,this;e=this.__data__=new xe(s)}return e.set(t,n),this.size=e.size,this}function me(t){var n=this.__data__=new be(t);this.size=n.size}me.prototype.clear=el;me.prototype.delete=tl;me.prototype.get=nl;me.prototype.has=sl;me.prototype.set=rl;function ol(t,n){return t&&Lt(n,wn(n),t)}function al(t,n){return t&&Lt(n,bn(n),t)}var pi=typeof exports=="object"&&exports&&!exports.nodeType&&exports,cs=pi&&typeof module=="object"&&module&&!module.nodeType&&module,ll=cs&&cs.exports===pi,us=ll?de.Buffer:void 0,hs=us?us.allocUnsafe:void 0;function cl(t,n){if(n)return t.slice();var e=t.length,s=hs?hs(e):new t.constructor(e);return t.copy(s),s}function ul(t,n){for(var e=-1,s=t==null?0:t.length,i=0,r=[];++e<s;){var o=t[e];n(o,e,t)&&(r[i++]=o)}return r}function mi(){return[]}var hl=Object.prototype,fl=hl.propertyIsEnumerable,fs=Object.getOwnPropertySymbols,dl=fs?function(t){return t==null?[]:(t=Object(t),ul(fs(t),function(n){return fl.call(t,n)}))}:mi;const Pn=dl;function gl(t,n){return Lt(t,Pn(t),n)}var pl=Object.getOwnPropertySymbols,ml=pl?function(t){for(var n=[];t;)di(n,Pn(t)),t=vn(t);return n}:mi;const _i=ml;function _l(t,n){return Lt(t,_i(t),n)}function yi(t,n,e){var s=n(t);return Te(t)?s:di(s,e(t))}function nn(t){return yi(t,wn,Pn)}function yl(t){return yi(t,bn,_i)}var wl=qe(de,"DataView");const sn=wl;var bl=qe(de,"Promise");const rn=bl;var xl=qe(de,"Set");const on=xl;var ds="[object Map]",vl="[object Object]",gs="[object Promise]",ps="[object Set]",ms="[object WeakMap]",_s="[object DataView]",Pl=Le(sn),kl=Le(ht),Sl=Le(rn),Al=Le(on),Tl=Le(en),$e=je;(sn&&$e(new sn(new ArrayBuffer(1)))!=_s||ht&&$e(new ht)!=ds||rn&&$e(rn.resolve())!=gs||on&&$e(new on)!=ps||en&&$e(new en)!=ms)&&($e=function(t){var n=je(t),e=n==vl?t.constructor:void 0,s=e?Le(e):"";if(s)switch(s){case Pl:return _s;case kl:return ds;case Sl:return gs;case Al:return ps;case Tl:return ms}return n});const ft=$e;var El=Object.prototype,Ol=El.hasOwnProperty;function Rl(t){var n=t.length,e=new t.constructor(n);return n&&typeof t[0]=="string"&&Ol.call(t,"index")&&(e.index=t.index,e.input=t.input),e}var Nl=de.Uint8Array;const $t=Nl;function kn(t){var n=new t.constructor(t.byteLength);return new $t(n).set(new $t(t)),n}function Ml(t,n){var e=n?kn(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.byteLength)}var Cl=/\w*$/;function Bl(t){var n=new t.constructor(t.source,Cl.exec(t));return n.lastIndex=t.lastIndex,n}var ys=fe?fe.prototype:void 0,ws=ys?ys.valueOf:void 0;function $l(t){return ws?Object(ws.call(t)):{}}function Il(t,n){var e=n?kn(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)}var Fl="[object Boolean]",jl="[object Date]",Ll="[object Map]",ql="[object Number]",zl="[object RegExp]",Dl="[object Set]",Vl="[object String]",Jl="[object Symbol]",Ul="[object ArrayBuffer]",Gl="[object DataView]",Wl="[object Float32Array]",Kl="[object Float64Array]",Hl="[object Int8Array]",Zl="[object Int16Array]",Ql="[object Int32Array]",Xl="[object Uint8Array]",Yl="[object Uint8ClampedArray]",ec="[object Uint16Array]",tc="[object Uint32Array]";function nc(t,n,e){var s=t.constructor;switch(n){case Ul:return kn(t);case Fl:case jl:return new s(+t);case Gl:return Ml(t,e);case Wl:case Kl:case Hl:case Zl:case Ql:case Xl:case Yl:case ec:case tc:return Il(t,e);case Ll:return new s;case ql:case Vl:return new s(t);case zl:return Bl(t);case Dl:return new s;case Jl:return $l(t)}}function sc(t){return typeof t.constructor=="function"&&!_n(t)?to(vn(t)):{}}var ic="[object Map]";function rc(t){return _e(t)&&ft(t)==ic}var bs=He&&He.isMap,oc=bs?yn(bs):rc;const ac=oc;var lc="[object Set]";function cc(t){return _e(t)&&ft(t)==lc}var xs=He&&He.isSet,uc=xs?yn(xs):cc;const hc=uc;var fc=1,dc=2,gc=4,wi="[object Arguments]",pc="[object Array]",mc="[object Boolean]",_c="[object Date]",yc="[object Error]",bi="[object Function]",wc="[object GeneratorFunction]",bc="[object Map]",xc="[object Number]",xi="[object Object]",vc="[object RegExp]",Pc="[object Set]",kc="[object String]",Sc="[object Symbol]",Ac="[object WeakMap]",Tc="[object ArrayBuffer]",Ec="[object DataView]",Oc="[object Float32Array]",Rc="[object Float64Array]",Nc="[object Int8Array]",Mc="[object Int16Array]",Cc="[object Int32Array]",Bc="[object Uint8Array]",$c="[object Uint8ClampedArray]",Ic="[object Uint16Array]",Fc="[object Uint32Array]",I={};I[wi]=I[pc]=I[Tc]=I[Ec]=I[mc]=I[_c]=I[Oc]=I[Rc]=I[Nc]=I[Mc]=I[Cc]=I[bc]=I[xc]=I[xi]=I[vc]=I[Pc]=I[kc]=I[Sc]=I[Bc]=I[$c]=I[Ic]=I[Fc]=!0;I[yc]=I[bi]=I[Ac]=!1;function Nt(t,n,e,s,i,r){var o,a=n&fc,l=n&dc,c=n&gc;if(e&&(o=i?e(t,s,i,r):e(t)),o!==void 0)return o;if(!Ee(t))return t;var h=Te(t);if(h){if(o=Rl(t),!a)return no(t,o)}else{var p=ft(t),_=p==bi||p==wc;if(Bt(t))return cl(t,a);if(p==xi||p==wi||_&&!i){if(o=l||_?{}:sc(t),!a)return l?_l(t,al(o,t)):gl(t,ol(o,t))}else{if(!I[p])return i?t:{};o=nc(t,p,a)}}r||(r=new me);var g=r.get(t);if(g)return g;r.set(t,o),hc(t)?t.forEach(function(N){o.add(Nt(N,n,e,N,t,r))}):ac(t)&&t.forEach(function(N,A){o.set(A,Nt(N,n,e,A,t,r))});var E=c?l?yl:nn:l?bn:wn,O=h?void 0:E(t);return io(O||t,function(N,A){O&&(A=N,N=t[A]),ti(o,A,Nt(N,n,e,A,t,r))}),o}var jc=4;function Lc(t){return Nt(t,jc)}var qc="__lodash_hash_undefined__";function zc(t){return this.__data__.set(t,qc),this}function Dc(t){return this.__data__.has(t)}function It(t){var n=-1,e=t==null?0:t.length;for(this.__data__=new xe;++n<e;)this.add(t[n])}It.prototype.add=It.prototype.push=zc;It.prototype.has=Dc;function Vc(t,n){for(var e=-1,s=t==null?0:t.length;++e<s;)if(n(t[e],e,t))return!0;return!1}function Jc(t,n){return t.has(n)}var Uc=1,Gc=2;function vi(t,n,e,s,i,r){var o=e&Uc,a=t.length,l=n.length;if(a!=l&&!(o&&l>a))return!1;var c=r.get(t),h=r.get(n);if(c&&h)return c==n&&h==t;var p=-1,_=!0,g=e&Gc?new It:void 0;for(r.set(t,n),r.set(n,t);++p<a;){var E=t[p],O=n[p];if(s)var N=o?s(O,E,p,n,t,r):s(E,O,p,t,n,r);if(N!==void 0){if(N)continue;_=!1;break}if(g){if(!Vc(n,function(A,M){if(!Jc(g,M)&&(E===A||i(E,A,e,s,r)))return g.push(M)})){_=!1;break}}else if(!(E===O||i(E,O,e,s,r))){_=!1;break}}return r.delete(t),r.delete(n),_}function Wc(t){var n=-1,e=Array(t.size);return t.forEach(function(s,i){e[++n]=[i,s]}),e}function Kc(t){var n=-1,e=Array(t.size);return t.forEach(function(s){e[++n]=s}),e}var Hc=1,Zc=2,Qc="[object Boolean]",Xc="[object Date]",Yc="[object Error]",eu="[object Map]",tu="[object Number]",nu="[object RegExp]",su="[object Set]",iu="[object String]",ru="[object Symbol]",ou="[object ArrayBuffer]",au="[object DataView]",vs=fe?fe.prototype:void 0,Wt=vs?vs.valueOf:void 0;function lu(t,n,e,s,i,r,o){switch(e){case au:if(t.byteLength!=n.byteLength||t.byteOffset!=n.byteOffset)return!1;t=t.buffer,n=n.buffer;case ou:return!(t.byteLength!=n.byteLength||!r(new $t(t),new $t(n)));case Qc:case Xc:case tu:return mn(+t,+n);case Yc:return t.name==n.name&&t.message==n.message;case nu:case iu:return t==n+"";case eu:var a=Wc;case su:var l=s&Hc;if(a||(a=Kc),t.size!=n.size&&!l)return!1;var c=o.get(t);if(c)return c==n;s|=Zc,o.set(t,n);var h=vi(a(t),a(n),s,i,r,o);return o.delete(t),h;case ru:if(Wt)return Wt.call(t)==Wt.call(n)}return!1}var cu=1,uu=Object.prototype,hu=uu.hasOwnProperty;function fu(t,n,e,s,i,r){var o=e&cu,a=nn(t),l=a.length,c=nn(n),h=c.length;if(l!=h&&!o)return!1;for(var p=l;p--;){var _=a[p];if(!(o?_ in n:hu.call(n,_)))return!1}var g=r.get(t),E=r.get(n);if(g&&E)return g==n&&E==t;var O=!0;r.set(t,n),r.set(n,t);for(var N=o;++p<l;){_=a[p];var A=t[_],M=n[_];if(s)var ce=o?s(M,A,_,n,t,r):s(A,M,_,t,n,r);if(!(ce===void 0?A===M||i(A,M,e,s,r):ce)){O=!1;break}N||(N=_=="constructor")}if(O&&!N){var G=t.constructor,Z=n.constructor;G!=Z&&"constructor"in t&&"constructor"in n&&!(typeof G=="function"&&G instanceof G&&typeof Z=="function"&&Z instanceof Z)&&(O=!1)}return r.delete(t),r.delete(n),O}var du=1,Ps="[object Arguments]",ks="[object Array]",Et="[object Object]",gu=Object.prototype,Ss=gu.hasOwnProperty;function pu(t,n,e,s,i,r){var o=Te(t),a=Te(n),l=o?ks:ft(t),c=a?ks:ft(n);l=l==Ps?Et:l,c=c==Ps?Et:c;var h=l==Et,p=c==Et,_=l==c;if(_&&Bt(t)){if(!Bt(n))return!1;o=!0,h=!1}if(_&&!h)return r||(r=new me),o||ai(t)?vi(t,n,e,s,i,r):lu(t,n,l,e,s,i,r);if(!(e&du)){var g=h&&Ss.call(t,"__wrapped__"),E=p&&Ss.call(n,"__wrapped__");if(g||E){var O=g?t.value():t,N=E?n.value():n;return r||(r=new me),i(O,N,e,s,r)}}return _?(r||(r=new me),fu(t,n,e,s,i,r)):!1}function Pi(t,n,e,s,i){return t===n?!0:t==null||n==null||!_e(t)&&!_e(n)?t!==t&&n!==n:pu(t,n,e,s,Pi,i)}function mu(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}function _u(t,n){return n.length<2?t:fi(t,Ya(n,0,-1))}function As(t,n){return Pi(t,n)}function yu(t,n){return n=ui(n,t),t=_u(t,n),t==null||delete t[hi(mu(n))]}function wu(t,n){return t==null?!0:yu(t,n)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 *//**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let an;try{an={window,document}}catch{/* istanbul ignore next -- @preserve */an={window:{},document:{}}}var dt=an;/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Ts(){return function t(){t.called=!0}}class Ze{constructor(n,e){u(this,"source");u(this,"name");u(this,"path");u(this,"stop");u(this,"off");u(this,"return");this.source=n,this.name=e,this.path=[],this.stop=Ts(),this.off=Ts()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const W=new Array(256).fill("").map((t,n)=>("0"+n.toString(16)).slice(-2));function Dt(){const[t,n,e,s]=crypto.getRandomValues(new Uint32Array(4));return"e"+W[t>>0&255]+W[t>>8&255]+W[t>>16&255]+W[t>>24&255]+W[n>>0&255]+W[n>>8&255]+W[n>>16&255]+W[n>>24&255]+W[e>>0&255]+W[e>>8&255]+W[e>>16&255]+W[e>>24&255]+W[s>>0&255]+W[s>>8&255]+W[s>>16&255]+W[s>>24&255]}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const ln={get(t="normal"){return typeof t!="number"?this[t]||this.normal:t},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5};function bu(t,n){const e=ln.get(n.priority);for(let s=0;s<t.length;s++)if(ln.get(t[s].priority)<e){t.splice(s,0,n);return}t.push(n)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const xu="https://ckeditor.com/docs/ckeditor5/latest/support/error-codes.html";class m extends Error{constructor(e,s,i){super(vu(e,i));u(this,"context");u(this,"data");this.name="CKEditorError",this.context=s,this.data=i}is(e){return e==="CKEditorError"}static rethrowUnexpectedError(e,s){if(e.is&&e.is("CKEditorError"))throw e;const i=new m(e.message,s);throw i.stack=e.stack,i}}function cn(t,n){console.warn(...Pu(t,n))}function ki(t){return`
Read more: ${xu}#error-${t}`}function vu(t,n){const e=new WeakSet,i=n?` ${JSON.stringify(n,(o,a)=>{if(typeof a=="object"&&a!==null){if(e.has(a))return`[object ${a.constructor.name}]`;e.add(a)}return a})}`:"",r=ki(t);return t+i+r}function Pu(t,n){const e=ki(t);return n?[t,n,e]:[t,e]}const ku="43.3.1";/* istanbul ignore next -- @preserve */if(globalThis.CKEDITOR_VERSION)throw new m("ckeditor-duplicated-modules",null);globalThis.CKEDITOR_VERSION=ku;const Ge=Symbol("listeningTo"),un=Symbol("emitterId"),ge=Symbol("delegations"),Si=V(Object);function V(t){if(!t)return Si;class n extends t{on(s,i,r){this.listenTo(this,s,i,r)}once(s,i,r){let o=!1;const a=(l,...c)=>{o||(o=!0,l.off(),i.call(this,l,...c))};this.listenTo(this,s,a,r)}off(s,i){this.stopListening(this,s,i)}listenTo(s,i,r,o={}){let a,l;this[Ge]||(this[Ge]={});const c=this[Ge];Kt(s)||Ai(s);const h=Kt(s);(a=c[h])||(a=c[h]={emitter:s,callbacks:{}}),(l=a.callbacks[i])||(l=a.callbacks[i]=[]),l.push(r),Eu(this,s,i,r,o)}stopListening(s,i,r){const o=this[Ge];let a=s&&Kt(s);const l=o&&a?o[a]:void 0,c=l&&i?l.callbacks[i]:void 0;if(!(!o||s&&!l||i&&!c))if(r)Ht(this,s,i,r),c.indexOf(r)!==-1&&(c.length===1?delete l.callbacks[i]:Ht(this,s,i,r));else if(c){for(;r=c.pop();)Ht(this,s,i,r);delete l.callbacks[i]}else if(l){for(i in l.callbacks)this.stopListening(s,i);delete o[a]}else{for(a in o)this.stopListening(o[a].emitter);delete this[Ge]}}fire(s,...i){try{const r=s instanceof Ze?s:new Ze(this,s),o=r.name;let a=Ei(this,o);if(r.path.push(this),a){const c=[r,...i];a=Array.from(a);for(let h=0;h<a.length&&(a[h].callback.apply(this,c),r.off.called&&(delete r.off.called,this._removeEventListener(o,a[h].callback)),!r.stop.called);h++);}const l=this[ge];if(l){const c=l.get(o),h=l.get("*");c&&Es(c,r,i),h&&Es(h,r,i)}return r.return}catch(r){/* istanbul ignore next -- @preserve */m.rethrowUnexpectedError(r,this)}}delegate(...s){return{to:(i,r)=>{this[ge]||(this[ge]=new Map),s.forEach(o=>{const a=this[ge].get(o);a?a.set(i,r):this[ge].set(o,new Map([[i,r]]))})}}}stopDelegating(s,i){if(this[ge])if(!s)this[ge].clear();else if(!i)this[ge].delete(s);else{const r=this[ge].get(s);r&&r.delete(i)}}_addEventListener(s,i,r){Tu(this,s);const o=hn(this,s),a=ln.get(r.priority),l={callback:i,priority:a};for(const c of o)bu(c,l)}_removeEventListener(s,i){const r=hn(this,s);for(const o of r)for(let a=0;a<o.length;a++)o[a].callback==i&&(o.splice(a,1),a--)}}return n}["on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(t=>{V[t]=Si.prototype[t]});function Su(t,n){const e=t[Ge];return e&&e[n]?e[n].emitter:null}function Ai(t,n){t[un]||(t[un]=n||Dt())}function Kt(t){return t[un]}function Ti(t){return t._events||Object.defineProperty(t,"_events",{value:{}}),t._events}function Au(){return{callbacks:[],childEvents:[]}}function Tu(t,n){const e=Ti(t);if(e[n])return;let s=n,i=null;const r=[];for(;s!==""&&!e[s];)e[s]=Au(),r.push(e[s]),i&&e[s].childEvents.push(i),i=s,s=s.substr(0,s.lastIndexOf(":"));if(s!==""){for(const o of r)o.callbacks=e[s].callbacks.slice();e[s].childEvents.push(i)}}function hn(t,n){const e=Ti(t)[n];if(!e)return[];let s=[e.callbacks];for(let i=0;i<e.childEvents.length;i++){const r=hn(t,e.childEvents[i]);s=s.concat(r)}return s}function Ei(t,n){let e;return!t._events||!(e=t._events[n])||!e.callbacks.length?n.indexOf(":")>-1?Ei(t,n.substr(0,n.lastIndexOf(":"))):null:e.callbacks}function Es(t,n,e){for(let[s,i]of t){i?typeof i=="function"&&(i=i(n.name)):i=n.name;const r=new Ze(n.source,i);r.path=[...n.path],s.fire(r,...e)}}function Eu(t,n,e,s,i){n._addEventListener?n._addEventListener(e,s,i):t._addEventListener.call(n,e,s,i)}function Ht(t,n,e,s){n._removeEventListener?n._removeEventListener(e,s):t._removeEventListener.call(n,e,s)}const rt=Symbol("observableProperties"),gt=Symbol("boundObservables"),ot=Symbol("boundProperties"),Ce=Symbol("decoratedMethods"),Os=Symbol("decoratedOriginal"),Oi=Sn(V());function Sn(t){var e,s,i,r;if(!t)return Oi;class n extends t{constructor(){super(...arguments);u(this,e);u(this,s);u(this,i);u(this,r)}set(l,c){if(Ee(l)){Object.keys(l).forEach(p=>{this.set(p,l[p])},this);return}Zt(this);const h=this[rt];if(l in this&&!h.has(l))throw new m("observable-set-cannot-override",this);Object.defineProperty(this,l,{enumerable:!0,configurable:!0,get(){return h.get(l)},set(p){const _=h.get(l);let g=this.fire(`set:${l}`,l,p,_);g===void 0&&(g=p),(_!==g||!h.has(l))&&(h.set(l,g),this.fire(`change:${l}`,l,g,_))}}),this[l]=c}bind(...l){if(!l.length||!Rs(l))throw new m("observable-bind-wrong-properties",this);if(new Set(l).size!==l.length)throw new m("observable-bind-duplicate-properties",this);Zt(this);const c=this[ot];l.forEach(p=>{if(c.has(p))throw new m("observable-bind-rebind",this)});const h=new Map;return l.forEach(p=>{const _={property:p,to:[]};c.set(p,_),h.set(p,_)}),{to:Ou,toMany:Ru,_observable:this,_bindProperties:l,_to:[],_bindings:h}}unbind(...l){if(!this[rt])return;const c=this[ot],h=this[gt];if(l.length){if(!Rs(l))throw new m("observable-unbind-wrong-properties",this);l.forEach(p=>{const _=c.get(p);_&&(_.to.forEach(([g,E])=>{const O=h.get(g),N=O[E];N.delete(_),N.size||delete O[E],Object.keys(O).length||(h.delete(g),this.stopListening(g,"change"))}),c.delete(p))})}else h.forEach((p,_)=>{this.stopListening(_,"change")}),h.clear(),c.clear()}decorate(l){Zt(this);const c=this[l];if(!c)throw new m("observablemixin-cannot-decorate-undefined",this,{object:this,methodName:l});this.on(l,(h,p)=>{h.return=c.apply(this,p)}),this[l]=function(...h){return this.fire(l,h)},this[l][Os]=c,this[Ce]||(this[Ce]=[]),this[Ce].push(l)}stopListening(l,c,h){if(!l&&this[Ce]){for(const p of this[Ce])this[p]=this[p][Os];delete this[Ce]}super.stopListening(l,c,h)}}return e=rt,s=Ce,i=ot,r=gt,n}["set","bind","unbind","decorate","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(t=>{Sn[t]=Oi.prototype[t]});function Zt(t){t[rt]||(Object.defineProperty(t,rt,{value:new Map}),Object.defineProperty(t,gt,{value:new Map}),Object.defineProperty(t,ot,{value:new Map}))}function Ou(...t){const n=Mu(...t),e=Array.from(this._bindings.keys()),s=e.length;if(!n.callback&&n.to.length>1)throw new m("observable-bind-to-no-callback",this);if(s>1&&n.callback)throw new m("observable-bind-to-extra-callback",this);n.to.forEach(i=>{if(i.properties.length&&i.properties.length!==s)throw new m("observable-bind-to-properties-length",this);i.properties.length||(i.properties=this._bindProperties)}),this._to=n.to,n.callback&&(this._bindings.get(e[0]).callback=n.callback),$u(this._observable,this._to),Bu(this),this._bindProperties.forEach(i=>{Ri(this._observable,i)})}function Ru(t,n,e){if(this._bindings.size>1)throw new m("observable-bind-to-many-not-one-binding",this);this.to(...Nu(t,n),e)}function Nu(t,n){const e=t.map(s=>[s,n]);return Array.prototype.concat.apply([],e)}function Rs(t){return t.every(n=>typeof n=="string")}function Mu(...t){if(!t.length)throw new m("observable-bind-to-parse-error",null);const n={to:[]};let e;return typeof t[t.length-1]=="function"&&(n.callback=t.pop()),t.forEach(s=>{if(typeof s=="string")e.properties.push(s);else if(typeof s=="object")e={observable:s,properties:[]},n.to.push(e);else throw new m("observable-bind-to-parse-error",null)}),n}function Cu(t,n,e,s){const i=t[gt],r=i.get(e),o=r||{};o[s]||(o[s]=new Set),o[s].add(n),r||i.set(e,o)}function Bu(t){let n;t._bindings.forEach((e,s)=>{t._to.forEach(i=>{n=i.properties[e.callback?0:t._bindProperties.indexOf(s)],e.to.push([i.observable,n]),Cu(t._observable,e,i.observable,n)})})}function Ri(t,n){const s=t[ot].get(n);let i;s.callback?i=s.callback.apply(t,s.to.map(r=>r[0][r[1]])):(i=s.to[0],i=i[0][i[1]]),Object.prototype.hasOwnProperty.call(t,n)?t[n]=i:t.set(n,i)}function $u(t,n){n.forEach(e=>{const s=t[gt];let i;s.get(e.observable)||t.listenTo(e.observable,"change",(r,o)=>{i=s.get(e.observable)[o],i&&i.forEach(a=>{Ri(t,a.property)})})})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Ns(t){let n=0;for(const e of t)n++;return n}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function H(t,n){const e=Math.min(t.length,n.length);for(let s=0;s<e;s++)if(t[s]!=n[s])return s;return t.length==n.length?"same":t.length<n.length?"prefix":"extension"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function ve(t){return!!(t&&t[Symbol.iterator])}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Ms(t){if(t){if(t.defaultView)return t instanceof t.defaultView.Document;if(t.ownerDocument&&t.ownerDocument.defaultView)return t instanceof t.ownerDocument.defaultView.Node}return!1}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Cs(t){const n=Object.prototype.toString.apply(t);return n=="[object Window]"||n=="[object global]"}const Ni=Mi(V());function Mi(t){if(!t)return Ni;class n extends t{listenTo(s,i,r,o={}){if(Ms(s)||Cs(s)){const a={capture:!!o.useCapture,passive:!!o.usePassive},l=this._getProxyEmitter(s,a)||new Iu(s,a);this.listenTo(l,i,r,o)}else super.listenTo(s,i,r,o)}stopListening(s,i,r){if(Ms(s)||Cs(s)){const o=this._getAllProxyEmitters(s);for(const a of o)this.stopListening(a,i,r)}else super.stopListening(s,i,r)}_getProxyEmitter(s,i){return Su(this,Ci(s,i))}_getAllProxyEmitters(s){return[{capture:!1,passive:!1},{capture:!1,passive:!0},{capture:!0,passive:!1},{capture:!0,passive:!0}].map(i=>this._getProxyEmitter(s,i)).filter(i=>!!i)}}return n}["_getProxyEmitter","_getAllProxyEmitters","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(t=>{Mi[t]=Ni.prototype[t]});class Iu extends V(){constructor(e,s){super();u(this,"_domNode");u(this,"_options");u(this,"_domListeners");Ai(this,Ci(e,s)),this._domNode=e,this._options=s}attach(e){if(this._domListeners&&this._domListeners[e])return;const s=this._createDomListener(e);this._domNode.addEventListener(e,s,this._options),this._domListeners||(this._domListeners={}),this._domListeners[e]=s}detach(e){let s;this._domListeners[e]&&(!(s=this._events[e])||!s.callbacks.length)&&this._domListeners[e].removeListener()}_addEventListener(e,s,i){this.attach(e),V().prototype._addEventListener.call(this,e,s,i)}_removeEventListener(e,s){V().prototype._removeEventListener.call(this,e,s),this.detach(e)}_createDomListener(e){const s=i=>{this.fire(e,i)};return s.removeListener=()=>{this._domNode.removeEventListener(e,s,this._options),delete this._domListeners[e]},s}}function Fu(t){return t["data-ck-expando"]||(t["data-ck-expando"]=Dt())}function Ci(t,n){let e=Fu(t);for(const s of Object.keys(n).sort())n[s]&&(e+="-"+s);return e}const at=ju();function ju(){const t={pageup:33,pagedown:34,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,backspace:8,delete:46,enter:13,space:32,esc:27,tab:9,ctrl:1114112,shift:2228224,alt:4456448,cmd:8912896};for(let n=65;n<=90;n++){const e=String.fromCharCode(n);t[e.toLowerCase()]=n}for(let n=48;n<=57;n++)t[n-48]=n;for(let n=112;n<=123;n++)t["f"+(n-111)]=n;return Object.assign(t,{"'":222,",":108,"-":109,".":110,"/":111,";":186,"=":187,"[":219,"\\":220,"]":221,"`":223}),t}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Mt(t){return Array.isArray(t)?t:[t]}/* istanbul ignore else -- @preserve */dt.window.CKEDITOR_TRANSLATIONS||(dt.window.CKEDITOR_TRANSLATIONS={});class Lu extends V(){constructor(e={},s={}){super();u(this,"_items");u(this,"_itemMap");u(this,"_idProperty");u(this,"_bindToCollection");u(this,"_bindToExternalToInternalMap");u(this,"_bindToInternalToExternalMap");u(this,"_skippedIndexesFromExternal");const i=ve(e);if(i||(s=e),this._items=[],this._itemMap=new Map,this._idProperty=s.idProperty||"id",this._bindToExternalToInternalMap=new WeakMap,this._bindToInternalToExternalMap=new WeakMap,this._skippedIndexesFromExternal=[],i)for(const r of e)this._items.push(r),this._itemMap.set(this._getItemIdBeforeAdding(r),r)}get length(){return this._items.length}get first(){return this._items[0]||null}get last(){return this._items[this.length-1]||null}add(e,s){return this.addMany([e],s)}addMany(e,s){if(s===void 0)s=this._items.length;else if(s>this._items.length||s<0)throw new m("collection-add-item-invalid-index",this);let i=0;for(const r of e){const o=this._getItemIdBeforeAdding(r),a=s+i;this._items.splice(a,0,r),this._itemMap.set(o,r),this.fire("add",r,a),i++}return this.fire("change",{added:e,removed:[],index:s}),this}get(e){let s;if(typeof e=="string")s=this._itemMap.get(e);else if(typeof e=="number")s=this._items[e];else throw new m("collection-get-invalid-arg",this);return s||null}has(e){if(typeof e=="string")return this._itemMap.has(e);{const s=this._idProperty,i=e[s];return i&&this._itemMap.has(i)}}getIndex(e){let s;return typeof e=="string"?s=this._itemMap.get(e):s=e,s?this._items.indexOf(s):-1}remove(e){const[s,i]=this._remove(e);return this.fire("change",{added:[],removed:[s],index:i}),s}map(e,s){return this._items.map(e,s)}forEach(e,s){this._items.forEach(e,s)}find(e,s){return this._items.find(e,s)}filter(e,s){return this._items.filter(e,s)}clear(){this._bindToCollection&&(this.stopListening(this._bindToCollection),this._bindToCollection=null);const e=Array.from(this._items);for(;this.length;)this._remove(0);this.fire("change",{added:[],removed:e,index:0})}bindTo(e){if(this._bindToCollection)throw new m("collection-bind-to-rebind",this);return this._bindToCollection=e,{as:s=>{this._setUpBindToBinding(i=>new s(i))},using:s=>{typeof s=="function"?this._setUpBindToBinding(s):this._setUpBindToBinding(i=>i[s])}}}_setUpBindToBinding(e){const s=this._bindToCollection,i=(r,o,a)=>{const l=s._bindToCollection==this,c=s._bindToInternalToExternalMap.get(o);if(l&&c)this._bindToExternalToInternalMap.set(o,c),this._bindToInternalToExternalMap.set(c,o);else{const h=e(o);if(!h){this._skippedIndexesFromExternal.push(a);return}let p=a;for(const _ of this._skippedIndexesFromExternal)a>_&&p--;for(const _ of s._skippedIndexesFromExternal)p>=_&&p++;this._bindToExternalToInternalMap.set(o,h),this._bindToInternalToExternalMap.set(h,o),this.add(h,p);for(let _=0;_<s._skippedIndexesFromExternal.length;_++)p<=s._skippedIndexesFromExternal[_]&&s._skippedIndexesFromExternal[_]++}};for(const r of s)i(null,r,s.getIndex(r));this.listenTo(s,"add",i),this.listenTo(s,"remove",(r,o,a)=>{const l=this._bindToExternalToInternalMap.get(o);l&&this.remove(l),this._skippedIndexesFromExternal=this._skippedIndexesFromExternal.reduce((c,h)=>(a<h&&c.push(h-1),a>h&&c.push(h),c),[])})}_getItemIdBeforeAdding(e){const s=this._idProperty;let i;if(s in e){if(i=e[s],typeof i!="string")throw new m("collection-add-invalid-id",this);if(this.get(i))throw new m("collection-add-item-already-exists",this)}else e[s]=i=Dt();return i}_remove(e){let s,i,r,o=!1;const a=this._idProperty;if(typeof e=="string"?(i=e,r=this._itemMap.get(i),o=!r,r&&(s=this._items.indexOf(r))):typeof e=="number"?(s=e,r=this._items[s],o=!r,r&&(i=r[a])):(r=e,i=r[a],s=this._items.indexOf(r),o=s==-1||!this._itemMap.get(i)),o)throw new m("collection-remove-404",this);this._items.splice(s,1),this._itemMap.delete(i);const l=this._bindToInternalToExternalMap.get(r);return this._bindToInternalToExternalMap.delete(r),this._bindToExternalToInternalMap.delete(l),this.fire("remove",r,s),[r,s]}[Symbol.iterator](){return this._items[Symbol.iterator]()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function qu(t){const n=new Map;for(const e in t)n.set(e,t[e]);return n}function pt(t){return ve(t)?new Map(t):qu(t)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const zu=1e4;function Bs(t,n,e,s){if(Math.max(n.length,t.length)>zu)return t.slice(0,e).concat(n).concat(t.slice(e+s,t.length));{const i=Array.from(t);return i.splice(e,s,...n),i}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 *//**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let ze=class{is(){throw new Error("is() method is abstract")}},De=class extends V(ze){constructor(e){super();u(this,"document");u(this,"parent");this.document=e,this.parent=null}get index(){let e;if(!this.parent)return null;if((e=this.parent.getChildIndex(this))==-1)throw new m("view-node-not-found-in-parent",this);return e}get nextSibling(){const e=this.index;return e!==null&&this.parent.getChild(e+1)||null}get previousSibling(){const e=this.index;return e!==null&&this.parent.getChild(e-1)||null}get root(){let e=this;for(;e.parent;)e=e.parent;return e}isAttached(){return this.root.is("rootElement")}getPath(){const e=[];let s=this;for(;s.parent;)e.unshift(s.index),s=s.parent;return e}getAncestors(e={}){const s=[];let i=e.includeSelf?this:this.parent;for(;i;)s[e.parentFirst?"push":"unshift"](i),i=i.parent;return s}getCommonAncestor(e,s={}){const i=this.getAncestors(s),r=e.getAncestors(s);let o=0;for(;i[o]==r[o]&&i[o];)o++;return o===0?null:i[o-1]}isBefore(e){if(this==e||this.root!==e.root)return!1;const s=this.getPath(),i=e.getPath(),r=H(s,i);switch(r){case"prefix":return!0;case"extension":return!1;default:return s[r]<i[r]}}isAfter(e){return this==e||this.root!==e.root?!1:!this.isBefore(e)}_remove(){this.parent._removeChildren(this.index)}_fireChange(e,s){this.fire(`change:${e}`,s),this.parent&&this.parent._fireChange(e,s)}toJSON(){const e=Lc(this);return delete e.parent,e}};De.prototype.is=function(t){return t==="node"||t==="view:node"};let re=class fn extends De{constructor(e,s){super(e);u(this,"_textData");this._textData=s}get data(){return this._textData}get _data(){return this.data}set _data(e){this._fireChange("text",this),this._textData=e}isSimilar(e){return e instanceof fn?this===e||this.data===e.data:!1}_clone(){return new fn(this.document,this.data)}};re.prototype.is=function(t){return t==="$text"||t==="view:$text"||t==="text"||t==="view:text"||t==="node"||t==="view:node"};let he=class extends ze{constructor(e,s,i){super();u(this,"textNode");u(this,"data");u(this,"offsetInText");if(this.textNode=e,s<0||s>e.data.length)throw new m("view-textproxy-wrong-offsetintext",this);if(i<0||s+i>e.data.length)throw new m("view-textproxy-wrong-length",this);this.data=e.data.substring(s,s+i),this.offsetInText=s}get offsetSize(){return this.data.length}get isPartial(){return this.data.length!==this.textNode.data.length}get parent(){return this.textNode.parent}get root(){return this.textNode.root}get document(){return this.textNode.document}getAncestors(e={}){const s=[];let i=e.includeSelf?this.textNode:this.parent;for(;i!==null;)s[e.parentFirst?"push":"unshift"](i),i=i.parent;return s}};he.prototype.is=function(t){return t==="$textProxy"||t==="view:$textProxy"||t==="textProxy"||t==="view:textProxy"};class Du{constructor(...n){u(this,"_patterns",[]);this.add(...n)}add(...n){for(let e of n)(typeof e=="string"||e instanceof RegExp)&&(e={name:e}),this._patterns.push(e)}match(...n){for(const e of n)for(const s of this._patterns){const i=$s(e,s);if(i)return{element:e,pattern:s,match:i}}return null}matchAll(...n){const e=[];for(const s of n)for(const i of this._patterns){const r=$s(s,i);r&&e.push({element:s,pattern:i,match:r})}return e.length>0?e:null}getElementName(){if(this._patterns.length!==1)return null;const n=this._patterns[0],e=n.name;return typeof n!="function"&&e&&!(e instanceof RegExp)?e:null}}function $s(t,n){if(typeof n=="function")return n(t);const e={};return n.name&&(e.name=Vu(n.name,t.name),!e.name)||n.attributes&&(e.attributes=Wu(n.attributes,t),!e.attributes)||n.classes&&(e.classes=Ku(n.classes,t),!e.classes)||n.styles&&(e.styles=Hu(n.styles,t),!e.styles)?null:e}function Vu(t,n){return t instanceof RegExp?!!n.match(t):t===n}function An(t,n,e){const s=Ju(t),i=Array.from(n),r=[];if(s.forEach(([o,a])=>{i.forEach(l=>{Uu(o,l)&&Gu(a,l,e)&&r.push(l)})}),!(!s.length||r.length<s.length))return r}function Ju(t){return Array.isArray(t)?t.map(n=>tn(n)?((n.key===void 0||n.value===void 0)&&cn("matcher-pattern-missing-key-or-value",n),[n.key,n.value]):[n,!0]):tn(t)?Object.entries(t):[[t,!0]]}function Uu(t,n){return t===!0||t===n||t instanceof RegExp&&n.match(t)}function Gu(t,n,e){if(t===!0)return!0;const s=e(n);return t===s||t instanceof RegExp&&!!String(s).match(t)}function Wu(t,n){const e=new Set(n.getAttributeKeys());return tn(t)?(t.style!==void 0&&cn("matcher-pattern-deprecated-attributes-style-key",t),t.class!==void 0&&cn("matcher-pattern-deprecated-attributes-class-key",t)):(e.delete("style"),e.delete("class")),An(t,e,s=>n.getAttribute(s))}function Ku(t,n){return An(t,n.getClassNames(),()=>{})}function Hu(t,n){return An(t,n.getStyleNames(!0),e=>n.getStyle(e))}class Zu{constructor(n){u(this,"_styles");u(this,"_styleProcessor");this._styles={},this._styleProcessor=n}get isEmpty(){return!Object.entries(this._styles).length}get size(){return this.isEmpty?0:this.getStyleNames().length}setTo(n){this.clear();const e=Qu(n);for(const[s,i]of e)this._styleProcessor.toNormalizedForm(s,i,this._styles)}has(n){if(this.isEmpty)return!1;const s=this._styleProcessor.getReducedForm(n,this._styles).find(([i])=>i===n);return Array.isArray(s)}set(n,e){if(Ee(n))for(const[s,i]of Object.entries(n))this._styleProcessor.toNormalizedForm(s,i,this._styles);else this._styleProcessor.toNormalizedForm(n,e,this._styles)}remove(n){const e=Xu(n);wu(this._styles,e),delete this._styles[n],this._cleanEmptyObjectsOnPath(e)}getNormalized(n){return this._styleProcessor.getNormalized(n,this._styles)}toString(){return this.isEmpty?"":this.getStylesEntries().map(n=>n.join(":")).sort().join(";")+";"}getAsString(n){if(this.isEmpty)return;if(this._styles[n]&&!Ee(this._styles[n]))return this._styles[n];const s=this._styleProcessor.getReducedForm(n,this._styles).find(([i])=>i===n);if(Array.isArray(s))return s[1]}getStyleNames(n=!1){return this.isEmpty?[]:n?this._styleProcessor.getStyleNames(this._styles):this.getStylesEntries().map(([s])=>s)}clear(){this._styles={}}getStylesEntries(){const n=[],e=Object.keys(this._styles);for(const s of e)n.push(...this._styleProcessor.getReducedForm(s,this._styles));return n}_cleanEmptyObjectsOnPath(n){const e=n.split(".");if(!(e.length>1))return;const i=e.splice(0,e.length-1).join("."),r=Ga(this._styles,i);if(!r)return;!Object.keys(r).length&&this.remove(i)}}function Qu(t){let n=null,e=0,s=0,i=null;const r=new Map;if(t==="")return r;t.charAt(t.length-1)!=";"&&(t=t+";");for(let o=0;o<t.length;o++){const a=t.charAt(o);if(n===null)switch(a){case":":i||(i=t.substr(e,o-e),s=o+1);break;case'"':case"'":n=a;break;case";":{const l=t.substr(s,o-s);i&&r.set(i.trim(),l.trim()),i=null,e=o+1;break}}else a===n&&(n=null)}return r}function Xu(t){return t.replace("-",".")}let Oe=class Bi extends De{constructor(e,s,i,r){super(e);u(this,"name");u(this,"_unsafeAttributesToRender",[]);u(this,"_attrs");u(this,"_children");u(this,"_classes");u(this,"_styles");u(this,"_customProperties",new Map);if(this.name=s,this._attrs=Yu(i),this._children=[],r&&this._insertChild(0,r),this._classes=new Set,this._attrs.has("class")){const o=this._attrs.get("class");Is(this._classes,o),this._attrs.delete("class")}this._styles=new Zu(this.document.stylesProcessor),this._attrs.has("style")&&(this._styles.setTo(this._attrs.get("style")),this._attrs.delete("style"))}get childCount(){return this._children.length}get isEmpty(){return this._children.length===0}getChild(e){return this._children[e]}getChildIndex(e){return this._children.indexOf(e)}getChildren(){return this._children[Symbol.iterator]()}*getAttributeKeys(){this._classes.size>0&&(yield"class"),this._styles.isEmpty||(yield"style"),yield*this._attrs.keys()}*getAttributes(){yield*this._attrs.entries(),this._classes.size>0&&(yield["class",this.getAttribute("class")]),this._styles.isEmpty||(yield["style",this.getAttribute("style")])}getAttribute(e){if(e=="class")return this._classes.size>0?[...this._classes].join(" "):void 0;if(e=="style"){const s=this._styles.toString();return s==""?void 0:s}return this._attrs.get(e)}hasAttribute(e){return e=="class"?this._classes.size>0:e=="style"?!this._styles.isEmpty:this._attrs.has(e)}isSimilar(e){if(!(e instanceof Bi))return!1;if(this===e)return!0;if(this.name!=e.name||this._attrs.size!==e._attrs.size||this._classes.size!==e._classes.size||this._styles.size!==e._styles.size)return!1;for(const[s,i]of this._attrs)if(!e._attrs.has(s)||e._attrs.get(s)!==i)return!1;for(const s of this._classes)if(!e._classes.has(s))return!1;for(const s of this._styles.getStyleNames())if(!e._styles.has(s)||e._styles.getAsString(s)!==this._styles.getAsString(s))return!1;return!0}hasClass(...e){for(const s of e)if(!this._classes.has(s))return!1;return!0}getClassNames(){return this._classes.keys()}getStyle(e){return this._styles.getAsString(e)}getNormalizedStyle(e){return this._styles.getNormalized(e)}getStyleNames(e){return this._styles.getStyleNames(e)}hasStyle(...e){for(const s of e)if(!this._styles.has(s))return!1;return!0}findAncestor(...e){const s=new Du(...e);let i=this.parent;for(;i&&!i.is("documentFragment");){if(s.match(i))return i;i=i.parent}return null}getCustomProperty(e){return this._customProperties.get(e)}*getCustomProperties(){yield*this._customProperties.entries()}getIdentity(){const e=Array.from(this._classes).sort().join(","),s=this._styles.toString(),i=Array.from(this._attrs).map(r=>`${r[0]}="${r[1]}"`).sort().join(" ");return this.name+(e==""?"":` class="${e}"`)+(s?` style="${s}"`:"")+(i==""?"":` ${i}`)}shouldRenderUnsafeAttribute(e){return this._unsafeAttributesToRender.includes(e)}_clone(e=!1){const s=[];if(e)for(const r of this.getChildren())s.push(r._clone(e));const i=new this.constructor(this.document,this.name,this._attrs,s);return i._classes=new Set(this._classes),i._styles.set(this._styles.getNormalized()),i._customProperties=new Map(this._customProperties),i.getFillerOffset=this.getFillerOffset,i._unsafeAttributesToRender=this._unsafeAttributesToRender,i}_appendChild(e){return this._insertChild(this.childCount,e)}_insertChild(e,s){this._fireChange("children",this);let i=0;const r=eh(this.document,s);for(const o of r)o.parent!==null&&o._remove(),o.parent=this,o.document=this.document,this._children.splice(e,0,o),e++,i++;return i}_removeChildren(e,s=1){this._fireChange("children",this);for(let i=e;i<e+s;i++)this._children[i].parent=null;return this._children.splice(e,s)}_setAttribute(e,s){const i=String(s);this._fireChange("attributes",this),e=="class"?Is(this._classes,i):e=="style"?this._styles.setTo(i):this._attrs.set(e,i)}_removeAttribute(e){return this._fireChange("attributes",this),e=="class"?this._classes.size>0?(this._classes.clear(),!0):!1:e=="style"?this._styles.isEmpty?!1:(this._styles.clear(),!0):this._attrs.delete(e)}_addClass(e){this._fireChange("attributes",this);for(const s of Mt(e))this._classes.add(s)}_removeClass(e){this._fireChange("attributes",this);for(const s of Mt(e))this._classes.delete(s)}_setStyle(e,s){this._fireChange("attributes",this),typeof e!="string"?this._styles.set(e):this._styles.set(e,s)}_removeStyle(e){this._fireChange("attributes",this);for(const s of Mt(e))this._styles.remove(s)}_setCustomProperty(e,s){this._customProperties.set(e,s)}_removeCustomProperty(e){return this._customProperties.delete(e)}};Oe.prototype.is=function(t,n){return n?n===this.name&&(t==="element"||t==="view:element"):t==="element"||t==="view:element"||t==="node"||t==="view:node"};function Yu(t){const n=pt(t);for(const[e,s]of n)s===null?n.delete(e):typeof s!="string"&&n.set(e,String(s));return n}function Is(t,n){const e=n.split(/\s+/);t.clear(),e.forEach(s=>t.add(s))}function eh(t,n){return typeof n=="string"?[new re(t,n)]:(ve(n)||(n=[n]),Array.from(n).map(e=>typeof e=="string"?new re(t,e):e instanceof he?new re(t,e.data):e))}class $i extends Oe{constructor(n,e,s,i){super(n,e,s,i),this.getFillerOffset=th}}$i.prototype.is=function(t,n){return n?n===this.name&&(t==="containerElement"||t==="view:containerElement"||t==="element"||t==="view:element"):t==="containerElement"||t==="view:containerElement"||t==="element"||t==="view:element"||t==="node"||t==="view:node"};function th(){const t=[...this.getChildren()],n=t[this.childCount-1];if(n&&n.is("element","br"))return this.childCount;for(const e of t)if(!e.is("uiElement"))return null;return this.childCount}class Tn extends Sn($i){constructor(n,e,s,i){super(n,e,s,i),this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("placeholder",void 0),this.bind("isReadOnly").to(n),this.bind("isFocused").to(n,"isFocused",r=>r&&n.selection.editableElement==this),this.listenTo(n.selection,"change",()=>{this.isFocused=n.isFocused&&n.selection.editableElement==this})}destroy(){this.stopListening()}}Tn.prototype.is=function(t,n){return n?n===this.name&&(t==="editableElement"||t==="view:editableElement"||t==="containerElement"||t==="view:containerElement"||t==="element"||t==="view:element"):t==="editableElement"||t==="view:editableElement"||t==="containerElement"||t==="view:containerElement"||t==="element"||t==="view:element"||t==="node"||t==="view:node"};const Fs=Symbol("rootName");class nh extends Tn{constructor(n,e){super(n,e),this.rootName="main"}get rootName(){return this.getCustomProperty(Fs)}set rootName(n){this._setCustomProperty(Fs,n)}set _name(n){this.name=n}}nh.prototype.is=function(t,n){return n?n===this.name&&(t==="rootElement"||t==="view:rootElement"||t==="editableElement"||t==="view:editableElement"||t==="containerElement"||t==="view:containerElement"||t==="element"||t==="view:element"):t==="rootElement"||t==="view:rootElement"||t==="editableElement"||t==="view:editableElement"||t==="containerElement"||t==="view:containerElement"||t==="element"||t==="view:element"||t==="node"||t==="view:node"};let We=class{constructor(n={}){u(this,"direction");u(this,"boundaries");u(this,"singleCharacters");u(this,"shallow");u(this,"ignoreElementEnd");u(this,"_position");u(this,"_boundaryStartParent");u(this,"_boundaryEndParent");if(!n.boundaries&&!n.startPosition)throw new m("view-tree-walker-no-start-position",null);if(n.direction&&n.direction!="forward"&&n.direction!="backward")throw new m("view-tree-walker-unknown-direction",n.startPosition,{direction:n.direction});this.boundaries=n.boundaries||null,n.startPosition?this._position=C._createAt(n.startPosition):this._position=C._createAt(n.boundaries[n.direction=="backward"?"end":"start"]),this.direction=n.direction||"forward",this.singleCharacters=!!n.singleCharacters,this.shallow=!!n.shallow,this.ignoreElementEnd=!!n.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null}[Symbol.iterator](){return this}get position(){return this._position}skip(n){let e,s;do s=this.position,e=this.next();while(!e.done&&n(e.value));e.done||(this._position=s)}next(){return this.direction=="forward"?this._next():this._previous()}_next(){let n=this.position.clone();const e=this.position,s=n.parent;if(s.parent===null&&n.offset===s.childCount)return{done:!0,value:void 0};if(s===this._boundaryEndParent&&n.offset==this.boundaries.end.offset)return{done:!0,value:void 0};let i;if(s instanceof re){if(n.isAtEnd)return this._position=C._createAfter(s),this._next();i=s.data[n.offset]}else i=s.getChild(n.offset);if(i instanceof Oe){if(!this.shallow)n=new C(i,0);else{if(this.boundaries&&this.boundaries.end.isBefore(n))return{done:!0,value:void 0};n.offset++}return this._position=n,this._formatReturnValue("elementStart",i,e,n,1)}if(i instanceof re){if(this.singleCharacters)return n=new C(i,0),this._position=n,this._next();let r=i.data.length,o;return i==this._boundaryEndParent?(r=this.boundaries.end.offset,o=new he(i,0,r),n=C._createAfter(o)):(o=new he(i,0,i.data.length),n.offset++),this._position=n,this._formatReturnValue("text",o,e,n,r)}if(typeof i=="string"){let r;this.singleCharacters?r=1:r=(s===this._boundaryEndParent?this.boundaries.end.offset:s.data.length)-n.offset;const o=new he(s,n.offset,r);return n.offset+=r,this._position=n,this._formatReturnValue("text",o,e,n,r)}return n=C._createAfter(s),this._position=n,this.ignoreElementEnd?this._next():this._formatReturnValue("elementEnd",s,e,n)}_previous(){let n=this.position.clone();const e=this.position,s=n.parent;if(s.parent===null&&n.offset===0)return{done:!0,value:void 0};if(s==this._boundaryStartParent&&n.offset==this.boundaries.start.offset)return{done:!0,value:void 0};let i;if(s instanceof re){if(n.isAtStart)return this._position=C._createBefore(s),this._previous();i=s.data[n.offset-1]}else i=s.getChild(n.offset-1);if(i instanceof Oe)return this.shallow?(n.offset--,this._position=n,this._formatReturnValue("elementStart",i,e,n,1)):(n=new C(i,i.childCount),this._position=n,this.ignoreElementEnd?this._previous():this._formatReturnValue("elementEnd",i,e,n));if(i instanceof re){if(this.singleCharacters)return n=new C(i,i.data.length),this._position=n,this._previous();let r=i.data.length,o;if(i==this._boundaryStartParent){const a=this.boundaries.start.offset;o=new he(i,a,i.data.length-a),r=o.data.length,n=C._createBefore(o)}else o=new he(i,0,i.data.length),n.offset--;return this._position=n,this._formatReturnValue("text",o,e,n,r)}if(typeof i=="string"){let r;if(this.singleCharacters)r=1;else{const a=s===this._boundaryStartParent?this.boundaries.start.offset:0;r=n.offset-a}n.offset-=r;const o=new he(s,n.offset,r);return this._position=n,this._formatReturnValue("text",o,e,n,r)}return n=C._createBefore(s),this._position=n,this._formatReturnValue("elementStart",s,e,n,1)}_formatReturnValue(n,e,s,i,r){return e instanceof he&&(e.offsetInText+e.data.length==e.textNode.data.length&&(this.direction=="forward"&&!(this.boundaries&&this.boundaries.end.isEqual(this.position))?(i=C._createAfter(e.textNode),this._position=i):s=C._createAfter(e.textNode)),e.offsetInText===0&&(this.direction=="backward"&&!(this.boundaries&&this.boundaries.start.isEqual(this.position))?(i=C._createBefore(e.textNode),this._position=i):s=C._createBefore(e.textNode))),{done:!1,value:{type:n,item:e,previousPosition:s,nextPosition:i,length:r}}}},C=class pe extends ze{constructor(e,s){super();u(this,"parent");u(this,"offset");this.parent=e,this.offset=s}get nodeAfter(){return this.parent.is("$text")?null:this.parent.getChild(this.offset)||null}get nodeBefore(){return this.parent.is("$text")?null:this.parent.getChild(this.offset-1)||null}get isAtStart(){return this.offset===0}get isAtEnd(){const e=this.parent.is("$text")?this.parent.data.length:this.parent.childCount;return this.offset===e}get root(){return this.parent.root}get editableElement(){let e=this.parent;for(;!(e instanceof Tn);)if(e.parent)e=e.parent;else return null;return e}getShiftedBy(e){const s=pe._createAt(this),i=s.offset+e;return s.offset=i<0?0:i,s}getLastMatchingPosition(e,s={}){s.startPosition=this;const i=new We(s);return i.skip(e),i.position}getAncestors(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeSelf:!0})}getCommonAncestor(e){const s=this.getAncestors(),i=e.getAncestors();let r=0;for(;s[r]==i[r]&&s[r];)r++;return r===0?null:s[r-1]}isEqual(e){return this.parent==e.parent&&this.offset==e.offset}isBefore(e){return this.compareWith(e)=="before"}isAfter(e){return this.compareWith(e)=="after"}compareWith(e){if(this.root!==e.root)return"different";if(this.isEqual(e))return"same";const s=this.parent.is("node")?this.parent.getPath():[],i=e.parent.is("node")?e.parent.getPath():[];s.push(this.offset),i.push(e.offset);const r=H(s,i);switch(r){case"prefix":return"before";case"extension":return"after";default:return s[r]<i[r]?"before":"after"}}getWalker(e={}){return e.startPosition=this,new We(e)}clone(){return new pe(this.parent,this.offset)}static _createAt(e,s){if(e instanceof pe)return new this(e.parent,e.offset);{const i=e;if(s=="end")s=i.is("$text")?i.data.length:i.childCount;else{if(s=="before")return this._createBefore(i);if(s=="after")return this._createAfter(i);if(s!==0&&!s)throw new m("view-createpositionat-offset-required",i)}return new pe(i,s)}}static _createAfter(e){if(e.is("$textProxy"))return new pe(e.textNode,e.offsetInText+e.data.length);if(!e.parent)throw new m("view-position-after-root",e,{root:e});return new pe(e.parent,e.index+1)}static _createBefore(e){if(e.is("$textProxy"))return new pe(e.textNode,e.offsetInText);if(!e.parent)throw new m("view-position-before-root",e,{root:e});return new pe(e.parent,e.index)}};C.prototype.is=function(t){return t==="position"||t==="view:position"};let ue=class ke extends ze{constructor(e,s=null){super();u(this,"start");u(this,"end");this.start=e.clone(),this.end=s?s.clone():e.clone()}*[Symbol.iterator](){yield*new We({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return this.start.parent===this.end.parent}get root(){return this.start.root}getEnlarged(){let e=this.start.getLastMatchingPosition(Ot,{direction:"backward"}),s=this.end.getLastMatchingPosition(Ot);return e.parent.is("$text")&&e.isAtStart&&(e=C._createBefore(e.parent)),s.parent.is("$text")&&s.isAtEnd&&(s=C._createAfter(s.parent)),new ke(e,s)}getTrimmed(){let e=this.start.getLastMatchingPosition(Ot);if(e.isAfter(this.end)||e.isEqual(this.end))return new ke(e,e);let s=this.end.getLastMatchingPosition(Ot,{direction:"backward"});const i=e.nodeAfter,r=s.nodeBefore;return i&&i.is("$text")&&(e=new C(i,0)),r&&r.is("$text")&&(s=new C(r,r.data.length)),new ke(e,s)}isEqual(e){return this==e||this.start.isEqual(e.start)&&this.end.isEqual(e.end)}containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end)}containsRange(e,s=!1){e.isCollapsed&&(s=!1);const i=this.containsPosition(e.start)||s&&this.start.isEqual(e.start),r=this.containsPosition(e.end)||s&&this.end.isEqual(e.end);return i&&r}getDifference(e){const s=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&s.push(new ke(this.start,e.start)),this.containsPosition(e.end)&&s.push(new ke(e.end,this.end))):s.push(this.clone()),s}getIntersection(e){if(this.isIntersecting(e)){let s=this.start,i=this.end;return this.containsPosition(e.start)&&(s=e.start),this.containsPosition(e.end)&&(i=e.end),new ke(s,i)}return null}getWalker(e={}){return e.boundaries=this,new We(e)}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;let e=this.start.nodeAfter,s=this.end.nodeBefore;return this.start.parent.is("$text")&&this.start.isAtEnd&&this.start.parent.nextSibling&&(e=this.start.parent.nextSibling),this.end.parent.is("$text")&&this.end.isAtStart&&this.end.parent.previousSibling&&(s=this.end.parent.previousSibling),e&&e.is("element")&&e===s?e:null}clone(){return new ke(this.start,this.end)}*getItems(e={}){e.boundaries=this,e.ignoreElementEnd=!0;const s=new We(e);for(const i of s)yield i.item}*getPositions(e={}){e.boundaries=this;const s=new We(e);yield s.position;for(const i of s)yield i.nextPosition}isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}static _createFromParentsAndOffsets(e,s,i,r){return new this(new C(e,s),new C(i,r))}static _createFromPositionAndShift(e,s){const i=e,r=e.getShiftedBy(s);return s>0?new this(i,r):new this(r,i)}static _createIn(e){return this._createFromParentsAndOffsets(e,0,e,e.childCount)}static _createOn(e){const s=e.is("$textProxy")?e.offsetSize:1;return this._createFromPositionAndShift(C._createBefore(e),s)}};ue.prototype.is=function(t){return t==="range"||t==="view:range"};function Ot(t){return!!(t.item.is("attributeElement")||t.item.is("uiElement"))}let Ii=class Fi extends V(ze){constructor(...e){super();u(this,"_ranges");u(this,"_lastRangeBackward");u(this,"_isFake");u(this,"_fakeSelectionLabel");this._ranges=[],this._lastRangeBackward=!1,this._isFake=!1,this._fakeSelectionLabel="",e.length&&this.setTo(...e)}get isFake(){return this._isFake}get fakeSelectionLabel(){return this._fakeSelectionLabel}get anchor(){if(!this._ranges.length)return null;const e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.end:e.start).clone()}get focus(){if(!this._ranges.length)return null;const e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.start:e.end).clone()}get isCollapsed(){return this.rangeCount===1&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}get editableElement(){return this.anchor?this.anchor.editableElement:null}*getRanges(){for(const e of this._ranges)yield e.clone()}getFirstRange(){let e=null;for(const s of this._ranges)(!e||s.start.isBefore(e.start))&&(e=s);return e?e.clone():null}getLastRange(){let e=null;for(const s of this._ranges)(!e||s.end.isAfter(e.end))&&(e=s);return e?e.clone():null}getFirstPosition(){const e=this.getFirstRange();return e?e.start.clone():null}getLastPosition(){const e=this.getLastRange();return e?e.end.clone():null}isEqual(e){if(this.isFake!=e.isFake||this.isFake&&this.fakeSelectionLabel!=e.fakeSelectionLabel||this.rangeCount!=e.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;for(const s of this._ranges){let i=!1;for(const r of e._ranges)if(s.isEqual(r)){i=!0;break}if(!i)return!1}return!0}isSimilar(e){if(this.isBackward!=e.isBackward)return!1;const s=Ns(this.getRanges()),i=Ns(e.getRanges());if(s!=i)return!1;if(s==0)return!0;for(let r of this.getRanges()){r=r.getTrimmed();let o=!1;for(let a of e.getRanges())if(a=a.getTrimmed(),r.start.isEqual(a.start)&&r.end.isEqual(a.end)){o=!0;break}if(!o)return!1}return!0}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}setTo(...e){let[s,i,r]=e;if(typeof i=="object"&&(r=i,i=void 0),s===null)this._setRanges([]),this._setFakeOptions(r);else if(s instanceof Fi||s instanceof ji)this._setRanges(s.getRanges(),s.isBackward),this._setFakeOptions({fake:s.isFake,label:s.fakeSelectionLabel});else if(s instanceof ue)this._setRanges([s],r&&r.backward),this._setFakeOptions(r);else if(s instanceof C)this._setRanges([new ue(s)]),this._setFakeOptions(r);else if(s instanceof De){const o=!!r&&!!r.backward;let a;if(i===void 0)throw new m("view-selection-setto-required-second-parameter",this);i=="in"?a=ue._createIn(s):i=="on"?a=ue._createOn(s):a=new ue(C._createAt(s,i)),this._setRanges([a],o),this._setFakeOptions(r)}else if(ve(s))this._setRanges(s,r&&r.backward),this._setFakeOptions(r);else throw new m("view-selection-setto-not-selectable",this);this.fire("change")}setFocus(e,s){if(this.anchor===null)throw new m("view-selection-setfocus-no-ranges",this);const i=C._createAt(e,s);if(i.compareWith(this.focus)=="same")return;const r=this.anchor;this._ranges.pop(),i.compareWith(r)=="before"?this._addRange(new ue(i,r),!0):this._addRange(new ue(r,i)),this.fire("change")}_setRanges(e,s=!1){e=Array.from(e),this._ranges=[];for(const i of e)this._addRange(i);this._lastRangeBackward=!!s}_setFakeOptions(e={}){this._isFake=!!e.fake,this._fakeSelectionLabel=e.fake&&e.label||""}_addRange(e,s=!1){if(!(e instanceof ue))throw new m("view-selection-add-range-not-range",this);this._pushRange(e),this._lastRangeBackward=!!s}_pushRange(e){for(const s of this._ranges)if(e.isIntersecting(s))throw new m("view-selection-range-intersects",this,{addedRange:e,intersectingRange:s});this._ranges.push(new ue(e.start,e.end))}};Ii.prototype.is=function(t){return t==="selection"||t==="view:selection"};let ji=class extends V(ze){constructor(...e){super();u(this,"_selection");this._selection=new Ii,this._selection.delegate("change").to(this),e.length&&this._selection.setTo(...e)}get isFake(){return this._selection.isFake}get fakeSelectionLabel(){return this._selection.fakeSelectionLabel}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get isCollapsed(){return this._selection.isCollapsed}get rangeCount(){return this._selection.rangeCount}get isBackward(){return this._selection.isBackward}get editableElement(){return this._selection.editableElement}get _ranges(){return this._selection._ranges}*getRanges(){yield*this._selection.getRanges()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getSelectedElement(){return this._selection.getSelectedElement()}isEqual(e){return this._selection.isEqual(e)}isSimilar(e){return this._selection.isSimilar(e)}_setTo(...e){this._selection.setTo(...e)}_setFocus(e,s){this._selection.setFocus(e,s)}};ji.prototype.is=function(t){return t==="selection"||t=="documentSelection"||t=="view:selection"||t=="view:documentSelection"};class sh extends Ze{constructor(e,s,i){super(e,s);u(this,"startRange");u(this,"_eventPhase");u(this,"_currentTarget");this.startRange=i,this._eventPhase="none",this._currentTarget=null}get eventPhase(){return this._eventPhase}get currentTarget(){return this._currentTarget}}const Qt=Symbol("bubbling contexts");function js(t){class n extends t{fire(s,...i){try{const r=s instanceof Ze?s:new Ze(this,s),o=Xt(this);if(!o.size)return;if(et(r,"capturing",this),Ue(o,"$capture",r,...i))return r.return;const a=r.startRange||this.selection.getFirstRange(),l=a?a.getContainedElement():null,c=l?!!Li(o,l):!1;let h=l||ih(a);if(et(r,"atTarget",h),!c){if(Ue(o,"$text",r,...i))return r.return;et(r,"bubbling",h)}for(;h;){if(h.is("rootElement")){if(Ue(o,"$root",r,...i))return r.return}else if(h.is("element")&&Ue(o,h.name,r,...i))return r.return;if(Ue(o,h,r,...i))return r.return;h=h.parent,et(r,"bubbling",h)}return et(r,"bubbling",this),Ue(o,"$document",r,...i),r.return}catch(r){/* istanbul ignore next -- @preserve */m.rethrowUnexpectedError(r,this)}}_addEventListener(s,i,r){const o=Mt(r.context||"$document"),a=Xt(this);for(const l of o){let c=a.get(l);c||(c=new(V()),a.set(l,c)),this.listenTo(c,s,i,r)}}_removeEventListener(s,i){const r=Xt(this);for(const o of r.values())this.stopListening(o,s,i)}}return n}{const t=js(Object);["fire","_addEventListener","_removeEventListener"].forEach(n=>{js[n]=t.prototype[n]})}function et(t,n,e){t instanceof sh&&(t._eventPhase=n,t._currentTarget=e)}function Ue(t,n,e,...s){const i=typeof n=="string"?t.get(n):Li(t,n);return i?(i.fire(e,...s),e.stop.called):!1}function Li(t,n){for(const[e,s]of t)if(typeof e=="function"&&e(n))return s;return null}function Xt(t){return t[Qt]||(t[Qt]=new Map),t[Qt]}function ih(t){if(!t)return null;const n=t.start.parent,e=t.end.parent,s=n.getPath(),i=e.getPath();return s.length>i.length?n:e}const Ls=10;class qi extends Oe{constructor(e,s,i,r){super(e,s,i,r);u(this,"_priority",Ls);u(this,"_id",null);u(this,"_clonesGroup",null);this.getFillerOffset=rh}get priority(){return this._priority}get id(){return this._id}getElementsWithSameId(){if(this.id===null)throw new m("attribute-element-get-elements-with-same-id-no-id",this);return new Set(this._clonesGroup)}isSimilar(e){return this.id!==null||e.id!==null?this.id===e.id:super.isSimilar(e)&&this.priority==e.priority}_clone(e=!1){const s=super._clone(e);return s._priority=this._priority,s._id=this._id,s}}u(qi,"DEFAULT_PRIORITY",Ls);qi.prototype.is=function(t,n){return n?n===this.name&&(t==="attributeElement"||t==="view:attributeElement"||t==="element"||t==="view:element"):t==="attributeElement"||t==="view:attributeElement"||t==="element"||t==="view:element"||t==="node"||t==="view:node"};function rh(){if(Yt(this))return null;let t=this.parent;for(;t&&t.is("attributeElement");){if(Yt(t)>1)return null;t=t.parent}return!t||Yt(t)>1?null:this.childCount}function Yt(t){return Array.from(t.getChildren()).filter(n=>!n.is("uiElement")).length}class oh extends Oe{constructor(n,e,s,i){super(n,e,s,i),this.getFillerOffset=ah}_insertChild(n,e){if(e&&(e instanceof De||Array.from(e).length>0))throw new m("view-emptyelement-cannot-add",[this,e]);return 0}}oh.prototype.is=function(t,n){return n?n===this.name&&(t==="emptyElement"||t==="view:emptyElement"||t==="element"||t==="view:element"):t==="emptyElement"||t==="view:emptyElement"||t==="element"||t==="view:element"||t==="node"||t==="view:node"};function ah(){return null}class lh extends Oe{constructor(n,e,s,i){super(n,e,s,i),this.getFillerOffset=ch}_insertChild(n,e){if(e&&(e instanceof De||Array.from(e).length>0))throw new m("view-uielement-cannot-add",[this,e]);return 0}render(n,e){return this.toDomElement(n)}toDomElement(n){const e=n.createElement(this.name);for(const s of this.getAttributeKeys())e.setAttribute(s,this.getAttribute(s));return e}}lh.prototype.is=function(t,n){return n?n===this.name&&(t==="uiElement"||t==="view:uiElement"||t==="element"||t==="view:element"):t==="uiElement"||t==="view:uiElement"||t==="element"||t==="view:element"||t==="node"||t==="view:node"};function ch(){return null}class uh extends Oe{constructor(n,e,s,i){super(n,e,s,i),this.getFillerOffset=hh}_insertChild(n,e){if(e&&(e instanceof De||Array.from(e).length>0))throw new m("view-rawelement-cannot-add",[this,e]);return 0}render(n,e){}}uh.prototype.is=function(t,n){return n?n===this.name&&(t==="rawElement"||t==="view:rawElement"||t==="element"||t==="view:element"):t==="rawElement"||t==="view:rawElement"||t===this.name||t==="view:"+this.name||t==="element"||t==="view:element"||t==="node"||t==="view:node"};function hh(){return null}let fh=class extends V(ze){constructor(e,s){super();u(this,"document");u(this,"_children",[]);u(this,"_customProperties",new Map);this.document=e,s&&this._insertChild(0,s)}[Symbol.iterator](){return this._children[Symbol.iterator]()}get childCount(){return this._children.length}get isEmpty(){return this.childCount===0}get root(){return this}get parent(){return null}get name(){}get getFillerOffset(){}getCustomProperty(e){return this._customProperties.get(e)}*getCustomProperties(){yield*this._customProperties.entries()}_appendChild(e){return this._insertChild(this.childCount,e)}getChild(e){return this._children[e]}getChildIndex(e){return this._children.indexOf(e)}getChildren(){return this._children[Symbol.iterator]()}_insertChild(e,s){this._fireChange("children",this);let i=0;const r=dh(this.document,s);for(const o of r)o.parent!==null&&o._remove(),o.parent=this,this._children.splice(e,0,o),e++,i++;return i}_removeChildren(e,s=1){this._fireChange("children",this);for(let i=e;i<e+s;i++)this._children[i].parent=null;return this._children.splice(e,s)}_fireChange(e,s){this.fire("change:"+e,s)}_setCustomProperty(e,s){this._customProperties.set(e,s)}_removeCustomProperty(e){return this._customProperties.delete(e)}};fh.prototype.is=function(t){return t==="documentFragment"||t==="view:documentFragment"};function dh(t,n){return typeof n=="string"?[new re(t,n)]:(ve(n)||(n=[n]),Array.from(n).map(e=>typeof e=="string"?new re(t,e):e instanceof he?new re(t,e.data):e))}const gh=t=>t.createTextNode(" "),ph=t=>{const n=t.createElement("span");return n.dataset.ckeFiller="true",n.innerText=" ",n},mh=t=>{const n=t.createElement("br");return n.dataset.ckeFiller="true",n};mh(dt.document);gh(dt.document);ph(dt.document);/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Re{is(){throw new Error("is() method is abstract")}}let Qe=class extends Re{constructor(e){super();u(this,"parent",null);u(this,"_attrs");u(this,"_index",null);u(this,"_startOffset",null);this._attrs=pt(e)}get document(){return null}get index(){return this._index}get startOffset(){return this._startOffset}get offsetSize(){return 1}get endOffset(){return this.startOffset===null?null:this.startOffset+this.offsetSize}get nextSibling(){const e=this.index;return e!==null&&this.parent.getChild(e+1)||null}get previousSibling(){const e=this.index;return e!==null&&this.parent.getChild(e-1)||null}get root(){let e=this;for(;e.parent;)e=e.parent;return e}isAttached(){return this.parent===null?!1:this.root.isAttached()}getPath(){const e=[];let s=this;for(;s.parent;)e.unshift(s.startOffset),s=s.parent;return e}getAncestors(e={}){const s=[];let i=e.includeSelf?this:this.parent;for(;i;)s[e.parentFirst?"push":"unshift"](i),i=i.parent;return s}getCommonAncestor(e,s={}){const i=this.getAncestors(s),r=e.getAncestors(s);let o=0;for(;i[o]==r[o]&&i[o];)o++;return o===0?null:i[o-1]}isBefore(e){if(this==e||this.root!==e.root)return!1;const s=this.getPath(),i=e.getPath(),r=H(s,i);switch(r){case"prefix":return!0;case"extension":return!1;default:return s[r]<i[r]}}isAfter(e){return this==e||this.root!==e.root?!1:!this.isBefore(e)}hasAttribute(e){return this._attrs.has(e)}getAttribute(e){return this._attrs.get(e)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}toJSON(){const e={};return this._attrs.size&&(e.attributes=Array.from(this._attrs).reduce((s,i)=>(s[i[0]]=i[1],s),{})),e}_clone(e){return new this.constructor(this._attrs)}_remove(){this.parent._removeChildren(this.index)}_setAttribute(e,s){this._attrs.set(e,s)}_setAttributesTo(e){this._attrs=pt(e)}_removeAttribute(e){return this._attrs.delete(e)}_clearAttributes(){this._attrs.clear()}};Qe.prototype.is=function(t){return t==="node"||t==="model:node"};class lt{constructor(n){u(this,"_nodes",[]);u(this,"_offsetToNode",[]);n&&this._insertNodes(0,n)}[Symbol.iterator](){return this._nodes[Symbol.iterator]()}get length(){return this._nodes.length}get maxOffset(){return this._offsetToNode.length}getNode(n){return this._nodes[n]||null}getNodeAtOffset(n){return this._offsetToNode[n]||null}getNodeIndex(n){return n.index}getNodeStartOffset(n){return n.startOffset}indexToOffset(n){if(n==this._nodes.length)return this.maxOffset;const e=this._nodes[n];if(!e)throw new m("model-nodelist-index-out-of-bounds",this);return this.getNodeStartOffset(e)}offsetToIndex(n){if(n==this._offsetToNode.length)return this._nodes.length;const e=this._offsetToNode[n];if(!e)throw new m("model-nodelist-offset-out-of-bounds",this,{offset:n,nodeList:this});return this.getNodeIndex(e)}_insertNodes(n,e){for(const o of e)if(!(o instanceof Qe))throw new m("model-nodelist-insertnodes-not-node",this);const s=Array.from(e),i=_h(s);let r=this.indexToOffset(n);this._nodes=Bs(this._nodes,s,n,0),this._offsetToNode=Bs(this._offsetToNode,i,r,0);for(let o=n;o<this._nodes.length;o++)this._nodes[o]._index=o,this._nodes[o]._startOffset=r,r+=this._nodes[o].offsetSize}_removeNodes(n,e=1){if(e==0)return[];let s=this.indexToOffset(n);const i=this._nodes.splice(n,e),r=i[i.length-1],o=r.startOffset+r.offsetSize-s;this._offsetToNode.splice(s,o);for(const a of i)a._index=null,a._startOffset=null;for(let a=n;a<this._nodes.length;a++)this._nodes[a]._index=a,this._nodes[a]._startOffset=s,s+=this._nodes[a].offsetSize;return i}toJSON(){return this._nodes.map(n=>n.toJSON())}}function _h(t){const n=[];for(const e of t){const s=n.length;n.length+=e.offsetSize,n.fill(e,s)}return n}class L extends Qe{constructor(e,s){super(s);u(this,"_data");this._data=e||""}get offsetSize(){return this.data.length}get data(){return this._data}toJSON(){const e=super.toJSON();return e.data=this.data,e}_clone(){return new L(this.data,this.getAttributes())}static fromJSON(e){return new L(e.data,e.attributes)}}L.prototype.is=function(t){return t==="$text"||t==="model:$text"||t==="text"||t==="model:text"||t==="node"||t==="model:node"};class Fe extends Re{constructor(e,s,i){super();u(this,"textNode");u(this,"data");u(this,"offsetInText");if(this.textNode=e,s<0||s>e.offsetSize)throw new m("model-textproxy-wrong-offsetintext",this);if(i<0||s+i>e.offsetSize)throw new m("model-textproxy-wrong-length",this);this.data=e.data.substring(s,s+i),this.offsetInText=s}get startOffset(){return this.textNode.startOffset!==null?this.textNode.startOffset+this.offsetInText:null}get offsetSize(){return this.data.length}get endOffset(){return this.startOffset!==null?this.startOffset+this.offsetSize:null}get isPartial(){return this.offsetSize!==this.textNode.offsetSize}get parent(){return this.textNode.parent}get root(){return this.textNode.root}getPath(){const e=this.textNode.getPath();return e.length>0&&(e[e.length-1]+=this.offsetInText),e}getAncestors(e={}){const s=[];let i=e.includeSelf?this:this.parent;for(;i;)s[e.parentFirst?"push":"unshift"](i),i=i.parent;return s}hasAttribute(e){return this.textNode.hasAttribute(e)}getAttribute(e){return this.textNode.getAttribute(e)}getAttributes(){return this.textNode.getAttributes()}getAttributeKeys(){return this.textNode.getAttributeKeys()}}Fe.prototype.is=function(t){return t==="$textProxy"||t==="model:$textProxy"||t==="textProxy"||t==="model:textProxy"};class oe extends Qe{constructor(e,s,i){super(s);u(this,"name");u(this,"_children",new lt);this.name=e,i&&this._insertChild(0,i)}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}getChild(e){return this._children.getNode(e)}getChildAtOffset(e){return this._children.getNodeAtOffset(e)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(e){return this._children.getNodeIndex(e)}getChildStartOffset(e){return this._children.getNodeStartOffset(e)}offsetToIndex(e){return this._children.offsetToIndex(e)}getNodeByPath(e){let s=this;for(const i of e)s=s.getChildAtOffset(i);return s}findAncestor(e,s={}){let i=s.includeSelf?this:this.parent;for(;i;){if(i.name===e)return i;i=i.parent}return null}toJSON(){const e=super.toJSON();if(e.name=this.name,this._children.length>0){e.children=[];for(const s of this._children)e.children.push(s.toJSON())}return e}_clone(e=!1){const s=e?Array.from(this._children).map(i=>i._clone(!0)):void 0;return new oe(this.name,this.getAttributes(),s)}_appendChild(e){this._insertChild(this.childCount,e)}_insertChild(e,s){const i=yh(s);for(const r of i)r.parent!==null&&r._remove(),r.parent=this;this._children._insertNodes(e,i)}_removeChildren(e,s=1){const i=this._children._removeNodes(e,s);for(const r of i)r.parent=null;return i}static fromJSON(e){let s;if(e.children){s=[];for(const i of e.children)i.name?s.push(oe.fromJSON(i)):s.push(L.fromJSON(i))}return new oe(e.name,e.attributes,s)}}oe.prototype.is=function(t,n){return n?n===this.name&&(t==="element"||t==="model:element"):t==="element"||t==="model:element"||t==="node"||t==="model:node"};function yh(t){return typeof t=="string"?[new L(t)]:(ve(t)||(t=[t]),Array.from(t).map(n=>typeof n=="string"?new L(n):n instanceof Fe?new L(n.data,n.getAttributes()):n))}class st{constructor(n){u(this,"direction");u(this,"boundaries");u(this,"singleCharacters");u(this,"shallow");u(this,"ignoreElementEnd");u(this,"_position");u(this,"_boundaryStartParent");u(this,"_boundaryEndParent");u(this,"_visitedParent");if(!n||!n.boundaries&&!n.startPosition)throw new m("model-tree-walker-no-start-position",null);const e=n.direction||"forward";if(e!="forward"&&e!="backward")throw new m("model-tree-walker-unknown-direction",n,{direction:e});this.direction=e,this.boundaries=n.boundaries||null,n.startPosition?this._position=n.startPosition.clone():this._position=b._createAt(this.boundaries[this.direction=="backward"?"end":"start"]),this.position.stickiness="toNone",this.singleCharacters=!!n.singleCharacters,this.shallow=!!n.shallow,this.ignoreElementEnd=!!n.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null,this._visitedParent=this.position.parent}[Symbol.iterator](){return this}get position(){return this._position}skip(n){let e,s,i,r;do i=this.position,r=this._visitedParent,{done:e,value:s}=this.next();while(!e&&n(s));e||(this._position=i,this._visitedParent=r)}next(){return this.direction=="forward"?this._next():this._previous()}_next(){const n=this.position,e=this.position.clone(),s=this._visitedParent;if(s.parent===null&&e.offset===s.maxOffset)return{done:!0,value:void 0};if(s===this._boundaryEndParent&&e.offset==this.boundaries.end.offset)return{done:!0,value:void 0};const i=ct(e,s),r=i||zi(e,s,i);if(r instanceof oe){if(!this.shallow)e.path.push(0),this._visitedParent=r;else{if(this.boundaries&&this.boundaries.end.isBefore(e))return{done:!0,value:void 0};e.offset++}return this._position=e,Be("elementStart",r,n,e,1)}if(r instanceof L){let o;if(this.singleCharacters)o=1;else{let c=r.endOffset;this._boundaryEndParent==s&&this.boundaries.end.offset<c&&(c=this.boundaries.end.offset),o=c-e.offset}const a=e.offset-r.startOffset,l=new Fe(r,a,o);return e.offset+=o,this._position=e,Be("text",l,n,e,o)}return e.path.pop(),e.offset++,this._position=e,this._visitedParent=s.parent,this.ignoreElementEnd?this._next():Be("elementEnd",s,n,e)}_previous(){const n=this.position,e=this.position.clone(),s=this._visitedParent;if(s.parent===null&&e.offset===0)return{done:!0,value:void 0};if(s==this._boundaryStartParent&&e.offset==this.boundaries.start.offset)return{done:!0,value:void 0};const i=e.parent,r=ct(e,i),o=r||Di(e,i,r);if(o instanceof oe)return e.offset--,this.shallow?(this._position=e,Be("elementStart",o,n,e,1)):(e.path.push(o.maxOffset),this._position=e,this._visitedParent=o,this.ignoreElementEnd?this._previous():Be("elementEnd",o,n,e));if(o instanceof L){let a;if(this.singleCharacters)a=1;else{let h=o.startOffset;this._boundaryStartParent==s&&this.boundaries.start.offset>h&&(h=this.boundaries.start.offset),a=e.offset-h}const l=e.offset-o.startOffset,c=new Fe(o,l-a,a);return e.offset-=a,this._position=e,Be("text",c,n,e,a)}return e.path.pop(),this._position=e,this._visitedParent=s.parent,Be("elementStart",s,n,e,1)}}function Be(t,n,e,s,i){return{done:!1,value:{type:t,item:n,previousPosition:e,nextPosition:s,length:i}}}class b extends Re{constructor(e,s,i="toNone"){super();u(this,"root");u(this,"path");u(this,"stickiness");if(!e.is("element")&&!e.is("documentFragment"))throw new m("model-position-root-invalid",e);if(!(s instanceof Array)||s.length===0)throw new m("model-position-path-incorrect-format",e,{path:s});e.is("rootElement")?s=s.slice():(s=[...e.getPath(),...s],e=e.root),this.root=e,this.path=s,this.stickiness=i}get offset(){return this.path[this.path.length-1]}set offset(e){this.path[this.path.length-1]=e}get parent(){let e=this.root;for(let s=0;s<this.path.length-1;s++)if(e=e.getChildAtOffset(this.path[s]),!e)throw new m("model-position-path-incorrect",this,{position:this});if(e.is("$text"))throw new m("model-position-path-incorrect",this,{position:this});return e}get index(){return this.parent.offsetToIndex(this.offset)}get textNode(){return ct(this,this.parent)}get nodeAfter(){const e=this.parent;return zi(this,e,ct(this,e))}get nodeBefore(){const e=this.parent;return Di(this,e,ct(this,e))}get isAtStart(){return this.offset===0}get isAtEnd(){return this.offset==this.parent.maxOffset}isValid(){if(this.offset<0)return!1;let e=this.root;for(let s=0;s<this.path.length-1;s++)if(e=e.getChildAtOffset(this.path[s]),!e)return!1;return this.offset<=e.maxOffset}compareWith(e){if(this.root!=e.root)return"different";const s=H(this.path,e.path);switch(s){case"same":return"same";case"prefix":return"before";case"extension":return"after";default:return this.path[s]<e.path[s]?"before":"after"}}getLastMatchingPosition(e,s={}){s.startPosition=this;const i=new st(s);return i.skip(e),i.position}getParentPath(){return this.path.slice(0,-1)}getAncestors(){const e=this.parent;return e.is("documentFragment")?[e]:e.getAncestors({includeSelf:!0})}findAncestor(e){const s=this.parent;return s.is("element")?s.findAncestor(e,{includeSelf:!0}):null}getCommonPath(e){if(this.root!=e.root)return[];const s=H(this.path,e.path),i=typeof s=="string"?Math.min(this.path.length,e.path.length):s;return this.path.slice(0,i)}getCommonAncestor(e){const s=this.getAncestors(),i=e.getAncestors();let r=0;for(;s[r]==i[r]&&s[r];)r++;return r===0?null:s[r-1]}getShiftedBy(e){const s=this.clone(),i=s.offset+e;return s.offset=i<0?0:i,s}isAfter(e){return this.compareWith(e)=="after"}isBefore(e){return this.compareWith(e)=="before"}isEqual(e){return this.compareWith(e)=="same"}isTouching(e){if(this.root!==e.root)return!1;const s=Math.min(this.path.length,e.path.length);for(let i=0;i<s;i++){const r=this.path[i]-e.path[i];if(r<-1||r>1)return!1;if(r===1)return qs(e,this,i);if(r===-1)return qs(this,e,i)}return this.path.length===e.path.length?!0:this.path.length>e.path.length?dn(this.path,s):dn(e.path,s)}hasSameParentAs(e){if(this.root!==e.root)return!1;const s=this.getParentPath(),i=e.getParentPath();return H(s,i)=="same"}getTransformedByOperation(e){let s;switch(e.type){case"insert":s=this._getTransformedByInsertOperation(e);break;case"move":case"remove":case"reinsert":s=this._getTransformedByMoveOperation(e);break;case"split":s=this._getTransformedBySplitOperation(e);break;case"merge":s=this._getTransformedByMergeOperation(e);break;default:s=b._createAt(this);break}return s}_getTransformedByInsertOperation(e){return this._getTransformedByInsertion(e.position,e.howMany)}_getTransformedByMoveOperation(e){return this._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany)}_getTransformedBySplitOperation(e){const s=e.movedRange;return s.containsPosition(this)||s.start.isEqual(this)&&this.stickiness=="toNext"?this._getCombined(e.splitPosition,e.moveTargetPosition):e.graveyardPosition?this._getTransformedByMove(e.graveyardPosition,e.insertionPosition,1):this._getTransformedByInsertion(e.insertionPosition,1)}_getTransformedByMergeOperation(e){const s=e.movedRange,i=s.containsPosition(this)||s.start.isEqual(this);let r;return i?(r=this._getCombined(e.sourcePosition,e.targetPosition),e.sourcePosition.isBefore(e.targetPosition)&&(r=r._getTransformedByDeletion(e.deletionPosition,1))):this.isEqual(e.deletionPosition)?r=b._createAt(e.deletionPosition):r=this._getTransformedByMove(e.deletionPosition,e.graveyardPosition,1),r}_getTransformedByDeletion(e,s){const i=b._createAt(this);if(this.root!=e.root)return i;if(H(e.getParentPath(),this.getParentPath())=="same"){if(e.offset<this.offset){if(e.offset+s>this.offset)return null;i.offset-=s}}else if(H(e.getParentPath(),this.getParentPath())=="prefix"){const r=e.path.length-1;if(e.offset<=this.path[r]){if(e.offset+s>this.path[r])return null;i.path[r]-=s}}return i}_getTransformedByInsertion(e,s){const i=b._createAt(this);if(this.root!=e.root)return i;if(H(e.getParentPath(),this.getParentPath())=="same")(e.offset<this.offset||e.offset==this.offset&&this.stickiness!="toPrevious")&&(i.offset+=s);else if(H(e.getParentPath(),this.getParentPath())=="prefix"){const r=e.path.length-1;e.offset<=this.path[r]&&(i.path[r]+=s)}return i}_getTransformedByMove(e,s,i){if(s=s._getTransformedByDeletion(e,i),e.isEqual(s))return b._createAt(this);const r=this._getTransformedByDeletion(e,i);return r===null||e.isEqual(this)&&this.stickiness=="toNext"||e.getShiftedBy(i).isEqual(this)&&this.stickiness=="toPrevious"?this._getCombined(e,s):r._getTransformedByInsertion(s,i)}_getCombined(e,s){const i=e.path.length-1,r=b._createAt(s);return r.stickiness=this.stickiness,r.offset=r.offset+this.path[i]-e.offset,r.path=[...r.path,...this.path.slice(i+1)],r}toJSON(){return{root:this.root.toJSON(),path:Array.from(this.path),stickiness:this.stickiness}}clone(){return new this.constructor(this.root,this.path,this.stickiness)}static _createAt(e,s,i="toNone"){if(e instanceof b)return new b(e.root,e.path,e.stickiness);{const r=e;if(s=="end")s=r.maxOffset;else{if(s=="before")return this._createBefore(r,i);if(s=="after")return this._createAfter(r,i);if(s!==0&&!s)throw new m("model-createpositionat-offset-required",[this,e])}if(!r.is("element")&&!r.is("documentFragment"))throw new m("model-position-parent-incorrect",[this,e]);const o=r.getPath();return o.push(s),new this(r.root,o,i)}}static _createAfter(e,s){if(!e.parent)throw new m("model-position-after-root",[this,e],{root:e});return this._createAt(e.parent,e.endOffset,s)}static _createBefore(e,s){if(!e.parent)throw new m("model-position-before-root",e,{root:e});return this._createAt(e.parent,e.startOffset,s)}static fromJSON(e,s){if(e.root==="$graveyard"){const i=new b(s.graveyard,e.path);return i.stickiness=e.stickiness,i}if(!s.getRoot(e.root))throw new m("model-position-fromjson-no-root",s,{rootName:e.root});return new b(s.getRoot(e.root),e.path,e.stickiness)}}b.prototype.is=function(t){return t==="position"||t==="model:position"};function ct(t,n){const e=n.getChildAtOffset(t.offset);return e&&e.is("$text")&&e.startOffset<t.offset?e:null}function zi(t,n,e){return e!==null?null:n.getChildAtOffset(t.offset)}function Di(t,n,e){return e!==null?null:n.getChild(n.offsetToIndex(t.offset)-1)}function qs(t,n,e){return!(e+1===t.path.length||!dn(n.path,e+1)||!wh(t,e+1))}function dn(t,n){for(;n<t.length;){if(t[n]!==0)return!1;n++}return!0}function wh(t,n){let e=t.parent,s=t.path.length-1,i=0;for(;s>=n;){if(t.path[s]+i!==e.maxOffset)return!1;i=1,s--,e=e.parent}return!0}class y extends Re{constructor(e,s){super();u(this,"start");u(this,"end");this.start=b._createAt(e),this.end=s?b._createAt(s):b._createAt(e),this.start.stickiness=this.isCollapsed?"toNone":"toNext",this.end.stickiness=this.isCollapsed?"toNone":"toPrevious"}*[Symbol.iterator](){yield*new st({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){const e=this.start.getParentPath(),s=this.end.getParentPath();return H(e,s)=="same"}get root(){return this.start.root}containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end)}containsRange(e,s=!1){e.isCollapsed&&(s=!1);const i=this.containsPosition(e.start)||s&&this.start.isEqual(e.start),r=this.containsPosition(e.end)||s&&this.end.isEqual(e.end);return i&&r}containsItem(e){const s=b._createBefore(e);return this.containsPosition(s)||this.start.isEqual(s)}isEqual(e){return this.start.isEqual(e.start)&&this.end.isEqual(e.end)}isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}getDifference(e){const s=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&s.push(new y(this.start,e.start)),this.containsPosition(e.end)&&s.push(new y(e.end,this.end))):s.push(new y(this.start,this.end)),s}getIntersection(e){if(this.isIntersecting(e)){let s=this.start,i=this.end;return this.containsPosition(e.start)&&(s=e.start),this.containsPosition(e.end)&&(i=e.end),new y(s,i)}return null}getJoined(e,s=!1){let i=this.isIntersecting(e);if(i||(this.start.isBefore(e.start)?i=s?this.end.isTouching(e.start):this.end.isEqual(e.start):i=s?e.end.isTouching(this.start):e.end.isEqual(this.start)),!i)return null;let r=this.start,o=this.end;return e.start.isBefore(r)&&(r=e.start),e.end.isAfter(o)&&(o=e.end),new y(r,o)}getMinimalFlatRanges(){const e=[],s=this.start.getCommonPath(this.end).length,i=b._createAt(this.start);let r=i.parent;for(;i.path.length>s+1;){const o=r.maxOffset-i.offset;o!==0&&e.push(new y(i,i.getShiftedBy(o))),i.path=i.path.slice(0,-1),i.offset++,r=r.parent}for(;i.path.length<=this.end.path.length;){const o=this.end.path[i.path.length-1],a=o-i.offset;a!==0&&e.push(new y(i,i.getShiftedBy(a))),i.offset=o,i.path.push(0)}return e}getWalker(e={}){return e.boundaries=this,new st(e)}*getItems(e={}){e.boundaries=this,e.ignoreElementEnd=!0;const s=new st(e);for(const i of s)yield i.item}*getPositions(e={}){e.boundaries=this;const s=new st(e);yield s.position;for(const i of s)yield i.nextPosition}getTransformedByOperation(e){switch(e.type){case"insert":return this._getTransformedByInsertOperation(e);case"move":case"remove":case"reinsert":return this._getTransformedByMoveOperation(e);case"split":return[this._getTransformedBySplitOperation(e)];case"merge":return[this._getTransformedByMergeOperation(e)]}return[new y(this.start,this.end)]}getTransformedByOperations(e){const s=[new y(this.start,this.end)];for(const i of e)for(let r=0;r<s.length;r++){const o=s[r].getTransformedByOperation(i);s.splice(r,1,...o),r+=o.length-1}for(let i=0;i<s.length;i++){const r=s[i];for(let o=i+1;o<s.length;o++){const a=s[o];(r.containsRange(a)||a.containsRange(r)||r.isEqual(a))&&s.splice(o,1)}}return s}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;const e=this.start.nodeAfter,s=this.end.nodeBefore;return e&&e.is("element")&&e===s?e:null}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}clone(){return new this.constructor(this.start,this.end)}_getTransformedByInsertOperation(e,s=!1){return this._getTransformedByInsertion(e.position,e.howMany,s)}_getTransformedByMoveOperation(e,s=!1){const i=e.sourcePosition,r=e.howMany,o=e.targetPosition;return this._getTransformedByMove(i,o,r,s)}_getTransformedBySplitOperation(e){const s=this.start._getTransformedBySplitOperation(e);let i=this.end._getTransformedBySplitOperation(e);return this.end.isEqual(e.insertionPosition)&&(i=this.end.getShiftedBy(1)),s.root!=i.root&&(i=this.end.getShiftedBy(-1)),new y(s,i)}_getTransformedByMergeOperation(e){if(this.start.isEqual(e.targetPosition)&&this.end.isEqual(e.deletionPosition))return new y(this.start);let s=this.start._getTransformedByMergeOperation(e),i=this.end._getTransformedByMergeOperation(e);return s.root!=i.root&&(i=this.end.getShiftedBy(-1)),s.isAfter(i)?(e.sourcePosition.isBefore(e.targetPosition)?(s=b._createAt(i),s.offset=0):(e.deletionPosition.isEqual(s)||(i=e.deletionPosition),s=e.targetPosition),new y(s,i)):new y(s,i)}_getTransformedByInsertion(e,s,i=!1){if(i&&this.containsPosition(e))return[new y(this.start,e),new y(e.getShiftedBy(s),this.end._getTransformedByInsertion(e,s))];{const r=new y(this.start,this.end);return r.start=r.start._getTransformedByInsertion(e,s),r.end=r.end._getTransformedByInsertion(e,s),[r]}}_getTransformedByMove(e,s,i,r=!1){if(this.isCollapsed){const _=this.start._getTransformedByMove(e,s,i);return[new y(_)]}const o=y._createFromPositionAndShift(e,i),a=s._getTransformedByDeletion(e,i);if(this.containsPosition(s)&&!r&&(o.containsPosition(this.start)||o.containsPosition(this.end))){const _=this.start._getTransformedByMove(e,s,i),g=this.end._getTransformedByMove(e,s,i);return[new y(_,g)]}let l;const c=this.getDifference(o);let h=null;const p=this.getIntersection(o);if(c.length==1?h=new y(c[0].start._getTransformedByDeletion(e,i),c[0].end._getTransformedByDeletion(e,i)):c.length==2&&(h=new y(this.start,this.end._getTransformedByDeletion(e,i))),h?l=h._getTransformedByInsertion(a,i,p!==null||r):l=[],p){const _=new y(p.start._getCombined(o.start,a),p.end._getCombined(o.start,a));l.length==2?l.splice(1,0,_):l.push(_)}return l}_getTransformedByDeletion(e,s){let i=this.start._getTransformedByDeletion(e,s),r=this.end._getTransformedByDeletion(e,s);return i==null&&r==null?null:(i==null&&(i=e),r==null&&(r=e),new y(i,r))}static _createFromPositionAndShift(e,s){const i=e,r=e.getShiftedBy(s);return s>0?new this(i,r):new this(r,i)}static _createIn(e){return new this(b._createAt(e,0),b._createAt(e,e.maxOffset))}static _createOn(e){return this._createFromPositionAndShift(b._createBefore(e),e.offsetSize)}static _createFromRanges(e){if(e.length===0)throw new m("range-create-from-ranges-empty-array",null);if(e.length==1)return e[0].clone();const s=e[0];e.sort((o,a)=>o.start.isAfter(a.start)?1:-1);const i=e.indexOf(s),r=new this(s.start,s.end);for(let o=i-1;o>=0&&e[o].end.isEqual(r.start);o--)r.start=b._createAt(e[o].start);for(let o=i+1;o<e.length&&e[o].start.isEqual(r.end);o++)r.end=b._createAt(e[o].end);return r}static fromJSON(e,s){return new this(b.fromJSON(e.start,s),b.fromJSON(e.end,s))}}y.prototype.is=function(t){return t==="range"||t==="model:range"};class Vt extends V(Re){constructor(...e){super();u(this,"_lastRangeBackward",!1);u(this,"_attrs",new Map);u(this,"_ranges",[]);e.length&&this.setTo(...e)}get anchor(){if(this._ranges.length>0){const e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.end:e.start}return null}get focus(){if(this._ranges.length>0){const e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.start:e.end}return null}get isCollapsed(){return this._ranges.length===1?this._ranges[0].isCollapsed:!1}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}isEqual(e){if(this.rangeCount!=e.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;for(const s of this._ranges){let i=!1;for(const r of e._ranges)if(s.isEqual(r)){i=!0;break}if(!i)return!1}return!0}*getRanges(){for(const e of this._ranges)yield new y(e.start,e.end)}getFirstRange(){let e=null;for(const s of this._ranges)(!e||s.start.isBefore(e.start))&&(e=s);return e?new y(e.start,e.end):null}getLastRange(){let e=null;for(const s of this._ranges)(!e||s.end.isAfter(e.end))&&(e=s);return e?new y(e.start,e.end):null}getFirstPosition(){const e=this.getFirstRange();return e?e.start.clone():null}getLastPosition(){const e=this.getLastRange();return e?e.end.clone():null}setTo(...e){let[s,i,r]=e;if(typeof i=="object"&&(r=i,i=void 0),s===null)this._setRanges([]);else if(s instanceof Vt)this._setRanges(s.getRanges(),s.isBackward);else if(s&&typeof s.getRanges=="function")this._setRanges(s.getRanges(),s.isBackward);else if(s instanceof y)this._setRanges([s],!!r&&!!r.backward);else if(s instanceof b)this._setRanges([new y(s)]);else if(s instanceof Qe){const o=!!r&&!!r.backward;let a;if(i=="in")a=y._createIn(s);else if(i=="on")a=y._createOn(s);else if(i!==void 0)a=new y(b._createAt(s,i));else throw new m("model-selection-setto-required-second-parameter",[this,s]);this._setRanges([a],o)}else if(ve(s))this._setRanges(s,r&&!!r.backward);else throw new m("model-selection-setto-not-selectable",[this,s])}_setRanges(e,s=!1){const i=Array.from(e),r=i.some(o=>{if(!(o instanceof y))throw new m("model-selection-set-ranges-not-range",[this,e]);return this._ranges.every(a=>!a.isEqual(o))});i.length===this._ranges.length&&!r||(this._replaceAllRanges(i),this._lastRangeBackward=!!s,this.fire("change:range",{directChange:!0}))}setFocus(e,s){if(this.anchor===null)throw new m("model-selection-setfocus-no-ranges",[this,e]);const i=b._createAt(e,s);if(i.compareWith(this.focus)=="same")return;const r=this.anchor;this._ranges.length&&this._popRange(),i.compareWith(r)=="before"?(this._pushRange(new y(i,r)),this._lastRangeBackward=!0):(this._pushRange(new y(r,i)),this._lastRangeBackward=!1),this.fire("change:range",{directChange:!0})}getAttribute(e){return this._attrs.get(e)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}hasAttribute(e){return this._attrs.has(e)}removeAttribute(e){this.hasAttribute(e)&&(this._attrs.delete(e),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}setAttribute(e,s){this.getAttribute(e)!==s&&(this._attrs.set(e,s),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}*getSelectedBlocks(){const e=new WeakSet;for(const s of this.getRanges()){const i=zs(s.start,e);xh(i,s)&&(yield i);for(const o of s.getWalker()){const a=o.item;o.type=="elementEnd"&&bh(a,e,s)&&(yield a)}const r=zs(s.end,e);vh(r,s)&&(yield r)}}containsEntireContent(e=this.anchor.root){const s=b._createAt(e,0),i=b._createAt(e,"end");return s.isTouching(this.getFirstPosition())&&i.isTouching(this.getLastPosition())}_pushRange(e){this._checkRange(e),this._ranges.push(new y(e.start,e.end))}_checkRange(e){for(let s=0;s<this._ranges.length;s++)if(e.isIntersecting(this._ranges[s]))throw new m("model-selection-range-intersects",[this,e],{addedRange:e,intersectingRange:this._ranges[s]})}_replaceAllRanges(e){this._removeAllRanges();for(const s of e)this._pushRange(s)}_removeAllRanges(){for(;this._ranges.length>0;)this._popRange()}_popRange(){this._ranges.pop()}}Vt.prototype.is=function(t){return t==="selection"||t==="model:selection"};function Vi(t,n){return n.has(t)?!1:(n.add(t),t.root.document.model.schema.isBlock(t)&&!!t.parent)}function bh(t,n,e){return Vi(t,n)&&En(t,e)}function zs(t,n){const s=t.parent.root.document.model.schema,i=t.parent.getAncestors({parentFirst:!0,includeSelf:!0});let r=!1;const o=i.find(a=>r?!1:(r=s.isLimit(a),!r&&Vi(a,n)));return i.forEach(a=>n.add(a)),o}function En(t,n){const e=Ph(t);return e?!n.containsRange(y._createOn(e),!0):!0}function xh(t,n){return t?n.isCollapsed||t.isEmpty?!0:n.start.isTouching(b._createAt(t,t.maxOffset))?!1:En(t,n):!1}function vh(t,n){return t?n.isCollapsed||t.isEmpty?!0:n.end.isTouching(b._createAt(t,0))?!1:En(t,n):!1}function Ph(t){const n=t.root.document.model.schema;let e=t.parent;for(;e;){if(n.isBlock(e))return e;e=e.parent}}class Jt extends V(y){constructor(n,e){super(n,e),kh.call(this)}detach(){this.stopListening()}toRange(){return new y(this.start,this.end)}static fromRange(n){return new Jt(n.start,n.end)}}Jt.prototype.is=function(t){return t==="liveRange"||t==="model:liveRange"||t=="range"||t==="model:range"};function kh(){this.listenTo(this.root.document.model,"applyOperation",(t,n)=>{const e=n[0];e.isDocumentOperation&&Sh.call(this,e)},{priority:"low"})}function Sh(t){const n=this.getTransformedByOperation(t),e=y._createFromRanges(n),s=!e.isEqual(this),i=Ah(this,t);let r=null;if(s){e.root.rootName=="$graveyard"&&(t.type=="remove"?r=t.sourcePosition:r=t.deletionPosition);const o=this.toRange();this.start=e.start,this.end=e.end,this.fire("change:range",o,{deletionPosition:r})}else i&&this.fire("change:content",this.toRange(),{deletionPosition:r})}function Ah(t,n){switch(n.type){case"insert":return t.containsPosition(n.position);case"move":case"remove":case"reinsert":case"merge":return t.containsPosition(n.sourcePosition)||t.start.isEqual(n.sourcePosition)||t.containsPosition(n.targetPosition);case"split":return t.containsPosition(n.splitPosition)||t.containsPosition(n.insertionPosition)}return!1}const mt="selection:";class Th extends V(Re){constructor(e){super();u(this,"_selection");this._selection=new Eh(e),this._selection.delegate("change:range").to(this),this._selection.delegate("change:attribute").to(this),this._selection.delegate("change:marker").to(this)}get isCollapsed(){return this._selection.isCollapsed}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get rangeCount(){return this._selection.rangeCount}get hasOwnRange(){return this._selection.hasOwnRange}get isBackward(){return this._selection.isBackward}get isGravityOverridden(){return this._selection.isGravityOverridden}get markers(){return this._selection.markers}get _ranges(){return this._selection._ranges}getRanges(){return this._selection.getRanges()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getSelectedBlocks(){return this._selection.getSelectedBlocks()}getSelectedElement(){return this._selection.getSelectedElement()}containsEntireContent(e){return this._selection.containsEntireContent(e)}destroy(){this._selection.destroy()}getAttributeKeys(){return this._selection.getAttributeKeys()}getAttributes(){return this._selection.getAttributes()}getAttribute(e){return this._selection.getAttribute(e)}hasAttribute(e){return this._selection.hasAttribute(e)}refresh(){this._selection.updateMarkers(),this._selection._updateAttributes(!1)}observeMarkers(e){this._selection.observeMarkers(e)}_setFocus(e,s){this._selection.setFocus(e,s)}_setTo(...e){this._selection.setTo(...e)}_setAttribute(e,s){this._selection.setAttribute(e,s)}_removeAttribute(e){this._selection.removeAttribute(e)}_getStoredAttributes(){return this._selection.getStoredAttributes()}_overrideGravity(){return this._selection.overrideGravity()}_restoreGravity(e){this._selection.restoreGravity(e)}static _getStoreAttributeKey(e){return mt+e}static _isStoreAttributeKey(e){return e.startsWith(mt)}}Th.prototype.is=function(t){return t==="selection"||t=="model:selection"||t=="documentSelection"||t=="model:documentSelection"};class Eh extends Vt{constructor(e){super();u(this,"markers",new Lu({idProperty:"name"}));u(this,"_model");u(this,"_document");u(this,"_attributePriority",new Map);u(this,"_selectionRestorePosition",null);u(this,"_hasChangedRange",!1);u(this,"_overriddenGravityRegister",new Set);u(this,"_observedMarkers",new Set);this._model=e.model,this._document=e,this.listenTo(this._model,"applyOperation",(s,i)=>{const r=i[0];!r.isDocumentOperation||r.type=="marker"||r.type=="rename"||r.type=="noop"||(this._ranges.length==0&&this._selectionRestorePosition&&this._fixGraveyardSelection(this._selectionRestorePosition),this._selectionRestorePosition=null,this._hasChangedRange&&(this._hasChangedRange=!1,this.fire("change:range",{directChange:!1})))},{priority:"lowest"}),this.on("change:range",()=>{this._validateSelectionRanges(this.getRanges())}),this.listenTo(this._model.markers,"update",(s,i,r,o)=>{this._updateMarker(i,o)}),this.listenTo(this._document,"change",(s,i)=>{Oh(this._model,i)})}get isCollapsed(){return this._ranges.length===0?this._document._getDefaultRange().isCollapsed:super.isCollapsed}get anchor(){return super.anchor||this._document._getDefaultRange().start}get focus(){return super.focus||this._document._getDefaultRange().end}get rangeCount(){return this._ranges.length?this._ranges.length:1}get hasOwnRange(){return this._ranges.length>0}get isGravityOverridden(){return!!this._overriddenGravityRegister.size}destroy(){for(let e=0;e<this._ranges.length;e++)this._ranges[e].detach();this.stopListening()}*getRanges(){this._ranges.length?yield*super.getRanges():yield this._document._getDefaultRange()}getFirstRange(){return super.getFirstRange()||this._document._getDefaultRange()}getLastRange(){return super.getLastRange()||this._document._getDefaultRange()}setTo(...e){super.setTo(...e),this._updateAttributes(!0),this.updateMarkers()}setFocus(e,s){super.setFocus(e,s),this._updateAttributes(!0),this.updateMarkers()}setAttribute(e,s){if(this._setAttribute(e,s)){const i=[e];this.fire("change:attribute",{attributeKeys:i,directChange:!0})}}removeAttribute(e){if(this._removeAttribute(e)){const s=[e];this.fire("change:attribute",{attributeKeys:s,directChange:!0})}}overrideGravity(){const e=Dt();return this._overriddenGravityRegister.add(e),this._overriddenGravityRegister.size===1&&this._updateAttributes(!0),e}restoreGravity(e){if(!this._overriddenGravityRegister.has(e))throw new m("document-selection-gravity-wrong-restore",this,{uid:e});this._overriddenGravityRegister.delete(e),this.isGravityOverridden||this._updateAttributes(!0)}observeMarkers(e){this._observedMarkers.add(e),this.updateMarkers()}_replaceAllRanges(e){this._validateSelectionRanges(e),super._replaceAllRanges(e)}_popRange(){this._ranges.pop().detach()}_pushRange(e){const s=this._prepareRange(e);s&&this._ranges.push(s)}_validateSelectionRanges(e){for(const s of e)if(!this._document._validateSelectionRange(s))throw new m("document-selection-wrong-position",this,{range:s})}_prepareRange(e){if(this._checkRange(e),e.root==this._document.graveyard)return;const s=Jt.fromRange(e);return s.on("change:range",(i,r,o)=>{if(this._hasChangedRange=!0,s.root==this._document.graveyard){this._selectionRestorePosition=o.deletionPosition;const a=this._ranges.indexOf(s);this._ranges.splice(a,1),s.detach()}}),s}updateMarkers(){if(!this._observedMarkers.size)return;const e=[];let s=!1;for(const r of this._model.markers){const o=r.name.split(":",1)[0];if(!this._observedMarkers.has(o))continue;const a=r.getRange();for(const l of this.getRanges())a.containsRange(l,!l.isCollapsed)&&e.push(r)}const i=Array.from(this.markers);for(const r of e)this.markers.has(r)||(this.markers.add(r),s=!0);for(const r of Array.from(this.markers))e.includes(r)||(this.markers.remove(r),s=!0);s&&this.fire("change:marker",{oldMarkers:i,directChange:!1})}_updateMarker(e,s){const i=e.name.split(":",1)[0];if(!this._observedMarkers.has(i))return;let r=!1;const o=Array.from(this.markers),a=this.markers.has(e);if(!s)a&&(this.markers.remove(e),r=!0);else{let l=!1;for(const c of this.getRanges())if(s.containsRange(c,!c.isCollapsed)){l=!0;break}l&&!a?(this.markers.add(e),r=!0):!l&&a&&(this.markers.remove(e),r=!0)}r&&this.fire("change:marker",{oldMarkers:o,directChange:!1})}_updateAttributes(e){const s=pt(this._getSurroundingAttributes()),i=pt(this.getAttributes());if(e)this._attributePriority=new Map,this._attrs=new Map;else for(const[o,a]of this._attributePriority)a=="low"&&(this._attrs.delete(o),this._attributePriority.delete(o));this._setAttributesTo(s);const r=[];for(const[o,a]of this.getAttributes())(!i.has(o)||i.get(o)!==a)&&r.push(o);for(const[o]of i)this.hasAttribute(o)||r.push(o);r.length>0&&this.fire("change:attribute",{attributeKeys:r,directChange:!1})}_setAttribute(e,s,i=!0){const r=i?"normal":"low";return r=="low"&&this._attributePriority.get(e)=="normal"||super.getAttribute(e)===s?!1:(this._attrs.set(e,s),this._attributePriority.set(e,r),!0)}_removeAttribute(e,s=!0){const i=s?"normal":"low";return i=="low"&&this._attributePriority.get(e)=="normal"||(this._attributePriority.set(e,i),!super.hasAttribute(e))?!1:(this._attrs.delete(e),!0)}_setAttributesTo(e){const s=new Set;for(const[i,r]of this.getAttributes())e.get(i)!==r&&this._removeAttribute(i,!1);for(const[i,r]of e)this._setAttribute(i,r,!1)&&s.add(i);return s}*getStoredAttributes(){const e=this.getFirstPosition().parent;if(this.isCollapsed&&e.isEmpty)for(const s of e.getAttributeKeys())s.startsWith(mt)&&(yield[s.substr(mt.length),e.getAttribute(s)])}_getSurroundingAttributes(){const e=this.getFirstPosition(),s=this._model.schema;if(e.root.rootName=="$graveyard")return null;let i=null;if(this.isCollapsed){const r=e.textNode?e.textNode:e.nodeBefore,o=e.textNode?e.textNode:e.nodeAfter;if(this.isGravityOverridden||(i=tt(r,s)),i||(i=tt(o,s)),!this.isGravityOverridden&&!i){let a=r;for(;a&&!i;)a=a.previousSibling,i=tt(a,s)}if(!i){let a=o;for(;a&&!i;)a=a.nextSibling,i=tt(a,s)}i||(i=this.getStoredAttributes())}else{const r=this.getFirstRange();for(const o of r){if(o.item.is("element")&&s.isObject(o.item)){i=tt(o.item,s);break}if(o.type=="text"){i=o.item.getAttributes();break}}}return i}_fixGraveyardSelection(e){const s=this._model.schema.getNearestSelectionRange(e);s&&this._pushRange(s)}}function tt(t,n){if(!t)return null;if(t instanceof Fe||t instanceof L)return t.getAttributes();if(!n.isInline(t))return null;if(!n.isObject(t))return[];const e=[];for(const[s,i]of t.getAttributes())n.checkAttribute("$text",s)&&n.getAttributeProperties(s).copyFromObject!==!1&&e.push([s,i]);return e}function Oh(t,n){const e=t.document.differ;for(const s of e.getChanges()){if(s.type!="insert")continue;const i=s.position.parent;s.length===i.maxOffset&&t.enqueueChange(n,o=>{const a=Array.from(i.getAttributeKeys()).filter(l=>l.startsWith(mt));for(const l of a)o.removeAttribute(l,i)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ie{constructor(n){u(this,"baseVersion");u(this,"isDocumentOperation");u(this,"batch");this.baseVersion=n,this.isDocumentOperation=this.baseVersion!==null,this.batch=null}_validate(){}toJSON(){const n=Object.assign({},this);return n.__className=this.constructor.className,delete n.batch,delete n.isDocumentOperation,n}static get className(){return"Operation"}static fromJSON(n,e){return new this(n.baseVersion)}}function On(t,n){const e=Ji(n),s=e.reduce((o,a)=>o+a.offsetSize,0),i=t.parent;wt(t);const r=t.index;return i._insertChild(r,e),yt(i,r+e.length),yt(i,r),new y(t,t.getShiftedBy(s))}function Rh(t){if(!t.isFlat)throw new m("operation-utils-remove-range-not-flat",this);const n=t.start.parent;wt(t.start),wt(t.end);const e=n._removeChildren(t.start.index,t.end.index-t.start.index);return yt(n,t.start.index),e}function _t(t,n){if(!t.isFlat)throw new m("operation-utils-move-range-not-flat",this);const e=Rh(t);return n=n._getTransformedByDeletion(t.start,t.end.offset-t.start.offset),On(n,e)}function Nh(t,n,e){wt(t.start),wt(t.end);for(const s of t.getItems({shallow:!0})){const i=s.is("$textProxy")?s.textNode:s;e!==null?i._setAttribute(n,e):i._removeAttribute(n),yt(i.parent,i.index)}yt(t.end.parent,t.end.index)}function Ji(t){const n=[];function e(s){if(typeof s=="string")n.push(new L(s));else if(s instanceof Fe)n.push(new L(s.data,s.getAttributes()));else if(s instanceof Qe)n.push(s);else if(ve(s))for(const i of s)e(i)}e(t);for(let s=1;s<n.length;s++){const i=n[s],r=n[s-1];i instanceof L&&r instanceof L&&Ui(i,r)&&(n.splice(s-1,2,new L(r.data+i.data,r.getAttributes())),s--)}return n}function yt(t,n){const e=t.getChild(n-1),s=t.getChild(n);if(e&&s&&e.is("$text")&&s.is("$text")&&Ui(e,s)){const i=new L(e.data+s.data,e.getAttributes());t._removeChildren(n-1,2),t._insertChild(n-1,i)}}function wt(t){const n=t.textNode,e=t.parent;if(n){const s=t.offset-n.startOffset,i=n.index;e._removeChildren(i,1);const r=new L(n.data.substr(0,s),n.getAttributes()),o=new L(n.data.substr(s),n.getAttributes());e._insertChild(i,[r,o])}}function Ui(t,n){const e=t.getAttributes(),s=n.getAttributes();for(const i of e){if(i[1]!==n.getAttribute(i[0]))return!1;s.next()}return s.next().done}class F extends ie{constructor(e,s,i,r){super(r);u(this,"sourcePosition");u(this,"howMany");u(this,"targetPosition");this.sourcePosition=e.clone(),this.sourcePosition.stickiness="toNext",this.howMany=s,this.targetPosition=i.clone(),this.targetPosition.stickiness="toNone"}get type(){return this.targetPosition.root.rootName=="$graveyard"?"remove":this.sourcePosition.root.rootName=="$graveyard"?"reinsert":"move"}get affectedSelectable(){return[y._createFromPositionAndShift(this.sourcePosition,this.howMany),y._createFromPositionAndShift(this.targetPosition,0)]}clone(){return new F(this.sourcePosition,this.howMany,this.targetPosition,this.baseVersion)}getMovedRangeStart(){return this.targetPosition._getTransformedByDeletion(this.sourcePosition,this.howMany)}getReversed(){const e=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new F(this.getMovedRangeStart(),this.howMany,e,this.baseVersion+1)}_validate(){const e=this.sourcePosition.parent,s=this.targetPosition.parent,i=this.sourcePosition.offset,r=this.targetPosition.offset;if(i+this.howMany>e.maxOffset)throw new m("move-operation-nodes-do-not-exist",this);if(e===s&&i<r&&r<i+this.howMany)throw new m("move-operation-range-into-itself",this);if(this.sourcePosition.root==this.targetPosition.root&&H(this.sourcePosition.getParentPath(),this.targetPosition.getParentPath())=="prefix"){const o=this.sourcePosition.path.length-1;if(this.targetPosition.path[o]>=i&&this.targetPosition.path[o]<i+this.howMany)throw new m("move-operation-node-into-itself",this)}}_execute(){_t(y._createFromPositionAndShift(this.sourcePosition,this.howMany),this.targetPosition)}toJSON(){const e=super.toJSON();return e.sourcePosition=this.sourcePosition.toJSON(),e.targetPosition=this.targetPosition.toJSON(),e}static get className(){return"MoveOperation"}static fromJSON(e,s){const i=b.fromJSON(e.sourcePosition,s),r=b.fromJSON(e.targetPosition,s);return new this(i,e.howMany,r,e.baseVersion)}}class U extends ie{constructor(e,s,i){super(i);u(this,"position");u(this,"nodes");u(this,"shouldReceiveAttributes");this.position=e.clone(),this.position.stickiness="toNone",this.nodes=new lt(Ji(s)),this.shouldReceiveAttributes=!1}get type(){return"insert"}get howMany(){return this.nodes.maxOffset}get affectedSelectable(){return this.position.clone()}clone(){const e=new lt([...this.nodes].map(i=>i._clone(!0))),s=new U(this.position,e,this.baseVersion);return s.shouldReceiveAttributes=this.shouldReceiveAttributes,s}getReversed(){const e=this.position.root.document.graveyard,s=new b(e,[0]);return new F(this.position,this.nodes.maxOffset,s,this.baseVersion+1)}_validate(){const e=this.position.parent;if(!e||e.maxOffset<this.position.offset)throw new m("insert-operation-position-invalid",this)}_execute(){const e=this.nodes;this.nodes=new lt([...e].map(s=>s._clone(!0))),On(this.position,e)}toJSON(){const e=super.toJSON();return e.position=this.position.toJSON(),e.nodes=this.nodes.toJSON(),e}static get className(){return"InsertOperation"}static fromJSON(e,s){const i=[];for(const o of e.nodes)o.name?i.push(oe.fromJSON(o)):i.push(L.fromJSON(o));const r=new U(b.fromJSON(e.position,s),i,e.baseVersion);return r.shouldReceiveAttributes=e.shouldReceiveAttributes,r}}class q extends ie{constructor(e,s,i,r,o){super(o);u(this,"splitPosition");u(this,"howMany");u(this,"insertionPosition");u(this,"graveyardPosition");this.splitPosition=e.clone(),this.splitPosition.stickiness="toNext",this.howMany=s,this.insertionPosition=i,this.graveyardPosition=r?r.clone():null,this.graveyardPosition&&(this.graveyardPosition.stickiness="toNext")}get type(){return"split"}get moveTargetPosition(){const e=this.insertionPosition.path.slice();return e.push(0),new b(this.insertionPosition.root,e)}get movedRange(){const e=this.splitPosition.getShiftedBy(Number.POSITIVE_INFINITY);return new y(this.splitPosition,e)}get affectedSelectable(){const e=[y._createFromPositionAndShift(this.splitPosition,0),y._createFromPositionAndShift(this.insertionPosition,0)];return this.graveyardPosition&&e.push(y._createFromPositionAndShift(this.graveyardPosition,0)),e}clone(){return new q(this.splitPosition,this.howMany,this.insertionPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const e=this.splitPosition.root.document.graveyard,s=new b(e,[0]);return new K(this.moveTargetPosition,this.howMany,this.splitPosition,s,this.baseVersion+1)}_validate(){const e=this.splitPosition.parent,s=this.splitPosition.offset;if(!e||e.maxOffset<s)throw new m("split-operation-position-invalid",this);if(e.parent){if(this.howMany!=e.maxOffset-this.splitPosition.offset)throw new m("split-operation-how-many-invalid",this);if(this.graveyardPosition&&!this.graveyardPosition.nodeAfter)throw new m("split-operation-graveyard-position-invalid",this)}else throw new m("split-operation-split-in-root",this)}_execute(){const e=this.splitPosition.parent;if(this.graveyardPosition)_t(y._createFromPositionAndShift(this.graveyardPosition,1),this.insertionPosition);else{const i=e._clone();On(this.insertionPosition,i)}const s=new y(b._createAt(e,this.splitPosition.offset),b._createAt(e,e.maxOffset));_t(s,this.moveTargetPosition)}toJSON(){const e=super.toJSON();return e.splitPosition=this.splitPosition.toJSON(),e.insertionPosition=this.insertionPosition.toJSON(),this.graveyardPosition&&(e.graveyardPosition=this.graveyardPosition.toJSON()),e}static get className(){return"SplitOperation"}static getInsertionPosition(e){const s=e.path.slice(0,-1);return s[s.length-1]++,new b(e.root,s,"toPrevious")}static fromJSON(e,s){const i=b.fromJSON(e.splitPosition,s),r=b.fromJSON(e.insertionPosition,s),o=e.graveyardPosition?b.fromJSON(e.graveyardPosition,s):null;return new this(i,e.howMany,r,o,e.baseVersion)}}class K extends ie{constructor(e,s,i,r,o){super(o);u(this,"sourcePosition");u(this,"howMany");u(this,"targetPosition");u(this,"graveyardPosition");this.sourcePosition=e.clone(),this.sourcePosition.stickiness="toPrevious",this.howMany=s,this.targetPosition=i.clone(),this.targetPosition.stickiness="toNext",this.graveyardPosition=r.clone()}get type(){return"merge"}get deletionPosition(){return new b(this.sourcePosition.root,this.sourcePosition.path.slice(0,-1))}get movedRange(){const e=this.sourcePosition.getShiftedBy(Number.POSITIVE_INFINITY);return new y(this.sourcePosition,e)}get affectedSelectable(){const e=this.sourcePosition.parent;return[y._createOn(e),y._createFromPositionAndShift(this.targetPosition,0),y._createFromPositionAndShift(this.graveyardPosition,0)]}clone(){return new K(this.sourcePosition,this.howMany,this.targetPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const e=this.targetPosition._getTransformedByMergeOperation(this),s=this.sourcePosition.path.slice(0,-1),i=new b(this.sourcePosition.root,s)._getTransformedByMergeOperation(this);return new q(e,this.howMany,i,this.graveyardPosition,this.baseVersion+1)}_validate(){const e=this.sourcePosition.parent,s=this.targetPosition.parent;if(e.parent)if(s.parent){if(this.howMany!=e.maxOffset)throw new m("merge-operation-how-many-invalid",this)}else throw new m("merge-operation-target-position-invalid",this);else throw new m("merge-operation-source-position-invalid",this)}_execute(){const e=this.sourcePosition.parent,s=y._createIn(e);_t(s,this.targetPosition),_t(y._createOn(e),this.graveyardPosition)}toJSON(){const e=super.toJSON();return e.sourcePosition=e.sourcePosition.toJSON(),e.targetPosition=e.targetPosition.toJSON(),e.graveyardPosition=e.graveyardPosition.toJSON(),e}static get className(){return"MergeOperation"}static fromJSON(e,s){const i=b.fromJSON(e.sourcePosition,s),r=b.fromJSON(e.targetPosition,s),o=b.fromJSON(e.graveyardPosition,s);return new this(i,e.howMany,r,o,e.baseVersion)}}class se extends ie{constructor(e,s,i,r,o,a){super(a);u(this,"name");u(this,"oldRange");u(this,"newRange");u(this,"affectsData");u(this,"_markers");this.name=e,this.oldRange=s?s.clone():null,this.newRange=i?i.clone():null,this.affectsData=o,this._markers=r}get type(){return"marker"}get affectedSelectable(){const e=[];return this.oldRange&&e.push(this.oldRange.clone()),this.newRange&&(this.oldRange?e.push(...this.newRange.getDifference(this.oldRange)):e.push(this.newRange.clone())),e}clone(){return new se(this.name,this.oldRange,this.newRange,this._markers,this.affectsData,this.baseVersion)}getReversed(){return new se(this.name,this.newRange,this.oldRange,this._markers,this.affectsData,this.baseVersion+1)}_execute(){this.newRange?this._markers._set(this.name,this.newRange,!0,this.affectsData):this._markers._remove(this.name)}toJSON(){const e=super.toJSON();return this.oldRange&&(e.oldRange=this.oldRange.toJSON()),this.newRange&&(e.newRange=this.newRange.toJSON()),delete e._markers,e}static get className(){return"MarkerOperation"}static fromJSON(e,s){return new se(e.name,e.oldRange?y.fromJSON(e.oldRange,s):null,e.newRange?y.fromJSON(e.newRange,s):null,s.model.markers,e.affectsData,e.baseVersion)}}class z extends ie{constructor(e,s,i,r,o){super(o);u(this,"range");u(this,"key");u(this,"oldValue");u(this,"newValue");this.range=e.clone(),this.key=s,this.oldValue=i===void 0?null:i,this.newValue=r===void 0?null:r}get type(){return this.oldValue===null?"addAttribute":this.newValue===null?"removeAttribute":"changeAttribute"}get affectedSelectable(){return this.range.clone()}clone(){return new z(this.range,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new z(this.range,this.key,this.newValue,this.oldValue,this.baseVersion+1)}toJSON(){const e=super.toJSON();return e.range=this.range.toJSON(),e}_validate(){if(!this.range.isFlat)throw new m("attribute-operation-range-not-flat",this);for(const e of this.range.getItems({shallow:!0})){if(this.oldValue!==null&&!As(e.getAttribute(this.key),this.oldValue))throw new m("attribute-operation-wrong-old-value",this,{item:e,key:this.key,value:this.oldValue});if(this.oldValue===null&&this.newValue!==null&&e.hasAttribute(this.key))throw new m("attribute-operation-attribute-exists",this,{node:e,key:this.key})}}_execute(){As(this.oldValue,this.newValue)||Nh(this.range,this.key,this.newValue)}static get className(){return"AttributeOperation"}static fromJSON(e,s){return new z(y.fromJSON(e.range,s),e.key,e.oldValue,e.newValue,e.baseVersion)}}class J extends ie{get type(){return"noop"}get affectedSelectable(){return null}clone(){return new J(this.baseVersion)}getReversed(){return new J(this.baseVersion+1)}_execute(){}static get className(){return"NoOperation"}}class ee extends ie{constructor(e,s,i,r){super(r);u(this,"position");u(this,"oldName");u(this,"newName");this.position=e,this.position.stickiness="toNext",this.oldName=s,this.newName=i}get type(){return"rename"}get affectedSelectable(){return this.position.nodeAfter}clone(){return new ee(this.position.clone(),this.oldName,this.newName,this.baseVersion)}getReversed(){return new ee(this.position.clone(),this.newName,this.oldName,this.baseVersion+1)}_validate(){const e=this.position.nodeAfter;if(e instanceof oe){if(e.name!==this.oldName)throw new m("rename-operation-wrong-name",this)}else throw new m("rename-operation-wrong-position",this)}_execute(){const e=this.position.nodeAfter;e.name=this.newName}toJSON(){const e=super.toJSON();return e.position=this.position.toJSON(),e}static get className(){return"RenameOperation"}static fromJSON(e,s){return new ee(b.fromJSON(e.position,s),e.oldName,e.newName,e.baseVersion)}}class Se extends ie{constructor(e,s,i,r,o){super(o);u(this,"root");u(this,"key");u(this,"oldValue");u(this,"newValue");this.root=e,this.key=s,this.oldValue=i===void 0?null:i,this.newValue=r===void 0?null:r}get type(){return this.oldValue===null?"addRootAttribute":this.newValue===null?"removeRootAttribute":"changeRootAttribute"}get affectedSelectable(){return this.root}clone(){return new Se(this.root,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new Se(this.root,this.key,this.newValue,this.oldValue,this.baseVersion+1)}_validate(){if(this.root!=this.root.root||this.root.is("documentFragment"))throw new m("rootattribute-operation-not-a-root",this,{root:this.root,key:this.key});if(this.oldValue!==null&&this.root.getAttribute(this.key)!==this.oldValue)throw new m("rootattribute-operation-wrong-old-value",this,{root:this.root,key:this.key});if(this.oldValue===null&&this.newValue!==null&&this.root.hasAttribute(this.key))throw new m("rootattribute-operation-attribute-exists",this,{root:this.root,key:this.key})}_execute(){this.newValue!==null?this.root._setAttribute(this.key,this.newValue):this.root._removeAttribute(this.key)}toJSON(){const e=super.toJSON();return e.root=this.root.toJSON(),e}static get className(){return"RootAttributeOperation"}static fromJSON(e,s){if(!s.getRoot(e.root))throw new m("rootattribute-operation-fromjson-no-root",this,{rootName:e.root});return new Se(s.getRoot(e.root),e.key,e.oldValue,e.newValue,e.baseVersion)}}class Ae extends ie{constructor(e,s,i,r,o){super(o);u(this,"rootName");u(this,"elementName");u(this,"isAdd");u(this,"_document");if(this.rootName=e,this.elementName=s,this.isAdd=i,this._document=r,!this._document.getRoot(this.rootName)){const a=this._document.createRoot(this.elementName,this.rootName);a._isAttached=!1}}get type(){return this.isAdd?"addRoot":"detachRoot"}get affectedSelectable(){return this._document.getRoot(this.rootName)}clone(){return new Ae(this.rootName,this.elementName,this.isAdd,this._document,this.baseVersion)}getReversed(){return new Ae(this.rootName,this.elementName,!this.isAdd,this._document,this.baseVersion+1)}_execute(){this._document.getRoot(this.rootName)._isAttached=this.isAdd}toJSON(){const e=super.toJSON();return delete e._document,e}static get className(){return"RootOperation"}static fromJSON(e,s){return new Ae(e.rootName,e.elementName,e.isAdd,s,e.baseVersion)}}const ae={};ae[z.className]=z;ae[U.className]=U;ae[se.className]=se;ae[F.className]=F;ae[J.className]=J;ae[ie.className]=ie;ae[ee.className]=ee;ae[Se.className]=Se;ae[Ae.className]=Ae;ae[q.className]=q;ae[K.className]=K;const Ds=new Map;function R(t,n,e){let s=Ds.get(t);s||(s=new Map,Ds.set(t,s)),s.set(n,e)}R(z,z,(t,n,e)=>{if(t.key===n.key&&t.range.start.hasSameParentAs(n.range.start)){const s=t.range.getDifference(n.range).map(r=>new z(r,t.key,t.oldValue,t.newValue,0)),i=t.range.getIntersection(n.range);return i&&e.aIsStrong&&s.push(new z(i,n.key,n.newValue,t.newValue,0)),s.length==0?[new J(0)]:s}else return[t]});R(z,U,(t,n)=>{if(t.range.start.hasSameParentAs(n.position)&&t.range.containsPosition(n.position)){const s=t.range._getTransformedByInsertion(n.position,n.howMany,!n.shouldReceiveAttributes).map(i=>new z(i,t.key,t.oldValue,t.newValue,t.baseVersion));if(n.shouldReceiveAttributes){const i=Gi(n,t.key,t.oldValue);i&&s.unshift(i)}return s}return t.range=t.range._getTransformedByInsertion(n.position,n.howMany,!1)[0],[t]});function Gi(t,n,e){const i=t.nodes.getNode(0).getAttribute(n);if(i==e)return null;const r=new y(t.position,t.position.getShiftedBy(t.howMany));return new z(r,n,i,e,0)}R(z,K,(t,n)=>{const e=[];t.range.start.hasSameParentAs(n.deletionPosition)&&(t.range.containsPosition(n.deletionPosition)||t.range.start.isEqual(n.deletionPosition))&&e.push(y._createFromPositionAndShift(n.graveyardPosition,1));const s=t.range._getTransformedByMergeOperation(n);return s.isCollapsed||e.push(s),e.map(i=>new z(i,t.key,t.oldValue,t.newValue,t.baseVersion))});R(z,F,(t,n)=>Mh(t.range,n).map(s=>new z(s,t.key,t.oldValue,t.newValue,t.baseVersion)));function Mh(t,n){const e=y._createFromPositionAndShift(n.sourcePosition,n.howMany);let s=null,i=[];e.containsRange(t,!0)?s=t:t.start.hasSameParentAs(e.start)?(i=t.getDifference(e),s=t.getIntersection(e)):i=[t];const r=[];for(let o of i){o=o._getTransformedByDeletion(n.sourcePosition,n.howMany);const a=n.getMovedRangeStart(),l=o.start.hasSameParentAs(a),c=o._getTransformedByInsertion(a,n.howMany,l);r.push(...c)}return s&&r.push(s._getTransformedByMove(n.sourcePosition,n.targetPosition,n.howMany,!1)[0]),r}R(z,q,(t,n)=>{if(t.range.end.isEqual(n.insertionPosition))return n.graveyardPosition||t.range.end.offset++,[t];if(t.range.start.hasSameParentAs(n.splitPosition)&&t.range.containsPosition(n.splitPosition)){const e=t.clone();return e.range=new y(n.moveTargetPosition.clone(),t.range.end._getCombined(n.splitPosition,n.moveTargetPosition)),t.range.end=n.splitPosition.clone(),t.range.end.stickiness="toPrevious",[t,e]}return t.range=t.range._getTransformedBySplitOperation(n),[t]});R(U,z,(t,n)=>{const e=[t];if(t.shouldReceiveAttributes&&t.position.hasSameParentAs(n.range.start)&&n.range.containsPosition(t.position)){const s=Gi(t,n.key,n.newValue);s&&e.push(s)}return e});R(U,U,(t,n,e)=>t.position.isEqual(n.position)&&e.aIsStrong?[t]:(t.position=t.position._getTransformedByInsertOperation(n),[t]));R(U,F,(t,n)=>(t.position=t.position._getTransformedByMoveOperation(n),[t]));R(U,q,(t,n)=>(t.position=t.position._getTransformedBySplitOperation(n),[t]));R(U,K,(t,n)=>(t.position=t.position._getTransformedByMergeOperation(n),[t]));R(se,U,(t,n)=>(t.oldRange&&(t.oldRange=t.oldRange._getTransformedByInsertOperation(n)[0]),t.newRange&&(t.newRange=t.newRange._getTransformedByInsertOperation(n)[0]),[t]));R(se,se,(t,n,e)=>{if(t.name==n.name)if(e.aIsStrong)t.oldRange=n.newRange?n.newRange.clone():null;else return[new J(0)];return[t]});R(se,K,(t,n)=>(t.oldRange&&(t.oldRange=t.oldRange._getTransformedByMergeOperation(n)),t.newRange&&(t.newRange=t.newRange._getTransformedByMergeOperation(n)),[t]));R(se,F,(t,n)=>{const e=[t];if(t.oldRange&&(t.oldRange=y._createFromRanges(t.oldRange._getTransformedByMoveOperation(n))),t.newRange){const s=t.newRange._getTransformedByMoveOperation(n);t.newRange=s[0];for(let i=1;i<s.length;i++){const r=t.clone();r.oldRange=null,r.newRange=s[i],r.baseVersion=-1,e.push(r)}}return e});R(se,q,(t,n,e)=>{if(t.oldRange&&(t.oldRange=t.oldRange._getTransformedBySplitOperation(n)),t.newRange){if(e.abRelation){const s=t.newRange._getTransformedBySplitOperation(n);return t.newRange.start.isEqual(n.splitPosition)&&e.abRelation.wasStartBeforeMergedElement?t.newRange.start=b._createAt(n.insertionPosition):t.newRange.start.isEqual(n.splitPosition)&&!e.abRelation.wasInLeftElement?t.newRange.start=b._createAt(n.moveTargetPosition):t.newRange.start=s.start,t.newRange.end.isEqual(n.splitPosition)&&e.abRelation.wasInRightElement?t.newRange.end=b._createAt(n.moveTargetPosition):t.newRange.end.isEqual(n.splitPosition)&&e.abRelation.wasEndBeforeMergedElement?t.newRange.end=b._createAt(n.insertionPosition):t.newRange.end=s.end,[t]}t.newRange=t.newRange._getTransformedBySplitOperation(n)}return[t]});R(K,U,(t,n)=>(t.sourcePosition.hasSameParentAs(n.position)&&(t.howMany+=n.howMany),t.sourcePosition=t.sourcePosition._getTransformedByInsertOperation(n),t.targetPosition=t.targetPosition._getTransformedByInsertOperation(n),[t]));R(K,K,(t,n,e)=>{if(t.sourcePosition.isEqual(n.sourcePosition)&&t.targetPosition.isEqual(n.targetPosition))if(e.bWasUndone){const s=n.graveyardPosition.path.slice();return s.push(0),t.sourcePosition=new b(n.graveyardPosition.root,s),t.howMany=0,[t]}else return[new J(0)];if(t.sourcePosition.isEqual(n.sourcePosition)&&!t.targetPosition.isEqual(n.targetPosition)&&!e.bWasUndone&&e.abRelation!="splitAtSource"){const s=t.targetPosition.root.rootName=="$graveyard",i=n.targetPosition.root.rootName=="$graveyard";if(i&&!s||!(s&&!i)&&e.aIsStrong){const l=n.targetPosition._getTransformedByMergeOperation(n),c=t.targetPosition._getTransformedByMergeOperation(n);return[new F(l,t.howMany,c,0)]}else return[new J(0)]}return t.sourcePosition.hasSameParentAs(n.targetPosition)&&(t.howMany+=n.howMany),t.sourcePosition=t.sourcePosition._getTransformedByMergeOperation(n),t.targetPosition=t.targetPosition._getTransformedByMergeOperation(n),(!t.graveyardPosition.isEqual(n.graveyardPosition)||!e.aIsStrong)&&(t.graveyardPosition=t.graveyardPosition._getTransformedByMergeOperation(n)),[t]});R(K,F,(t,n,e)=>{const s=y._createFromPositionAndShift(n.sourcePosition,n.howMany);return n.type=="remove"&&!e.bWasUndone&&t.deletionPosition.hasSameParentAs(n.sourcePosition)&&s.containsPosition(t.sourcePosition)?[new J(0)]:(n.sourcePosition.getShiftedBy(n.howMany).isEqual(t.sourcePosition)?t.sourcePosition.stickiness="toNone":n.targetPosition.isEqual(t.sourcePosition)&&e.abRelation=="mergeSourceAffected"?t.sourcePosition.stickiness="toNext":n.sourcePosition.isEqual(t.targetPosition)?(t.targetPosition.stickiness="toNone",t.howMany-=n.howMany):n.targetPosition.isEqual(t.targetPosition)&&e.abRelation=="mergeTargetWasBefore"?(t.targetPosition.stickiness="toPrevious",t.howMany+=n.howMany):(t.sourcePosition.hasSameParentAs(n.targetPosition)&&(t.howMany+=n.howMany),t.sourcePosition.hasSameParentAs(n.sourcePosition)&&(t.howMany-=n.howMany)),t.sourcePosition=t.sourcePosition._getTransformedByMoveOperation(n),t.targetPosition=t.targetPosition._getTransformedByMoveOperation(n),t.sourcePosition.stickiness="toPrevious",t.targetPosition.stickiness="toNext",t.graveyardPosition.isEqual(n.targetPosition)||(t.graveyardPosition=t.graveyardPosition._getTransformedByMoveOperation(n)),[t])});R(K,q,(t,n,e)=>{if(n.graveyardPosition&&(t.graveyardPosition=t.graveyardPosition._getTransformedByDeletion(n.graveyardPosition,1),t.deletionPosition.isEqual(n.graveyardPosition)&&(t.howMany=n.howMany)),t.targetPosition.isEqual(n.splitPosition)&&(n.graveyardPosition&&t.deletionPosition.isEqual(n.graveyardPosition)||e.abRelation=="mergeTargetNotMoved"))return t.sourcePosition=t.sourcePosition._getTransformedBySplitOperation(n),[t];if(t.sourcePosition.isEqual(n.splitPosition)){if(e.abRelation=="mergeSourceNotMoved")return t.howMany=0,t.targetPosition=t.targetPosition._getTransformedBySplitOperation(n),[t];if(e.abRelation=="mergeSameElement"||t.sourcePosition.offset>0)return t.sourcePosition=n.moveTargetPosition.clone(),t.targetPosition=t.targetPosition._getTransformedBySplitOperation(n),[t]}return t.sourcePosition.hasSameParentAs(n.splitPosition)&&(t.howMany=n.splitPosition.offset),t.sourcePosition=t.sourcePosition._getTransformedBySplitOperation(n),t.targetPosition=t.targetPosition._getTransformedBySplitOperation(n),[t]});R(F,U,(t,n)=>{const s=y._createFromPositionAndShift(t.sourcePosition,t.howMany)._getTransformedByInsertOperation(n,!1)[0];return t.sourcePosition=s.start,t.howMany=s.end.offset-s.start.offset,t.targetPosition.isEqual(n.position)||(t.targetPosition=t.targetPosition._getTransformedByInsertOperation(n)),[t]});R(F,F,(t,n,e)=>{const s=y._createFromPositionAndShift(t.sourcePosition,t.howMany),i=y._createFromPositionAndShift(n.sourcePosition,n.howMany);let r=e.aIsStrong,o=!e.aIsStrong;e.abRelation=="insertBefore"||e.baRelation=="insertAfter"?o=!0:(e.abRelation=="insertAfter"||e.baRelation=="insertBefore")&&(o=!1);let a;if(t.targetPosition.isEqual(n.targetPosition)&&o?a=t.targetPosition._getTransformedByDeletion(n.sourcePosition,n.howMany):a=t.targetPosition._getTransformedByMove(n.sourcePosition,n.targetPosition,n.howMany),Vs(t,n)&&Vs(n,t))return[n.getReversed()];if(s.containsPosition(n.targetPosition)&&s.containsRange(i,!0))return s.start=s.start._getTransformedByMove(n.sourcePosition,n.targetPosition,n.howMany),s.end=s.end._getTransformedByMove(n.sourcePosition,n.targetPosition,n.howMany),Ke([s],a);if(i.containsPosition(t.targetPosition)&&i.containsRange(s,!0))return s.start=s.start._getCombined(n.sourcePosition,n.getMovedRangeStart()),s.end=s.end._getCombined(n.sourcePosition,n.getMovedRangeStart()),Ke([s],a);const h=H(t.sourcePosition.getParentPath(),n.sourcePosition.getParentPath());if(h=="prefix"||h=="extension")return s.start=s.start._getTransformedByMove(n.sourcePosition,n.targetPosition,n.howMany),s.end=s.end._getTransformedByMove(n.sourcePosition,n.targetPosition,n.howMany),Ke([s],a);t.type=="remove"&&n.type!="remove"&&!e.aWasUndone&&!e.forceWeakRemove?r=!0:t.type!="remove"&&n.type=="remove"&&!e.bWasUndone&&!e.forceWeakRemove&&(r=!1);const p=[],_=s.getDifference(i);for(const E of _){E.start=E.start._getTransformedByDeletion(n.sourcePosition,n.howMany),E.end=E.end._getTransformedByDeletion(n.sourcePosition,n.howMany);const O=H(E.start.getParentPath(),n.getMovedRangeStart().getParentPath())=="same",N=E._getTransformedByInsertion(n.getMovedRangeStart(),n.howMany,O);p.push(...N)}const g=s.getIntersection(i);return g!==null&&r&&(g.start=g.start._getCombined(n.sourcePosition,n.getMovedRangeStart()),g.end=g.end._getCombined(n.sourcePosition,n.getMovedRangeStart()),p.length===0?p.push(g):p.length==1?i.start.isBefore(s.start)||i.start.isEqual(s.start)?p.unshift(g):p.push(g):p.splice(1,0,g)),p.length===0?[new J(t.baseVersion)]:Ke(p,a)});R(F,q,(t,n,e)=>{let s=t.targetPosition.clone();(!t.targetPosition.isEqual(n.insertionPosition)||!n.graveyardPosition||e.abRelation=="moveTargetAfter")&&(s=t.targetPosition._getTransformedBySplitOperation(n));const i=y._createFromPositionAndShift(t.sourcePosition,t.howMany);if(i.end.isEqual(n.insertionPosition))return n.graveyardPosition||t.howMany++,t.targetPosition=s,[t];if(i.start.hasSameParentAs(n.splitPosition)&&i.containsPosition(n.splitPosition)){let a=new y(n.splitPosition,i.end);a=a._getTransformedBySplitOperation(n);const l=[new y(i.start,n.splitPosition),a];return Ke(l,s)}t.targetPosition.isEqual(n.splitPosition)&&e.abRelation=="insertAtSource"&&(s=n.moveTargetPosition),t.targetPosition.isEqual(n.insertionPosition)&&e.abRelation=="insertBetween"&&(s=t.targetPosition);const o=[i._getTransformedBySplitOperation(n)];if(n.graveyardPosition){const a=i.start.isEqual(n.graveyardPosition)||i.containsPosition(n.graveyardPosition);t.howMany>1&&a&&!e.aWasUndone&&o.push(y._createFromPositionAndShift(n.insertionPosition,1))}return Ke(o,s)});R(F,K,(t,n,e)=>{const s=y._createFromPositionAndShift(t.sourcePosition,t.howMany);if(n.deletionPosition.hasSameParentAs(t.sourcePosition)&&s.containsPosition(n.sourcePosition)){if(t.type=="remove"&&!e.forceWeakRemove){if(!e.aWasUndone){const o=[];let a=n.graveyardPosition.clone(),l=n.targetPosition._getTransformedByMergeOperation(n);const c=t.targetPosition.getTransformedByOperation(n);t.howMany>1&&(o.push(new F(t.sourcePosition,t.howMany-1,c,0)),a=a._getTransformedByMove(t.sourcePosition,c,t.howMany-1),l=l._getTransformedByMove(t.sourcePosition,c,t.howMany-1));const h=n.deletionPosition._getCombined(t.sourcePosition,c),p=new F(a,1,h,0),_=p.getMovedRangeStart().path.slice();_.push(0);const g=new b(p.targetPosition.root,_);l=l._getTransformedByMove(a,h,1);const E=new F(l,n.howMany,g,0);return o.push(p),o.push(E),o}}else if(t.howMany==1)return e.bWasUndone?(t.sourcePosition=n.graveyardPosition.clone(),t.targetPosition=t.targetPosition._getTransformedByMergeOperation(n),[t]):[new J(0)]}const r=y._createFromPositionAndShift(t.sourcePosition,t.howMany)._getTransformedByMergeOperation(n);return t.sourcePosition=r.start,t.howMany=r.end.offset-r.start.offset,t.targetPosition=t.targetPosition._getTransformedByMergeOperation(n),[t]});R(ee,U,(t,n)=>(t.position=t.position._getTransformedByInsertOperation(n),[t]));R(ee,K,(t,n)=>t.position.isEqual(n.deletionPosition)?(t.position=n.graveyardPosition.clone(),t.position.stickiness="toNext",[t]):(t.position=t.position._getTransformedByMergeOperation(n),[t]));R(ee,F,(t,n)=>(t.position=t.position._getTransformedByMoveOperation(n),[t]));R(ee,ee,(t,n,e)=>{if(t.position.isEqual(n.position))if(e.aIsStrong)t.oldName=n.newName;else return[new J(0)];return[t]});R(ee,q,(t,n)=>{const e=t.position.path,s=n.splitPosition.getParentPath();if(H(e,s)=="same"&&!n.graveyardPosition){const i=new ee(t.position.getShiftedBy(1),t.oldName,t.newName,0);return[t,i]}return t.position=t.position._getTransformedBySplitOperation(n),[t]});R(Se,Se,(t,n,e)=>{if(t.root===n.root&&t.key===n.key){if(!e.aIsStrong||t.newValue===n.newValue)return[new J(0)];t.oldValue=n.newValue}return[t]});R(Ae,Ae,(t,n)=>t.rootName===n.rootName&&t.isAdd===n.isAdd?[new J(0)]:[t]);R(q,U,(t,n)=>(t.splitPosition.hasSameParentAs(n.position)&&t.splitPosition.offset<n.position.offset&&(t.howMany+=n.howMany),t.splitPosition=t.splitPosition._getTransformedByInsertOperation(n),t.insertionPosition=t.insertionPosition._getTransformedByInsertOperation(n),[t]));R(q,K,(t,n,e)=>{if(!t.graveyardPosition&&!e.bWasUndone&&t.splitPosition.hasSameParentAs(n.sourcePosition)){const s=n.graveyardPosition.path.slice();s.push(0);const i=new b(n.graveyardPosition.root,s),r=q.getInsertionPosition(new b(n.graveyardPosition.root,s)),o=new q(i,0,r,null,0);return t.splitPosition=t.splitPosition._getTransformedByMergeOperation(n),t.insertionPosition=q.getInsertionPosition(t.splitPosition),t.graveyardPosition=o.insertionPosition.clone(),t.graveyardPosition.stickiness="toNext",[o,t]}return t.splitPosition.hasSameParentAs(n.deletionPosition)&&!t.splitPosition.isAfter(n.deletionPosition)&&t.howMany--,t.splitPosition.hasSameParentAs(n.targetPosition)&&(t.howMany+=n.howMany),t.splitPosition=t.splitPosition._getTransformedByMergeOperation(n),t.insertionPosition=q.getInsertionPosition(t.splitPosition),t.graveyardPosition&&(t.graveyardPosition=t.graveyardPosition._getTransformedByMergeOperation(n)),[t]});R(q,F,(t,n,e)=>{const s=y._createFromPositionAndShift(n.sourcePosition,n.howMany);if(t.graveyardPosition){const r=s.start.isEqual(t.graveyardPosition)||s.containsPosition(t.graveyardPosition);if(!e.bWasUndone&&r){const o=t.splitPosition._getTransformedByMoveOperation(n),a=t.graveyardPosition._getTransformedByMoveOperation(n),l=a.path.slice();l.push(0);const c=new b(a.root,l);return[new F(o,t.howMany,c,0)]}t.graveyardPosition=t.graveyardPosition._getTransformedByMoveOperation(n)}const i=t.splitPosition.isEqual(n.targetPosition);if(i&&(e.baRelation=="insertAtSource"||e.abRelation=="splitBefore"))return t.howMany+=n.howMany,t.splitPosition=t.splitPosition._getTransformedByDeletion(n.sourcePosition,n.howMany),t.insertionPosition=q.getInsertionPosition(t.splitPosition),[t];if(i&&e.abRelation&&e.abRelation.howMany){const{howMany:r,offset:o}=e.abRelation;return t.howMany+=r,t.splitPosition=t.splitPosition.getShiftedBy(o),[t]}if(t.splitPosition.hasSameParentAs(n.sourcePosition)&&s.containsPosition(t.splitPosition)){const r=n.howMany-(t.splitPosition.offset-n.sourcePosition.offset);return t.howMany-=r,t.splitPosition.hasSameParentAs(n.targetPosition)&&t.splitPosition.offset<n.targetPosition.offset&&(t.howMany+=n.howMany),t.splitPosition=n.sourcePosition.clone(),t.insertionPosition=q.getInsertionPosition(t.splitPosition),[t]}return n.sourcePosition.isEqual(n.targetPosition)||(t.splitPosition.hasSameParentAs(n.sourcePosition)&&t.splitPosition.offset<=n.sourcePosition.offset&&(t.howMany-=n.howMany),t.splitPosition.hasSameParentAs(n.targetPosition)&&t.splitPosition.offset<n.targetPosition.offset&&(t.howMany+=n.howMany)),t.splitPosition.stickiness="toNone",t.splitPosition=t.splitPosition._getTransformedByMoveOperation(n),t.splitPosition.stickiness="toNext",t.graveyardPosition?t.insertionPosition=t.insertionPosition._getTransformedByMoveOperation(n):t.insertionPosition=q.getInsertionPosition(t.splitPosition),[t]});R(q,q,(t,n,e)=>{if(t.splitPosition.isEqual(n.splitPosition)){if(!t.graveyardPosition&&!n.graveyardPosition)return[new J(0)];if(t.graveyardPosition&&n.graveyardPosition&&t.graveyardPosition.isEqual(n.graveyardPosition))return[new J(0)];if(e.abRelation=="splitBefore")return t.howMany=0,t.graveyardPosition=t.graveyardPosition._getTransformedBySplitOperation(n),[t]}if(t.graveyardPosition&&n.graveyardPosition&&t.graveyardPosition.isEqual(n.graveyardPosition)){const s=t.splitPosition.root.rootName=="$graveyard",i=n.splitPosition.root.rootName=="$graveyard";if(i&&!s||!(s&&!i)&&e.aIsStrong){const l=[];return n.howMany&&l.push(new F(n.moveTargetPosition,n.howMany,n.splitPosition,0)),t.howMany&&l.push(new F(t.splitPosition,t.howMany,t.moveTargetPosition,0)),l}else return[new J(0)]}if(t.graveyardPosition&&(t.graveyardPosition=t.graveyardPosition._getTransformedBySplitOperation(n)),t.splitPosition.isEqual(n.insertionPosition)&&e.abRelation=="splitBefore")return t.howMany++,[t];if(n.splitPosition.isEqual(t.insertionPosition)&&e.baRelation=="splitBefore"){const s=n.insertionPosition.path.slice();s.push(0);const i=new b(n.insertionPosition.root,s),r=new F(t.insertionPosition,1,i,0);return[t,r]}return t.splitPosition.hasSameParentAs(n.splitPosition)&&t.splitPosition.offset<n.splitPosition.offset&&(t.howMany-=n.howMany),t.splitPosition=t.splitPosition._getTransformedBySplitOperation(n),t.insertionPosition=q.getInsertionPosition(t.splitPosition),[t]});function Vs(t,n){return t.targetPosition._getTransformedByDeletion(n.sourcePosition,n.howMany)===null}function Ke(t,n){const e=[];for(let s=0;s<t.length;s++){const i=t[s],r=new F(i.start,i.end.offset-i.start.offset,n,0);e.push(r);for(let o=s+1;o<t.length;o++)t[o]=t[o]._getTransformedByMove(r.sourcePosition,r.targetPosition,r.howMany)[0];n=n._getTransformedByMove(r.sourcePosition,r.targetPosition,r.howMany)}return e}class Ch extends V(b){constructor(n,e,s="toNone"){if(super(n,e,s),!this.root.is("rootElement"))throw new m("model-liveposition-root-not-rootelement",n);Bh.call(this)}detach(){this.stopListening()}toPosition(){return new b(this.root,this.path.slice(),this.stickiness)}static fromPosition(n,e){return new this(n.root,n.path.slice(),e||n.stickiness)}}Ch.prototype.is=function(t){return t==="livePosition"||t==="model:livePosition"||t=="position"||t==="model:position"};function Bh(){this.listenTo(this.root.document.model,"applyOperation",(t,n)=>{const e=n[0];e.isDocumentOperation&&$h.call(this,e)},{priority:"low"})}function $h(t){const n=this.getTransformedByOperation(t);if(!this.isEqual(n)){const e=this.toPosition();this.path=n.path,this.root=n.root,this.fire("change",e)}}class Ih extends oe{constructor(e,s,i="main"){super(s);u(this,"rootName");u(this,"_document");u(this,"_isAttached",!0);u(this,"_isLoaded",!0);this._document=e,this.rootName=i}get document(){return this._document}isAttached(){return this._isAttached}toJSON(){return this.rootName}}Ih.prototype.is=function(t,n){return n?n===this.name&&(t==="rootElement"||t==="model:rootElement"||t==="element"||t==="model:element"):t==="rootElement"||t==="model:rootElement"||t==="element"||t==="model:element"||t==="node"||t==="model:node"};class Fh extends V(Re){constructor(e,s,i,r){super();u(this,"name");u(this,"_managedUsingOperations");u(this,"_affectsData");u(this,"_liveRange");this.name=e,this._liveRange=this._attachLiveRange(s),this._managedUsingOperations=i,this._affectsData=r}get managedUsingOperations(){if(!this._liveRange)throw new m("marker-destroyed",this);return this._managedUsingOperations}get affectsData(){if(!this._liveRange)throw new m("marker-destroyed",this);return this._affectsData}getData(){return{range:this.getRange(),affectsData:this.affectsData,managedUsingOperations:this.managedUsingOperations}}getStart(){if(!this._liveRange)throw new m("marker-destroyed",this);return this._liveRange.start.clone()}getEnd(){if(!this._liveRange)throw new m("marker-destroyed",this);return this._liveRange.end.clone()}getRange(){if(!this._liveRange)throw new m("marker-destroyed",this);return this._liveRange.toRange()}_attachLiveRange(e){return this._liveRange&&this._detachLiveRange(),e.delegate("change:range").to(this),e.delegate("change:content").to(this),this._liveRange=e,e}_detachLiveRange(){this._liveRange.stopDelegating("change:range",this),this._liveRange.stopDelegating("change:content",this),this._liveRange.detach(),this._liveRange=null}}Fh.prototype.is=function(t){return t==="marker"||t==="model:marker"};class Rn extends Re{constructor(e){super();u(this,"markers",new Map);u(this,"_children",new lt);e&&this._insertChild(0,e)}[Symbol.iterator](){return this.getChildren()}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}get nextSibling(){return null}get previousSibling(){return null}get root(){return this}get parent(){return null}get document(){return null}isAttached(){return!1}getAncestors(){return[]}getChild(e){return this._children.getNode(e)}getChildAtOffset(e){return this._children.getNodeAtOffset(e)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(e){return this._children.getNodeIndex(e)}getChildStartOffset(e){return this._children.getNodeStartOffset(e)}getPath(){return[]}getNodeByPath(e){let s=this;for(const i of e)s=s.getChildAtOffset(i);return s}offsetToIndex(e){return this._children.offsetToIndex(e)}toJSON(){const e=[];for(const s of this._children)e.push(s.toJSON());return e}static fromJSON(e){const s=[];for(const i of e)i.name?s.push(oe.fromJSON(i)):s.push(L.fromJSON(i));return new Rn(s)}_appendChild(e){this._insertChild(this.childCount,e)}_insertChild(e,s){const i=jh(s);for(const r of i)r.parent!==null&&r._remove(),r.parent=this;this._children._insertNodes(e,i)}_removeChildren(e,s=1){const i=this._children._removeNodes(e,s);for(const r of i)r.parent=null;return i}}Rn.prototype.is=function(t){return t==="documentFragment"||t==="model:documentFragment"};function jh(t){return typeof t=="string"?[new L(t)]:(ve(t)||(t=[t]),Array.from(t).map(n=>typeof n=="string"?new L(n):n instanceof Fe?new L(n.data,n.getAttributes()):n))}var Lh={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};const bt=Lh,Wi={};for(const t of Object.keys(bt))Wi[bt[t]]=t;const x={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};var Ki=x;for(const t of Object.keys(x)){if(!("channels"in x[t]))throw new Error("missing channels property: "+t);if(!("labels"in x[t]))throw new Error("missing channel labels property: "+t);if(x[t].labels.length!==x[t].channels)throw new Error("channel and label counts mismatch: "+t);const{channels:n,labels:e}=x[t];delete x[t].channels,delete x[t].labels,Object.defineProperty(x[t],"channels",{value:n}),Object.defineProperty(x[t],"labels",{value:e})}x.rgb.hsl=function(t){const n=t[0]/255,e=t[1]/255,s=t[2]/255,i=Math.min(n,e,s),r=Math.max(n,e,s),o=r-i;let a,l;r===i?a=0:n===r?a=(e-s)/o:e===r?a=2+(s-n)/o:s===r&&(a=4+(n-e)/o),a=Math.min(a*60,360),a<0&&(a+=360);const c=(i+r)/2;return r===i?l=0:c<=.5?l=o/(r+i):l=o/(2-r-i),[a,l*100,c*100]};x.rgb.hsv=function(t){let n,e,s,i,r;const o=t[0]/255,a=t[1]/255,l=t[2]/255,c=Math.max(o,a,l),h=c-Math.min(o,a,l),p=function(_){return(c-_)/6/h+1/2};return h===0?(i=0,r=0):(r=h/c,n=p(o),e=p(a),s=p(l),o===c?i=s-e:a===c?i=1/3+n-s:l===c&&(i=2/3+e-n),i<0?i+=1:i>1&&(i-=1)),[i*360,r*100,c*100]};x.rgb.hwb=function(t){const n=t[0],e=t[1];let s=t[2];const i=x.rgb.hsl(t)[0],r=1/255*Math.min(n,Math.min(e,s));return s=1-1/255*Math.max(n,Math.max(e,s)),[i,r*100,s*100]};x.rgb.cmyk=function(t){const n=t[0]/255,e=t[1]/255,s=t[2]/255,i=Math.min(1-n,1-e,1-s),r=(1-n-i)/(1-i)||0,o=(1-e-i)/(1-i)||0,a=(1-s-i)/(1-i)||0;return[r*100,o*100,a*100,i*100]};function qh(t,n){return(t[0]-n[0])**2+(t[1]-n[1])**2+(t[2]-n[2])**2}x.rgb.keyword=function(t){const n=Wi[t];if(n)return n;let e=1/0,s;for(const i of Object.keys(bt)){const r=bt[i],o=qh(t,r);o<e&&(e=o,s=i)}return s};x.keyword.rgb=function(t){return bt[t]};x.rgb.xyz=function(t){let n=t[0]/255,e=t[1]/255,s=t[2]/255;n=n>.04045?((n+.055)/1.055)**2.4:n/12.92,e=e>.04045?((e+.055)/1.055)**2.4:e/12.92,s=s>.04045?((s+.055)/1.055)**2.4:s/12.92;const i=n*.4124+e*.3576+s*.1805,r=n*.2126+e*.7152+s*.0722,o=n*.0193+e*.1192+s*.9505;return[i*100,r*100,o*100]};x.rgb.lab=function(t){const n=x.rgb.xyz(t);let e=n[0],s=n[1],i=n[2];e/=95.047,s/=100,i/=108.883,e=e>.008856?e**(1/3):7.787*e+16/116,s=s>.008856?s**(1/3):7.787*s+16/116,i=i>.008856?i**(1/3):7.787*i+16/116;const r=116*s-16,o=500*(e-s),a=200*(s-i);return[r,o,a]};x.hsl.rgb=function(t){const n=t[0]/360,e=t[1]/100,s=t[2]/100;let i,r,o;if(e===0)return o=s*255,[o,o,o];s<.5?i=s*(1+e):i=s+e-s*e;const a=2*s-i,l=[0,0,0];for(let c=0;c<3;c++)r=n+1/3*-(c-1),r<0&&r++,r>1&&r--,6*r<1?o=a+(i-a)*6*r:2*r<1?o=i:3*r<2?o=a+(i-a)*(2/3-r)*6:o=a,l[c]=o*255;return l};x.hsl.hsv=function(t){const n=t[0];let e=t[1]/100,s=t[2]/100,i=e;const r=Math.max(s,.01);s*=2,e*=s<=1?s:2-s,i*=r<=1?r:2-r;const o=(s+e)/2,a=s===0?2*i/(r+i):2*e/(s+e);return[n,a*100,o*100]};x.hsv.rgb=function(t){const n=t[0]/60,e=t[1]/100;let s=t[2]/100;const i=Math.floor(n)%6,r=n-Math.floor(n),o=255*s*(1-e),a=255*s*(1-e*r),l=255*s*(1-e*(1-r));switch(s*=255,i){case 0:return[s,l,o];case 1:return[a,s,o];case 2:return[o,s,l];case 3:return[o,a,s];case 4:return[l,o,s];case 5:return[s,o,a]}};x.hsv.hsl=function(t){const n=t[0],e=t[1]/100,s=t[2]/100,i=Math.max(s,.01);let r,o;o=(2-e)*s;const a=(2-e)*i;return r=e*i,r/=a<=1?a:2-a,r=r||0,o/=2,[n,r*100,o*100]};x.hwb.rgb=function(t){const n=t[0]/360;let e=t[1]/100,s=t[2]/100;const i=e+s;let r;i>1&&(e/=i,s/=i);const o=Math.floor(6*n),a=1-s;r=6*n-o,o&1&&(r=1-r);const l=e+r*(a-e);let c,h,p;switch(o){default:case 6:case 0:c=a,h=l,p=e;break;case 1:c=l,h=a,p=e;break;case 2:c=e,h=a,p=l;break;case 3:c=e,h=l,p=a;break;case 4:c=l,h=e,p=a;break;case 5:c=a,h=e,p=l;break}return[c*255,h*255,p*255]};x.cmyk.rgb=function(t){const n=t[0]/100,e=t[1]/100,s=t[2]/100,i=t[3]/100,r=1-Math.min(1,n*(1-i)+i),o=1-Math.min(1,e*(1-i)+i),a=1-Math.min(1,s*(1-i)+i);return[r*255,o*255,a*255]};x.xyz.rgb=function(t){const n=t[0]/100,e=t[1]/100,s=t[2]/100;let i,r,o;return i=n*3.2406+e*-1.5372+s*-.4986,r=n*-.9689+e*1.8758+s*.0415,o=n*.0557+e*-.204+s*1.057,i=i>.0031308?1.055*i**(1/2.4)-.055:i*12.92,r=r>.0031308?1.055*r**(1/2.4)-.055:r*12.92,o=o>.0031308?1.055*o**(1/2.4)-.055:o*12.92,i=Math.min(Math.max(0,i),1),r=Math.min(Math.max(0,r),1),o=Math.min(Math.max(0,o),1),[i*255,r*255,o*255]};x.xyz.lab=function(t){let n=t[0],e=t[1],s=t[2];n/=95.047,e/=100,s/=108.883,n=n>.008856?n**(1/3):7.787*n+16/116,e=e>.008856?e**(1/3):7.787*e+16/116,s=s>.008856?s**(1/3):7.787*s+16/116;const i=116*e-16,r=500*(n-e),o=200*(e-s);return[i,r,o]};x.lab.xyz=function(t){const n=t[0],e=t[1],s=t[2];let i,r,o;r=(n+16)/116,i=e/500+r,o=r-s/200;const a=r**3,l=i**3,c=o**3;return r=a>.008856?a:(r-16/116)/7.787,i=l>.008856?l:(i-16/116)/7.787,o=c>.008856?c:(o-16/116)/7.787,i*=95.047,r*=100,o*=108.883,[i,r,o]};x.lab.lch=function(t){const n=t[0],e=t[1],s=t[2];let i;i=Math.atan2(s,e)*360/2/Math.PI,i<0&&(i+=360);const o=Math.sqrt(e*e+s*s);return[n,o,i]};x.lch.lab=function(t){const n=t[0],e=t[1],i=t[2]/360*2*Math.PI,r=e*Math.cos(i),o=e*Math.sin(i);return[n,r,o]};x.rgb.ansi16=function(t,n=null){const[e,s,i]=t;let r=n===null?x.rgb.hsv(t)[2]:n;if(r=Math.round(r/50),r===0)return 30;let o=30+(Math.round(i/255)<<2|Math.round(s/255)<<1|Math.round(e/255));return r===2&&(o+=60),o};x.hsv.ansi16=function(t){return x.rgb.ansi16(x.hsv.rgb(t),t[2])};x.rgb.ansi256=function(t){const n=t[0],e=t[1],s=t[2];return n===e&&e===s?n<8?16:n>248?231:Math.round((n-8)/247*24)+232:16+36*Math.round(n/255*5)+6*Math.round(e/255*5)+Math.round(s/255*5)};x.ansi16.rgb=function(t){let n=t%10;if(n===0||n===7)return t>50&&(n+=3.5),n=n/10.5*255,[n,n,n];const e=(~~(t>50)+1)*.5,s=(n&1)*e*255,i=(n>>1&1)*e*255,r=(n>>2&1)*e*255;return[s,i,r]};x.ansi256.rgb=function(t){if(t>=232){const r=(t-232)*10+8;return[r,r,r]}t-=16;let n;const e=Math.floor(t/36)/5*255,s=Math.floor((n=t%36)/6)/5*255,i=n%6/5*255;return[e,s,i]};x.rgb.hex=function(t){const e=(((Math.round(t[0])&255)<<16)+((Math.round(t[1])&255)<<8)+(Math.round(t[2])&255)).toString(16).toUpperCase();return"000000".substring(e.length)+e};x.hex.rgb=function(t){const n=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!n)return[0,0,0];let e=n[0];n[0].length===3&&(e=e.split("").map(a=>a+a).join(""));const s=parseInt(e,16),i=s>>16&255,r=s>>8&255,o=s&255;return[i,r,o]};x.rgb.hcg=function(t){const n=t[0]/255,e=t[1]/255,s=t[2]/255,i=Math.max(Math.max(n,e),s),r=Math.min(Math.min(n,e),s),o=i-r;let a,l;return o<1?a=r/(1-o):a=0,o<=0?l=0:i===n?l=(e-s)/o%6:i===e?l=2+(s-n)/o:l=4+(n-e)/o,l/=6,l%=1,[l*360,o*100,a*100]};x.hsl.hcg=function(t){const n=t[1]/100,e=t[2]/100,s=e<.5?2*n*e:2*n*(1-e);let i=0;return s<1&&(i=(e-.5*s)/(1-s)),[t[0],s*100,i*100]};x.hsv.hcg=function(t){const n=t[1]/100,e=t[2]/100,s=n*e;let i=0;return s<1&&(i=(e-s)/(1-s)),[t[0],s*100,i*100]};x.hcg.rgb=function(t){const n=t[0]/360,e=t[1]/100,s=t[2]/100;if(e===0)return[s*255,s*255,s*255];const i=[0,0,0],r=n%1*6,o=r%1,a=1-o;let l=0;switch(Math.floor(r)){case 0:i[0]=1,i[1]=o,i[2]=0;break;case 1:i[0]=a,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=o;break;case 3:i[0]=0,i[1]=a,i[2]=1;break;case 4:i[0]=o,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=a}return l=(1-e)*s,[(e*i[0]+l)*255,(e*i[1]+l)*255,(e*i[2]+l)*255]};x.hcg.hsv=function(t){const n=t[1]/100,e=t[2]/100,s=n+e*(1-n);let i=0;return s>0&&(i=n/s),[t[0],i*100,s*100]};x.hcg.hsl=function(t){const n=t[1]/100,s=t[2]/100*(1-n)+.5*n;let i=0;return s>0&&s<.5?i=n/(2*s):s>=.5&&s<1&&(i=n/(2*(1-s))),[t[0],i*100,s*100]};x.hcg.hwb=function(t){const n=t[1]/100,e=t[2]/100,s=n+e*(1-n);return[t[0],(s-n)*100,(1-s)*100]};x.hwb.hcg=function(t){const n=t[1]/100,s=1-t[2]/100,i=s-n;let r=0;return i<1&&(r=(s-i)/(1-i)),[t[0],i*100,r*100]};x.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]};x.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]};x.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]};x.gray.hsl=function(t){return[0,0,t[0]]};x.gray.hsv=x.gray.hsl;x.gray.hwb=function(t){return[0,100,t[0]]};x.gray.cmyk=function(t){return[0,0,0,t[0]]};x.gray.lab=function(t){return[t[0],0,0]};x.gray.hex=function(t){const n=Math.round(t[0]/100*255)&255,s=((n<<16)+(n<<8)+n).toString(16).toUpperCase();return"000000".substring(s.length)+s};x.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]};const Ft=Ki;function zh(){const t={},n=Object.keys(Ft);for(let e=n.length,s=0;s<e;s++)t[n[s]]={distance:-1,parent:null};return t}function Dh(t){const n=zh(),e=[t];for(n[t].distance=0;e.length;){const s=e.pop(),i=Object.keys(Ft[s]);for(let r=i.length,o=0;o<r;o++){const a=i[o],l=n[a];l.distance===-1&&(l.distance=n[s].distance+1,l.parent=s,e.unshift(a))}}return n}function Vh(t,n){return function(e){return n(t(e))}}function Jh(t,n){const e=[n[t].parent,t];let s=Ft[n[t].parent][t],i=n[t].parent;for(;n[i].parent;)e.unshift(n[i].parent),s=Vh(Ft[n[i].parent][i],s),i=n[i].parent;return s.conversion=e,s}var Uh=function(t){const n=Dh(t),e={},s=Object.keys(n);for(let i=s.length,r=0;r<i;r++){const o=s[r];n[o].parent!==null&&(e[o]=Jh(o,n))}return e};const gn=Ki,Gh=Uh,nt={},Wh=Object.keys(gn);function Kh(t){const n=function(...e){const s=e[0];return s==null?s:(s.length>1&&(e=s),t(e))};return"conversion"in t&&(n.conversion=t.conversion),n}function Hh(t){const n=function(...e){const s=e[0];if(s==null)return s;s.length>1&&(e=s);const i=t(e);if(typeof i=="object")for(let r=i.length,o=0;o<r;o++)i[o]=Math.round(i[o]);return i};return"conversion"in t&&(n.conversion=t.conversion),n}Wh.forEach(t=>{nt[t]={},Object.defineProperty(nt[t],"channels",{value:gn[t].channels}),Object.defineProperty(nt[t],"labels",{value:gn[t].labels});const n=Gh(t);Object.keys(n).forEach(s=>{const i=n[s];nt[t][s]=Hh(i),nt[t][s].raw=Kh(i)})});/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */var Zh='<svg viewBox="0 0 10 8" xmlns="http://www.w3.org/2000/svg"><path d="M9.055.263v3.972h-6.77M1 4.216l2-2.038m-2 2 2 2.038"/></svg>';new DOMParser().parseFromString(Zh,"image/svg+xml").firstChild;/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Qh=[{listStyle:"disc",typeAttribute:"disc",listType:"bulleted"},{listStyle:"circle",typeAttribute:"circle",listType:"bulleted"},{listStyle:"square",typeAttribute:"square",listType:"bulleted"},{listStyle:"decimal",typeAttribute:"1",listType:"numbered"},{listStyle:"decimal-leading-zero",typeAttribute:null,listType:"numbered"},{listStyle:"lower-roman",typeAttribute:"i",listType:"numbered"},{listStyle:"upper-roman",typeAttribute:"I",listType:"numbered"},{listStyle:"lower-alpha",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-alpha",typeAttribute:"A",listType:"numbered"},{listStyle:"lower-latin",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-latin",typeAttribute:"A",listType:"numbered"}];for(const{listStyle:t,typeAttribute:n,listType:e}of Qh);function Hi(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}let Xe=Hi();function Xh(t){Xe=t}const Yh=/[&<>"']/,ef=/[&<>"']/g,tf=/[<>"']|&(?!#?\w+;)/,nf=/[<>"']|&(?!#?\w+;)/g,sf={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Js=t=>sf[t];function D(t,n){if(n){if(Yh.test(t))return t.replace(ef,Js)}else if(tf.test(t))return t.replace(nf,Js);return t}const rf=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function Zi(t){return t.replace(rf,(n,e)=>(e=e.toLowerCase(),e==="colon"?":":e.charAt(0)==="#"?e.charAt(1)==="x"?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):""))}const of=/(^|[^\[])\^/g;function B(t,n){t=t.source||t,n=n||"";const e={replace:(s,i)=>(i=i.source||i,i=i.replace(of,"$1"),t=t.replace(s,i),e),getRegex:()=>new RegExp(t,n)};return e}const af=/[^\w:]/g,lf=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function Us(t,n,e){if(t){let s;try{s=decodeURIComponent(Zi(e)).replace(af,"").toLowerCase()}catch{return null}if(s.indexOf("javascript:")===0||s.indexOf("vbscript:")===0||s.indexOf("data:")===0)return null}n&&!lf.test(e)&&(e=ff(n,e));try{e=encodeURI(e).replace(/%25/g,"%")}catch{return null}return e}const Rt={},cf=/^[^:]+:\/*[^/]*$/,uf=/^([^:]+:)[\s\S]*$/,hf=/^([^:]+:\/*[^/]*)[\s\S]*$/;function ff(t,n){Rt[" "+t]||(cf.test(t)?Rt[" "+t]=t+"/":Rt[" "+t]=Ct(t,"/",!0)),t=Rt[" "+t];const e=t.indexOf(":")===-1;return n.substring(0,2)==="//"?e?n:t.replace(uf,"$1")+n:n.charAt(0)==="/"?e?n:t.replace(hf,"$1")+n:t+n}const jt={exec:function(){}};function le(t){let n=1,e,s;for(;n<arguments.length;n++){e=arguments[n];for(s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t}function Gs(t,n){const e=t.replace(/\|/g,(r,o,a)=>{let l=!1,c=o;for(;--c>=0&&a[c]==="\\";)l=!l;return l?"|":" |"}),s=e.split(/ \|/);let i=0;if(s[0].trim()||s.shift(),s.length>0&&!s[s.length-1].trim()&&s.pop(),s.length>n)s.splice(n);else for(;s.length<n;)s.push("");for(;i<s.length;i++)s[i]=s[i].trim().replace(/\\\|/g,"|");return s}function Ct(t,n,e){const s=t.length;if(s===0)return"";let i=0;for(;i<s;){const r=t.charAt(s-i-1);if(r===n&&!e)i++;else if(r!==n&&e)i++;else break}return t.substr(0,s-i)}function df(t,n){if(t.indexOf(n[1])===-1)return-1;const e=t.length;let s=0,i=0;for(;i<e;i++)if(t[i]==="\\")i++;else if(t[i]===n[0])s++;else if(t[i]===n[1]&&(s--,s<0))return i;return-1}function Qi(t){t&&t.sanitize&&!t.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function Ws(t,n){if(n<1)return"";let e="";for(;n>1;)n&1&&(e+=t),n>>=1,t+=t;return e+t}function Ks(t,n,e,s){const i=n.href,r=n.title?D(n.title):null,o=t[1].replace(/\\([\[\]])/g,"$1");if(t[0].charAt(0)!=="!"){s.state.inLink=!0;const a={type:"link",raw:e,href:i,title:r,text:o,tokens:s.inlineTokens(o,[])};return s.state.inLink=!1,a}else return{type:"image",raw:e,href:i,title:r,text:D(o)}}function gf(t,n){const e=t.match(/^(\s+)(?:```)/);if(e===null)return n;const s=e[1];return n.split(`
`).map(i=>{const r=i.match(/^\s+/);if(r===null)return i;const[o]=r;return o.length>=s.length?i.slice(s.length):i}).join(`
`)}class Nn{constructor(n){this.options=n||Xe}space(n){const e=this.rules.block.newline.exec(n);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(n){const e=this.rules.block.code.exec(n);if(e){const s=e[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?s:Ct(s,`
`)}}}fences(n){const e=this.rules.block.fences.exec(n);if(e){const s=e[0],i=gf(s,e[3]||"");return{type:"code",raw:s,lang:e[2]?e[2].trim():e[2],text:i}}}heading(n){const e=this.rules.block.heading.exec(n);if(e){let s=e[2].trim();if(/#$/.test(s)){const r=Ct(s,"#");(this.options.pedantic||!r||/ $/.test(r))&&(s=r.trim())}const i={type:"heading",raw:e[0],depth:e[1].length,text:s,tokens:[]};return this.lexer.inline(i.text,i.tokens),i}}hr(n){const e=this.rules.block.hr.exec(n);if(e)return{type:"hr",raw:e[0]}}blockquote(n){const e=this.rules.block.blockquote.exec(n);if(e){const s=e[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:e[0],tokens:this.lexer.blockTokens(s,[]),text:s}}}list(n){let e=this.rules.block.list.exec(n);if(e){let s,i,r,o,a,l,c,h,p,_,g,E,O=e[1].trim();const N=O.length>1,A={type:"list",raw:"",ordered:N,start:N?+O.slice(0,-1):"",loose:!1,items:[]};O=N?`\\d{1,9}\\${O.slice(-1)}`:`\\${O}`,this.options.pedantic&&(O=N?O:"[*+-]");const M=new RegExp(`^( {0,3}${O})((?: [^\\n]*)?(?:\\n|$))`);for(;n&&(E=!1,!(!(e=M.exec(n))||this.rules.block.hr.test(n)));){if(s=e[0],n=n.substring(s.length),h=e[2].split(`
`,1)[0],p=n.split(`
`,1)[0],this.options.pedantic?(o=2,g=h.trimLeft()):(o=e[2].search(/[^ ]/),o=o>4?1:o,g=h.slice(o),o+=e[1].length),l=!1,!h&&/^ *$/.test(p)&&(s+=p+`
`,n=n.substring(p.length+1),E=!0),!E){const G=new RegExp(`^ {0,${Math.min(3,o-1)}}(?:[*+-]|\\d{1,9}[.)])`);for(;n&&(_=n.split(`
`,1)[0],h=_,this.options.pedantic&&(h=h.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!G.test(h));){if(h.search(/[^ ]/)>=o||!h.trim())g+=`
`+h.slice(o);else if(!l)g+=`
`+h;else break;!l&&!h.trim()&&(l=!0),s+=_+`
`,n=n.substring(_.length+1)}}A.loose||(c?A.loose=!0:/\n *\n *$/.test(s)&&(c=!0)),this.options.gfm&&(i=/^\[[ xX]\] /.exec(g),i&&(r=i[0]!=="[ ] ",g=g.replace(/^\[[ xX]\] +/,""))),A.items.push({type:"list_item",raw:s,task:!!i,checked:r,loose:!1,text:g}),A.raw+=s}A.items[A.items.length-1].raw=s.trimRight(),A.items[A.items.length-1].text=g.trimRight(),A.raw=A.raw.trimRight();const ce=A.items.length;for(a=0;a<ce;a++){this.lexer.state.top=!1,A.items[a].tokens=this.lexer.blockTokens(A.items[a].text,[]);const G=A.items[a].tokens.filter(te=>te.type==="space"),Z=G.every(te=>{const S=te.raw.split("");let Ne=0;for(const P of S)if(P===`
`&&(Ne+=1),Ne>1)return!0;return!1});!A.loose&&G.length&&Z&&(A.loose=!0,A.items[a].loose=!0)}return A}}html(n){const e=this.rules.block.html.exec(n);if(e){const s={type:"html",raw:e[0],pre:!this.options.sanitizer&&(e[1]==="pre"||e[1]==="script"||e[1]==="style"),text:e[0]};return this.options.sanitize&&(s.type="paragraph",s.text=this.options.sanitizer?this.options.sanitizer(e[0]):D(e[0]),s.tokens=[],this.lexer.inline(s.text,s.tokens)),s}}def(n){const e=this.rules.block.def.exec(n);if(e)return e[3]&&(e[3]=e[3].substring(1,e[3].length-1)),{type:"def",tag:e[1].toLowerCase().replace(/\s+/g," "),raw:e[0],href:e[2],title:e[3]}}table(n){const e=this.rules.block.table.exec(n);if(e){const s={type:"table",header:Gs(e[1]).map(i=>({text:i})),align:e[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:e[3]&&e[3].trim()?e[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(s.header.length===s.align.length){s.raw=e[0];let i=s.align.length,r,o,a,l;for(r=0;r<i;r++)/^ *-+: *$/.test(s.align[r])?s.align[r]="right":/^ *:-+: *$/.test(s.align[r])?s.align[r]="center":/^ *:-+ *$/.test(s.align[r])?s.align[r]="left":s.align[r]=null;for(i=s.rows.length,r=0;r<i;r++)s.rows[r]=Gs(s.rows[r],s.header.length).map(c=>({text:c}));for(i=s.header.length,o=0;o<i;o++)s.header[o].tokens=[],this.lexer.inlineTokens(s.header[o].text,s.header[o].tokens);for(i=s.rows.length,o=0;o<i;o++)for(l=s.rows[o],a=0;a<l.length;a++)l[a].tokens=[],this.lexer.inlineTokens(l[a].text,l[a].tokens);return s}}}lheading(n){const e=this.rules.block.lheading.exec(n);if(e){const s={type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:[]};return this.lexer.inline(s.text,s.tokens),s}}paragraph(n){const e=this.rules.block.paragraph.exec(n);if(e){const s={type:"paragraph",raw:e[0],text:e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1],tokens:[]};return this.lexer.inline(s.text,s.tokens),s}}text(n){const e=this.rules.block.text.exec(n);if(e){const s={type:"text",raw:e[0],text:e[0],tokens:[]};return this.lexer.inline(s.text,s.tokens),s}}escape(n){const e=this.rules.inline.escape.exec(n);if(e)return{type:"escape",raw:e[0],text:D(e[1])}}tag(n){const e=this.rules.inline.tag.exec(n);if(e)return!this.lexer.state.inLink&&/^<a /i.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(e[0]):D(e[0]):e[0]}}link(n){const e=this.rules.inline.link.exec(n);if(e){const s=e[2].trim();if(!this.options.pedantic&&/^</.test(s)){if(!/>$/.test(s))return;const o=Ct(s.slice(0,-1),"\\");if((s.length-o.length)%2===0)return}else{const o=df(e[2],"()");if(o>-1){const l=(e[0].indexOf("!")===0?5:4)+e[1].length+o;e[2]=e[2].substring(0,o),e[0]=e[0].substring(0,l).trim(),e[3]=""}}let i=e[2],r="";if(this.options.pedantic){const o=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);o&&(i=o[1],r=o[3])}else r=e[3]?e[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(this.options.pedantic&&!/>$/.test(s)?i=i.slice(1):i=i.slice(1,-1)),Ks(e,{href:i&&i.replace(this.rules.inline._escapes,"$1"),title:r&&r.replace(this.rules.inline._escapes,"$1")},e[0],this.lexer)}}reflink(n,e){let s;if((s=this.rules.inline.reflink.exec(n))||(s=this.rules.inline.nolink.exec(n))){let i=(s[2]||s[1]).replace(/\s+/g," ");if(i=e[i.toLowerCase()],!i||!i.href){const r=s[0].charAt(0);return{type:"text",raw:r,text:r}}return Ks(s,i,s[0],this.lexer)}}emStrong(n,e,s=""){let i=this.rules.inline.emStrong.lDelim.exec(n);if(!i||i[3]&&s.match(/[\p{L}\p{N}]/u))return;const r=i[1]||i[2]||"";if(!r||r&&(s===""||this.rules.inline.punctuation.exec(s))){const o=i[0].length-1;let a,l,c=o,h=0;const p=i[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(p.lastIndex=0,e=e.slice(-1*n.length+o);(i=p.exec(e))!=null;){if(a=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!a)continue;if(l=a.length,i[3]||i[4]){c+=l;continue}else if((i[5]||i[6])&&o%3&&!((o+l)%3)){h+=l;continue}if(c-=l,c>0)continue;if(l=Math.min(l,l+c+h),Math.min(o,l)%2){const g=n.slice(1,o+i.index+l);return{type:"em",raw:n.slice(0,o+i.index+l+1),text:g,tokens:this.lexer.inlineTokens(g,[])}}const _=n.slice(2,o+i.index+l-1);return{type:"strong",raw:n.slice(0,o+i.index+l+1),text:_,tokens:this.lexer.inlineTokens(_,[])}}}}codespan(n){const e=this.rules.inline.code.exec(n);if(e){let s=e[2].replace(/\n/g," ");const i=/[^ ]/.test(s),r=/^ /.test(s)&&/ $/.test(s);return i&&r&&(s=s.substring(1,s.length-1)),s=D(s,!0),{type:"codespan",raw:e[0],text:s}}}br(n){const e=this.rules.inline.br.exec(n);if(e)return{type:"br",raw:e[0]}}del(n){const e=this.rules.inline.del.exec(n);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2],[])}}autolink(n,e){const s=this.rules.inline.autolink.exec(n);if(s){let i,r;return s[2]==="@"?(i=D(this.options.mangle?e(s[1]):s[1]),r="mailto:"+i):(i=D(s[1]),r=i),{type:"link",raw:s[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}}}url(n,e){let s;if(s=this.rules.inline.url.exec(n)){let i,r;if(s[2]==="@")i=D(this.options.mangle?e(s[0]):s[0]),r="mailto:"+i;else{let o;do o=s[0],s[0]=this.rules.inline._backpedal.exec(s[0])[0];while(o!==s[0]);i=D(s[0]),s[1]==="www."?r="http://"+i:r=i}return{type:"link",raw:s[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(n,e){const s=this.rules.inline.text.exec(n);if(s){let i;return this.lexer.state.inRawBlock?i=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(s[0]):D(s[0]):s[0]:i=D(this.options.smartypants?e(s[0]):s[0]),{type:"text",raw:s[0],text:i}}}}const v={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)( [^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:jt,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};v._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;v._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;v.def=B(v.def).replace("label",v._label).replace("title",v._title).getRegex();v.bullet=/(?:[*+-]|\d{1,9}[.)])/;v.listItemStart=B(/^( *)(bull) */).replace("bull",v.bullet).getRegex();v.list=B(v.list).replace(/bull/g,v.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+v.def.source+")").getRegex();v._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";v._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;v.html=B(v.html,"i").replace("comment",v._comment).replace("tag",v._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();v.paragraph=B(v._paragraph).replace("hr",v.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",v._tag).getRegex();v.blockquote=B(v.blockquote).replace("paragraph",v.paragraph).getRegex();v.normal=le({},v);v.gfm=le({},v.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"});v.gfm.table=B(v.gfm.table).replace("hr",v.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",v._tag).getRegex();v.gfm.paragraph=B(v._paragraph).replace("hr",v.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",v.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",v._tag).getRegex();v.pedantic=le({},v.normal,{html:B(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",v._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:jt,paragraph:B(v.normal._paragraph).replace("hr",v.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",v.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const w={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:jt,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:jt,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};w._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~";w.punctuation=B(w.punctuation).replace(/punctuation/g,w._punctuation).getRegex();w.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g;w.escapedEmSt=/\\\*|\\_/g;w._comment=B(v._comment).replace("(?:-->|$)","-->").getRegex();w.emStrong.lDelim=B(w.emStrong.lDelim).replace(/punct/g,w._punctuation).getRegex();w.emStrong.rDelimAst=B(w.emStrong.rDelimAst,"g").replace(/punct/g,w._punctuation).getRegex();w.emStrong.rDelimUnd=B(w.emStrong.rDelimUnd,"g").replace(/punct/g,w._punctuation).getRegex();w._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g;w._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;w._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;w.autolink=B(w.autolink).replace("scheme",w._scheme).replace("email",w._email).getRegex();w._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;w.tag=B(w.tag).replace("comment",w._comment).replace("attribute",w._attribute).getRegex();w._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;w._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;w._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;w.link=B(w.link).replace("label",w._label).replace("href",w._href).replace("title",w._title).getRegex();w.reflink=B(w.reflink).replace("label",w._label).replace("ref",v._label).getRegex();w.nolink=B(w.nolink).replace("ref",v._label).getRegex();w.reflinkSearch=B(w.reflinkSearch,"g").replace("reflink",w.reflink).replace("nolink",w.nolink).getRegex();w.normal=le({},w);w.pedantic=le({},w.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:B(/^!?\[(label)\]\((.*?)\)/).replace("label",w._label).getRegex(),reflink:B(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",w._label).getRegex()});w.gfm=le({},w.normal,{escape:B(w.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/});w.gfm.url=B(w.gfm.url,"i").replace("email",w.gfm._extended_email).getRegex();w.breaks=le({},w.gfm,{br:B(w.br).replace("{2,}","*").getRegex(),text:B(w.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});function pf(t){return t.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function Hs(t){let n="",e,s;const i=t.length;for(e=0;e<i;e++)s=t.charCodeAt(e),Math.random()>.5&&(s="x"+s.toString(16)),n+="&#"+s+";";return n}class ye{constructor(n){this.tokens=[],this.tokens.links=Object.create(null),this.options=n||Xe,this.options.tokenizer=this.options.tokenizer||new Nn,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const e={block:v.normal,inline:w.normal};this.options.pedantic?(e.block=v.pedantic,e.inline=w.pedantic):this.options.gfm&&(e.block=v.gfm,this.options.breaks?e.inline=w.breaks:e.inline=w.gfm),this.tokenizer.rules=e}static get rules(){return{block:v,inline:w}}static lex(n,e){return new ye(e).lex(n)}static lexInline(n,e){return new ye(e).inlineTokens(n)}lex(n){n=n.replace(/\r\n|\r/g,`
`).replace(/\t/g,"    "),this.blockTokens(n,this.tokens);let e;for(;e=this.inlineQueue.shift();)this.inlineTokens(e.src,e.tokens);return this.tokens}blockTokens(n,e=[]){this.options.pedantic&&(n=n.replace(/^ +$/gm,""));let s,i,r,o;for(;n;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>(s=a.call({lexer:this},n,e))?(n=n.substring(s.raw.length),e.push(s),!0):!1))){if(s=this.tokenizer.space(n)){n=n.substring(s.raw.length),s.raw.length===1&&e.length>0?e[e.length-1].raw+=`
`:e.push(s);continue}if(s=this.tokenizer.code(n)){n=n.substring(s.raw.length),i=e[e.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+s.raw,i.text+=`
`+s.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text):e.push(s);continue}if(s=this.tokenizer.fences(n)){n=n.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.heading(n)){n=n.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.hr(n)){n=n.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.blockquote(n)){n=n.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.list(n)){n=n.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.html(n)){n=n.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.def(n)){n=n.substring(s.raw.length),i=e[e.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+s.raw,i.text+=`
`+s.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text):this.tokens.links[s.tag]||(this.tokens.links[s.tag]={href:s.href,title:s.title});continue}if(s=this.tokenizer.table(n)){n=n.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.lheading(n)){n=n.substring(s.raw.length),e.push(s);continue}if(r=n,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const l=n.slice(1);let c;this.options.extensions.startBlock.forEach(function(h){c=h.call({lexer:this},l),typeof c=="number"&&c>=0&&(a=Math.min(a,c))}),a<1/0&&a>=0&&(r=n.substring(0,a+1))}if(this.state.top&&(s=this.tokenizer.paragraph(r))){i=e[e.length-1],o&&i.type==="paragraph"?(i.raw+=`
`+s.raw,i.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):e.push(s),o=r.length!==n.length,n=n.substring(s.raw.length);continue}if(s=this.tokenizer.text(n)){n=n.substring(s.raw.length),i=e[e.length-1],i&&i.type==="text"?(i.raw+=`
`+s.raw,i.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):e.push(s);continue}if(n){const a="Infinite loop on byte: "+n.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,e}inline(n,e){this.inlineQueue.push({src:n,tokens:e})}inlineTokens(n,e=[]){let s,i,r,o=n,a,l,c;if(this.tokens.links){const h=Object.keys(this.tokens.links);if(h.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(o))!=null;)h.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,a.index)+"["+Ws("a",a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.blockSkip.exec(o))!=null;)o=o.slice(0,a.index)+"["+Ws("a",a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(a=this.tokenizer.rules.inline.escapedEmSt.exec(o))!=null;)o=o.slice(0,a.index)+"++"+o.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;n;)if(l||(c=""),l=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(h=>(s=h.call({lexer:this},n,e))?(n=n.substring(s.raw.length),e.push(s),!0):!1))){if(s=this.tokenizer.escape(n)){n=n.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.tag(n)){n=n.substring(s.raw.length),i=e[e.length-1],i&&s.type==="text"&&i.type==="text"?(i.raw+=s.raw,i.text+=s.text):e.push(s);continue}if(s=this.tokenizer.link(n)){n=n.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.reflink(n,this.tokens.links)){n=n.substring(s.raw.length),i=e[e.length-1],i&&s.type==="text"&&i.type==="text"?(i.raw+=s.raw,i.text+=s.text):e.push(s);continue}if(s=this.tokenizer.emStrong(n,o,c)){n=n.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.codespan(n)){n=n.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.br(n)){n=n.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.del(n)){n=n.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.autolink(n,Hs)){n=n.substring(s.raw.length),e.push(s);continue}if(!this.state.inLink&&(s=this.tokenizer.url(n,Hs))){n=n.substring(s.raw.length),e.push(s);continue}if(r=n,this.options.extensions&&this.options.extensions.startInline){let h=1/0;const p=n.slice(1);let _;this.options.extensions.startInline.forEach(function(g){_=g.call({lexer:this},p),typeof _=="number"&&_>=0&&(h=Math.min(h,_))}),h<1/0&&h>=0&&(r=n.substring(0,h+1))}if(s=this.tokenizer.inlineText(r,pf)){n=n.substring(s.raw.length),s.raw.slice(-1)!=="_"&&(c=s.raw.slice(-1)),l=!0,i=e[e.length-1],i&&i.type==="text"?(i.raw+=s.raw,i.text+=s.text):e.push(s);continue}if(n){const h="Infinite loop on byte: "+n.charCodeAt(0);if(this.options.silent){console.error(h);break}else throw new Error(h)}}return e}}class Mn{constructor(n){this.options=n||Xe}code(n,e,s){const i=(e||"").match(/\S*/)[0];if(this.options.highlight){const r=this.options.highlight(n,i);r!=null&&r!==n&&(s=!0,n=r)}return n=n.replace(/\n$/,"")+`
`,i?'<pre><code class="'+this.options.langPrefix+D(i,!0)+'">'+(s?n:D(n,!0))+`</code></pre>
`:"<pre><code>"+(s?n:D(n,!0))+`</code></pre>
`}blockquote(n){return`<blockquote>
`+n+`</blockquote>
`}html(n){return n}heading(n,e,s,i){return this.options.headerIds?"<h"+e+' id="'+this.options.headerPrefix+i.slug(s)+'">'+n+"</h"+e+`>
`:"<h"+e+">"+n+"</h"+e+`>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(n,e,s){const i=e?"ol":"ul",r=e&&s!==1?' start="'+s+'"':"";return"<"+i+r+`>
`+n+"</"+i+`>
`}listitem(n){return"<li>"+n+`</li>
`}checkbox(n){return"<input "+(n?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(n){return"<p>"+n+`</p>
`}table(n,e){return e&&(e="<tbody>"+e+"</tbody>"),`<table>
<thead>
`+n+`</thead>
`+e+`</table>
`}tablerow(n){return`<tr>
`+n+`</tr>
`}tablecell(n,e){const s=e.header?"th":"td";return(e.align?"<"+s+' align="'+e.align+'">':"<"+s+">")+n+"</"+s+`>
`}strong(n){return"<strong>"+n+"</strong>"}em(n){return"<em>"+n+"</em>"}codespan(n){return"<code>"+n+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(n){return"<del>"+n+"</del>"}link(n,e,s){if(n=Us(this.options.sanitize,this.options.baseUrl,n),n===null)return s;let i='<a href="'+D(n)+'"';return e&&(i+=' title="'+e+'"'),i+=">"+s+"</a>",i}image(n,e,s){if(n=Us(this.options.sanitize,this.options.baseUrl,n),n===null)return s;let i='<img src="'+n+'" alt="'+s+'"';return e&&(i+=' title="'+e+'"'),i+=this.options.xhtml?"/>":">",i}text(n){return n}}class Xi{strong(n){return n}em(n){return n}codespan(n){return n}del(n){return n}html(n){return n}text(n){return n}link(n,e,s){return""+s}image(n,e,s){return""+s}br(){return""}}class Yi{constructor(){this.seen={}}serialize(n){return n.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(n,e){let s=n,i=0;if(this.seen.hasOwnProperty(s)){i=this.seen[n];do i++,s=n+"-"+i;while(this.seen.hasOwnProperty(s))}return e||(this.seen[n]=i,this.seen[s]=0),s}slug(n,e={}){const s=this.serialize(n);return this.getNextSafeSlug(s,e.dryrun)}}class we{constructor(n){this.options=n||Xe,this.options.renderer=this.options.renderer||new Mn,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Xi,this.slugger=new Yi}static parse(n,e){return new we(e).parse(n)}static parseInline(n,e){return new we(e).parseInline(n)}parse(n,e=!0){let s="",i,r,o,a,l,c,h,p,_,g,E,O,N,A,M,ce,G,Z,te;const S=n.length;for(i=0;i<S;i++){if(g=n[i],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[g.type]&&(te=this.options.extensions.renderers[g.type].call({parser:this},g),te!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(g.type))){s+=te||"";continue}switch(g.type){case"space":continue;case"hr":{s+=this.renderer.hr();continue}case"heading":{s+=this.renderer.heading(this.parseInline(g.tokens),g.depth,Zi(this.parseInline(g.tokens,this.textRenderer)),this.slugger);continue}case"code":{s+=this.renderer.code(g.text,g.lang,g.escaped);continue}case"table":{for(p="",h="",a=g.header.length,r=0;r<a;r++)h+=this.renderer.tablecell(this.parseInline(g.header[r].tokens),{header:!0,align:g.align[r]});for(p+=this.renderer.tablerow(h),_="",a=g.rows.length,r=0;r<a;r++){for(c=g.rows[r],h="",l=c.length,o=0;o<l;o++)h+=this.renderer.tablecell(this.parseInline(c[o].tokens),{header:!1,align:g.align[o]});_+=this.renderer.tablerow(h)}s+=this.renderer.table(p,_);continue}case"blockquote":{_=this.parse(g.tokens),s+=this.renderer.blockquote(_);continue}case"list":{for(E=g.ordered,O=g.start,N=g.loose,a=g.items.length,_="",r=0;r<a;r++)M=g.items[r],ce=M.checked,G=M.task,A="",M.task&&(Z=this.renderer.checkbox(ce),N?M.tokens.length>0&&M.tokens[0].type==="paragraph"?(M.tokens[0].text=Z+" "+M.tokens[0].text,M.tokens[0].tokens&&M.tokens[0].tokens.length>0&&M.tokens[0].tokens[0].type==="text"&&(M.tokens[0].tokens[0].text=Z+" "+M.tokens[0].tokens[0].text)):M.tokens.unshift({type:"text",text:Z}):A+=Z),A+=this.parse(M.tokens,N),_+=this.renderer.listitem(A,G,ce);s+=this.renderer.list(_,E,O);continue}case"html":{s+=this.renderer.html(g.text);continue}case"paragraph":{s+=this.renderer.paragraph(this.parseInline(g.tokens));continue}case"text":{for(_=g.tokens?this.parseInline(g.tokens):g.text;i+1<S&&n[i+1].type==="text";)g=n[++i],_+=`
`+(g.tokens?this.parseInline(g.tokens):g.text);s+=e?this.renderer.paragraph(_):_;continue}default:{const Ne='Token with "'+g.type+'" type was not found.';if(this.options.silent){console.error(Ne);return}else throw new Error(Ne)}}}return s}parseInline(n,e){e=e||this.renderer;let s="",i,r,o;const a=n.length;for(i=0;i<a;i++){if(r=n[i],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[r.type]&&(o=this.options.extensions.renderers[r.type].call({parser:this},r),o!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(r.type))){s+=o||"";continue}switch(r.type){case"escape":{s+=e.text(r.text);break}case"html":{s+=e.html(r.text);break}case"link":{s+=e.link(r.href,r.title,this.parseInline(r.tokens,e));break}case"image":{s+=e.image(r.href,r.title,r.text);break}case"strong":{s+=e.strong(this.parseInline(r.tokens,e));break}case"em":{s+=e.em(this.parseInline(r.tokens,e));break}case"codespan":{s+=e.codespan(r.text);break}case"br":{s+=e.br();break}case"del":{s+=e.del(this.parseInline(r.tokens,e));break}case"text":{s+=e.text(r.text);break}default:{const l='Token with "'+r.type+'" type was not found.';if(this.options.silent){console.error(l);return}else throw new Error(l)}}}return s}}function k(t,n,e){if(typeof t>"u"||t===null)throw new Error("marked(): input parameter is undefined or null");if(typeof t!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");if(typeof n=="function"&&(e=n,n=null),n=le({},k.defaults,n||{}),Qi(n),e){const s=n.highlight;let i;try{i=ye.lex(t,n)}catch(a){return e(a)}const r=function(a){let l;if(!a)try{n.walkTokens&&k.walkTokens(i,n.walkTokens),l=we.parse(i,n)}catch(c){a=c}return n.highlight=s,a?e(a):e(null,l)};if(!s||s.length<3||(delete n.highlight,!i.length))return r();let o=0;k.walkTokens(i,function(a){a.type==="code"&&(o++,setTimeout(()=>{s(a.text,a.lang,function(l,c){if(l)return r(l);c!=null&&c!==a.text&&(a.text=c,a.escaped=!0),o--,o===0&&r()})},0))}),o===0&&r();return}try{const s=ye.lex(t,n);return n.walkTokens&&k.walkTokens(s,n.walkTokens),we.parse(s,n)}catch(s){if(s.message+=`
Please report this to https://github.com/markedjs/marked.`,n.silent)return"<p>An error occurred:</p><pre>"+D(s.message+"",!0)+"</pre>";throw s}}k.options=k.setOptions=function(t){return le(k.defaults,t),Xh(k.defaults),k};k.getDefaults=Hi;k.defaults=Xe;k.use=function(...t){const n=le({},...t),e=k.defaults.extensions||{renderers:{},childTokens:{}};let s;t.forEach(i=>{if(i.extensions&&(s=!0,i.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if(r.renderer){const o=e.renderers?e.renderers[r.name]:null;o?e.renderers[r.name]=function(...a){let l=r.renderer.apply(this,a);return l===!1&&(l=o.apply(this,a)),l}:e.renderers[r.name]=r.renderer}if(r.tokenizer){if(!r.level||r.level!=="block"&&r.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");e[r.level]?e[r.level].unshift(r.tokenizer):e[r.level]=[r.tokenizer],r.start&&(r.level==="block"?e.startBlock?e.startBlock.push(r.start):e.startBlock=[r.start]:r.level==="inline"&&(e.startInline?e.startInline.push(r.start):e.startInline=[r.start]))}r.childTokens&&(e.childTokens[r.name]=r.childTokens)})),i.renderer){const r=k.defaults.renderer||new Mn;for(const o in i.renderer){const a=r[o];r[o]=(...l)=>{let c=i.renderer[o].apply(r,l);return c===!1&&(c=a.apply(r,l)),c}}n.renderer=r}if(i.tokenizer){const r=k.defaults.tokenizer||new Nn;for(const o in i.tokenizer){const a=r[o];r[o]=(...l)=>{let c=i.tokenizer[o].apply(r,l);return c===!1&&(c=a.apply(r,l)),c}}n.tokenizer=r}if(i.walkTokens){const r=k.defaults.walkTokens;n.walkTokens=function(o){i.walkTokens.call(this,o),r&&r.call(this,o)}}s&&(n.extensions=e),k.setOptions(n)})};k.walkTokens=function(t,n){for(const e of t)switch(n.call(k,e),e.type){case"table":{for(const s of e.header)k.walkTokens(s.tokens,n);for(const s of e.rows)for(const i of s)k.walkTokens(i.tokens,n);break}case"list":{k.walkTokens(e.items,n);break}default:k.defaults.extensions&&k.defaults.extensions.childTokens&&k.defaults.extensions.childTokens[e.type]?k.defaults.extensions.childTokens[e.type].forEach(function(s){k.walkTokens(e[s],n)}):e.tokens&&k.walkTokens(e.tokens,n)}};k.parseInline=function(t,n){if(typeof t>"u"||t===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof t!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");n=le({},k.defaults,n||{}),Qi(n);try{const e=ye.lexInline(t,n);return n.walkTokens&&k.walkTokens(e,n.walkTokens),we.parseInline(e,n)}catch(e){if(e.message+=`
Please report this to https://github.com/markedjs/marked.`,n.silent)return"<p>An error occurred:</p><pre>"+D(e.message+"",!0)+"</pre>";throw e}};k.Parser=we;k.parser=we.parse;k.Renderer=Mn;k.TextRenderer=Xi;k.Lexer=ye;k.lexer=ye.lex;k.Tokenizer=Nn;k.Slugger=Yi;k.parse=k;k.options;k.setOptions;k.use;k.walkTokens;k.parseInline;we.parse;ye.lex;var Cn=typeof window<"u"?window:{};function mf(){var t=Cn.DOMParser,n=!1;try{new t().parseFromString("","text/html")&&(n=!0)}catch{}return n}function _f(){var t=function(){};return yf()?t.prototype.parseFromString=function(n){var e=new window.ActiveXObject("htmlfile");return e.designMode="on",e.open(),e.write(n),e.close(),e}:t.prototype.parseFromString=function(n){var e=document.implementation.createHTMLDocument("");return e.open(),e.write(n),e.close(),e},t}function yf(){var t=!1;try{document.implementation.createHTMLDocument("").open()}catch{Cn.ActiveXObject&&(t=!0)}return t}mf()?Cn.DOMParser:_f();/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */at.arrowup,at.arrowdown,at.esc;at.enter,at.tab;function Rd(){var In,Fn,jn,Ln,qn,zn,Dn,Vn,Jn,Un,Gn,Wn;const[t,n]=Q.useState(!1),{job_positions:e}=Ve(d=>d.job_positions),{departments:s}=Ve(d=>d.departments),{accounts:i}=Ve(d=>d.accounts),{users:r}=Ve(d=>d.app),{user:o}=Ve(d=>d.app);Q.useState(!1),Q.useState(!1),Q.useState(null);const[a,l]=Q.useState(null);Q.useState({});const[c,h]=Q.useState([]),[p,_]=Q.useState(0),{applicantForm:g}=Ve(d=>d.applicants),[E,O]=Q.useState([]),[N,A]=Q.useState([]),[M,ce]=Q.useState([]),[G,Z]=Q.useState(!1),te=rr(),{register:S,handleSubmit:Ne,formState:{errors:P,isSubmitting:Bn},reset:er,control:wf}=pr({defaultValues:{work_experience:[{company:"",position:"",started_at:"",end_at:""}]}});Q.useEffect(()=>{t&&(St.dispatch(dr()),St.dispatch(gr()))},[t]),Q.useEffect(()=>{(async()=>{_(0)})(),l(!1)},[]),console.log("query",g);async function $n(d){console.log("aaaaaaaaaaaaaaaaa",d);try{await St.dispatch(fr({...d,province:JSON.parse(d==null?void 0:d.province).name,city:JSON.parse(d==null?void 0:d.city).name,region:JSON.parse(d==null?void 0:d.region).name,site:o.site,files:c.map(T=>T.files),is_experience:G})),await St.dispatch(hr()),Tt.success("Employee Saved successfully"),er(),h([]),n(!1)}catch(T){console.log("bbbbbb",T),Tt.error("Employee failed to saved")}}function xt(d){if(d.target.name=="region"){const T=JSON.parse(d.target.value),X=ar.filter(ne=>ne.region_code===T.region_code);O(X),te(At({...g,[d.target.name]:T.name}))}else if(d.target.name=="province"){const T=JSON.parse(d.target.value),X=lr.filter(ne=>ne.province_code===T.province_code);A(X),te(At({...g,[d.target.name]:T.name}))}else if(d.target.name=="city"){const T=JSON.parse(d.target.value),X=cr.filter(ne=>ne.city_code===T.city_code);ce(X),te(At({...g,[d.target.name]:T.name}))}else te(At({...g,[d.target.name]:d.target.value}))}const tr=async d=>{const T=Y=>new Promise((Pe,Pt)=>{const Me=new FileReader;Me.onload=()=>Pe(Me.result),Me.onerror=kt=>Pt(kt),Me.readAsDataURL(Y)}),ne=Array.from(d).filter(Y=>!c.some(Pe=>Pe.file.name===Y.name&&Pe.file.size===Y.size&&Pe.file.lastModified===Y.lastModified)),vt=await Promise.all(ne.map(async Y=>({file:Y,files:await T(Y)})));h(Y=>[...Y,...vt])},nr={name:"file",multiple:!0,method:"GET",action:"https://660d2bd96ddfa2943b33731c.mockapi.io/api/upload",onChange(d){const{status:T}=d.file;if(T!=="uploading"&&console.log(d.file,d.fileList),T==="done"){const X=d.fileList.map(ne=>ne.originFileObj).filter(Boolean);tr(X),Tt.success(`${d.file.name} file uploaded successfully.`)}else T==="error"&&Tt.error(`${d.file.name} file upload failed.`)},onRemove(d){return h(T=>T.filter(X=>X.file.name!==d.name)),!0}};return console.log("ssssssssss",r),f.jsxs("div",{className:"my-2",children:[f.jsx("div",{class:"inline-flex rounded-md shadow-sm",role:"group",children:f.jsxs("button",{type:"button",onClick:()=>n(!0),class:"inline-flex items-center px-4 py-2 text-sm font-medium text-blue-500 bg-transparent border border-blue-500 rounded-lg hover:bg-blue-500 hover:text-white focus:z-10 focus:ring-2 focus:ring-blue-500 focus:bg-blue-500 focus:text-white      gap-1",children:[f.jsx(yr,{className:"text-xl"}),"Add Existing Employee"]})}),f.jsx(_r,{title:"Existing Employee",confirmLoading:a,open:t,onOk:$n,onCancel:()=>n(!1),width:1200,okText:"Save",cancelText:"Cancel",footer:null,children:f.jsxs("form",{onSubmit:Ne($n),className:"space-y-4 px-8 py-8",children:[f.jsx("h1",{className:"text-xl font-semibold mb-3 text-gray-900 ",children:"Personal Information"}),f.jsx("div",{className:"flex-1",children:f.jsx($,{register:{...S("app_id",{required:"Employee ID is required"})},errorMessage:(In=P==null?void 0:P.app_id)==null?void 0:In.message,name:"app_id",label:"Employee ID",type:"text"})}),f.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row",children:[f.jsx("div",{className:"flex-1",children:f.jsx($,{register:{...S("fname",{required:"First Name is required"})},errorMessage:(Fn=P==null?void 0:P.fname)==null?void 0:Fn.message,name:"fname",label:"First Name",type:"text"})}),f.jsx("div",{className:"flex-1",children:f.jsx($,{register:{...S("mname",{})},name:"mname",label:"Middle Name",type:"text"})}),f.jsx("div",{className:"flex-1",children:f.jsx($,{register:{...S("lname",{required:"Last Name is required"})},errorMessage:(jn=P==null?void 0:P.lname)==null?void 0:jn.message,name:"lname",label:"Last Name",type:"text"})}),f.jsx("div",{className:"flex-none w-24",children:f.jsx(Xn,{register:{...S("suffix",{required:!1})},options:[{label:"--",value:""},{label:"Sr.",value:"Sr."},{label:"Jr.",value:"Jr."},{label:"II",value:"II"},{label:"III",value:"III"},{label:"IV",value:"IV"},{label:"V",value:"V"}],label:"Suffix",name:"suffix"})})]}),f.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row",children:[f.jsx("div",{className:"flex-1",children:f.jsx(Xn,{register:{...S("gender",{required:"Gender is required"})},options:[{label:"Male",value:"Male"},{label:"Female",value:"Female"}],errorMessage:(Ln=P==null?void 0:P.gender)==null?void 0:Ln.message,label:"Gender",name:"gender"})}),f.jsx("div",{className:"flex-1",children:f.jsx($,{register:{...S("dob",{required:"Date of Birth is required"})},errorMessage:(qn=P==null?void 0:P.dob)==null?void 0:qn.message,name:"dob",label:"Date of Birth",type:"date"})})]}),f.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row",children:[f.jsx("div",{className:"flex-1",children:f.jsx($,{register:{...S("email",{required:"Email is required"})},errorMessage:(zn=P==null?void 0:P.email)==null?void 0:zn.message,name:"email",label:"Email",type:"email"})}),f.jsx("div",{className:"flex-1",children:f.jsx($,{register:{...S("phone",{required:"Phone is required"})},errorMessage:(Dn=P==null?void 0:P.phone)==null?void 0:Dn.message,name:"phone",label:"Phone",type:"number"})})]}),f.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row",children:[f.jsx("div",{className:"flex-1",children:f.jsx(Je,{register:{...S("marital",{required:!1})},options:[{label:"Single",value:"Single"},{label:"Married",value:"Married"},{label:"Widowed",value:"Widowed"},{label:"Divorced",value:"Divorced"}],label:"Marital Status",name:"marital"})}),f.jsx("div",{className:"flex-1",children:f.jsx($,{register:{...S("religion",{required:!1})},name:"religion",label:"Religion",type:"text"})}),f.jsx("div",{className:"flex-1",children:f.jsx($,{register:{...S("nationality",{required:!1})},name:"nationality",label:"Nationality",type:"text"})})]}),f.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row",children:[f.jsx("div",{className:"flex-1",children:f.jsx($,{register:{...S("mmname",{required:!1})},name:"mmname",label:"Mother's maiden name",type:"text"})}),f.jsx("div",{className:"flex-1",children:f.jsx($,{register:{...S("ffname",{required:!1})},name:"ffname",label:"Father's fullname",type:"text"})})]}),f.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row",children:[f.jsx("div",{className:"flex-1",children:f.jsx(Je,{register:{...S("educ",{required:!1})},options:[{label:"Highest Educational Attainmen",value:"Highest Educational Attainmen"},{label:"Elementary Undergraduate",value:"Elementary Undergraduate"},{label:"Elementary Graduate",value:"Elementary Graduate"},{label:"Highschool/K-12 Undergraduate",value:"Highschool/K-12 Undergraduate"},{label:"Highschool/K-12 Graduate",value:"Highschool/K-12 Graduate"},{label:"College Level",value:"College Level"},{label:"College Graduate",value:"College Graduate"},{label:"Vocational Graduate",value:"Vocational Graduate"},{label:"Masteral Degree",value:"Masteral Degree"},{label:"Doctoral Degree",value:"Doctoral Degree"}],label:"Highest Educational Attainment",name:"educ"})}),f.jsx("div",{className:"flex-1",children:f.jsx($,{register:{...S("courset",{required:!1})},name:"courset",label:"Course taken",type:"text"})})]}),f.jsx("div",{className:"flex flex-1 gap-4",children:f.jsx("div",{className:"flex flex-col w-full mb-4",children:f.jsxs("div",{className:"flex flex-1 gap-3",children:[f.jsxs("select",{...S("position",{required:!1}),name:"position",className:"border p-2 rounded  w-full",children:[f.jsx("option",{disabled:!0,selected:!0,value:"",children:"Job Position"}),e.filter(d=>d.site==="San Carlos").map((d,T)=>f.jsx("option",{value:d.jPosition,children:d.jPosition},T))]}),f.jsxs("select",{...S("dept",{required:!1}),name:"dept",className:"border p-2 rounded  w-full",children:[f.jsx("option",{disabled:!0,selected:!0,value:"",children:"Department"}),s.filter(d=>d.site==="San Carlos").map((d,T)=>f.jsx("option",{value:d.dept,children:d.dept},T))]}),f.jsxs("select",{...S("account",{required:!1}),name:"account",className:"border p-2 rounded  w-full",children:[f.jsx("option",{disabled:!0,selected:!0,value:"",children:"Account (If Applicable)"}),i.map((d,T)=>f.jsx("option",{value:d.acc,children:d.acc},T))]})]})})}),f.jsx("div",{className:"flex flex-1 gap-4",children:f.jsx("div",{className:"flex flex-col w-full mb-4",children:f.jsxs("div",{className:"flex flex-1 gap-3",children:[f.jsxs("select",{...S("sup_id",{required:!1}),name:"sup_id",value:g.sup_id,className:"border p-2 rounded  w-full",children:[f.jsx("option",{disabled:!0,selected:!0,value:"",children:"Supervisor"}),r.filter(d=>(!(o!=null&&o.site)||d.site===o.site||!d.site)&&["Manager","Account Manager","Supervisor","Team Leader","Director","CEO","HR Lead","Compliance Officer","Site Admin"].includes(d.position)).map(d=>f.jsxs("option",{value:d.id,children:[d.employee_fname," ",d.employee_lname]},d.id))]}),f.jsx($,{register:{...S("hired",{required:!1})},value:g.hired??"",name:"hired",label:"Hired Date",type:"date"}),f.jsxs("select",{...S("status",{required:!1}),name:"status",className:"border p-2 rounded  w-full",required:!0,children:[f.jsx("option",{disabled:!0,selected:!0,children:"Employee Status"}),f.jsx("option",{children:" Probationary"}),f.jsx("option",{children:" Regular"}),f.jsx("option",{children:" Contractual"}),f.jsx("option",{children:" Trainee Fallout"})]})]})})}),f.jsx("h1",{className:"text-xl font-semibold mb-3 text-gray-900 ",children:"Address Information"}),f.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row",children:[f.jsx("div",{className:"flex-1",children:f.jsx(Je,{register:{...S("region",{required:"Please Select Region"})},onChange:d=>xt(d),options:or.map(d=>({label:d.region_name,value:JSON.stringify({name:d.region_name,region_code:d.region_code})})),errorMessage:(Vn=P==null?void 0:P.region)==null?void 0:Vn.message,label:"Region",name:"region"})}),f.jsx("div",{className:"flex-1",children:f.jsx(Je,{register:{...S("province",{required:"Please Select Province"})},onChange:d=>xt(d),options:E.map(d=>({label:d.province_name,value:JSON.stringify({name:d.province_name,province_code:d.province_code})})),errorMessage:(Jn=P==null?void 0:P.province)==null?void 0:Jn.message,label:"Province",name:"province"})}),f.jsx("div",{className:"flex-1",children:f.jsx(Je,{register:{...S("city",{required:"Please Select City"})},onChange:d=>xt(d),options:N.map(d=>({label:d.city_name,value:JSON.stringify({name:d.city_name,city_code:d.city_code})})),errorMessage:(Un=P==null?void 0:P.city)==null?void 0:Un.message,name:"city",label:"City/Municipality"})})]}),f.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row",children:[f.jsx("div",{className:"flex-1",children:f.jsx(Je,{register:{...S("brgy",{required:"Please Select Barangay"})},onChange:d=>xt(d),options:M.map(d=>({label:d.brgy_name,value:d.brgy_name})),errorMessage:(Gn=P==null?void 0:P.brgy)==null?void 0:Gn.message,name:"brgy",label:"Barangay"})}),f.jsx("div",{className:"flex-1",children:f.jsx($,{register:{...S("lot",{required:"House/Lot No., Street, Purok/Sitio is required"})},errorMessage:(Wn=P==null?void 0:P.lot)==null?void 0:Wn.message,name:"lot",label:"House/Lot No., Street, Purok/Sitio",type:"text"})})]}),f.jsx("h1",{className:"text-xl font-semibold mb-3 text-gray-900 ",children:"Government ID Information"}),f.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row",children:[f.jsx("div",{className:"flex-1",children:f.jsx($,{register:{...S("sss",{})},name:"sss",label:"SSS",type:"number"})}),f.jsx("div",{className:"flex-1",children:f.jsx($,{register:{...S("pagibig",{})},name:"pagibig",label:"Pagibig",type:"number"})})]}),f.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row",children:[f.jsx("div",{className:"flex-1",children:f.jsx($,{register:{...S("tin",{})},name:"tin",label:"Tin",type:"number"})}),f.jsx("div",{className:"flex-1",children:f.jsx($,{register:{...S("philh",{})},name:"philh",label:"Philhealth No.",type:"number"})})]}),f.jsx("h1",{className:"text-xl font-semibold mb-3 text-gray-900 ",children:"Working Experience"}),f.jsxs("div",{className:"flex-col",children:[f.jsxs("div",{className:"flex items-center mb-3 justify-between",children:[f.jsx(mr,{label:"With Working Experience?",name:"hasExperience",onChange:d=>Z(d.target.checked)}),G&&f.jsxs("button",{type:"button",onClick:()=>append({name:""}),className:"bg-blue-600 text-white px-4 flex gap-2 py-2 rounded",children:[f.jsx(PlusIcon,{className:"h-6"})," Experience"]})]}),G&&f.jsx("div",{className:"flex gap-3 flex-col",children:fields.map((d,T)=>{var X,ne,vt,Y,Pe,Pt,Me,kt,Kn,Hn,Zn,Qn;return f.jsxs("div",{className:"flex items-center border border-blue-500 rounded-lg p-3 flex-col w-full gap-4",children:[T!=0&&f.jsx("div",{className:"flex w-full items-end justify-end",children:f.jsx("button",{type:"button",onClick:()=>remove(T),className:"bg-red-500 text-white px-2 py-1 rounded",children:"✕"})}),f.jsxs("div",{className:"w-full flex gap-3",children:[f.jsx($,{register:{...S(`work_experience.${T}.company`,{required:"Company is required"})},errorMessage:(vt=(ne=(X=P==null?void 0:P.work_experience)==null?void 0:X[T])==null?void 0:ne.company)==null?void 0:vt.message,name:"company",label:"Company",type:"text"}),f.jsx($,{register:{...S(`work_experience.${T}.position`,{required:"Position is required"})},errorMessage:(Pt=(Pe=(Y=P==null?void 0:P.work_experience)==null?void 0:Y[T])==null?void 0:Pe.position)==null?void 0:Pt.message,name:"position",label:"Position",type:"text"})]}),f.jsxs("div",{className:"w-full flex gap-3",children:[f.jsx($,{register:{...S(`work_experience.${T}.started_at`,{required:"Started at is required"})},errorMessage:(Kn=(kt=(Me=P==null?void 0:P.work_experience)==null?void 0:Me[T])==null?void 0:kt.started_at)==null?void 0:Kn.message,label:"Started At",type:"date"}),f.jsx($,{register:{...S(`work_experience.${T}.end_at`,{required:"End at is required"})},errorMessage:(Qn=(Zn=(Hn=P==null?void 0:P.work_experience)==null?void 0:Hn[T])==null?void 0:Zn.end_at)==null?void 0:Qn.message,label:"End At",type:"date"})]})]},d.id)})})]}),f.jsx("h1",{className:"text-xl font-semibold mb-3 text-gray-900 ",children:"Emergency Contact Information"}),f.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row",children:[f.jsx("div",{className:"flex-1",children:f.jsx($,{register:{...S("ename",{required:!1})},name:"ename",label:"Emergency Contact Fullname",type:"text"})}),f.jsx("div",{className:"flex-1",children:f.jsx($,{register:{...S("eaddress",{required:!1})},name:"eaddress",label:"Address",type:"text"})})]}),f.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row",children:[f.jsx("div",{className:"flex-1",children:f.jsx($,{register:{...S("relationship",{required:!1})},name:"relationship",label:"Relationship",type:"text"})}),f.jsx("div",{className:"flex-1",children:f.jsx($,{register:{...S("ephone",{required:!1})},name:"ephone",label:"Contact No.",type:"number"})})]}),f.jsx("br",{}),f.jsxs(ur,{...nr,children:[f.jsx("p",{className:"ant-upload-drag-icon",children:f.jsx(wr,{})}),f.jsx("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload your CV"}),f.jsx("p",{className:"ant-upload-hint",children:"Support for a single or bulk upload. Strictly prohibited from uploading company data or other banned files."})]}),f.jsx("div",{className:"flex items-end justify-end",children:f.jsx("button",{disabled:Bn,type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded",children:Bn?"Submitting...":"Submit"})})]})})]})}export{Rd as default};

import{r as i,j as e,b as w,s as C,A as T}from"./store-3c336f8b.js";import{u as d}from"./app-01176fb0.js";import{c as S}from"./erf-record-thunk-ca2ac8c6.js";import{h as f}from"./moment-a9aaa855.js";import{B as u}from"./button-62a374de.js";import{m as E}from"./index-43b25cf7.js";import{A as O}from"./ArrowLeftOutlined-ed7e02a1.js";import"./erf-record-service-7bd3ae89.js";import"./warning-61799e41.js";import"./defineProperty-83f36300.js";import"./toPropertyKey-d8419463.js";import"./typeof-7fd5df1e.js";import"./omit-644b1847.js";import"./genStyleUtils-61b3e14c.js";import"./createSuper-f29e89b0.js";import"./Compact-c20cea3a.js";import"./useSize-48967c2c.js";import"./index-a39b4fd9.js";import"./shadow-ac72991b.js";import"./UnstableContext-b986d85e.js";import"./AntdIcon-f9760bd3.js";import"./regeneratorRuntime-92fa3873.js";import"./asyncToGenerator-8c72b493.js";import"./CheckCircleFilled-caa58685.js";import"./CloseCircleFilled-e77f0636.js";import"./InfoCircleFilled-6c296960.js";import"./KeyCode-fa63c492.js";import"./pickAttrs-788442e7.js";import"./useZIndex-b1c84e62.js";import"./CloseOutlined-a06d6fb4.js";function ae(){const{job_positions:p}=d(t=>t.job_positions),{erfCount:x}=d(t=>t.departments),{user:o}=d(t=>t.app),[h,c]=i.useState(!1),[l,r]=i.useState({department:"",account:"",budgetCost:"",jobTitle:"",jobType:"",personnel:"",dateNeed:"",positionStatus:"",sourcingMethod:"",justification:"",site:(o==null?void 0:o.site)||""}),[j,b]=i.useState(0),[R,g]=i.useState("");i.useEffect(()=>{(async()=>{try{const s=await w.get("/api/applications/today");b(s.data.count)}catch(s){console.error("Error fetching application count:",s)}})()},[]),i.useEffect(()=>{r(t=>({...t,ref_id:v()}))},[x]);const v=()=>{const s=f(new Date).format("MMDDYYYY"),a=(j+x).toString().padStart(2,"0");return`${s}${a}`},N=t=>{const s=t.target.value,a=p.find(n=>n.jPosition===s);r(a?n=>({...n,account:a.outsourcing_erf.account,department:a.outsourcing_erf.department,budgetCost:a.salary,jobTitle:s}):n=>({...n,department:"",account:"",budgetCost:"",jobTitle:s})),g(s)},m=()=>{window.history.back()},y=async()=>{c(!0);try{await C.dispatch(S({submitted:f().format("YYYY-MM-DD"),...l,...o})),E.success("Successfully Added!"),setTimeout(()=>{c(!1),T.visit("/admin/sourcing/resource_requests/erf_record")},2e3)}catch(t){console.error("Error submitting ERF:",t),c(!1)}};return e.jsxs("div",{children:[e.jsx("div",{className:"mb-4",children:e.jsx(u,{onClick:m,icon:e.jsx(O,{}),className:"mb-4 flex items-center gap-2 bg-gray-100 border-gray-300 hover:bg-gray-200",children:"Back"})}),e.jsxs("form",{children:[e.jsx("h1",{className:"text-xl font-semibold mb-3 text-gray-900 mt-6 text-center",children:"EMPLOYEE REQUISITION FORM"}),e.jsx("h1",{className:"text-lg",children:e.jsx("b",{children:"Instructions/Hiring Information"})}),e.jsxs("p",{children:["  Use this form to initiate the recruitment process for all new and existing staff. Please complete all applicable sections of this form."," ",e.jsx("b",{children:"NO OFFERS should be made, either verbally or in written form, before all approvals on the form are completed"}),"."]}),e.jsx("input",{onChange:t=>r({...l,site:t.target.value}),value:(l==null?void 0:l.site)??"",type:"hidden"}),e.jsxs("div",{className:"flex flex-1 w-full gap-4 mb-4 mt-4",children:[e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsx("label",{children:e.jsx("b",{children:"Reference No."})}),e.jsx("input",{type:"text",value:l.ref_id||"",className:"border p-2 rounded w-full",readOnly:!0})]}),e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsx("label",{children:e.jsx("b",{children:"Job Title"})}),e.jsxs("select",{className:"border p-2 rounded w-full",onChange:N,value:l.jobTitle,children:[e.jsx("option",{value:""}),p.filter(t=>t.status==="Approved").map((t,s)=>e.jsx("option",{value:t.jPosition,children:t.jPosition},s))]})]})]}),e.jsxs("div",{className:"flex flex-1 w-full gap-4 mb-4",children:[e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsx("label",{children:e.jsx("b",{children:"Job Type"})}),e.jsxs("select",{onChange:t=>r({...l,jobType:t.target.value}),className:"border p-2 rounded w-full",value:l.jobType,children:[e.jsx("option",{value:""}),e.jsx("option",{value:"Full Time",children:"Full Time"}),e.jsx("option",{value:"Part Time",children:"Part Time"}),e.jsx("option",{value:"Temporary",children:"Temporary"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsx("label",{children:e.jsx("b",{children:"No. of Required Personnel"})}),e.jsx("input",{type:"number",className:"border p-2 rounded w-full",onChange:t=>r({...l,personnel:t.target.value})})]}),e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsx("label",{children:e.jsx("b",{children:"Target Onboarding Date"})}),e.jsx("input",{type:"date",className:"border p-2 rounded w-full",onChange:t=>r({...l,dateNeed:t.target.value})})]})]}),e.jsxs("div",{className:"flex flex-1 w-full gap-4 mb-4",children:[e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsx("label",{children:e.jsx("b",{children:"Position Status"})}),e.jsxs("select",{onChange:t=>r({...l,positionStatus:t.target.value}),className:"border p-2 rounded w-full",value:l.positionStatus,children:[e.jsx("option",{value:""}),e.jsx("option",{children:"Replacement"}),e.jsx("option",{children:"Reorganization"}),e.jsx("option",{children:"Other"})]})]}),e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsx("label",{children:e.jsx("b",{children:"Department"})}),e.jsx("input",{type:"text",value:l.department,className:"border p-2 rounded w-full",readOnly:!0})]}),e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsx("label",{children:e.jsx("b",{children:"Account"})}),e.jsx("input",{type:"text",value:l.account,className:"border p-2 rounded w-full",readOnly:!0})]}),e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsx("label",{children:e.jsx("b",{children:"Sourcing Method"})}),e.jsxs("select",{onChange:t=>r({...l,sourcingMethod:t.target.value}),className:"border p-2 rounded w-full",value:l.sourcingMethod,children:[e.jsx("option",{value:""}),e.jsx("option",{children:"Internal Candidates"}),e.jsx("option",{children:"External Candidates"}),e.jsx("option",{children:"Both"})]})]})]}),e.jsxs("div",{className:"w-full flex flex-col mb-4",children:[e.jsx("label",{children:e.jsx("b",{children:"Reason or Justification of the Request"})}),e.jsx("textarea",{className:"border h-40 p-2 rounded w-full",onChange:t=>r({...l,justification:t.target.value})})]}),e.jsxs("div",{className:"flex flex-1 w-full gap-4 mb-4",children:[e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsx("label",{children:e.jsx("b",{children:"Manager Submitting Request"})}),e.jsx("input",{type:"text",value:`${(o==null?void 0:o.employee_fname)||""} ${(o==null?void 0:o.employee_lname)||""}`,className:"border p-2 rounded w-full",readOnly:!0})]}),e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsx("label",{children:e.jsx("b",{children:"Budget/Cost per head:"})}),e.jsx("input",{type:"text",value:l.budgetCost,className:"border p-2 rounded w-full",readOnly:!0})]})]}),e.jsxs("div",{className:"flex flex-1 gap-2 justify-end items-center",children:[e.jsx(u,{className:"rounded-md hover:bg-blue-100 w-32 h-10 mt-2",type:"button",onClick:m,children:"Back"}),e.jsx(u,{className:"bg-blue-600 rounded-md hover:bg-blue-700 text-white w-32 h-10 mt-2",type:"primary",onClick:y,loading:h,children:"Submit"})]})]})]})}export{ae as default};

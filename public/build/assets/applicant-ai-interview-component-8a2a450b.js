import{r as l,j as e}from"./store-3c336f8b.js";import"./html2canvas.esm-51b439ed.js";import{R as v,a as N,C as a,P as F,g as V,b as M}from"./open-ai-service-af1b8dd6.js";import{T}from"./index-7fac3bd7.js";import{M as $}from"./index-d714f5cc.js";import{T as B}from"./index-b16ef081.js";import{S as w}from"./index-899aea17.js";import{A as y}from"./index-fa4eb864.js";import{C as S}from"./index-74632b5e.js";import{B as C}from"./button-93a85905.js";import{a as H}from"./warning-61799e41.js";import{A as P}from"./AntdIcon-f9760bd3.js";import{F as U}from"./FileOutlined-6e85b6db.js";import{D as Q}from"./DownloadOutlined-38807136.js";import{M as W}from"./index-e3c5381c.js";import"./typeof-7fd5df1e.js";import"./index-92033e4d.js";import"./createSuper-f29e89b0.js";import"./toPropertyKey-d8419463.js";import"./defineProperty-83f36300.js";import"./genStyleUtils-61b3e14c.js";import"./shadow-ac72991b.js";import"./app-0872ea20.js";import"./index-0bf2e03d.js";import"./responsiveObserver-12a0f2f8.js";import"./index-1af4fd12.js";import"./useId-e471c36f.js";import"./useSize-48967c2c.js";import"./Compact-c2ce663b.js";import"./ContextIsolator-01f115ad.js";import"./regeneratorRuntime-92fa3873.js";import"./asyncToGenerator-8c72b493.js";import"./useZIndex-b1c84e62.js";import"./UnstableContext-26fb4cba.js";import"./CheckCircleFilled-caa58685.js";import"./CloseCircleFilled-e77f0636.js";import"./InfoCircleFilled-6c296960.js";import"./CloseOutlined-a06d6fb4.js";import"./index-adfbb3a8.js";import"./KeyCode-fa63c492.js";import"./pickAttrs-788442e7.js";import"./fade-856c61a4.js";import"./useClosable-4986d83f.js";import"./Skeleton-34891f1e.js";import"./omit-644b1847.js";import"./useLocale-6dc2b379.js";import"./PurePanel-3e25e004.js";import"./index-08038882.js";import"./index-46ba87ea.js";import"./PlusOutlined-46bdea7f.js";import"./Dropdown-1167a9af.js";import"./useVariants-f9f20e4c.js";import"./RightOutlined-413135fd.js";import"./collapse-97de76d4.js";var Y={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M686.7 638.6L544.1 535.5V288c0-4.4-3.6-8-8-8H488c-4.4 0-8 3.6-8 8v275.4c0 2.6 1.2 5 3.3 6.5l165.4 120.6c3.6 2.6 8.6 1.8 11.2-1.7l28.6-39c2.6-3.7 1.8-8.7-1.8-11.2z"}}]},name:"clock-circle",theme:"outlined"};const q=Y;var G=function(i,m){return l.createElement(P,H({},i,{ref:m,icon:q}))},J=l.forwardRef(G);const _=J;function Xe({data:r,item:i}){var j,b;const[m,p]=l.useState(!1),[K,I]=l.useState(!1);l.useState(!1);const[n,A]=l.useState(null),[s,R]=l.useState(null),[k,x]=l.useState(!1),[u,h]=l.useState(null),[D,c]=l.useState(!0),[d,E]=l.useState(null);l.useEffect(()=>{I(!0)},[]);const L=async()=>{p(!0),await O()},O=async()=>{if(r!=null&&r.app_id)try{x(!0),h(null);const[t,o]=await Promise.allSettled([V(r.app_id),M(r.app_id)]);t.status==="fulfilled"&&t.value.data.status==="success"&&A(t.value.data),o.status==="fulfilled"&&o.value.data.status==="success"?(R(o.value.data.data),console.log("Recording data loaded:",o.value.data.data)):console.log("Recording response failed or no recording found:",o)}catch(t){console.error("Failed to load interview data:",t),h("Failed to load interview data")}finally{x(!1)}},g=t=>{if(!t)return"N/A";const o=Math.floor(t/60),z=t%60;return`${o}:${z.toString().padStart(2,"0")}`},f=t=>t?`${(t/(1024*1024)).toFixed(2)} MB`:"N/A";console.log("data",r);try{return e.jsxs(e.Fragment,{children:[e.jsx(T,{title:`Application AI Interview of ${r==null?void 0:r.fname} ${r==null?void 0:r.lname}`,children:e.jsx("button",{type:"button",onClick:L,children:e.jsx(v,{className:"h-9 w-9 text-2xl text-blue-500 hover:text-blue-600"})})}),e.jsxs($,{open:m,onOk:()=>p(!1),onCancel:()=>p(!1),width:1400,footer:null,destroyOnClose:!0,children:[e.jsxs("div",{className:"flex text-2xl items-center justify-center mb-4",children:[e.jsx(v,{className:"mr-3 text-blue-600"}),e.jsx("h1",{children:e.jsx("b",{children:"AI INTERVIEW RESULTS"})})]}),e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg mb-1",children:[e.jsxs("b",{children:[r==null?void 0:r.fname," ",r==null?void 0:r.lname]})," ","- ",r==null?void 0:r.app_id]}),e.jsxs(B,{color:"green",children:["Site: ",r==null?void 0:r.site]})]})}),k?e.jsxs("div",{className:"flex justify-center items-center py-20",children:[e.jsx(w,{size:"large"}),e.jsx("span",{className:"ml-3 text-lg",children:"Loading interview data..."})]}):u?e.jsx(y,{message:"Error Loading Interview Data",description:u,type:"error",showIcon:!0,className:"mb-4"}):e.jsxs("div",{id:"interview-results-pdf",className:"space-y-6",children:[s?e.jsx(S,{title:"ðŸ“¹ Interview Recording",className:"mb-6",children:e.jsxs(N,{gutter:[16,16],children:[e.jsxs(a,{xs:24,lg:16,children:[e.jsxs("div",{className:"bg-gray-100 rounded-lg overflow-hidden relative",children:[D&&e.jsxs("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-50 z-10",children:[e.jsx(w,{size:"large"}),e.jsx("span",{className:"ml-3 text-white",children:"Loading video..."})]}),e.jsxs("video",{controls:!0,preload:"metadata",playsInline:!0,className:"w-full h-screen bg-red-500",style:{maxHeight:"400px",minHeight:"200px",objectFit:"contain"},onLoadStart:()=>c(!0),onLoadedMetadata:()=>{console.log("Video metadata loaded"),c(!1)},onCanPlay:()=>{console.log("Video can play"),c(!1)},onError:t=>{console.error("Video error:",t),E(t.target.error),c(!1)},onLoadedData:()=>{console.log("Video data loaded")},children:[e.jsx("source",{src:s.file_url,type:s.file_type||"video/webm"}),e.jsx("source",{src:s.file_url,type:"video/mp4"}),e.jsx("source",{src:s.file_url,type:"video/webm"}),e.jsxs("p",{className:"text-center py-8",children:["Your browser does not support video playback.",e.jsx("br",{}),e.jsx("a",{href:s.file_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 underline",children:"Download the video file"})]})]}),d&&e.jsx("div",{className:"absolute top-2 left-2 right-2 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Video Error:"})," ","Unable to display video. Error code:"," ",d==null?void 0:d.code]})})]}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx(C,{type:"default",icon:e.jsx(F,{}),className:"w-full",onClick:()=>window.open(s.file_url,"_blank"),children:"Open in New Tab"}),e.jsx("div",{className:"text-center",children:e.jsx("a",{href:s.file_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 text-sm underline",children:"Direct Video Link"})})]})]}),e.jsx(a,{xs:24,lg:8,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(_,{className:"mr-2 text-blue-600"}),e.jsx("b",{children:"Duration:"})]}),e.jsx("p",{className:"text-lg",children:g(s.duration)})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(U,{className:"mr-2 text-green-600"}),e.jsx("b",{children:"File Size:"})]}),e.jsx("p",{className:"text-lg",children:f(s.file_size)})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(_,{className:"mr-2 text-purple-600"}),e.jsx("b",{children:"Interview Date:"})]}),e.jsx("p",{children:s.interview_date?new Date(s.interview_date).toLocaleString():"N/A"})]}),e.jsx(C,{type:"primary",icon:e.jsx(Q,{}),className:"w-full",onClick:()=>window.open(s.file_url,"_blank"),children:"Download Recording"})]})})]})}):e.jsx(y,{message:"No Interview Recording Found",description:"This applicant has not completed the AI interview or the recording is not available.",type:"warning",showIcon:!0,className:"mb-6"}),(((j=n==null?void 0:n.data)==null?void 0:j.length)>0||s)&&e.jsx(S,{title:"ðŸ“Š Interview Summary",className:"mb-6",children:e.jsxs(N,{gutter:[16,16],children:[e.jsx(a,{xs:12,sm:6,children:e.jsxs("div",{className:"text-center bg-blue-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-2xl font-bold text-blue-600",children:((b=n==null?void 0:n.data)==null?void 0:b.length)||0}),e.jsx("p",{className:"text-gray-600",children:"Questions Answered"})]})}),e.jsx(a,{xs:12,sm:6,children:e.jsxs("div",{className:"text-center bg-green-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-2xl font-bold text-green-600",children:s?g(s.duration):"N/A"}),e.jsx("p",{className:"text-gray-600",children:"Interview Duration"})]})}),e.jsx(a,{xs:12,sm:6,children:e.jsxs("div",{className:"text-center bg-purple-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-2xl font-bold text-purple-600",children:s?f(s.file_size):"N/A"}),e.jsx("p",{className:"text-gray-600",children:"Recording Size"})]})}),e.jsx(a,{xs:12,sm:6,children:e.jsxs("div",{className:"text-center bg-orange-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-2xl font-bold text-orange-600",children:s!=null&&s.interview_date?new Date(s.interview_date).toLocaleDateString():"N/A"}),e.jsx("p",{className:"text-gray-600",children:"Interview Date"})]})})]})})]})]})]})}catch(t){return console.error("Error rendering ApplicantDetaillsComponent:",t),e.jsxs(W.Item,{icon:i==null?void 0:i.icon,disabled:!0,children:[i==null?void 0:i.label," (Error loading)"]})}}export{Xe as default};

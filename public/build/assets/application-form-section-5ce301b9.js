import{r as d,a as R,u as U,j as e,e as W,A as Y,p as u}from"./app-a1aac0ec.js";import $ from"./working-experience-section-b3825729.js";import{d as H}from"./applicant-thunk-2b0de3b7.js";import{p as k,r as z,c as K,b as Q}from"./barangay-94589600.js";import{h as X}from"./moment-a9aaa855.js";import o from"./input-9ee4b094.js";import f from"./select-3ded5ae8.js";import{D as Z}from"./Dragger-36cca677.js";import{m as b}from"./index-2d80485e.js";import{I as ee}from"./InboxOutlined-9beb5846.js";import{L as ae}from"./LoadingOutlined-f58e6327.js";import{S as ne}from"./SendOutlined-1a5bed6b.js";import"./CloseOutlined-91b14fad.js";import"./presets-17ea5d26.js";import"./AntdIcon-fd7998ee.js";import"./PlusOutlined-0dbc7e52.js";import"./applicant-record-service-ff62c518.js";import"./applicant-final-service-a1d04fab.js";import"./genStyleUtils-a850d1ca.js";import"./asyncToGenerator-f3775c70.js";import"./pickAttrs-669efa6f.js";import"./useId-b92da047.js";import"./useZIndex-5442c369.js";import"./collapse-97de76d4.js";import"./fade-4decd42e.js";import"./omit-644b1847.js";import"./useForceUpdate-6fd0307c.js";import"./Compact-89bfbb7b.js";import"./useSize-64175dfc.js";import"./button-81cd831f.js";import"./UnstableContext-80d8ef75.js";import"./DeleteOutlined-e59bc60c.js";import"./EyeOutlined-2c3c51e0.js";import"./CheckCircleFilled-17ab9328.js";import"./CheckOutlined-83e21027.js";import"./CloseCircleFilled-5dc34da7.js";import"./index-27d7b917.js";import"./ContextIsolator-5dd00dbd.js";import"./useLocale-a7511190.js";import"./InfoCircleFilled-069cda57.js";import"./KeyCode-20a705c3.js";function We(){d.useState(!1);const[ie,_]=d.useState(0),{applicantForm:a}=R(s=>s.applicants),[I,F]=d.useState([]),[A,M]=d.useState([]),[D,E]=d.useState([]),[n,O]=d.useState({});console.log("applicants",a);const p=U(),[v,j]=d.useState([]),T=async s=>{const i=c=>new Promise((m,B)=>{const g=new FileReader;g.onload=()=>m(g.result),g.onerror=G=>B(G),g.readAsDataURL(c)}),r=Array.from(s).filter(c=>!v.some(m=>m.file.name===c.name&&m.file.size===c.size&&m.file.lastModified===c.lastModified)),x=await Promise.all(r.map(async c=>({file:c,files:await i(c)})));j(c=>[...c,...x])},P={name:"file",multiple:!0,method:"GET",action:"https://660d2bd96ddfa2943b33731c.mockapi.io/api/upload",onChange(s){const{status:i}=s.file;if(i!=="uploading"&&console.log(s.file,s.fileList),i==="done"){const l=s.fileList.map(r=>r.originFileObj).filter(Boolean);T(l),b.success(`${s.file.name} file uploaded successfully.`)}else i==="error"&&b.error(`${s.file.name} file upload failed.`)},onRemove(s){return j(i=>i.filter(l=>l.file.name!==s.name)),!0}};d.useEffect(()=>{(async()=>{_(0)})()},[]);function q(s){const i=new Date(s),l=new Date;let r=l.getFullYear()-i.getFullYear();const x=l.getMonth()-i.getMonth();return(x<0||x===0&&l.getDate()<i.getDate())&&r--,r??0}async function N(s){S(!0),q(a.dob??new Date);const i=new FormData;v.forEach(l=>{i.append("files",l.file)}),i.append("site",a.site??""),i.append("fname",a.fname??""),i.append("mname",a.mname??""),i.append("lname",a.lname??""),i.append("suffix",a.suffix??""),i.append("dob",a.dob??X().format("YYYY-MM-DD")),i.append("religion",a.religion??""),i.append("email",a.email??""),i.append("nationality",a.nationality??""),i.append("phone",a.phone??""),i.append("mmname",a.mmname??""),i.append("ffname",a.ffname??""),i.append("educ",a.educ??""),i.append("courset",a.courset??""),i.append("hired",a.hired??""),i.append("lot",a.lot??""),i.append("sss",a.sss??""),i.append("pagibig",a.pagibig??""),i.append("tin",a.tin??""),i.append("philh",a.philh??""),i.append("ename",a.ename??""),i.append("eaddress",a.eaddress??""),i.append("relationship",a.relationship??""),i.append("ephone",a.ephone??""),i.append("marital",a.marital??""),i.append("gender",a.gender??""),i.append("region",a.region??""),i.append("city",a.city??""),i.append("brgy",a.brgy??""),i.append("province",a.province??""),Array.isArray(a.work_experience)&&a.work_experience.forEach(l=>{i.append("work_experience[]",JSON.stringify({company:l.company,position:l.position,started_at:l.started_at,end_at:l.end_at}))});try{const l=await W.dispatch(H(i));l.status===200?(b.success("Application has been submitted successfully"),Y.visit("/online_application"),j([])):(O(l.response.data.errors),b.error("Failed to submit Application/Application Exist"))}catch(l){console.error(l)}finally{S(!1)}}console.log("province",k);const[y,w]=d.useState(!1),[J,C]=d.useState(!1);d.useState(null);const[h,S]=d.useState(null),L=s=>{w(s.target.checked),C(!1)},V=s=>{C(s.target.checked),w(!1)};function t(s){if(s.target.name=="region"){const i=JSON.parse(s.target.value),l=k.filter(r=>r.region_code===i.region_code);F(l),p(u({...a,[s.target.name]:i.name}))}else if(s.target.name=="province"){const i=JSON.parse(s.target.value),l=K.filter(r=>r.province_code===i.province_code);M(l),p(u({...a,[s.target.name]:i.name}))}else if(s.target.name=="city"){const i=JSON.parse(s.target.value),l=Q.filter(r=>r.city_code===i.city_code);E(l),p(u({...a,[s.target.name]:i.name}))}else p(u({...a,[s.target.name]:s.target.value}))}return console.log("ssssssssss",a),e.jsx("div",{className:"h-screen overflow-hidden ",children:e.jsx("div",{className:"bg-cover bg-[url('/images/SCemp.jpg')] transition-colors duration-300 h-full overflow-y-scroll",children:e.jsx("div",{className:"container mx-auto px-2 flex justify-center",children:e.jsxs("div",{className:"bg-white shadow-2xl shadow-black rounded-lg p-6 mt-12 w-full",children:[e.jsx("div",{className:"flex items-center justify-center p-3",children:e.jsx("img",{className:"w-60",src:"images/newlogo.png",alt:"logo"})}),e.jsx("div",{className:"flex text-2xl items-center justify-center",children:e.jsx("h1",{children:e.jsx("b",{children:"ONLINE APPLICATION FORM"})})}),e.jsxs("form",{className:"border rounded-lg p-3.5",onSubmit:N,children:[e.jsxs("div",{className:"",children:[e.jsx("h1",{className:"text-xl font-semibold mb-3 mt-4 text-gray-900",children:"Site Information"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4 w-full",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("select",{onChange:s=>t(s),name:"site",className:`border p-2.5 rounded-md w-full ${n!=null&&n.site?"border-red-500":""}`,children:[e.jsx("option",{disabled:!0,selected:!0,children:"Select Site"}),e.jsx("option",{children:"San Carlos"}),e.jsx("option",{children:"Carcar"})]}),(n==null?void 0:n.site)&&e.jsx("span",{className:"text-red-500 text-sm mt-1",children:"This field is required."})]})})]}),e.jsxs("div",{className:"",children:[e.jsx("h1",{className:"text-xl font-semibold mb-3 text-gray-900 mt-6",children:"Personal Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[e.jsx(o,{onChange:t,value:a.fname??"",required:!!(n!=null&&n.fname),name:"fname",label:"First Name",type:"text",errorMessage:n==null?void 0:n.fname}),e.jsx(o,{onChange:t,value:a.mname??"",required:!!(n!=null&&n.mname),name:"mname",label:"Middle Name",type:"text"}),e.jsx(o,{onChange:t,value:a.lname??"",required:!!(n!=null&&n.lname),name:"lname",label:"Last Name",type:"text",errorMessage:n==null?void 0:n.lname}),e.jsx("div",{children:e.jsxs("select",{onChange:t,name:"suffix",className:"border p-2.5 rounded-md w-full",defaultValue:"",children:[e.jsx("option",{disabled:!0,value:"",children:"Select Suffix"}),e.jsx("option",{}),e.jsx("option",{children:"Sr."}),e.jsx("option",{children:"Jr."}),e.jsx("option",{children:"II"}),e.jsx("option",{children:"III"}),e.jsx("option",{children:"IV"}),e.jsx("option",{children:"V"}),e.jsx("option",{children:"VI"}),e.jsx("option",{children:"VII"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsxs("select",{onChange:t,name:"gender",className:`border p-2.5 rounded-md w-full ${n!=null&&n.gender?"border-red-500":""}`,defaultValue:"",children:[e.jsx("option",{disabled:!0,value:"",children:"  Gender"}),e.jsx("option",{}),e.jsx("option",{children:"Male"}),e.jsx("option",{children:"Female"})]}),(n==null?void 0:n.gender)&&e.jsx("span",{className:"text-red-500 text-sm mt-1",children:"This field is required."})]}),e.jsx(o,{onChange:t,value:a.dob??"",required:!!(n!=null&&n.dob),name:"dob",label:"Date of Birth",type:"date",errorMessage:n==null?void 0:n.dob}),e.jsx(o,{onChange:t,value:a.email??"",required:!!(n!=null&&n.email),name:"email",label:"Email",type:"email",errorMessage:n==null?void 0:n.email}),e.jsx(o,{onChange:t,value:a.phone??"",required:!!(n!=null&&n.phone),name:"phone",label:"Phone Number",type:"number",errorMessage:n==null?void 0:n.phone})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsxs("select",{onChange:t,name:"marital",className:`border p-2.5 rounded-md w-full ${n!=null&&n.marital?"border-red-500":""}`,defaultValue:"",children:[e.jsx("option",{disabled:!0,value:"",children:"  Marital Status"}),e.jsx("option",{children:"Single"}),e.jsx("option",{children:"Married"}),e.jsx("option",{children:"Widowed"}),e.jsx("option",{children:"Divorced"})]}),(n==null?void 0:n.marital)&&e.jsx("span",{className:"text-red-500 text-sm mt-1",children:"This field is required."})]}),e.jsx(o,{onChange:t,value:a.religion??"",required:!!(n!=null&&n.religion),name:"religion",label:"Religion",type:"text"}),e.jsx(o,{onChange:t,value:a.nationality??"",required:!!(n!=null&&n.nationality),name:"nationality",label:"Nationality",type:"text"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsx(o,{onChange:t,value:a.mmname??"",name:"mmname",label:"Mother’s Maiden Name",type:"text"}),e.jsx(o,{onChange:t,value:a.ffname??"",name:"ffname",label:"Father’s Full Name",type:"text"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsx("div",{children:e.jsxs("select",{name:"educ",className:"border p-2.5 rounded-md w-full",onChange:t,defaultValue:"",children:[e.jsx("option",{disabled:!0,value:"",children:"  Highest Educational Attainment"}),e.jsx("option",{children:"Elementary Undergraduate"}),e.jsx("option",{children:"Elementary Graduate"}),e.jsx("option",{children:"Highschool/K-12 Undergraduate"}),e.jsx("option",{children:"Highschool/K-12 Graduate"}),e.jsx("option",{children:"College Level"}),e.jsx("option",{children:"College Graduate"}),e.jsx("option",{children:"Vocational Graduate"}),e.jsx("option",{children:"Masteral Degree"}),e.jsx("option",{children:"Doctoral Degree"})]})}),e.jsx(o,{onChange:t,value:a.courset??"",name:"courset",label:"Course Taken",type:"text"})]})]}),e.jsx("h1",{className:"text-xl font-semibold mb-3 text-gray-900  mt-9",children:"Address Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4 w-full",children:[e.jsx("div",{className:"flex flex-col w-full",children:e.jsx(f,{onChange:t,options:z.map(s=>({label:s.region_name,value:JSON.stringify({name:s.region_name,region_code:s.region_code})})),name:"region",label:"Region"})}),e.jsx("div",{className:"flex flex-col w-full",children:e.jsx(f,{onChange:t,options:I.map(s=>({label:s.province_name,value:JSON.stringify({name:s.province_name,province_code:s.province_code})})),name:"province",label:"Province"})}),e.jsx("div",{className:"flex flex-col w-full",children:e.jsx(f,{onChange:t,options:A.map(s=>({label:s.city_name,value:JSON.stringify({name:s.city_name,city_code:s.city_code})})),name:"city",label:"City/Municipality"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsx("div",{className:"flex flex-col w-full",children:e.jsx(f,{onChange:t,options:D.map(s=>({label:s.brgy_name,value:s.brgy_name})),name:"brgy",label:"Barangay"})}),e.jsx("div",{className:"flex flex-col w-full space-y-1 sm:space-y-2",children:e.jsx(o,{onChange:t,value:a.lot??"",name:"lot",label:"House/Lot No., Street, Purok/Sitio",type:"text",className:"w-full"})})]}),e.jsx("h1",{className:"text-xl font-semibold mb-3 text-gray-900 mt-9",children:"Government ID Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsx("div",{className:"w-full",children:e.jsx(o,{onChange:t,value:a.sss??"",name:"sss",label:"SSS No.",type:"text"})}),e.jsx("div",{className:"w-full",children:e.jsx(o,{onChange:t,value:a.pagibig??"",name:"pagibig",label:"Pag-IBIG No.",type:"text"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsx("div",{className:"w-full",children:e.jsx(o,{onChange:t,value:a.tin??"",name:"tin",label:"Tin No.",type:"text"})}),e.jsx("div",{className:"w-full",children:e.jsx(o,{onChange:t,value:a.philh??"",name:"philh",label:"PhilHealth No.",type:"text"})})]}),e.jsxs("div",{className:"flex items-center mb-4 mt-6",children:[e.jsx("input",{id:"with-working-experience-checkbox",type:"checkbox",value:"",checked:y,onChange:L,className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500  -gray-800 focus:ring-2  "}),e.jsx("label",{htmlFor:"with-working-experience-checkbox",className:"ms-2 text-md font-medium text-gray-900 ",children:e.jsx("b",{children:"with Working Experience"})})]}),e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("input",{id:"first-time-jobseeker-checkbox",type:"checkbox",value:"",checked:J,onChange:V,className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500  -gray-800 focus:ring-2  ",disabled:y}),e.jsx("label",{htmlFor:"first-time-jobseeker-checkbox",className:"ms-2 text-md font-medium text-gray-900 ",children:e.jsx("b",{children:"First Time Jobseeker"})})]}),y&&e.jsx($,{}),e.jsx("h1",{className:"text-xl font-semibold mb-3 text-gray-900 mt-7",children:"Emergency Contact Information"}),e.jsx("div",{className:"mb-4 w-full",children:e.jsx(o,{onChange:t,value:a.ename??"",name:"ename",label:"Emergency Contact Fullname",type:"text"})}),e.jsx("div",{className:"mb-4 w-full",children:e.jsx(o,{onChange:t,value:a.eaddress??"",name:"eaddress",label:"Address",type:"text"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsx("div",{className:"w-full",children:e.jsx(o,{onChange:t,value:a.relationship??"",name:"relationship",label:"Relationship",type:"text"})}),e.jsx("div",{className:"w-full",children:e.jsx(o,{onChange:t,value:a.ephone??"",name:"ephone",label:"Contact No.",type:"number"})})]}),e.jsxs(Z,{...P,children:[e.jsx("p",{className:"ant-upload-drag-icon",children:e.jsx(ee,{})}),e.jsx("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload your CV"}),e.jsx("p",{className:"ant-upload-hint",children:"Support for a single or bulk upload. Strictly prohibited from uploading company data or other banned files."})]}),e.jsx("div",{className:"flex justify-end mt-2.5",children:e.jsxs("button",{type:"submit",className:` bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg w-full ${h?"cursor-not-allowed opacity-75":""}`,onClick:N,disabled:h,children:[h?e.jsx(ae,{spin:!0}):e.jsx(ne,{}),h?" SUBMITTING...":" SUBMIT APPLICATION"]})})]})]})})})})}export{We as default};

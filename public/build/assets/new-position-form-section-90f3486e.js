import{r as n,j as e,b as A,s as M,A as R}from"./store-a55f681c.js";import{r as d}from"./index-42f21c31.js";import"./quill.snow-620404c5.js";import"./purify.es-3fb4e735.js";import k from"./summernote-editor-b52f78a8.js";import O from"./summernote-editor2-b2434a7b.js";import{c as I}from"./erf-record-thunk-1bd031b0.js";import{u}from"./app-2b4e2525.js";import{h as B}from"./moment-a9aaa855.js";import{B as m}from"./button-f23c5a7b.js";import{m as j}from"./index-a9b9aab0.js";import{A as D}from"./ArrowLeftOutlined-02e0b0dd.js";import"./index-022e647f.js";import"./floating-ui.dom-dbc86a7b.js";import"./ja-blank-854e0062.js";import"./UnorderedListOutlined-1eeaba5e.js";import"./warning-53117f39.js";import"./defineProperty-83f36300.js";import"./toPropertyKey-d8419463.js";import"./typeof-7fd5df1e.js";import"./AntdIcon-d7012edb.js";import"./shadow-0179b362.js";import"./OrderedListOutlined-ec1c4a18.js";import"./jd-blank-d242a436.js";import"./erf-record-service-cc8bc243.js";import"./erf-record-slice-4a707e06.js";import"./omit-644b1847.js";import"./genStyleUtils-a7424da4.js";import"./createSuper-f29e89b0.js";import"./Compact-5e8d7c79.js";import"./useSize-aaf01847.js";import"./index-bcc69c18.js";import"./UnstableContext-6fcf76c5.js";import"./regeneratorRuntime-92fa3873.js";import"./asyncToGenerator-8c72b493.js";import"./CheckCircleFilled-aa27478c.js";import"./CloseCircleFilled-c59cb59e.js";import"./InfoCircleFilled-de35a45c.js";import"./KeyCode-99629795.js";import"./pickAttrs-36913342.js";import"./useZIndex-fb3092c3.js";import"./CloseOutlined-adb2771a.js";function $e(){const[c,p]=n.useState(0);u(t=>t.job_positions);const{departments:v,erfCount:f}=u(t=>t.departments),{accounts:g}=u(t=>t.accounts),{user:a}=u(t=>t.app),{users:N}=u(t=>t.app),[w,x]=n.useState(!1),[r,o]=n.useState({}),[l,i]=n.useState({positionStatus:"",site:(a==null?void 0:a.site)||"",user_id:(a==null?void 0:a.id)||"",department:"",account:"",requestor_name:`${(a==null?void 0:a.employee_fname)||""} ${(a==null?void 0:a.employee_lname)||""}`}),b=()=>{if(c===0){const t={};if((!l.jobTitle||l.jobTitle.trim()==="")&&(t.jobTitle="Please enter a job title."),l.jobType||(t.jobType="Please select a job type."),l.personnel||(t.personnel="Please enter the number of required personnel."),l.dateNeed||(t.dateNeed="Please select a target onboarding date."),l.positionStatus||(t.positionStatus="Please select a position status."),l.department||(t.department="Please select a department."),l.account||(t.account="Please select an account."),l.sourcingMethod||(t.sourcingMethod="Please select a sourcing method."),(!l.justification||l.justification.trim()==="")&&(t.justification="Please provide a reason or justification for the request."),(!l.reviewer||l.reviewer.trim()==="")&&(t.reviewer="Please select a reviewer."),Object.keys(t).length>0){o(t);const s=Object.values(t)[0];j.error(s);return}o({}),p(1)}else c===1&&p(2)},y=()=>{const t=new Date,s=t.getFullYear(),$=(t.getMonth()+1).toString().padStart(2,"0"),F=t.getDate().toString().padStart(2,"0"),q=`${$}${F}${s}`,E=(T+f).toString().padStart(2,"0");return`${q}${E}`};n.useEffect(()=>{i({...l,ref_id:y()})},[f]),n.useEffect(()=>{a!=null&&a.id&&i(t=>({...t,user_id:a.id,site:a.site||"",requestor_name:`${a.employee_fname||""} ${a.employee_lname||""}`}))},[a]);const h=()=>{c>0&&p(c-1)},S=()=>{window.history.back()};async function C(t){x(!0);try{await M.dispatch(I({submitted:B().format("YYYY-MM-DD"),user_id:a==null?void 0:a.id,site:(a==null?void 0:a.site)||"",requestor_name:`${(a==null?void 0:a.employee_fname)||""} ${(a==null?void 0:a.employee_lname)||""}`,...l})),j.success("Successfully Added!"),setTimeout(()=>{x(!1),R.visit("/employee/erf_record")},2e3)}catch{x(!1)}}const[T,_]=n.useState(0);n.useEffect(()=>{(async()=>{try{const s=await A.get("/api/applications/today");_(s.data.count)}catch(s){console.error("Error fetching application count:",s)}})()},[]);const P=()=>{switch(c){case 0:return e.jsxs("form",{children:[e.jsx("h1",{className:"text-xl font-semibold mb-3 text-gray-900  mt-6 text-center",children:"EMPLOYEE REQUISITION FORM"}),e.jsx("h1",{className:"text-lg",children:e.jsx("b",{children:"Instructions/Hiring Information"})}),e.jsxs("p",{children:["  Use this form to initiate the recruitment process for all new and existing staff. Please complete all applicable sections of this form."," ",e.jsx("b",{children:"NO OFFERS should be made, either verbally or in written form, before all approvals on the form are completed"}),"."]}),e.jsx("input",{onChange:t=>i({...l,site:t.target.value}),value:(l==null?void 0:l.site)??"",type:"hidden",className:"border p-2 rounded w-full"}),e.jsxs("div",{className:"flex flex-1 w-full gap-4 mb-4 mt-4",children:[e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsx("label",{htmlFor:"",children:e.jsx("b",{children:"Reference No."})}),e.jsx("input",{type:"text",value:(l==null?void 0:l.ref_id)??"",className:"border p-2 rounded w-full",readOnly:!0})]}),e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsx("label",{htmlFor:"",children:e.jsx("b",{children:"Job Title"})}),e.jsx("input",{onChange:t=>{i({...l,jobTitle:t.target.value}),r.jobTitle&&o(s=>({...s,jobTitle:""}))},type:"text",placeholder:"",className:`border p-2 rounded w-full ${r.jobTitle?"border-red-500":""}`,value:l.jobTitle||"",required:!0}),r.jobTitle&&e.jsx("span",{className:"text-red-500 text-sm mt-1",children:r.jobTitle})]})]}),e.jsxs("div",{className:"flex flex-1 w-full gap-4 mb-4",children:[e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsx("label",{htmlFor:"",children:e.jsx("b",{children:"Job Type"})}),e.jsxs("select",{onChange:t=>{i({...l,jobType:t.target.value}),r.jobType&&o(s=>({...s,jobType:""}))},className:`border p-2 rounded w-full ${r.jobType?"border-red-500":""}`,name:"",id:"",value:l.jobType||"",required:!0,children:[e.jsx("option",{value:"",disabled:!0,children:"Select a job type"}),e.jsx("option",{value:"Full Time",children:"Full Time"}),e.jsx("option",{value:"Partime",children:"Partime"}),e.jsx("option",{value:"Temporary",children:"Temporary"}),e.jsx("option",{value:"Others",children:"Others"})]}),r.jobType&&e.jsx("span",{className:"text-red-500 text-sm mt-1",children:r.jobType})]}),e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsx("label",{htmlFor:"",children:e.jsx("b",{children:"No. of Required Personnel"})}),e.jsx("input",{onChange:t=>{i({...l,personnel:t.target.value}),r.personnel&&o(s=>({...s,personnel:""}))},type:"number",placeholder:"",className:`border p-2 rounded w-full ${r.personnel?"border-red-500":""}`,value:l.personnel||"",required:!0}),r.personnel&&e.jsx("span",{className:"text-red-500 text-sm mt-1",children:r.personnel})]}),e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsx("label",{htmlFor:"",children:e.jsx("b",{children:"Target Onboarding Date"})}),e.jsx("input",{onChange:t=>{i({...l,dateNeed:t.target.value}),r.dateNeed&&o(s=>({...s,dateNeed:""}))},type:"date",placeholder:"",className:`border p-2 rounded w-full ${r.dateNeed?"border-red-500":""}`,value:l.dateNeed||"",required:!0}),r.dateNeed&&e.jsx("span",{className:"text-red-500 text-sm mt-1",children:r.dateNeed})]})]}),e.jsxs("div",{className:"flex flex-1 w-full gap-4 mb-4",children:[e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsx("label",{htmlFor:"",children:e.jsx("b",{children:"Position Status"})}),e.jsxs("select",{onChange:t=>{i({...l,positionStatus:t.target.value}),r.positionStatus&&o(s=>({...s,positionStatus:""}))},value:l.positionStatus||"",className:`border p-2 rounded w-full ${r.positionStatus?"border-red-500":""}`,required:!0,children:[e.jsx("option",{value:"",disabled:!0,children:"Select position status"}),e.jsx("option",{value:"Replacement (due to resignation/termination/personnel movement)",children:"Replacement (due to resignation/termination/personnel movement)"}),e.jsx("option",{value:"Additional manpower",children:"Additional manpower"}),e.jsx("option",{value:"New Role",children:"New Role"}),e.jsx("option",{value:" Internal Job Posting",children:"Internal Job Posting"})]}),r.positionStatus&&e.jsx("span",{className:"text-red-500 text-sm mt-1",children:r.positionStatus})]}),e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsx("label",{htmlFor:"",children:e.jsx("b",{children:"Department"})}),e.jsxs("select",{onChange:t=>{i({...l,department:t.target.value}),r.department&&o(s=>({...s,department:""}))},value:l.department||"",className:`border p-2 rounded w-full ${r.department?"border-red-500":""}`,name:"department",id:"department",required:!0,children:[e.jsx("option",{value:"",disabled:!0,children:"Select a department"}),v.map((t,s)=>e.jsxs("option",{value:t.dept,children:[e.jsx("b",{children:t.dept}),t.site?` (${t.site})`:""]},s))]}),r.department&&e.jsx("span",{className:"text-red-500 text-sm mt-1",children:r.department})]}),e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsx("label",{htmlFor:"",children:e.jsx("b",{children:"Account"})}),e.jsxs("select",{onChange:t=>{i({...l,account:t.target.value}),r.account&&o(s=>({...s,account:""}))},value:l.account||"",className:`border p-2 rounded w-full ${r.account?"border-red-500":""}`,name:"account",id:"account",required:!0,children:[e.jsx("option",{value:"",disabled:!0,children:"Select an account"}),[...g].sort((t,s)=>t.acc.localeCompare(s.acc)).map((t,s)=>e.jsx("option",{value:t.acc,children:t.acc},s))]}),r.account&&e.jsx("span",{className:"text-red-500 text-sm mt-1",children:r.account})]}),e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsx("label",{htmlFor:"",children:e.jsx("b",{children:"Sourcing Method"})}),e.jsxs("select",{onChange:t=>{i({...l,sourcingMethod:t.target.value}),r.sourcingMethod&&o(s=>({...s,sourcingMethod:""}))},className:`border p-2 rounded w-full ${r.sourcingMethod?"border-red-500":""}`,name:"",id:"",value:l.sourcingMethod||"",required:!0,children:[e.jsx("option",{value:"",disabled:!0,children:"Select a sourcing method"}),e.jsx("option",{value:"Internal Candidates",children:"Internal Candidates"}),e.jsx("option",{value:"External Candidates",children:"External Candidates"}),e.jsx("option",{value:"Both",children:"Both"})]}),r.sourcingMethod&&e.jsx("span",{className:"text-red-500 text-sm mt-1",children:r.sourcingMethod})]})]}),e.jsxs("div",{className:"w-full flex flex-col mb-4",children:[e.jsx("label",{htmlFor:"",children:e.jsx("b",{children:"Reason or Justification of the Request"})}),e.jsx("textarea",{onChange:t=>{i({...l,justification:t.target.value}),r.justification&&o(s=>({...s,justification:""}))},type:"text",placeholder:"",className:`border h-40 p-2 rounded w-full ${r.justification?"border-red-500":""}`,value:l.justification||"",required:!0}),r.justification&&e.jsx("span",{className:"text-red-500 text-sm mt-1",children:r.justification})]}),e.jsxs("div",{className:"flex flex-1 w-full gap-4 mb-4",children:[e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsx("label",{htmlFor:"",children:e.jsx("b",{children:"Manager Submitting Request"})}),e.jsx("input",{onChange:t=>i({...l,submitted:t.target.value}),type:"text",value:`${(a==null?void 0:a.employee_fname)||""} ${(a==null?void 0:a.employee_lname)||""}`,className:"border p-2 rounded w-full",readOnly:!0})]}),e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsx("label",{htmlFor:"",children:e.jsx("b",{children:"Budget/Cost per head:"})}),e.jsx("input",{onChange:t=>i({...l,budgetCost:t.target.value}),type:"text",placeholder:"",className:"border p-2 rounded w-full"})]})]}),e.jsxs("div",{className:"w-full flex flex-col mb-4",children:[e.jsx("label",{htmlFor:"",children:e.jsx("b",{children:"Reviewer"})}),e.jsxs("select",{onChange:t=>{i({...l,reviewer:t.target.value}),r.reviewer&&o(s=>({...s,reviewer:""}))},value:l.reviewer||"",className:`border p-2 rounded w-full ${r.reviewer?"border-red-500":""}`,name:"reviewer",id:"reviewer",required:!0,children:[e.jsx("option",{value:"",disabled:!0,children:"Select a reviewer"}),N.filter(t=>t.id=="717"||t.id=="892"||t.id=="742").sort((t,s)=>t.employee_fname.localeCompare(s.employee_fname)).map((t,s)=>e.jsxs("option",{value:t.id,children:[t.employee_fname," ",t.employee_lname]},s))]}),r.reviewer&&e.jsx("span",{className:"text-red-500 text-sm mt-1",children:r.reviewer})]}),e.jsxs("div",{className:"mt-218 flex justify-between",children:[e.jsx(m,{onClick:h,disabled:c===0,className:"bg-blue-400 text-white w-32",children:"Prev"}),e.jsx(m,{onClick:b,className:"bg-blue-600 hover:bg-blue-700 text-white w-32",children:"Next"})]})]});case 1:return e.jsxs("form",{children:[e.jsx("div",{children:e.jsx(k,{form:l,setForm:i})}),e.jsxs("div",{className:"mt-20 flex justify-between",children:[e.jsx(m,{onClick:h,className:"bg-blue-600 hover:bg-blue-500 text-white w-32",children:"Prev"}),e.jsx(m,{onClick:b,className:"bg-blue-600 hover:bg-blue-700 text-white w-32",children:"Next"})]})]});case 2:return e.jsxs("form",{children:[e.jsx("div",{children:e.jsx(O,{form:l,setForm:i})}),e.jsxs("div",{className:"mt-20 flex justify-between",children:[e.jsx(m,{onClick:h,className:"bg-blue-600 hover:bg-blue-500 text-white w-32",children:"Prev"}),e.jsx(m,{loading:w,onClick:C,className:"bg-blue-600 hover:bg-blue-700 text-white w-32",children:"Submit"})]})]});default:return null}};return e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"pt-4 pb-2",children:e.jsx(m,{onClick:S,icon:e.jsx(D,{}),className:"mb-4 flex items-center gap-2 bg-gray-100  hover:bg-gray-200",children:"Back"})}),e.jsxs("div",{className:"px-8 w-full pt-4 pb-12",children:[e.jsx("div",{className:"relative px-4",children:e.jsxs(d.Stepper,{activeStep:c,lineClassName:"bg-gray-300",activeLineClassName:"bg-blue-600",children:[e.jsx(d.Step,{className:"h-6 w-6 !bg-gray-300 relative",activeClassName:"ring-0 !bg-blue-600 text-white",completedClassName:"!bg-blue-600 text-white",children:e.jsx("div",{className:"absolute -bottom-10 left-1/2 transform -translate-x-1/2 w-max text-center",children:e.jsx(d.Typography,{variant:"small",className:"font-medium text-gray-600",children:"Employee Requisition"})})}),e.jsx(d.Step,{className:"h-6 w-6 !bg-gray-300 relative",activeClassName:"ring-0 !bg-blue-600 text-white",completedClassName:"!bg-blue-600 text-white",children:e.jsx("div",{className:"absolute -bottom-10 left-1/2 transform -translate-x-1/2 w-max text-center",children:e.jsx(d.Typography,{variant:"small",className:"font-medium text-gray-600",children:"Job Analysis"})})}),e.jsx(d.Step,{className:"h-6 w-6 !bg-gray-300 relative",activeClassName:"ring-0 !bg-blue-600 text-white",completedClassName:"!bg-blue-600 text-white",children:e.jsx("div",{className:"absolute -bottom-10 left-1/2 transform -translate-x-1/2 w-max text-center",children:e.jsx(d.Typography,{variant:"small",className:"font-medium text-gray-600",children:"Job Description"})})})]})}),e.jsx("div",{className:"mt-20",children:P()})]})]})}export{$e as default};

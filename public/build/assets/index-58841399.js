var wi=Object.defineProperty;var yi=(e,n,t)=>n in e?wi(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;var bi=(e,n)=>()=>(n||e((n={exports:{}}).exports,n),n.exports);var h=(e,n,t)=>(yi(e,typeof n!="symbol"?n+"":n,t),t);var yu=bi((V,J)=>{var Pi=typeof global=="object"&&global&&global.Object===Object&&global;const ds=Pi;var vi=typeof self=="object"&&self&&self.Object===Object&&self,xi=ds||vi||Function("return this")();const st=xi;var ki=st.Symbol;const nt=ki;var gs=Object.prototype,Ai=gs.hasOwnProperty,Si=gs.toString,qt=nt?nt.toStringTag:void 0;function Ti(e){var n=Ai.call(e,qt),t=e[qt];try{e[qt]=void 0;var s=!0}catch{}var i=Si.call(e);return s&&(n?e[qt]=t:delete e[qt]),i}var Ei=Object.prototype,Oi=Ei.toString;function Ri(e){return Oi.call(e)}var Mi="[object Null]",Ci="[object Undefined]",mn=nt?nt.toStringTag:void 0;function Tt(e){return e==null?e===void 0?Ci:Mi:mn&&mn in Object(e)?Ti(e):Ri(e)}function at(e){return e!=null&&typeof e=="object"}var Ni="[object Symbol]";function He(e){return typeof e=="symbol"||at(e)&&Tt(e)==Ni}function Bi(e,n){for(var t=-1,s=e==null?0:e.length,i=Array(s);++t<s;)i[t]=n(e[t],t,e);return i}var $i=Array.isArray;const _t=$i;var Ii=1/0,_n=nt?nt.prototype:void 0,wn=_n?_n.toString:void 0;function ps(e){if(typeof e=="string")return e;if(_t(e))return Bi(e,ps)+"";if(He(e))return wn?wn.call(e):"";var n=e+"";return n=="0"&&1/e==-Ii?"-0":n}function wt(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}var Fi="[object AsyncFunction]",Li="[object Function]",zi="[object GeneratorFunction]",Di="[object Proxy]";function ms(e){if(!wt(e))return!1;var n=Tt(e);return n==Li||n==zi||n==Fi||n==Di}var qi=st["__core-js_shared__"];const Te=qi;var yn=function(){var e=/[^.]+$/.exec(Te&&Te.keys&&Te.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function ji(e){return!!yn&&yn in e}var Vi=Function.prototype,Ji=Vi.toString;function Et(e){if(e!=null){try{return Ji.call(e)}catch{}try{return e+""}catch{}}return""}var Ui=/[\\^$.*+?()[\]{}|]/g,Wi=/^\[object .+?Constructor\]$/,Gi=Function.prototype,Ki=Object.prototype,Zi=Gi.toString,Hi=Ki.hasOwnProperty,Qi=RegExp("^"+Zi.call(Hi).replace(Ui,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Xi(e){if(!wt(e)||ji(e))return!1;var n=ms(e)?Qi:Wi;return n.test(Et(e))}function Yi(e,n){return e==null?void 0:e[n]}function Ot(e,n){var t=Yi(e,n);return Xi(t)?t:void 0}var tr=Ot(st,"WeakMap");const Ie=tr;var bn=Object.create,er=function(){function e(){}return function(n){if(!wt(n))return{};if(bn)return bn(n);e.prototype=n;var t=new e;return e.prototype=void 0,t}}();const nr=er;function sr(e,n){var t=-1,s=e.length;for(n||(n=Array(s));++t<s;)n[t]=e[t];return n}var ir=function(){try{var e=Ot(Object,"defineProperty");return e({},"",{}),e}catch{}}();const Pn=ir;function rr(e,n){for(var t=-1,s=e==null?0:e.length;++t<s&&n(e[t],t,e)!==!1;);return e}var or=9007199254740991,ar=/^(?:0|[1-9]\d*)$/;function lr(e,n){var t=typeof e;return n=n??or,!!n&&(t=="number"||t!="symbol"&&ar.test(e))&&e>-1&&e%1==0&&e<n}function _s(e,n,t){n=="__proto__"&&Pn?Pn(e,n,{configurable:!0,enumerable:!0,value:t,writable:!0}):e[n]=t}function Qe(e,n){return e===n||e!==e&&n!==n}var cr=Object.prototype,hr=cr.hasOwnProperty;function ws(e,n,t){var s=e[n];(!(hr.call(e,n)&&Qe(s,t))||t===void 0&&!(n in e))&&_s(e,n,t)}function Pe(e,n,t,s){var i=!t;t||(t={});for(var r=-1,o=n.length;++r<o;){var a=n[r],l=s?s(t[a],e[a],a,t,e):void 0;l===void 0&&(l=e[a]),i?_s(t,a,l):ws(t,a,l)}return t}var ur=9007199254740991;function ys(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=ur}function bs(e){return e!=null&&ys(e.length)&&!ms(e)}var fr=Object.prototype;function Xe(e){var n=e&&e.constructor,t=typeof n=="function"&&n.prototype||fr;return e===t}function dr(e,n){for(var t=-1,s=Array(e);++t<e;)s[t]=n(t);return s}var gr="[object Arguments]";function vn(e){return at(e)&&Tt(e)==gr}var Ps=Object.prototype,pr=Ps.hasOwnProperty,mr=Ps.propertyIsEnumerable,_r=vn(function(){return arguments}())?vn:function(e){return at(e)&&pr.call(e,"callee")&&!mr.call(e,"callee")};const wr=_r;function yr(){return!1}var vs=typeof V=="object"&&V&&!V.nodeType&&V,xn=vs&&typeof J=="object"&&J&&!J.nodeType&&J,br=xn&&xn.exports===vs,kn=br?st.Buffer:void 0,Pr=kn?kn.isBuffer:void 0,vr=Pr||yr;const me=vr;var xr="[object Arguments]",kr="[object Array]",Ar="[object Boolean]",Sr="[object Date]",Tr="[object Error]",Er="[object Function]",Or="[object Map]",Rr="[object Number]",Mr="[object Object]",Cr="[object RegExp]",Nr="[object Set]",Br="[object String]",$r="[object WeakMap]",Ir="[object ArrayBuffer]",Fr="[object DataView]",Lr="[object Float32Array]",zr="[object Float64Array]",Dr="[object Int8Array]",qr="[object Int16Array]",jr="[object Int32Array]",Vr="[object Uint8Array]",Jr="[object Uint8ClampedArray]",Ur="[object Uint16Array]",Wr="[object Uint32Array]",C={};C[Lr]=C[zr]=C[Dr]=C[qr]=C[jr]=C[Vr]=C[Jr]=C[Ur]=C[Wr]=!0;C[xr]=C[kr]=C[Ir]=C[Ar]=C[Fr]=C[Sr]=C[Tr]=C[Er]=C[Or]=C[Rr]=C[Mr]=C[Cr]=C[Nr]=C[Br]=C[$r]=!1;function Gr(e){return at(e)&&ys(e.length)&&!!C[Tt(e)]}function Ye(e){return function(n){return e(n)}}var xs=typeof V=="object"&&V&&!V.nodeType&&V,Wt=xs&&typeof J=="object"&&J&&!J.nodeType&&J,Kr=Wt&&Wt.exports===xs,Ee=Kr&&ds.process,Zr=function(){try{var e=Wt&&Wt.require&&Wt.require("util").types;return e||Ee&&Ee.binding&&Ee.binding("util")}catch{}}();const It=Zr;var An=It&&It.isTypedArray,Hr=An?Ye(An):Gr;const ks=Hr;var Qr=Object.prototype,Xr=Qr.hasOwnProperty;function As(e,n){var t=_t(e),s=!t&&wr(e),i=!t&&!s&&me(e),r=!t&&!s&&!i&&ks(e),o=t||s||i||r,a=o?dr(e.length,String):[],l=a.length;for(var c in e)(n||Xr.call(e,c))&&!(o&&(c=="length"||i&&(c=="offset"||c=="parent")||r&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||lr(c,l)))&&a.push(c);return a}function Ss(e,n){return function(t){return e(n(t))}}var Yr=Ss(Object.keys,Object);const to=Yr;var eo=Object.prototype,no=eo.hasOwnProperty;function so(e){if(!Xe(e))return to(e);var n=[];for(var t in Object(e))no.call(e,t)&&t!="constructor"&&n.push(t);return n}function tn(e){return bs(e)?As(e):so(e)}function io(e){var n=[];if(e!=null)for(var t in Object(e))n.push(t);return n}var ro=Object.prototype,oo=ro.hasOwnProperty;function ao(e){if(!wt(e))return io(e);var n=Xe(e),t=[];for(var s in e)s=="constructor"&&(n||!oo.call(e,s))||t.push(s);return t}function en(e){return bs(e)?As(e,!0):ao(e)}var lo=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,co=/^\w*$/;function ho(e,n){if(_t(e))return!1;var t=typeof e;return t=="number"||t=="symbol"||t=="boolean"||e==null||He(e)?!0:co.test(e)||!lo.test(e)||n!=null&&e in Object(n)}var uo=Ot(Object,"create");const Xt=uo;function fo(){this.__data__=Xt?Xt(null):{},this.size=0}function go(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}var po="__lodash_hash_undefined__",mo=Object.prototype,_o=mo.hasOwnProperty;function wo(e){var n=this.__data__;if(Xt){var t=n[e];return t===po?void 0:t}return _o.call(n,e)?n[e]:void 0}var yo=Object.prototype,bo=yo.hasOwnProperty;function Po(e){var n=this.__data__;return Xt?n[e]!==void 0:bo.call(n,e)}var vo="__lodash_hash_undefined__";function xo(e,n){var t=this.__data__;return this.size+=this.has(e)?0:1,t[e]=Xt&&n===void 0?vo:n,this}function At(e){var n=-1,t=e==null?0:e.length;for(this.clear();++n<t;){var s=e[n];this.set(s[0],s[1])}}At.prototype.clear=fo;At.prototype.delete=go;At.prototype.get=wo;At.prototype.has=Po;At.prototype.set=xo;function ko(){this.__data__=[],this.size=0}function ve(e,n){for(var t=e.length;t--;)if(Qe(e[t][0],n))return t;return-1}var Ao=Array.prototype,So=Ao.splice;function To(e){var n=this.__data__,t=ve(n,e);if(t<0)return!1;var s=n.length-1;return t==s?n.pop():So.call(n,t,1),--this.size,!0}function Eo(e){var n=this.__data__,t=ve(n,e);return t<0?void 0:n[t][1]}function Oo(e){return ve(this.__data__,e)>-1}function Ro(e,n){var t=this.__data__,s=ve(t,e);return s<0?(++this.size,t.push([e,n])):t[s][1]=n,this}function ht(e){var n=-1,t=e==null?0:e.length;for(this.clear();++n<t;){var s=e[n];this.set(s[0],s[1])}}ht.prototype.clear=ko;ht.prototype.delete=To;ht.prototype.get=Eo;ht.prototype.has=Oo;ht.prototype.set=Ro;var Mo=Ot(st,"Map");const Yt=Mo;function Co(){this.size=0,this.__data__={hash:new At,map:new(Yt||ht),string:new At}}function No(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}function xe(e,n){var t=e.__data__;return No(n)?t[typeof n=="string"?"string":"hash"]:t.map}function Bo(e){var n=xe(this,e).delete(e);return this.size-=n?1:0,n}function $o(e){return xe(this,e).get(e)}function Io(e){return xe(this,e).has(e)}function Fo(e,n){var t=xe(this,e),s=t.size;return t.set(e,n),this.size+=t.size==s?0:1,this}function ut(e){var n=-1,t=e==null?0:e.length;for(this.clear();++n<t;){var s=e[n];this.set(s[0],s[1])}}ut.prototype.clear=Co;ut.prototype.delete=Bo;ut.prototype.get=$o;ut.prototype.has=Io;ut.prototype.set=Fo;var Lo="Expected a function";function nn(e,n){if(typeof e!="function"||n!=null&&typeof n!="function")throw new TypeError(Lo);var t=function(){var s=arguments,i=n?n.apply(this,s):s[0],r=t.cache;if(r.has(i))return r.get(i);var o=e.apply(this,s);return t.cache=r.set(i,o)||r,o};return t.cache=new(nn.Cache||ut),t}nn.Cache=ut;var zo=500;function Do(e){var n=nn(e,function(s){return t.size===zo&&t.clear(),s}),t=n.cache;return n}var qo=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,jo=/\\(\\)?/g,Vo=Do(function(e){var n=[];return e.charCodeAt(0)===46&&n.push(""),e.replace(qo,function(t,s,i,r){n.push(i?r.replace(jo,"$1"):s||t)}),n});const Jo=Vo;function Uo(e){return e==null?"":ps(e)}function Ts(e,n){return _t(e)?e:ho(e,n)?[e]:Jo(Uo(e))}var Wo=1/0;function Es(e){if(typeof e=="string"||He(e))return e;var n=e+"";return n=="0"&&1/e==-Wo?"-0":n}function Os(e,n){n=Ts(n,e);for(var t=0,s=n.length;e!=null&&t<s;)e=e[Es(n[t++])];return t&&t==s?e:void 0}function Go(e,n,t){var s=e==null?void 0:Os(e,n);return s===void 0?t:s}function Rs(e,n){for(var t=-1,s=n.length,i=e.length;++t<s;)e[i+t]=n[t];return e}var Ko=Ss(Object.getPrototypeOf,Object);const sn=Ko;var Zo="[object Object]",Ho=Function.prototype,Qo=Object.prototype,Ms=Ho.toString,Xo=Qo.hasOwnProperty,Yo=Ms.call(Object);function Fe(e){if(!at(e)||Tt(e)!=Zo)return!1;var n=sn(e);if(n===null)return!0;var t=Xo.call(n,"constructor")&&n.constructor;return typeof t=="function"&&t instanceof t&&Ms.call(t)==Yo}function ta(e,n,t){var s=-1,i=e.length;n<0&&(n=-n>i?0:i+n),t=t>i?i:t,t<0&&(t+=i),i=n>t?0:t-n>>>0,n>>>=0;for(var r=Array(i);++s<i;)r[s]=e[s+n];return r}function ea(){this.__data__=new ht,this.size=0}function na(e){var n=this.__data__,t=n.delete(e);return this.size=n.size,t}function sa(e){return this.__data__.get(e)}function ia(e){return this.__data__.has(e)}var ra=200;function oa(e,n){var t=this.__data__;if(t instanceof ht){var s=t.__data__;if(!Yt||s.length<ra-1)return s.push([e,n]),this.size=++t.size,this;t=this.__data__=new ut(s)}return t.set(e,n),this.size=t.size,this}function ot(e){var n=this.__data__=new ht(e);this.size=n.size}ot.prototype.clear=ea;ot.prototype.delete=na;ot.prototype.get=sa;ot.prototype.has=ia;ot.prototype.set=oa;function aa(e,n){return e&&Pe(n,tn(n),e)}function la(e,n){return e&&Pe(n,en(n),e)}var Cs=typeof V=="object"&&V&&!V.nodeType&&V,Sn=Cs&&typeof J=="object"&&J&&!J.nodeType&&J,ca=Sn&&Sn.exports===Cs,Tn=ca?st.Buffer:void 0,En=Tn?Tn.allocUnsafe:void 0;function ha(e,n){if(n)return e.slice();var t=e.length,s=En?En(t):new e.constructor(t);return e.copy(s),s}function ua(e,n){for(var t=-1,s=e==null?0:e.length,i=0,r=[];++t<s;){var o=e[t];n(o,t,e)&&(r[i++]=o)}return r}function Ns(){return[]}var fa=Object.prototype,da=fa.propertyIsEnumerable,On=Object.getOwnPropertySymbols,ga=On?function(e){return e==null?[]:(e=Object(e),ua(On(e),function(n){return da.call(e,n)}))}:Ns;const rn=ga;function pa(e,n){return Pe(e,rn(e),n)}var ma=Object.getOwnPropertySymbols,_a=ma?function(e){for(var n=[];e;)Rs(n,rn(e)),e=sn(e);return n}:Ns;const Bs=_a;function wa(e,n){return Pe(e,Bs(e),n)}function $s(e,n,t){var s=n(e);return _t(e)?s:Rs(s,t(e))}function Le(e){return $s(e,tn,rn)}function ya(e){return $s(e,en,Bs)}var ba=Ot(st,"DataView");const ze=ba;var Pa=Ot(st,"Promise");const De=Pa;var va=Ot(st,"Set");const qe=va;var Rn="[object Map]",xa="[object Object]",Mn="[object Promise]",Cn="[object Set]",Nn="[object WeakMap]",Bn="[object DataView]",ka=Et(ze),Aa=Et(Yt),Sa=Et(De),Ta=Et(qe),Ea=Et(Ie),kt=Tt;(ze&&kt(new ze(new ArrayBuffer(1)))!=Bn||Yt&&kt(new Yt)!=Rn||De&&kt(De.resolve())!=Mn||qe&&kt(new qe)!=Cn||Ie&&kt(new Ie)!=Nn)&&(kt=function(e){var n=Tt(e),t=n==xa?e.constructor:void 0,s=t?Et(t):"";if(s)switch(s){case ka:return Bn;case Aa:return Rn;case Sa:return Mn;case Ta:return Cn;case Ea:return Nn}return n});const te=kt;var Oa=Object.prototype,Ra=Oa.hasOwnProperty;function Ma(e){var n=e.length,t=new e.constructor(n);return n&&typeof e[0]=="string"&&Ra.call(e,"index")&&(t.index=e.index,t.input=e.input),t}var Ca=st.Uint8Array;const _e=Ca;function on(e){var n=new e.constructor(e.byteLength);return new _e(n).set(new _e(e)),n}function Na(e,n){var t=n?on(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.byteLength)}var Ba=/\w*$/;function $a(e){var n=new e.constructor(e.source,Ba.exec(e));return n.lastIndex=e.lastIndex,n}var $n=nt?nt.prototype:void 0,In=$n?$n.valueOf:void 0;function Ia(e){return In?Object(In.call(e)):{}}function Fa(e,n){var t=n?on(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.length)}var La="[object Boolean]",za="[object Date]",Da="[object Map]",qa="[object Number]",ja="[object RegExp]",Va="[object Set]",Ja="[object String]",Ua="[object Symbol]",Wa="[object ArrayBuffer]",Ga="[object DataView]",Ka="[object Float32Array]",Za="[object Float64Array]",Ha="[object Int8Array]",Qa="[object Int16Array]",Xa="[object Int32Array]",Ya="[object Uint8Array]",tl="[object Uint8ClampedArray]",el="[object Uint16Array]",nl="[object Uint32Array]";function sl(e,n,t){var s=e.constructor;switch(n){case Wa:return on(e);case La:case za:return new s(+e);case Ga:return Na(e,t);case Ka:case Za:case Ha:case Qa:case Xa:case Ya:case tl:case el:case nl:return Fa(e,t);case Da:return new s;case qa:case Ja:return new s(e);case ja:return $a(e);case Va:return new s;case Ua:return Ia(e)}}function il(e){return typeof e.constructor=="function"&&!Xe(e)?nr(sn(e)):{}}var rl="[object Map]";function ol(e){return at(e)&&te(e)==rl}var Fn=It&&It.isMap,al=Fn?Ye(Fn):ol;const ll=al;var cl="[object Set]";function hl(e){return at(e)&&te(e)==cl}var Ln=It&&It.isSet,ul=Ln?Ye(Ln):hl;const fl=ul;var dl=1,gl=2,pl=4,Is="[object Arguments]",ml="[object Array]",_l="[object Boolean]",wl="[object Date]",yl="[object Error]",Fs="[object Function]",bl="[object GeneratorFunction]",Pl="[object Map]",vl="[object Number]",Ls="[object Object]",xl="[object RegExp]",kl="[object Set]",Al="[object String]",Sl="[object Symbol]",Tl="[object WeakMap]",El="[object ArrayBuffer]",Ol="[object DataView]",Rl="[object Float32Array]",Ml="[object Float64Array]",Cl="[object Int8Array]",Nl="[object Int16Array]",Bl="[object Int32Array]",$l="[object Uint8Array]",Il="[object Uint8ClampedArray]",Fl="[object Uint16Array]",Ll="[object Uint32Array]",O={};O[Is]=O[ml]=O[El]=O[Ol]=O[_l]=O[wl]=O[Rl]=O[Ml]=O[Cl]=O[Nl]=O[Bl]=O[Pl]=O[vl]=O[Ls]=O[xl]=O[kl]=O[Al]=O[Sl]=O[$l]=O[Il]=O[Fl]=O[Ll]=!0;O[yl]=O[Fs]=O[Tl]=!1;function de(e,n,t,s,i,r){var o,a=n&dl,l=n&gl,c=n&pl;if(t&&(o=i?t(e,s,i,r):t(e)),o!==void 0)return o;if(!wt(e))return e;var u=_t(e);if(u){if(o=Ma(e),!a)return sr(e,o)}else{var d=te(e),p=d==Fs||d==bl;if(me(e))return ha(e,a);if(d==Ls||d==Is||p&&!i){if(o=l||p?{}:il(e),!a)return l?wa(e,la(o,e)):pa(e,aa(o,e))}else{if(!O[d])return i?e:{};o=sl(e,d,a)}}r||(r=new ot);var g=r.get(e);if(g)return g;r.set(e,o),fl(e)?e.forEach(function(S){o.add(de(S,n,t,S,e,r))}):ll(e)&&e.forEach(function(S,v){o.set(v,de(S,n,t,v,e,r))});var k=c?l?ya:Le:l?en:tn,A=u?void 0:k(e);return rr(A||e,function(S,v){A&&(v=S,S=e[v]),ws(o,v,de(S,n,t,v,e,r))}),o}var zl=4;function Dl(e){return de(e,zl)}var ql="__lodash_hash_undefined__";function jl(e){return this.__data__.set(e,ql),this}function Vl(e){return this.__data__.has(e)}function we(e){var n=-1,t=e==null?0:e.length;for(this.__data__=new ut;++n<t;)this.add(e[n])}we.prototype.add=we.prototype.push=jl;we.prototype.has=Vl;function Jl(e,n){for(var t=-1,s=e==null?0:e.length;++t<s;)if(n(e[t],t,e))return!0;return!1}function Ul(e,n){return e.has(n)}var Wl=1,Gl=2;function zs(e,n,t,s,i,r){var o=t&Wl,a=e.length,l=n.length;if(a!=l&&!(o&&l>a))return!1;var c=r.get(e),u=r.get(n);if(c&&u)return c==n&&u==e;var d=-1,p=!0,g=t&Gl?new we:void 0;for(r.set(e,n),r.set(n,e);++d<a;){var k=e[d],A=n[d];if(s)var S=o?s(A,k,d,n,e,r):s(k,A,d,e,n,r);if(S!==void 0){if(S)continue;p=!1;break}if(g){if(!Jl(n,function(v,M){if(!Ul(g,M)&&(k===v||i(k,v,t,s,r)))return g.push(M)})){p=!1;break}}else if(!(k===A||i(k,A,t,s,r))){p=!1;break}}return r.delete(e),r.delete(n),p}function Kl(e){var n=-1,t=Array(e.size);return e.forEach(function(s,i){t[++n]=[i,s]}),t}function Zl(e){var n=-1,t=Array(e.size);return e.forEach(function(s){t[++n]=s}),t}var Hl=1,Ql=2,Xl="[object Boolean]",Yl="[object Date]",tc="[object Error]",ec="[object Map]",nc="[object Number]",sc="[object RegExp]",ic="[object Set]",rc="[object String]",oc="[object Symbol]",ac="[object ArrayBuffer]",lc="[object DataView]",zn=nt?nt.prototype:void 0,Oe=zn?zn.valueOf:void 0;function cc(e,n,t,s,i,r,o){switch(t){case lc:if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)return!1;e=e.buffer,n=n.buffer;case ac:return!(e.byteLength!=n.byteLength||!r(new _e(e),new _e(n)));case Xl:case Yl:case nc:return Qe(+e,+n);case tc:return e.name==n.name&&e.message==n.message;case sc:case rc:return e==n+"";case ec:var a=Kl;case ic:var l=s&Hl;if(a||(a=Zl),e.size!=n.size&&!l)return!1;var c=o.get(e);if(c)return c==n;s|=Ql,o.set(e,n);var u=zs(a(e),a(n),s,i,r,o);return o.delete(e),u;case oc:if(Oe)return Oe.call(e)==Oe.call(n)}return!1}var hc=1,uc=Object.prototype,fc=uc.hasOwnProperty;function dc(e,n,t,s,i,r){var o=t&hc,a=Le(e),l=a.length,c=Le(n),u=c.length;if(l!=u&&!o)return!1;for(var d=l;d--;){var p=a[d];if(!(o?p in n:fc.call(n,p)))return!1}var g=r.get(e),k=r.get(n);if(g&&k)return g==n&&k==e;var A=!0;r.set(e,n),r.set(n,e);for(var S=o;++d<l;){p=a[d];var v=e[p],M=n[p];if(s)var dt=o?s(M,v,p,n,e,r):s(v,M,p,e,n,r);if(!(dt===void 0?v===M||i(v,M,t,s,r):dt)){A=!1;break}S||(S=p=="constructor")}if(A&&!S){var W=e.constructor,G=n.constructor;W!=G&&"constructor"in e&&"constructor"in n&&!(typeof W=="function"&&W instanceof W&&typeof G=="function"&&G instanceof G)&&(A=!1)}return r.delete(e),r.delete(n),A}var gc=1,Dn="[object Arguments]",qn="[object Array]",he="[object Object]",pc=Object.prototype,jn=pc.hasOwnProperty;function mc(e,n,t,s,i,r){var o=_t(e),a=_t(n),l=o?qn:te(e),c=a?qn:te(n);l=l==Dn?he:l,c=c==Dn?he:c;var u=l==he,d=c==he,p=l==c;if(p&&me(e)){if(!me(n))return!1;o=!0,u=!1}if(p&&!u)return r||(r=new ot),o||ks(e)?zs(e,n,t,s,i,r):cc(e,n,l,t,s,i,r);if(!(t&gc)){var g=u&&jn.call(e,"__wrapped__"),k=d&&jn.call(n,"__wrapped__");if(g||k){var A=g?e.value():e,S=k?n.value():n;return r||(r=new ot),i(A,S,t,s,r)}}return p?(r||(r=new ot),dc(e,n,t,s,i,r)):!1}function Ds(e,n,t,s,i){return e===n?!0:e==null||n==null||!at(e)&&!at(n)?e!==e&&n!==n:mc(e,n,t,s,Ds,i)}function _c(e){var n=e==null?0:e.length;return n?e[n-1]:void 0}function wc(e,n){return n.length<2?e:Os(e,ta(n,0,-1))}function Vn(e,n){return Ds(e,n)}function yc(e,n){return n=Ts(n,e),e=wc(e,n),e==null||delete e[Es(_c(n))]}function bc(e,n){return e==null?!0:yc(e,n)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 *//**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let je;try{je={window,document}}catch{/* istanbul ignore next -- @preserve */je={window:{},document:{}}}var ee=je;/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Jn(){return function e(){e.called=!0}}class Ft{constructor(n,t){h(this,"source");h(this,"name");h(this,"path");h(this,"stop");h(this,"off");h(this,"return");this.source=n,this.name=t,this.path=[],this.stop=Jn(),this.off=Jn()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const D=new Array(256).fill("").map((e,n)=>("0"+n.toString(16)).slice(-2));function ke(){const[e,n,t,s]=crypto.getRandomValues(new Uint32Array(4));return"e"+D[e>>0&255]+D[e>>8&255]+D[e>>16&255]+D[e>>24&255]+D[n>>0&255]+D[n>>8&255]+D[n>>16&255]+D[n>>24&255]+D[t>>0&255]+D[t>>8&255]+D[t>>16&255]+D[t>>24&255]+D[s>>0&255]+D[s>>8&255]+D[s>>16&255]+D[s>>24&255]}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Ve={get(e="normal"){return typeof e!="number"?this[e]||this.normal:e},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5};function Pc(e,n){const t=Ve.get(n.priority);for(let s=0;s<e.length;s++)if(Ve.get(e[s].priority)<t){e.splice(s,0,n);return}e.push(n)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const vc="https://ckeditor.com/docs/ckeditor5/latest/support/error-codes.html";class f extends Error{constructor(t,s,i){super(xc(t,i));h(this,"context");h(this,"data");this.name="CKEditorError",this.context=s,this.data=i}is(t){return t==="CKEditorError"}static rethrowUnexpectedError(t,s){if(t.is&&t.is("CKEditorError"))throw t;const i=new f(t.message,s);throw i.stack=t.stack,i}}function Je(e,n){console.warn(...kc(e,n))}function qs(e){return`
Read more: ${vc}#error-${e}`}function xc(e,n){const t=new WeakSet,i=n?` ${JSON.stringify(n,(o,a)=>{if(typeof a=="object"&&a!==null){if(t.has(a))return`[object ${a.constructor.name}]`;t.add(a)}return a})}`:"",r=qs(e);return e+i+r}function kc(e,n){const t=qs(e);return n?[e,n,t]:[e,t]}const Ac="43.3.1";/* istanbul ignore next -- @preserve */if(globalThis.CKEDITOR_VERSION)throw new f("ckeditor-duplicated-modules",null);globalThis.CKEDITOR_VERSION=Ac;const Nt=Symbol("listeningTo"),Ue=Symbol("emitterId"),it=Symbol("delegations"),js=F(Object);function F(e){if(!e)return js;class n extends e{on(s,i,r){this.listenTo(this,s,i,r)}once(s,i,r){let o=!1;const a=(l,...c)=>{o||(o=!0,l.off(),i.call(this,l,...c))};this.listenTo(this,s,a,r)}off(s,i){this.stopListening(this,s,i)}listenTo(s,i,r,o={}){let a,l;this[Nt]||(this[Nt]={});const c=this[Nt];Re(s)||Vs(s);const u=Re(s);(a=c[u])||(a=c[u]={emitter:s,callbacks:{}}),(l=a.callbacks[i])||(l=a.callbacks[i]=[]),l.push(r),Oc(this,s,i,r,o)}stopListening(s,i,r){const o=this[Nt];let a=s&&Re(s);const l=o&&a?o[a]:void 0,c=l&&i?l.callbacks[i]:void 0;if(!(!o||s&&!l||i&&!c))if(r)Me(this,s,i,r),c.indexOf(r)!==-1&&(c.length===1?delete l.callbacks[i]:Me(this,s,i,r));else if(c){for(;r=c.pop();)Me(this,s,i,r);delete l.callbacks[i]}else if(l){for(i in l.callbacks)this.stopListening(s,i);delete o[a]}else{for(a in o)this.stopListening(o[a].emitter);delete this[Nt]}}fire(s,...i){try{const r=s instanceof Ft?s:new Ft(this,s),o=r.name;let a=Us(this,o);if(r.path.push(this),a){const c=[r,...i];a=Array.from(a);for(let u=0;u<a.length&&(a[u].callback.apply(this,c),r.off.called&&(delete r.off.called,this._removeEventListener(o,a[u].callback)),!r.stop.called);u++);}const l=this[it];if(l){const c=l.get(o),u=l.get("*");c&&Un(c,r,i),u&&Un(u,r,i)}return r.return}catch(r){/* istanbul ignore next -- @preserve */f.rethrowUnexpectedError(r,this)}}delegate(...s){return{to:(i,r)=>{this[it]||(this[it]=new Map),s.forEach(o=>{const a=this[it].get(o);a?a.set(i,r):this[it].set(o,new Map([[i,r]]))})}}}stopDelegating(s,i){if(this[it])if(!s)this[it].clear();else if(!i)this[it].delete(s);else{const r=this[it].get(s);r&&r.delete(i)}}_addEventListener(s,i,r){Ec(this,s);const o=We(this,s),a=Ve.get(r.priority),l={callback:i,priority:a};for(const c of o)Pc(c,l)}_removeEventListener(s,i){const r=We(this,s);for(const o of r)for(let a=0;a<o.length;a++)o[a].callback==i&&(o.splice(a,1),a--)}}return n}["on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(e=>{F[e]=js.prototype[e]});function Sc(e,n){const t=e[Nt];return t&&t[n]?t[n].emitter:null}function Vs(e,n){e[Ue]||(e[Ue]=n||ke())}function Re(e){return e[Ue]}function Js(e){return e._events||Object.defineProperty(e,"_events",{value:{}}),e._events}function Tc(){return{callbacks:[],childEvents:[]}}function Ec(e,n){const t=Js(e);if(t[n])return;let s=n,i=null;const r=[];for(;s!==""&&!t[s];)t[s]=Tc(),r.push(t[s]),i&&t[s].childEvents.push(i),i=s,s=s.substr(0,s.lastIndexOf(":"));if(s!==""){for(const o of r)o.callbacks=t[s].callbacks.slice();t[s].childEvents.push(i)}}function We(e,n){const t=Js(e)[n];if(!t)return[];let s=[t.callbacks];for(let i=0;i<t.childEvents.length;i++){const r=We(e,t.childEvents[i]);s=s.concat(r)}return s}function Us(e,n){let t;return!e._events||!(t=e._events[n])||!t.callbacks.length?n.indexOf(":")>-1?Us(e,n.substr(0,n.lastIndexOf(":"))):null:t.callbacks}function Un(e,n,t){for(let[s,i]of e){i?typeof i=="function"&&(i=i(n.name)):i=n.name;const r=new Ft(n.source,i);r.path=[...n.path],s.fire(r,...t)}}function Oc(e,n,t,s,i){n._addEventListener?n._addEventListener(t,s,i):e._addEventListener.call(n,t,s,i)}function Me(e,n,t,s){n._removeEventListener?n._removeEventListener(t,s):e._removeEventListener.call(n,t,s)}const Gt=Symbol("observableProperties"),ne=Symbol("boundObservables"),Kt=Symbol("boundProperties"),vt=Symbol("decoratedMethods"),Wn=Symbol("decoratedOriginal"),Ws=an(F());function an(e){var t,s,i,r;if(!e)return Ws;class n extends e{constructor(){super(...arguments);h(this,t);h(this,s);h(this,i);h(this,r)}set(l,c){if(wt(l)){Object.keys(l).forEach(d=>{this.set(d,l[d])},this);return}Ce(this);const u=this[Gt];if(l in this&&!u.has(l))throw new f("observable-set-cannot-override",this);Object.defineProperty(this,l,{enumerable:!0,configurable:!0,get(){return u.get(l)},set(d){const p=u.get(l);let g=this.fire(`set:${l}`,l,d,p);g===void 0&&(g=d),(p!==g||!u.has(l))&&(u.set(l,g),this.fire(`change:${l}`,l,g,p))}}),this[l]=c}bind(...l){if(!l.length||!Gn(l))throw new f("observable-bind-wrong-properties",this);if(new Set(l).size!==l.length)throw new f("observable-bind-duplicate-properties",this);Ce(this);const c=this[Kt];l.forEach(d=>{if(c.has(d))throw new f("observable-bind-rebind",this)});const u=new Map;return l.forEach(d=>{const p={property:d,to:[]};c.set(d,p),u.set(d,p)}),{to:Rc,toMany:Mc,_observable:this,_bindProperties:l,_to:[],_bindings:u}}unbind(...l){if(!this[Gt])return;const c=this[Kt],u=this[ne];if(l.length){if(!Gn(l))throw new f("observable-unbind-wrong-properties",this);l.forEach(d=>{const p=c.get(d);p&&(p.to.forEach(([g,k])=>{const A=u.get(g),S=A[k];S.delete(p),S.size||delete A[k],Object.keys(A).length||(u.delete(g),this.stopListening(g,"change"))}),c.delete(d))})}else u.forEach((d,p)=>{this.stopListening(p,"change")}),u.clear(),c.clear()}decorate(l){Ce(this);const c=this[l];if(!c)throw new f("observablemixin-cannot-decorate-undefined",this,{object:this,methodName:l});this.on(l,(u,d)=>{u.return=c.apply(this,d)}),this[l]=function(...u){return this.fire(l,u)},this[l][Wn]=c,this[vt]||(this[vt]=[]),this[vt].push(l)}stopListening(l,c,u){if(!l&&this[vt]){for(const d of this[vt])this[d]=this[d][Wn];delete this[vt]}super.stopListening(l,c,u)}}return t=Gt,s=vt,i=Kt,r=ne,n}["set","bind","unbind","decorate","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(e=>{an[e]=Ws.prototype[e]});function Ce(e){e[Gt]||(Object.defineProperty(e,Gt,{value:new Map}),Object.defineProperty(e,ne,{value:new Map}),Object.defineProperty(e,Kt,{value:new Map}))}function Rc(...e){const n=Nc(...e),t=Array.from(this._bindings.keys()),s=t.length;if(!n.callback&&n.to.length>1)throw new f("observable-bind-to-no-callback",this);if(s>1&&n.callback)throw new f("observable-bind-to-extra-callback",this);n.to.forEach(i=>{if(i.properties.length&&i.properties.length!==s)throw new f("observable-bind-to-properties-length",this);i.properties.length||(i.properties=this._bindProperties)}),this._to=n.to,n.callback&&(this._bindings.get(t[0]).callback=n.callback),Ic(this._observable,this._to),$c(this),this._bindProperties.forEach(i=>{Gs(this._observable,i)})}function Mc(e,n,t){if(this._bindings.size>1)throw new f("observable-bind-to-many-not-one-binding",this);this.to(...Cc(e,n),t)}function Cc(e,n){const t=e.map(s=>[s,n]);return Array.prototype.concat.apply([],t)}function Gn(e){return e.every(n=>typeof n=="string")}function Nc(...e){if(!e.length)throw new f("observable-bind-to-parse-error",null);const n={to:[]};let t;return typeof e[e.length-1]=="function"&&(n.callback=e.pop()),e.forEach(s=>{if(typeof s=="string")t.properties.push(s);else if(typeof s=="object")t={observable:s,properties:[]},n.to.push(t);else throw new f("observable-bind-to-parse-error",null)}),n}function Bc(e,n,t,s){const i=e[ne],r=i.get(t),o=r||{};o[s]||(o[s]=new Set),o[s].add(n),r||i.set(t,o)}function $c(e){let n;e._bindings.forEach((t,s)=>{e._to.forEach(i=>{n=i.properties[t.callback?0:e._bindProperties.indexOf(s)],t.to.push([i.observable,n]),Bc(e._observable,t,i.observable,n)})})}function Gs(e,n){const s=e[Kt].get(n);let i;s.callback?i=s.callback.apply(e,s.to.map(r=>r[0][r[1]])):(i=s.to[0],i=i[0][i[1]]),Object.prototype.hasOwnProperty.call(e,n)?e[n]=i:e.set(n,i)}function Ic(e,n){n.forEach(t=>{const s=e[ne];let i;s.get(t.observable)||e.listenTo(t.observable,"change",(r,o)=>{i=s.get(t.observable)[o],i&&i.forEach(a=>{Gs(e,a.property)})})})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Kn(e){let n=0;for(const t of e)n++;return n}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function j(e,n){const t=Math.min(e.length,n.length);for(let s=0;s<t;s++)if(e[s]!=n[s])return s;return e.length==n.length?"same":e.length<n.length?"prefix":"extension"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function ft(e){return!!(e&&e[Symbol.iterator])}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Zn(e){if(e){if(e.defaultView)return e instanceof e.defaultView.Document;if(e.ownerDocument&&e.ownerDocument.defaultView)return e instanceof e.ownerDocument.defaultView.Node}return!1}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Hn(e){const n=Object.prototype.toString.apply(e);return n=="[object Window]"||n=="[object global]"}const Ks=Zs(F());function Zs(e){if(!e)return Ks;class n extends e{listenTo(s,i,r,o={}){if(Zn(s)||Hn(s)){const a={capture:!!o.useCapture,passive:!!o.usePassive},l=this._getProxyEmitter(s,a)||new Fc(s,a);this.listenTo(l,i,r,o)}else super.listenTo(s,i,r,o)}stopListening(s,i,r){if(Zn(s)||Hn(s)){const o=this._getAllProxyEmitters(s);for(const a of o)this.stopListening(a,i,r)}else super.stopListening(s,i,r)}_getProxyEmitter(s,i){return Sc(this,Hs(s,i))}_getAllProxyEmitters(s){return[{capture:!1,passive:!1},{capture:!1,passive:!0},{capture:!0,passive:!1},{capture:!0,passive:!0}].map(i=>this._getProxyEmitter(s,i)).filter(i=>!!i)}}return n}["_getProxyEmitter","_getAllProxyEmitters","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(e=>{Zs[e]=Ks.prototype[e]});class Fc extends F(){constructor(t,s){super();h(this,"_domNode");h(this,"_options");h(this,"_domListeners");Vs(this,Hs(t,s)),this._domNode=t,this._options=s}attach(t){if(this._domListeners&&this._domListeners[t])return;const s=this._createDomListener(t);this._domNode.addEventListener(t,s,this._options),this._domListeners||(this._domListeners={}),this._domListeners[t]=s}detach(t){let s;this._domListeners[t]&&(!(s=this._events[t])||!s.callbacks.length)&&this._domListeners[t].removeListener()}_addEventListener(t,s,i){this.attach(t),F().prototype._addEventListener.call(this,t,s,i)}_removeEventListener(t,s){F().prototype._removeEventListener.call(this,t,s),this.detach(t)}_createDomListener(t){const s=i=>{this.fire(t,i)};return s.removeListener=()=>{this._domNode.removeEventListener(t,s,this._options),delete this._domListeners[t]},s}}function Lc(e){return e["data-ck-expando"]||(e["data-ck-expando"]=ke())}function Hs(e,n){let t=Lc(e);for(const s of Object.keys(n).sort())n[s]&&(t+="-"+s);return t}const Zt=zc();function zc(){const e={pageup:33,pagedown:34,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,backspace:8,delete:46,enter:13,space:32,esc:27,tab:9,ctrl:1114112,shift:2228224,alt:4456448,cmd:8912896};for(let n=65;n<=90;n++){const t=String.fromCharCode(n);e[t.toLowerCase()]=n}for(let n=48;n<=57;n++)e[n-48]=n;for(let n=112;n<=123;n++)e["f"+(n-111)]=n;return Object.assign(e,{"'":222,",":108,"-":109,".":110,"/":111,";":186,"=":187,"[":219,"\\":220,"]":221,"`":223}),e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function ge(e){return Array.isArray(e)?e:[e]}/* istanbul ignore else -- @preserve */ee.window.CKEDITOR_TRANSLATIONS||(ee.window.CKEDITOR_TRANSLATIONS={});class Dc extends F(){constructor(t={},s={}){super();h(this,"_items");h(this,"_itemMap");h(this,"_idProperty");h(this,"_bindToCollection");h(this,"_bindToExternalToInternalMap");h(this,"_bindToInternalToExternalMap");h(this,"_skippedIndexesFromExternal");const i=ft(t);if(i||(s=t),this._items=[],this._itemMap=new Map,this._idProperty=s.idProperty||"id",this._bindToExternalToInternalMap=new WeakMap,this._bindToInternalToExternalMap=new WeakMap,this._skippedIndexesFromExternal=[],i)for(const r of t)this._items.push(r),this._itemMap.set(this._getItemIdBeforeAdding(r),r)}get length(){return this._items.length}get first(){return this._items[0]||null}get last(){return this._items[this.length-1]||null}add(t,s){return this.addMany([t],s)}addMany(t,s){if(s===void 0)s=this._items.length;else if(s>this._items.length||s<0)throw new f("collection-add-item-invalid-index",this);let i=0;for(const r of t){const o=this._getItemIdBeforeAdding(r),a=s+i;this._items.splice(a,0,r),this._itemMap.set(o,r),this.fire("add",r,a),i++}return this.fire("change",{added:t,removed:[],index:s}),this}get(t){let s;if(typeof t=="string")s=this._itemMap.get(t);else if(typeof t=="number")s=this._items[t];else throw new f("collection-get-invalid-arg",this);return s||null}has(t){if(typeof t=="string")return this._itemMap.has(t);{const s=this._idProperty,i=t[s];return i&&this._itemMap.has(i)}}getIndex(t){let s;return typeof t=="string"?s=this._itemMap.get(t):s=t,s?this._items.indexOf(s):-1}remove(t){const[s,i]=this._remove(t);return this.fire("change",{added:[],removed:[s],index:i}),s}map(t,s){return this._items.map(t,s)}forEach(t,s){this._items.forEach(t,s)}find(t,s){return this._items.find(t,s)}filter(t,s){return this._items.filter(t,s)}clear(){this._bindToCollection&&(this.stopListening(this._bindToCollection),this._bindToCollection=null);const t=Array.from(this._items);for(;this.length;)this._remove(0);this.fire("change",{added:[],removed:t,index:0})}bindTo(t){if(this._bindToCollection)throw new f("collection-bind-to-rebind",this);return this._bindToCollection=t,{as:s=>{this._setUpBindToBinding(i=>new s(i))},using:s=>{typeof s=="function"?this._setUpBindToBinding(s):this._setUpBindToBinding(i=>i[s])}}}_setUpBindToBinding(t){const s=this._bindToCollection,i=(r,o,a)=>{const l=s._bindToCollection==this,c=s._bindToInternalToExternalMap.get(o);if(l&&c)this._bindToExternalToInternalMap.set(o,c),this._bindToInternalToExternalMap.set(c,o);else{const u=t(o);if(!u){this._skippedIndexesFromExternal.push(a);return}let d=a;for(const p of this._skippedIndexesFromExternal)a>p&&d--;for(const p of s._skippedIndexesFromExternal)d>=p&&d++;this._bindToExternalToInternalMap.set(o,u),this._bindToInternalToExternalMap.set(u,o),this.add(u,d);for(let p=0;p<s._skippedIndexesFromExternal.length;p++)d<=s._skippedIndexesFromExternal[p]&&s._skippedIndexesFromExternal[p]++}};for(const r of s)i(null,r,s.getIndex(r));this.listenTo(s,"add",i),this.listenTo(s,"remove",(r,o,a)=>{const l=this._bindToExternalToInternalMap.get(o);l&&this.remove(l),this._skippedIndexesFromExternal=this._skippedIndexesFromExternal.reduce((c,u)=>(a<u&&c.push(u-1),a>u&&c.push(u),c),[])})}_getItemIdBeforeAdding(t){const s=this._idProperty;let i;if(s in t){if(i=t[s],typeof i!="string")throw new f("collection-add-invalid-id",this);if(this.get(i))throw new f("collection-add-item-already-exists",this)}else t[s]=i=ke();return i}_remove(t){let s,i,r,o=!1;const a=this._idProperty;if(typeof t=="string"?(i=t,r=this._itemMap.get(i),o=!r,r&&(s=this._items.indexOf(r))):typeof t=="number"?(s=t,r=this._items[s],o=!r,r&&(i=r[a])):(r=t,i=r[a],s=this._items.indexOf(r),o=s==-1||!this._itemMap.get(i)),o)throw new f("collection-remove-404",this);this._items.splice(s,1),this._itemMap.delete(i);const l=this._bindToInternalToExternalMap.get(r);return this._bindToInternalToExternalMap.delete(r),this._bindToExternalToInternalMap.delete(l),this.fire("remove",r,s),[r,s]}[Symbol.iterator](){return this._items[Symbol.iterator]()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function qc(e){const n=new Map;for(const t in e)n.set(t,e[t]);return n}function se(e){return ft(e)?new Map(e):qc(e)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const jc=1e4;function Qn(e,n,t,s){if(Math.max(n.length,e.length)>jc)return e.slice(0,t).concat(n).concat(e.slice(t+s,e.length));{const i=Array.from(e);return i.splice(t,s,...n),i}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 *//**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let Rt=class{is(){throw new Error("is() method is abstract")}},Mt=class extends F(Rt){constructor(t){super();h(this,"document");h(this,"parent");this.document=t,this.parent=null}get index(){let t;if(!this.parent)return null;if((t=this.parent.getChildIndex(this))==-1)throw new f("view-node-not-found-in-parent",this);return t}get nextSibling(){const t=this.index;return t!==null&&this.parent.getChild(t+1)||null}get previousSibling(){const t=this.index;return t!==null&&this.parent.getChild(t-1)||null}get root(){let t=this;for(;t.parent;)t=t.parent;return t}isAttached(){return this.root.is("rootElement")}getPath(){const t=[];let s=this;for(;s.parent;)t.unshift(s.index),s=s.parent;return t}getAncestors(t={}){const s=[];let i=t.includeSelf?this:this.parent;for(;i;)s[t.parentFirst?"push":"unshift"](i),i=i.parent;return s}getCommonAncestor(t,s={}){const i=this.getAncestors(s),r=t.getAncestors(s);let o=0;for(;i[o]==r[o]&&i[o];)o++;return o===0?null:i[o-1]}isBefore(t){if(this==t||this.root!==t.root)return!1;const s=this.getPath(),i=t.getPath(),r=j(s,i);switch(r){case"prefix":return!0;case"extension":return!1;default:return s[r]<i[r]}}isAfter(t){return this==t||this.root!==t.root?!1:!this.isBefore(t)}_remove(){this.parent._removeChildren(this.index)}_fireChange(t,s){this.fire(`change:${t}`,s),this.parent&&this.parent._fireChange(t,s)}toJSON(){const t=Dl(this);return delete t.parent,t}};Mt.prototype.is=function(e){return e==="node"||e==="view:node"};let H=class Ge extends Mt{constructor(t,s){super(t);h(this,"_textData");this._textData=s}get data(){return this._textData}get _data(){return this.data}set _data(t){this._fireChange("text",this),this._textData=t}isSimilar(t){return t instanceof Ge?this===t||this.data===t.data:!1}_clone(){return new Ge(this.document,this.data)}};H.prototype.is=function(e){return e==="$text"||e==="view:$text"||e==="text"||e==="view:text"||e==="node"||e==="view:node"};let et=class extends Rt{constructor(t,s,i){super();h(this,"textNode");h(this,"data");h(this,"offsetInText");if(this.textNode=t,s<0||s>t.data.length)throw new f("view-textproxy-wrong-offsetintext",this);if(i<0||s+i>t.data.length)throw new f("view-textproxy-wrong-length",this);this.data=t.data.substring(s,s+i),this.offsetInText=s}get offsetSize(){return this.data.length}get isPartial(){return this.data.length!==this.textNode.data.length}get parent(){return this.textNode.parent}get root(){return this.textNode.root}get document(){return this.textNode.document}getAncestors(t={}){const s=[];let i=t.includeSelf?this.textNode:this.parent;for(;i!==null;)s[t.parentFirst?"push":"unshift"](i),i=i.parent;return s}};et.prototype.is=function(e){return e==="$textProxy"||e==="view:$textProxy"||e==="textProxy"||e==="view:textProxy"};class Vc{constructor(...n){h(this,"_patterns",[]);this.add(...n)}add(...n){for(let t of n)(typeof t=="string"||t instanceof RegExp)&&(t={name:t}),this._patterns.push(t)}match(...n){for(const t of n)for(const s of this._patterns){const i=Xn(t,s);if(i)return{element:t,pattern:s,match:i}}return null}matchAll(...n){const t=[];for(const s of n)for(const i of this._patterns){const r=Xn(s,i);r&&t.push({element:s,pattern:i,match:r})}return t.length>0?t:null}getElementName(){if(this._patterns.length!==1)return null;const n=this._patterns[0],t=n.name;return typeof n!="function"&&t&&!(t instanceof RegExp)?t:null}}function Xn(e,n){if(typeof n=="function")return n(e);const t={};return n.name&&(t.name=Jc(n.name,e.name),!t.name)||n.attributes&&(t.attributes=Kc(n.attributes,e),!t.attributes)||n.classes&&(t.classes=Zc(n.classes,e),!t.classes)||n.styles&&(t.styles=Hc(n.styles,e),!t.styles)?null:t}function Jc(e,n){return e instanceof RegExp?!!n.match(e):e===n}function ln(e,n,t){const s=Uc(e),i=Array.from(n),r=[];if(s.forEach(([o,a])=>{i.forEach(l=>{Wc(o,l)&&Gc(a,l,t)&&r.push(l)})}),!(!s.length||r.length<s.length))return r}function Uc(e){return Array.isArray(e)?e.map(n=>Fe(n)?((n.key===void 0||n.value===void 0)&&Je("matcher-pattern-missing-key-or-value",n),[n.key,n.value]):[n,!0]):Fe(e)?Object.entries(e):[[e,!0]]}function Wc(e,n){return e===!0||e===n||e instanceof RegExp&&n.match(e)}function Gc(e,n,t){if(e===!0)return!0;const s=t(n);return e===s||e instanceof RegExp&&!!String(s).match(e)}function Kc(e,n){const t=new Set(n.getAttributeKeys());return Fe(e)?(e.style!==void 0&&Je("matcher-pattern-deprecated-attributes-style-key",e),e.class!==void 0&&Je("matcher-pattern-deprecated-attributes-class-key",e)):(t.delete("style"),t.delete("class")),ln(e,t,s=>n.getAttribute(s))}function Zc(e,n){return ln(e,n.getClassNames(),()=>{})}function Hc(e,n){return ln(e,n.getStyleNames(!0),t=>n.getStyle(t))}class Qc{constructor(n){h(this,"_styles");h(this,"_styleProcessor");this._styles={},this._styleProcessor=n}get isEmpty(){return!Object.entries(this._styles).length}get size(){return this.isEmpty?0:this.getStyleNames().length}setTo(n){this.clear();const t=Xc(n);for(const[s,i]of t)this._styleProcessor.toNormalizedForm(s,i,this._styles)}has(n){if(this.isEmpty)return!1;const s=this._styleProcessor.getReducedForm(n,this._styles).find(([i])=>i===n);return Array.isArray(s)}set(n,t){if(wt(n))for(const[s,i]of Object.entries(n))this._styleProcessor.toNormalizedForm(s,i,this._styles);else this._styleProcessor.toNormalizedForm(n,t,this._styles)}remove(n){const t=Yc(n);bc(this._styles,t),delete this._styles[n],this._cleanEmptyObjectsOnPath(t)}getNormalized(n){return this._styleProcessor.getNormalized(n,this._styles)}toString(){return this.isEmpty?"":this.getStylesEntries().map(n=>n.join(":")).sort().join(";")+";"}getAsString(n){if(this.isEmpty)return;if(this._styles[n]&&!wt(this._styles[n]))return this._styles[n];const s=this._styleProcessor.getReducedForm(n,this._styles).find(([i])=>i===n);if(Array.isArray(s))return s[1]}getStyleNames(n=!1){return this.isEmpty?[]:n?this._styleProcessor.getStyleNames(this._styles):this.getStylesEntries().map(([s])=>s)}clear(){this._styles={}}getStylesEntries(){const n=[],t=Object.keys(this._styles);for(const s of t)n.push(...this._styleProcessor.getReducedForm(s,this._styles));return n}_cleanEmptyObjectsOnPath(n){const t=n.split(".");if(!(t.length>1))return;const i=t.splice(0,t.length-1).join("."),r=Go(this._styles,i);if(!r)return;!Object.keys(r).length&&this.remove(i)}}function Xc(e){let n=null,t=0,s=0,i=null;const r=new Map;if(e==="")return r;e.charAt(e.length-1)!=";"&&(e=e+";");for(let o=0;o<e.length;o++){const a=e.charAt(o);if(n===null)switch(a){case":":i||(i=e.substr(t,o-t),s=o+1);break;case'"':case"'":n=a;break;case";":{const l=e.substr(s,o-s);i&&r.set(i.trim(),l.trim()),i=null,t=o+1;break}}else a===n&&(n=null)}return r}function Yc(e){return e.replace("-",".")}let yt=class Qs extends Mt{constructor(t,s,i,r){super(t);h(this,"name");h(this,"_unsafeAttributesToRender",[]);h(this,"_attrs");h(this,"_children");h(this,"_classes");h(this,"_styles");h(this,"_customProperties",new Map);if(this.name=s,this._attrs=th(i),this._children=[],r&&this._insertChild(0,r),this._classes=new Set,this._attrs.has("class")){const o=this._attrs.get("class");Yn(this._classes,o),this._attrs.delete("class")}this._styles=new Qc(this.document.stylesProcessor),this._attrs.has("style")&&(this._styles.setTo(this._attrs.get("style")),this._attrs.delete("style"))}get childCount(){return this._children.length}get isEmpty(){return this._children.length===0}getChild(t){return this._children[t]}getChildIndex(t){return this._children.indexOf(t)}getChildren(){return this._children[Symbol.iterator]()}*getAttributeKeys(){this._classes.size>0&&(yield"class"),this._styles.isEmpty||(yield"style"),yield*this._attrs.keys()}*getAttributes(){yield*this._attrs.entries(),this._classes.size>0&&(yield["class",this.getAttribute("class")]),this._styles.isEmpty||(yield["style",this.getAttribute("style")])}getAttribute(t){if(t=="class")return this._classes.size>0?[...this._classes].join(" "):void 0;if(t=="style"){const s=this._styles.toString();return s==""?void 0:s}return this._attrs.get(t)}hasAttribute(t){return t=="class"?this._classes.size>0:t=="style"?!this._styles.isEmpty:this._attrs.has(t)}isSimilar(t){if(!(t instanceof Qs))return!1;if(this===t)return!0;if(this.name!=t.name||this._attrs.size!==t._attrs.size||this._classes.size!==t._classes.size||this._styles.size!==t._styles.size)return!1;for(const[s,i]of this._attrs)if(!t._attrs.has(s)||t._attrs.get(s)!==i)return!1;for(const s of this._classes)if(!t._classes.has(s))return!1;for(const s of this._styles.getStyleNames())if(!t._styles.has(s)||t._styles.getAsString(s)!==this._styles.getAsString(s))return!1;return!0}hasClass(...t){for(const s of t)if(!this._classes.has(s))return!1;return!0}getClassNames(){return this._classes.keys()}getStyle(t){return this._styles.getAsString(t)}getNormalizedStyle(t){return this._styles.getNormalized(t)}getStyleNames(t){return this._styles.getStyleNames(t)}hasStyle(...t){for(const s of t)if(!this._styles.has(s))return!1;return!0}findAncestor(...t){const s=new Vc(...t);let i=this.parent;for(;i&&!i.is("documentFragment");){if(s.match(i))return i;i=i.parent}return null}getCustomProperty(t){return this._customProperties.get(t)}*getCustomProperties(){yield*this._customProperties.entries()}getIdentity(){const t=Array.from(this._classes).sort().join(","),s=this._styles.toString(),i=Array.from(this._attrs).map(r=>`${r[0]}="${r[1]}"`).sort().join(" ");return this.name+(t==""?"":` class="${t}"`)+(s?` style="${s}"`:"")+(i==""?"":` ${i}`)}shouldRenderUnsafeAttribute(t){return this._unsafeAttributesToRender.includes(t)}_clone(t=!1){const s=[];if(t)for(const r of this.getChildren())s.push(r._clone(t));const i=new this.constructor(this.document,this.name,this._attrs,s);return i._classes=new Set(this._classes),i._styles.set(this._styles.getNormalized()),i._customProperties=new Map(this._customProperties),i.getFillerOffset=this.getFillerOffset,i._unsafeAttributesToRender=this._unsafeAttributesToRender,i}_appendChild(t){return this._insertChild(this.childCount,t)}_insertChild(t,s){this._fireChange("children",this);let i=0;const r=eh(this.document,s);for(const o of r)o.parent!==null&&o._remove(),o.parent=this,o.document=this.document,this._children.splice(t,0,o),t++,i++;return i}_removeChildren(t,s=1){this._fireChange("children",this);for(let i=t;i<t+s;i++)this._children[i].parent=null;return this._children.splice(t,s)}_setAttribute(t,s){const i=String(s);this._fireChange("attributes",this),t=="class"?Yn(this._classes,i):t=="style"?this._styles.setTo(i):this._attrs.set(t,i)}_removeAttribute(t){return this._fireChange("attributes",this),t=="class"?this._classes.size>0?(this._classes.clear(),!0):!1:t=="style"?this._styles.isEmpty?!1:(this._styles.clear(),!0):this._attrs.delete(t)}_addClass(t){this._fireChange("attributes",this);for(const s of ge(t))this._classes.add(s)}_removeClass(t){this._fireChange("attributes",this);for(const s of ge(t))this._classes.delete(s)}_setStyle(t,s){this._fireChange("attributes",this),typeof t!="string"?this._styles.set(t):this._styles.set(t,s)}_removeStyle(t){this._fireChange("attributes",this);for(const s of ge(t))this._styles.remove(s)}_setCustomProperty(t,s){this._customProperties.set(t,s)}_removeCustomProperty(t){return this._customProperties.delete(t)}};yt.prototype.is=function(e,n){return n?n===this.name&&(e==="element"||e==="view:element"):e==="element"||e==="view:element"||e==="node"||e==="view:node"};function th(e){const n=se(e);for(const[t,s]of n)s===null?n.delete(t):typeof s!="string"&&n.set(t,String(s));return n}function Yn(e,n){const t=n.split(/\s+/);e.clear(),t.forEach(s=>e.add(s))}function eh(e,n){return typeof n=="string"?[new H(e,n)]:(ft(n)||(n=[n]),Array.from(n).map(t=>typeof t=="string"?new H(e,t):t instanceof et?new H(e,t.data):t))}class Xs extends yt{constructor(n,t,s,i){super(n,t,s,i),this.getFillerOffset=nh}}Xs.prototype.is=function(e,n){return n?n===this.name&&(e==="containerElement"||e==="view:containerElement"||e==="element"||e==="view:element"):e==="containerElement"||e==="view:containerElement"||e==="element"||e==="view:element"||e==="node"||e==="view:node"};function nh(){const e=[...this.getChildren()],n=e[this.childCount-1];if(n&&n.is("element","br"))return this.childCount;for(const t of e)if(!t.is("uiElement"))return null;return this.childCount}class cn extends an(Xs){constructor(n,t,s,i){super(n,t,s,i),this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("placeholder",void 0),this.bind("isReadOnly").to(n),this.bind("isFocused").to(n,"isFocused",r=>r&&n.selection.editableElement==this),this.listenTo(n.selection,"change",()=>{this.isFocused=n.isFocused&&n.selection.editableElement==this})}destroy(){this.stopListening()}}cn.prototype.is=function(e,n){return n?n===this.name&&(e==="editableElement"||e==="view:editableElement"||e==="containerElement"||e==="view:containerElement"||e==="element"||e==="view:element"):e==="editableElement"||e==="view:editableElement"||e==="containerElement"||e==="view:containerElement"||e==="element"||e==="view:element"||e==="node"||e==="view:node"};const ts=Symbol("rootName");class sh extends cn{constructor(n,t){super(n,t),this.rootName="main"}get rootName(){return this.getCustomProperty(ts)}set rootName(n){this._setCustomProperty(ts,n)}set _name(n){this.name=n}}sh.prototype.is=function(e,n){return n?n===this.name&&(e==="rootElement"||e==="view:rootElement"||e==="editableElement"||e==="view:editableElement"||e==="containerElement"||e==="view:containerElement"||e==="element"||e==="view:element"):e==="rootElement"||e==="view:rootElement"||e==="editableElement"||e==="view:editableElement"||e==="containerElement"||e==="view:containerElement"||e==="element"||e==="view:element"||e==="node"||e==="view:node"};let Bt=class{constructor(n={}){h(this,"direction");h(this,"boundaries");h(this,"singleCharacters");h(this,"shallow");h(this,"ignoreElementEnd");h(this,"_position");h(this,"_boundaryStartParent");h(this,"_boundaryEndParent");if(!n.boundaries&&!n.startPosition)throw new f("view-tree-walker-no-start-position",null);if(n.direction&&n.direction!="forward"&&n.direction!="backward")throw new f("view-tree-walker-unknown-direction",n.startPosition,{direction:n.direction});this.boundaries=n.boundaries||null,n.startPosition?this._position=T._createAt(n.startPosition):this._position=T._createAt(n.boundaries[n.direction=="backward"?"end":"start"]),this.direction=n.direction||"forward",this.singleCharacters=!!n.singleCharacters,this.shallow=!!n.shallow,this.ignoreElementEnd=!!n.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null}[Symbol.iterator](){return this}get position(){return this._position}skip(n){let t,s;do s=this.position,t=this.next();while(!t.done&&n(t.value));t.done||(this._position=s)}next(){return this.direction=="forward"?this._next():this._previous()}_next(){let n=this.position.clone();const t=this.position,s=n.parent;if(s.parent===null&&n.offset===s.childCount)return{done:!0,value:void 0};if(s===this._boundaryEndParent&&n.offset==this.boundaries.end.offset)return{done:!0,value:void 0};let i;if(s instanceof H){if(n.isAtEnd)return this._position=T._createAfter(s),this._next();i=s.data[n.offset]}else i=s.getChild(n.offset);if(i instanceof yt){if(!this.shallow)n=new T(i,0);else{if(this.boundaries&&this.boundaries.end.isBefore(n))return{done:!0,value:void 0};n.offset++}return this._position=n,this._formatReturnValue("elementStart",i,t,n,1)}if(i instanceof H){if(this.singleCharacters)return n=new T(i,0),this._position=n,this._next();let r=i.data.length,o;return i==this._boundaryEndParent?(r=this.boundaries.end.offset,o=new et(i,0,r),n=T._createAfter(o)):(o=new et(i,0,i.data.length),n.offset++),this._position=n,this._formatReturnValue("text",o,t,n,r)}if(typeof i=="string"){let r;this.singleCharacters?r=1:r=(s===this._boundaryEndParent?this.boundaries.end.offset:s.data.length)-n.offset;const o=new et(s,n.offset,r);return n.offset+=r,this._position=n,this._formatReturnValue("text",o,t,n,r)}return n=T._createAfter(s),this._position=n,this.ignoreElementEnd?this._next():this._formatReturnValue("elementEnd",s,t,n)}_previous(){let n=this.position.clone();const t=this.position,s=n.parent;if(s.parent===null&&n.offset===0)return{done:!0,value:void 0};if(s==this._boundaryStartParent&&n.offset==this.boundaries.start.offset)return{done:!0,value:void 0};let i;if(s instanceof H){if(n.isAtStart)return this._position=T._createBefore(s),this._previous();i=s.data[n.offset-1]}else i=s.getChild(n.offset-1);if(i instanceof yt)return this.shallow?(n.offset--,this._position=n,this._formatReturnValue("elementStart",i,t,n,1)):(n=new T(i,i.childCount),this._position=n,this.ignoreElementEnd?this._previous():this._formatReturnValue("elementEnd",i,t,n));if(i instanceof H){if(this.singleCharacters)return n=new T(i,i.data.length),this._position=n,this._previous();let r=i.data.length,o;if(i==this._boundaryStartParent){const a=this.boundaries.start.offset;o=new et(i,a,i.data.length-a),r=o.data.length,n=T._createBefore(o)}else o=new et(i,0,i.data.length),n.offset--;return this._position=n,this._formatReturnValue("text",o,t,n,r)}if(typeof i=="string"){let r;if(this.singleCharacters)r=1;else{const a=s===this._boundaryStartParent?this.boundaries.start.offset:0;r=n.offset-a}n.offset-=r;const o=new et(s,n.offset,r);return this._position=n,this._formatReturnValue("text",o,t,n,r)}return n=T._createBefore(s),this._position=n,this._formatReturnValue("elementStart",s,t,n,1)}_formatReturnValue(n,t,s,i,r){return t instanceof et&&(t.offsetInText+t.data.length==t.textNode.data.length&&(this.direction=="forward"&&!(this.boundaries&&this.boundaries.end.isEqual(this.position))?(i=T._createAfter(t.textNode),this._position=i):s=T._createAfter(t.textNode)),t.offsetInText===0&&(this.direction=="backward"&&!(this.boundaries&&this.boundaries.start.isEqual(this.position))?(i=T._createBefore(t.textNode),this._position=i):s=T._createBefore(t.textNode))),{done:!1,value:{type:n,item:t,previousPosition:s,nextPosition:i,length:r}}}},T=class rt extends Rt{constructor(t,s){super();h(this,"parent");h(this,"offset");this.parent=t,this.offset=s}get nodeAfter(){return this.parent.is("$text")?null:this.parent.getChild(this.offset)||null}get nodeBefore(){return this.parent.is("$text")?null:this.parent.getChild(this.offset-1)||null}get isAtStart(){return this.offset===0}get isAtEnd(){const t=this.parent.is("$text")?this.parent.data.length:this.parent.childCount;return this.offset===t}get root(){return this.parent.root}get editableElement(){let t=this.parent;for(;!(t instanceof cn);)if(t.parent)t=t.parent;else return null;return t}getShiftedBy(t){const s=rt._createAt(this),i=s.offset+t;return s.offset=i<0?0:i,s}getLastMatchingPosition(t,s={}){s.startPosition=this;const i=new Bt(s);return i.skip(t),i.position}getAncestors(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeSelf:!0})}getCommonAncestor(t){const s=this.getAncestors(),i=t.getAncestors();let r=0;for(;s[r]==i[r]&&s[r];)r++;return r===0?null:s[r-1]}isEqual(t){return this.parent==t.parent&&this.offset==t.offset}isBefore(t){return this.compareWith(t)=="before"}isAfter(t){return this.compareWith(t)=="after"}compareWith(t){if(this.root!==t.root)return"different";if(this.isEqual(t))return"same";const s=this.parent.is("node")?this.parent.getPath():[],i=t.parent.is("node")?t.parent.getPath():[];s.push(this.offset),i.push(t.offset);const r=j(s,i);switch(r){case"prefix":return"before";case"extension":return"after";default:return s[r]<i[r]?"before":"after"}}getWalker(t={}){return t.startPosition=this,new Bt(t)}clone(){return new rt(this.parent,this.offset)}static _createAt(t,s){if(t instanceof rt)return new this(t.parent,t.offset);{const i=t;if(s=="end")s=i.is("$text")?i.data.length:i.childCount;else{if(s=="before")return this._createBefore(i);if(s=="after")return this._createAfter(i);if(s!==0&&!s)throw new f("view-createpositionat-offset-required",i)}return new rt(i,s)}}static _createAfter(t){if(t.is("$textProxy"))return new rt(t.textNode,t.offsetInText+t.data.length);if(!t.parent)throw new f("view-position-after-root",t,{root:t});return new rt(t.parent,t.index+1)}static _createBefore(t){if(t.is("$textProxy"))return new rt(t.textNode,t.offsetInText);if(!t.parent)throw new f("view-position-before-root",t,{root:t});return new rt(t.parent,t.index)}};T.prototype.is=function(e){return e==="position"||e==="view:position"};let tt=class gt extends Rt{constructor(t,s=null){super();h(this,"start");h(this,"end");this.start=t.clone(),this.end=s?s.clone():t.clone()}*[Symbol.iterator](){yield*new Bt({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return this.start.parent===this.end.parent}get root(){return this.start.root}getEnlarged(){let t=this.start.getLastMatchingPosition(ue,{direction:"backward"}),s=this.end.getLastMatchingPosition(ue);return t.parent.is("$text")&&t.isAtStart&&(t=T._createBefore(t.parent)),s.parent.is("$text")&&s.isAtEnd&&(s=T._createAfter(s.parent)),new gt(t,s)}getTrimmed(){let t=this.start.getLastMatchingPosition(ue);if(t.isAfter(this.end)||t.isEqual(this.end))return new gt(t,t);let s=this.end.getLastMatchingPosition(ue,{direction:"backward"});const i=t.nodeAfter,r=s.nodeBefore;return i&&i.is("$text")&&(t=new T(i,0)),r&&r.is("$text")&&(s=new T(r,r.data.length)),new gt(t,s)}isEqual(t){return this==t||this.start.isEqual(t.start)&&this.end.isEqual(t.end)}containsPosition(t){return t.isAfter(this.start)&&t.isBefore(this.end)}containsRange(t,s=!1){t.isCollapsed&&(s=!1);const i=this.containsPosition(t.start)||s&&this.start.isEqual(t.start),r=this.containsPosition(t.end)||s&&this.end.isEqual(t.end);return i&&r}getDifference(t){const s=[];return this.isIntersecting(t)?(this.containsPosition(t.start)&&s.push(new gt(this.start,t.start)),this.containsPosition(t.end)&&s.push(new gt(t.end,this.end))):s.push(this.clone()),s}getIntersection(t){if(this.isIntersecting(t)){let s=this.start,i=this.end;return this.containsPosition(t.start)&&(s=t.start),this.containsPosition(t.end)&&(i=t.end),new gt(s,i)}return null}getWalker(t={}){return t.boundaries=this,new Bt(t)}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;let t=this.start.nodeAfter,s=this.end.nodeBefore;return this.start.parent.is("$text")&&this.start.isAtEnd&&this.start.parent.nextSibling&&(t=this.start.parent.nextSibling),this.end.parent.is("$text")&&this.end.isAtStart&&this.end.parent.previousSibling&&(s=this.end.parent.previousSibling),t&&t.is("element")&&t===s?t:null}clone(){return new gt(this.start,this.end)}*getItems(t={}){t.boundaries=this,t.ignoreElementEnd=!0;const s=new Bt(t);for(const i of s)yield i.item}*getPositions(t={}){t.boundaries=this;const s=new Bt(t);yield s.position;for(const i of s)yield i.nextPosition}isIntersecting(t){return this.start.isBefore(t.end)&&this.end.isAfter(t.start)}static _createFromParentsAndOffsets(t,s,i,r){return new this(new T(t,s),new T(i,r))}static _createFromPositionAndShift(t,s){const i=t,r=t.getShiftedBy(s);return s>0?new this(i,r):new this(r,i)}static _createIn(t){return this._createFromParentsAndOffsets(t,0,t,t.childCount)}static _createOn(t){const s=t.is("$textProxy")?t.offsetSize:1;return this._createFromPositionAndShift(T._createBefore(t),s)}};tt.prototype.is=function(e){return e==="range"||e==="view:range"};function ue(e){return!!(e.item.is("attributeElement")||e.item.is("uiElement"))}let Ys=class ti extends F(Rt){constructor(...t){super();h(this,"_ranges");h(this,"_lastRangeBackward");h(this,"_isFake");h(this,"_fakeSelectionLabel");this._ranges=[],this._lastRangeBackward=!1,this._isFake=!1,this._fakeSelectionLabel="",t.length&&this.setTo(...t)}get isFake(){return this._isFake}get fakeSelectionLabel(){return this._fakeSelectionLabel}get anchor(){if(!this._ranges.length)return null;const t=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?t.end:t.start).clone()}get focus(){if(!this._ranges.length)return null;const t=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?t.start:t.end).clone()}get isCollapsed(){return this.rangeCount===1&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}get editableElement(){return this.anchor?this.anchor.editableElement:null}*getRanges(){for(const t of this._ranges)yield t.clone()}getFirstRange(){let t=null;for(const s of this._ranges)(!t||s.start.isBefore(t.start))&&(t=s);return t?t.clone():null}getLastRange(){let t=null;for(const s of this._ranges)(!t||s.end.isAfter(t.end))&&(t=s);return t?t.clone():null}getFirstPosition(){const t=this.getFirstRange();return t?t.start.clone():null}getLastPosition(){const t=this.getLastRange();return t?t.end.clone():null}isEqual(t){if(this.isFake!=t.isFake||this.isFake&&this.fakeSelectionLabel!=t.fakeSelectionLabel||this.rangeCount!=t.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(t.anchor)||!this.focus.isEqual(t.focus))return!1;for(const s of this._ranges){let i=!1;for(const r of t._ranges)if(s.isEqual(r)){i=!0;break}if(!i)return!1}return!0}isSimilar(t){if(this.isBackward!=t.isBackward)return!1;const s=Kn(this.getRanges()),i=Kn(t.getRanges());if(s!=i)return!1;if(s==0)return!0;for(let r of this.getRanges()){r=r.getTrimmed();let o=!1;for(let a of t.getRanges())if(a=a.getTrimmed(),r.start.isEqual(a.start)&&r.end.isEqual(a.end)){o=!0;break}if(!o)return!1}return!0}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}setTo(...t){let[s,i,r]=t;if(typeof i=="object"&&(r=i,i=void 0),s===null)this._setRanges([]),this._setFakeOptions(r);else if(s instanceof ti||s instanceof ei)this._setRanges(s.getRanges(),s.isBackward),this._setFakeOptions({fake:s.isFake,label:s.fakeSelectionLabel});else if(s instanceof tt)this._setRanges([s],r&&r.backward),this._setFakeOptions(r);else if(s instanceof T)this._setRanges([new tt(s)]),this._setFakeOptions(r);else if(s instanceof Mt){const o=!!r&&!!r.backward;let a;if(i===void 0)throw new f("view-selection-setto-required-second-parameter",this);i=="in"?a=tt._createIn(s):i=="on"?a=tt._createOn(s):a=new tt(T._createAt(s,i)),this._setRanges([a],o),this._setFakeOptions(r)}else if(ft(s))this._setRanges(s,r&&r.backward),this._setFakeOptions(r);else throw new f("view-selection-setto-not-selectable",this);this.fire("change")}setFocus(t,s){if(this.anchor===null)throw new f("view-selection-setfocus-no-ranges",this);const i=T._createAt(t,s);if(i.compareWith(this.focus)=="same")return;const r=this.anchor;this._ranges.pop(),i.compareWith(r)=="before"?this._addRange(new tt(i,r),!0):this._addRange(new tt(r,i)),this.fire("change")}_setRanges(t,s=!1){t=Array.from(t),this._ranges=[];for(const i of t)this._addRange(i);this._lastRangeBackward=!!s}_setFakeOptions(t={}){this._isFake=!!t.fake,this._fakeSelectionLabel=t.fake&&t.label||""}_addRange(t,s=!1){if(!(t instanceof tt))throw new f("view-selection-add-range-not-range",this);this._pushRange(t),this._lastRangeBackward=!!s}_pushRange(t){for(const s of this._ranges)if(t.isIntersecting(s))throw new f("view-selection-range-intersects",this,{addedRange:t,intersectingRange:s});this._ranges.push(new tt(t.start,t.end))}};Ys.prototype.is=function(e){return e==="selection"||e==="view:selection"};let ei=class extends F(Rt){constructor(...t){super();h(this,"_selection");this._selection=new Ys,this._selection.delegate("change").to(this),t.length&&this._selection.setTo(...t)}get isFake(){return this._selection.isFake}get fakeSelectionLabel(){return this._selection.fakeSelectionLabel}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get isCollapsed(){return this._selection.isCollapsed}get rangeCount(){return this._selection.rangeCount}get isBackward(){return this._selection.isBackward}get editableElement(){return this._selection.editableElement}get _ranges(){return this._selection._ranges}*getRanges(){yield*this._selection.getRanges()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getSelectedElement(){return this._selection.getSelectedElement()}isEqual(t){return this._selection.isEqual(t)}isSimilar(t){return this._selection.isSimilar(t)}_setTo(...t){this._selection.setTo(...t)}_setFocus(t,s){this._selection.setFocus(t,s)}};ei.prototype.is=function(e){return e==="selection"||e=="documentSelection"||e=="view:selection"||e=="view:documentSelection"};class ih extends Ft{constructor(t,s,i){super(t,s);h(this,"startRange");h(this,"_eventPhase");h(this,"_currentTarget");this.startRange=i,this._eventPhase="none",this._currentTarget=null}get eventPhase(){return this._eventPhase}get currentTarget(){return this._currentTarget}}const Ne=Symbol("bubbling contexts");function es(e){class n extends e{fire(s,...i){try{const r=s instanceof Ft?s:new Ft(this,s),o=Be(this);if(!o.size)return;if(jt(r,"capturing",this),Ct(o,"$capture",r,...i))return r.return;const a=r.startRange||this.selection.getFirstRange(),l=a?a.getContainedElement():null,c=l?!!ni(o,l):!1;let u=l||rh(a);if(jt(r,"atTarget",u),!c){if(Ct(o,"$text",r,...i))return r.return;jt(r,"bubbling",u)}for(;u;){if(u.is("rootElement")){if(Ct(o,"$root",r,...i))return r.return}else if(u.is("element")&&Ct(o,u.name,r,...i))return r.return;if(Ct(o,u,r,...i))return r.return;u=u.parent,jt(r,"bubbling",u)}return jt(r,"bubbling",this),Ct(o,"$document",r,...i),r.return}catch(r){/* istanbul ignore next -- @preserve */f.rethrowUnexpectedError(r,this)}}_addEventListener(s,i,r){const o=ge(r.context||"$document"),a=Be(this);for(const l of o){let c=a.get(l);c||(c=new(F()),a.set(l,c)),this.listenTo(c,s,i,r)}}_removeEventListener(s,i){const r=Be(this);for(const o of r.values())this.stopListening(o,s,i)}}return n}{const e=es(Object);["fire","_addEventListener","_removeEventListener"].forEach(n=>{es[n]=e.prototype[n]})}function jt(e,n,t){e instanceof ih&&(e._eventPhase=n,e._currentTarget=t)}function Ct(e,n,t,...s){const i=typeof n=="string"?e.get(n):ni(e,n);return i?(i.fire(t,...s),t.stop.called):!1}function ni(e,n){for(const[t,s]of e)if(typeof t=="function"&&t(n))return s;return null}function Be(e){return e[Ne]||(e[Ne]=new Map),e[Ne]}function rh(e){if(!e)return null;const n=e.start.parent,t=e.end.parent,s=n.getPath(),i=t.getPath();return s.length>i.length?n:t}const ns=10;class si extends yt{constructor(t,s,i,r){super(t,s,i,r);h(this,"_priority",ns);h(this,"_id",null);h(this,"_clonesGroup",null);this.getFillerOffset=oh}get priority(){return this._priority}get id(){return this._id}getElementsWithSameId(){if(this.id===null)throw new f("attribute-element-get-elements-with-same-id-no-id",this);return new Set(this._clonesGroup)}isSimilar(t){return this.id!==null||t.id!==null?this.id===t.id:super.isSimilar(t)&&this.priority==t.priority}_clone(t=!1){const s=super._clone(t);return s._priority=this._priority,s._id=this._id,s}}h(si,"DEFAULT_PRIORITY",ns);si.prototype.is=function(e,n){return n?n===this.name&&(e==="attributeElement"||e==="view:attributeElement"||e==="element"||e==="view:element"):e==="attributeElement"||e==="view:attributeElement"||e==="element"||e==="view:element"||e==="node"||e==="view:node"};function oh(){if($e(this))return null;let e=this.parent;for(;e&&e.is("attributeElement");){if($e(e)>1)return null;e=e.parent}return!e||$e(e)>1?null:this.childCount}function $e(e){return Array.from(e.getChildren()).filter(n=>!n.is("uiElement")).length}class ah extends yt{constructor(n,t,s,i){super(n,t,s,i),this.getFillerOffset=lh}_insertChild(n,t){if(t&&(t instanceof Mt||Array.from(t).length>0))throw new f("view-emptyelement-cannot-add",[this,t]);return 0}}ah.prototype.is=function(e,n){return n?n===this.name&&(e==="emptyElement"||e==="view:emptyElement"||e==="element"||e==="view:element"):e==="emptyElement"||e==="view:emptyElement"||e==="element"||e==="view:element"||e==="node"||e==="view:node"};function lh(){return null}class ch extends yt{constructor(n,t,s,i){super(n,t,s,i),this.getFillerOffset=hh}_insertChild(n,t){if(t&&(t instanceof Mt||Array.from(t).length>0))throw new f("view-uielement-cannot-add",[this,t]);return 0}render(n,t){return this.toDomElement(n)}toDomElement(n){const t=n.createElement(this.name);for(const s of this.getAttributeKeys())t.setAttribute(s,this.getAttribute(s));return t}}ch.prototype.is=function(e,n){return n?n===this.name&&(e==="uiElement"||e==="view:uiElement"||e==="element"||e==="view:element"):e==="uiElement"||e==="view:uiElement"||e==="element"||e==="view:element"||e==="node"||e==="view:node"};function hh(){return null}class uh extends yt{constructor(n,t,s,i){super(n,t,s,i),this.getFillerOffset=fh}_insertChild(n,t){if(t&&(t instanceof Mt||Array.from(t).length>0))throw new f("view-rawelement-cannot-add",[this,t]);return 0}render(n,t){}}uh.prototype.is=function(e,n){return n?n===this.name&&(e==="rawElement"||e==="view:rawElement"||e==="element"||e==="view:element"):e==="rawElement"||e==="view:rawElement"||e===this.name||e==="view:"+this.name||e==="element"||e==="view:element"||e==="node"||e==="view:node"};function fh(){return null}let dh=class extends F(Rt){constructor(t,s){super();h(this,"document");h(this,"_children",[]);h(this,"_customProperties",new Map);this.document=t,s&&this._insertChild(0,s)}[Symbol.iterator](){return this._children[Symbol.iterator]()}get childCount(){return this._children.length}get isEmpty(){return this.childCount===0}get root(){return this}get parent(){return null}get name(){}get getFillerOffset(){}getCustomProperty(t){return this._customProperties.get(t)}*getCustomProperties(){yield*this._customProperties.entries()}_appendChild(t){return this._insertChild(this.childCount,t)}getChild(t){return this._children[t]}getChildIndex(t){return this._children.indexOf(t)}getChildren(){return this._children[Symbol.iterator]()}_insertChild(t,s){this._fireChange("children",this);let i=0;const r=gh(this.document,s);for(const o of r)o.parent!==null&&o._remove(),o.parent=this,this._children.splice(t,0,o),t++,i++;return i}_removeChildren(t,s=1){this._fireChange("children",this);for(let i=t;i<t+s;i++)this._children[i].parent=null;return this._children.splice(t,s)}_fireChange(t,s){this.fire("change:"+t,s)}_setCustomProperty(t,s){this._customProperties.set(t,s)}_removeCustomProperty(t){return this._customProperties.delete(t)}};dh.prototype.is=function(e){return e==="documentFragment"||e==="view:documentFragment"};function gh(e,n){return typeof n=="string"?[new H(e,n)]:(ft(n)||(n=[n]),Array.from(n).map(t=>typeof t=="string"?new H(e,t):t instanceof et?new H(e,t.data):t))}const ph=e=>e.createTextNode(" "),mh=e=>{const n=e.createElement("span");return n.dataset.ckeFiller="true",n.innerText=" ",n},_h=e=>{const n=e.createElement("br");return n.dataset.ckeFiller="true",n};_h(ee.document);ph(ee.document);mh(ee.document);/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class bt{is(){throw new Error("is() method is abstract")}}let Lt=class extends bt{constructor(t){super();h(this,"parent",null);h(this,"_attrs");h(this,"_index",null);h(this,"_startOffset",null);this._attrs=se(t)}get document(){return null}get index(){return this._index}get startOffset(){return this._startOffset}get offsetSize(){return 1}get endOffset(){return this.startOffset===null?null:this.startOffset+this.offsetSize}get nextSibling(){const t=this.index;return t!==null&&this.parent.getChild(t+1)||null}get previousSibling(){const t=this.index;return t!==null&&this.parent.getChild(t-1)||null}get root(){let t=this;for(;t.parent;)t=t.parent;return t}isAttached(){return this.parent===null?!1:this.root.isAttached()}getPath(){const t=[];let s=this;for(;s.parent;)t.unshift(s.startOffset),s=s.parent;return t}getAncestors(t={}){const s=[];let i=t.includeSelf?this:this.parent;for(;i;)s[t.parentFirst?"push":"unshift"](i),i=i.parent;return s}getCommonAncestor(t,s={}){const i=this.getAncestors(s),r=t.getAncestors(s);let o=0;for(;i[o]==r[o]&&i[o];)o++;return o===0?null:i[o-1]}isBefore(t){if(this==t||this.root!==t.root)return!1;const s=this.getPath(),i=t.getPath(),r=j(s,i);switch(r){case"prefix":return!0;case"extension":return!1;default:return s[r]<i[r]}}isAfter(t){return this==t||this.root!==t.root?!1:!this.isBefore(t)}hasAttribute(t){return this._attrs.has(t)}getAttribute(t){return this._attrs.get(t)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}toJSON(){const t={};return this._attrs.size&&(t.attributes=Array.from(this._attrs).reduce((s,i)=>(s[i[0]]=i[1],s),{})),t}_clone(t){return new this.constructor(this._attrs)}_remove(){this.parent._removeChildren(this.index)}_setAttribute(t,s){this._attrs.set(t,s)}_setAttributesTo(t){this._attrs=se(t)}_removeAttribute(t){return this._attrs.delete(t)}_clearAttributes(){this._attrs.clear()}};Lt.prototype.is=function(e){return e==="node"||e==="model:node"};class Ht{constructor(n){h(this,"_nodes",[]);h(this,"_offsetToNode",[]);n&&this._insertNodes(0,n)}[Symbol.iterator](){return this._nodes[Symbol.iterator]()}get length(){return this._nodes.length}get maxOffset(){return this._offsetToNode.length}getNode(n){return this._nodes[n]||null}getNodeAtOffset(n){return this._offsetToNode[n]||null}getNodeIndex(n){return n.index}getNodeStartOffset(n){return n.startOffset}indexToOffset(n){if(n==this._nodes.length)return this.maxOffset;const t=this._nodes[n];if(!t)throw new f("model-nodelist-index-out-of-bounds",this);return this.getNodeStartOffset(t)}offsetToIndex(n){if(n==this._offsetToNode.length)return this._nodes.length;const t=this._offsetToNode[n];if(!t)throw new f("model-nodelist-offset-out-of-bounds",this,{offset:n,nodeList:this});return this.getNodeIndex(t)}_insertNodes(n,t){for(const o of t)if(!(o instanceof Lt))throw new f("model-nodelist-insertnodes-not-node",this);const s=Array.from(t),i=wh(s);let r=this.indexToOffset(n);this._nodes=Qn(this._nodes,s,n,0),this._offsetToNode=Qn(this._offsetToNode,i,r,0);for(let o=n;o<this._nodes.length;o++)this._nodes[o]._index=o,this._nodes[o]._startOffset=r,r+=this._nodes[o].offsetSize}_removeNodes(n,t=1){if(t==0)return[];let s=this.indexToOffset(n);const i=this._nodes.splice(n,t),r=i[i.length-1],o=r.startOffset+r.offsetSize-s;this._offsetToNode.splice(s,o);for(const a of i)a._index=null,a._startOffset=null;for(let a=n;a<this._nodes.length;a++)this._nodes[a]._index=a,this._nodes[a]._startOffset=s,s+=this._nodes[a].offsetSize;return i}toJSON(){return this._nodes.map(n=>n.toJSON())}}function wh(e){const n=[];for(const t of e){const s=n.length;n.length+=t.offsetSize,n.fill(t,s)}return n}class N extends Lt{constructor(t,s){super(s);h(this,"_data");this._data=t||""}get offsetSize(){return this.data.length}get data(){return this._data}toJSON(){const t=super.toJSON();return t.data=this.data,t}_clone(){return new N(this.data,this.getAttributes())}static fromJSON(t){return new N(t.data,t.attributes)}}N.prototype.is=function(e){return e==="$text"||e==="model:$text"||e==="text"||e==="model:text"||e==="node"||e==="model:node"};class St extends bt{constructor(t,s,i){super();h(this,"textNode");h(this,"data");h(this,"offsetInText");if(this.textNode=t,s<0||s>t.offsetSize)throw new f("model-textproxy-wrong-offsetintext",this);if(i<0||s+i>t.offsetSize)throw new f("model-textproxy-wrong-length",this);this.data=t.data.substring(s,s+i),this.offsetInText=s}get startOffset(){return this.textNode.startOffset!==null?this.textNode.startOffset+this.offsetInText:null}get offsetSize(){return this.data.length}get endOffset(){return this.startOffset!==null?this.startOffset+this.offsetSize:null}get isPartial(){return this.offsetSize!==this.textNode.offsetSize}get parent(){return this.textNode.parent}get root(){return this.textNode.root}getPath(){const t=this.textNode.getPath();return t.length>0&&(t[t.length-1]+=this.offsetInText),t}getAncestors(t={}){const s=[];let i=t.includeSelf?this:this.parent;for(;i;)s[t.parentFirst?"push":"unshift"](i),i=i.parent;return s}hasAttribute(t){return this.textNode.hasAttribute(t)}getAttribute(t){return this.textNode.getAttribute(t)}getAttributes(){return this.textNode.getAttributes()}getAttributeKeys(){return this.textNode.getAttributeKeys()}}St.prototype.is=function(e){return e==="$textProxy"||e==="model:$textProxy"||e==="textProxy"||e==="model:textProxy"};class Q extends Lt{constructor(t,s,i){super(s);h(this,"name");h(this,"_children",new Ht);this.name=t,i&&this._insertChild(0,i)}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}getChild(t){return this._children.getNode(t)}getChildAtOffset(t){return this._children.getNodeAtOffset(t)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(t){return this._children.getNodeIndex(t)}getChildStartOffset(t){return this._children.getNodeStartOffset(t)}offsetToIndex(t){return this._children.offsetToIndex(t)}getNodeByPath(t){let s=this;for(const i of t)s=s.getChildAtOffset(i);return s}findAncestor(t,s={}){let i=s.includeSelf?this:this.parent;for(;i;){if(i.name===t)return i;i=i.parent}return null}toJSON(){const t=super.toJSON();if(t.name=this.name,this._children.length>0){t.children=[];for(const s of this._children)t.children.push(s.toJSON())}return t}_clone(t=!1){const s=t?Array.from(this._children).map(i=>i._clone(!0)):void 0;return new Q(this.name,this.getAttributes(),s)}_appendChild(t){this._insertChild(this.childCount,t)}_insertChild(t,s){const i=yh(s);for(const r of i)r.parent!==null&&r._remove(),r.parent=this;this._children._insertNodes(t,i)}_removeChildren(t,s=1){const i=this._children._removeNodes(t,s);for(const r of i)r.parent=null;return i}static fromJSON(t){let s;if(t.children){s=[];for(const i of t.children)i.name?s.push(Q.fromJSON(i)):s.push(N.fromJSON(i))}return new Q(t.name,t.attributes,s)}}Q.prototype.is=function(e,n){return n?n===this.name&&(e==="element"||e==="model:element"):e==="element"||e==="model:element"||e==="node"||e==="model:node"};function yh(e){return typeof e=="string"?[new N(e)]:(ft(e)||(e=[e]),Array.from(e).map(n=>typeof n=="string"?new N(n):n instanceof St?new N(n.data,n.getAttributes()):n))}class Ut{constructor(n){h(this,"direction");h(this,"boundaries");h(this,"singleCharacters");h(this,"shallow");h(this,"ignoreElementEnd");h(this,"_position");h(this,"_boundaryStartParent");h(this,"_boundaryEndParent");h(this,"_visitedParent");if(!n||!n.boundaries&&!n.startPosition)throw new f("model-tree-walker-no-start-position",null);const t=n.direction||"forward";if(t!="forward"&&t!="backward")throw new f("model-tree-walker-unknown-direction",n,{direction:t});this.direction=t,this.boundaries=n.boundaries||null,n.startPosition?this._position=n.startPosition.clone():this._position=w._createAt(this.boundaries[this.direction=="backward"?"end":"start"]),this.position.stickiness="toNone",this.singleCharacters=!!n.singleCharacters,this.shallow=!!n.shallow,this.ignoreElementEnd=!!n.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null,this._visitedParent=this.position.parent}[Symbol.iterator](){return this}get position(){return this._position}skip(n){let t,s,i,r;do i=this.position,r=this._visitedParent,{done:t,value:s}=this.next();while(!t&&n(s));t||(this._position=i,this._visitedParent=r)}next(){return this.direction=="forward"?this._next():this._previous()}_next(){const n=this.position,t=this.position.clone(),s=this._visitedParent;if(s.parent===null&&t.offset===s.maxOffset)return{done:!0,value:void 0};if(s===this._boundaryEndParent&&t.offset==this.boundaries.end.offset)return{done:!0,value:void 0};const i=Qt(t,s),r=i||ii(t,s,i);if(r instanceof Q){if(!this.shallow)t.path.push(0),this._visitedParent=r;else{if(this.boundaries&&this.boundaries.end.isBefore(t))return{done:!0,value:void 0};t.offset++}return this._position=t,xt("elementStart",r,n,t,1)}if(r instanceof N){let o;if(this.singleCharacters)o=1;else{let c=r.endOffset;this._boundaryEndParent==s&&this.boundaries.end.offset<c&&(c=this.boundaries.end.offset),o=c-t.offset}const a=t.offset-r.startOffset,l=new St(r,a,o);return t.offset+=o,this._position=t,xt("text",l,n,t,o)}return t.path.pop(),t.offset++,this._position=t,this._visitedParent=s.parent,this.ignoreElementEnd?this._next():xt("elementEnd",s,n,t)}_previous(){const n=this.position,t=this.position.clone(),s=this._visitedParent;if(s.parent===null&&t.offset===0)return{done:!0,value:void 0};if(s==this._boundaryStartParent&&t.offset==this.boundaries.start.offset)return{done:!0,value:void 0};const i=t.parent,r=Qt(t,i),o=r||ri(t,i,r);if(o instanceof Q)return t.offset--,this.shallow?(this._position=t,xt("elementStart",o,n,t,1)):(t.path.push(o.maxOffset),this._position=t,this._visitedParent=o,this.ignoreElementEnd?this._previous():xt("elementEnd",o,n,t));if(o instanceof N){let a;if(this.singleCharacters)a=1;else{let u=o.startOffset;this._boundaryStartParent==s&&this.boundaries.start.offset>u&&(u=this.boundaries.start.offset),a=t.offset-u}const l=t.offset-o.startOffset,c=new St(o,l-a,a);return t.offset-=a,this._position=t,xt("text",c,n,t,a)}return t.path.pop(),this._position=t,this._visitedParent=s.parent,xt("elementStart",s,n,t,1)}}function xt(e,n,t,s,i){return{done:!1,value:{type:e,item:n,previousPosition:t,nextPosition:s,length:i}}}class w extends bt{constructor(t,s,i="toNone"){super();h(this,"root");h(this,"path");h(this,"stickiness");if(!t.is("element")&&!t.is("documentFragment"))throw new f("model-position-root-invalid",t);if(!(s instanceof Array)||s.length===0)throw new f("model-position-path-incorrect-format",t,{path:s});t.is("rootElement")?s=s.slice():(s=[...t.getPath(),...s],t=t.root),this.root=t,this.path=s,this.stickiness=i}get offset(){return this.path[this.path.length-1]}set offset(t){this.path[this.path.length-1]=t}get parent(){let t=this.root;for(let s=0;s<this.path.length-1;s++)if(t=t.getChildAtOffset(this.path[s]),!t)throw new f("model-position-path-incorrect",this,{position:this});if(t.is("$text"))throw new f("model-position-path-incorrect",this,{position:this});return t}get index(){return this.parent.offsetToIndex(this.offset)}get textNode(){return Qt(this,this.parent)}get nodeAfter(){const t=this.parent;return ii(this,t,Qt(this,t))}get nodeBefore(){const t=this.parent;return ri(this,t,Qt(this,t))}get isAtStart(){return this.offset===0}get isAtEnd(){return this.offset==this.parent.maxOffset}isValid(){if(this.offset<0)return!1;let t=this.root;for(let s=0;s<this.path.length-1;s++)if(t=t.getChildAtOffset(this.path[s]),!t)return!1;return this.offset<=t.maxOffset}compareWith(t){if(this.root!=t.root)return"different";const s=j(this.path,t.path);switch(s){case"same":return"same";case"prefix":return"before";case"extension":return"after";default:return this.path[s]<t.path[s]?"before":"after"}}getLastMatchingPosition(t,s={}){s.startPosition=this;const i=new Ut(s);return i.skip(t),i.position}getParentPath(){return this.path.slice(0,-1)}getAncestors(){const t=this.parent;return t.is("documentFragment")?[t]:t.getAncestors({includeSelf:!0})}findAncestor(t){const s=this.parent;return s.is("element")?s.findAncestor(t,{includeSelf:!0}):null}getCommonPath(t){if(this.root!=t.root)return[];const s=j(this.path,t.path),i=typeof s=="string"?Math.min(this.path.length,t.path.length):s;return this.path.slice(0,i)}getCommonAncestor(t){const s=this.getAncestors(),i=t.getAncestors();let r=0;for(;s[r]==i[r]&&s[r];)r++;return r===0?null:s[r-1]}getShiftedBy(t){const s=this.clone(),i=s.offset+t;return s.offset=i<0?0:i,s}isAfter(t){return this.compareWith(t)=="after"}isBefore(t){return this.compareWith(t)=="before"}isEqual(t){return this.compareWith(t)=="same"}isTouching(t){if(this.root!==t.root)return!1;const s=Math.min(this.path.length,t.path.length);for(let i=0;i<s;i++){const r=this.path[i]-t.path[i];if(r<-1||r>1)return!1;if(r===1)return ss(t,this,i);if(r===-1)return ss(this,t,i)}return this.path.length===t.path.length?!0:this.path.length>t.path.length?Ke(this.path,s):Ke(t.path,s)}hasSameParentAs(t){if(this.root!==t.root)return!1;const s=this.getParentPath(),i=t.getParentPath();return j(s,i)=="same"}getTransformedByOperation(t){let s;switch(t.type){case"insert":s=this._getTransformedByInsertOperation(t);break;case"move":case"remove":case"reinsert":s=this._getTransformedByMoveOperation(t);break;case"split":s=this._getTransformedBySplitOperation(t);break;case"merge":s=this._getTransformedByMergeOperation(t);break;default:s=w._createAt(this);break}return s}_getTransformedByInsertOperation(t){return this._getTransformedByInsertion(t.position,t.howMany)}_getTransformedByMoveOperation(t){return this._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany)}_getTransformedBySplitOperation(t){const s=t.movedRange;return s.containsPosition(this)||s.start.isEqual(this)&&this.stickiness=="toNext"?this._getCombined(t.splitPosition,t.moveTargetPosition):t.graveyardPosition?this._getTransformedByMove(t.graveyardPosition,t.insertionPosition,1):this._getTransformedByInsertion(t.insertionPosition,1)}_getTransformedByMergeOperation(t){const s=t.movedRange,i=s.containsPosition(this)||s.start.isEqual(this);let r;return i?(r=this._getCombined(t.sourcePosition,t.targetPosition),t.sourcePosition.isBefore(t.targetPosition)&&(r=r._getTransformedByDeletion(t.deletionPosition,1))):this.isEqual(t.deletionPosition)?r=w._createAt(t.deletionPosition):r=this._getTransformedByMove(t.deletionPosition,t.graveyardPosition,1),r}_getTransformedByDeletion(t,s){const i=w._createAt(this);if(this.root!=t.root)return i;if(j(t.getParentPath(),this.getParentPath())=="same"){if(t.offset<this.offset){if(t.offset+s>this.offset)return null;i.offset-=s}}else if(j(t.getParentPath(),this.getParentPath())=="prefix"){const r=t.path.length-1;if(t.offset<=this.path[r]){if(t.offset+s>this.path[r])return null;i.path[r]-=s}}return i}_getTransformedByInsertion(t,s){const i=w._createAt(this);if(this.root!=t.root)return i;if(j(t.getParentPath(),this.getParentPath())=="same")(t.offset<this.offset||t.offset==this.offset&&this.stickiness!="toPrevious")&&(i.offset+=s);else if(j(t.getParentPath(),this.getParentPath())=="prefix"){const r=t.path.length-1;t.offset<=this.path[r]&&(i.path[r]+=s)}return i}_getTransformedByMove(t,s,i){if(s=s._getTransformedByDeletion(t,i),t.isEqual(s))return w._createAt(this);const r=this._getTransformedByDeletion(t,i);return r===null||t.isEqual(this)&&this.stickiness=="toNext"||t.getShiftedBy(i).isEqual(this)&&this.stickiness=="toPrevious"?this._getCombined(t,s):r._getTransformedByInsertion(s,i)}_getCombined(t,s){const i=t.path.length-1,r=w._createAt(s);return r.stickiness=this.stickiness,r.offset=r.offset+this.path[i]-t.offset,r.path=[...r.path,...this.path.slice(i+1)],r}toJSON(){return{root:this.root.toJSON(),path:Array.from(this.path),stickiness:this.stickiness}}clone(){return new this.constructor(this.root,this.path,this.stickiness)}static _createAt(t,s,i="toNone"){if(t instanceof w)return new w(t.root,t.path,t.stickiness);{const r=t;if(s=="end")s=r.maxOffset;else{if(s=="before")return this._createBefore(r,i);if(s=="after")return this._createAfter(r,i);if(s!==0&&!s)throw new f("model-createpositionat-offset-required",[this,t])}if(!r.is("element")&&!r.is("documentFragment"))throw new f("model-position-parent-incorrect",[this,t]);const o=r.getPath();return o.push(s),new this(r.root,o,i)}}static _createAfter(t,s){if(!t.parent)throw new f("model-position-after-root",[this,t],{root:t});return this._createAt(t.parent,t.endOffset,s)}static _createBefore(t,s){if(!t.parent)throw new f("model-position-before-root",t,{root:t});return this._createAt(t.parent,t.startOffset,s)}static fromJSON(t,s){if(t.root==="$graveyard"){const i=new w(s.graveyard,t.path);return i.stickiness=t.stickiness,i}if(!s.getRoot(t.root))throw new f("model-position-fromjson-no-root",s,{rootName:t.root});return new w(s.getRoot(t.root),t.path,t.stickiness)}}w.prototype.is=function(e){return e==="position"||e==="model:position"};function Qt(e,n){const t=n.getChildAtOffset(e.offset);return t&&t.is("$text")&&t.startOffset<e.offset?t:null}function ii(e,n,t){return t!==null?null:n.getChildAtOffset(e.offset)}function ri(e,n,t){return t!==null?null:n.getChild(n.offsetToIndex(e.offset)-1)}function ss(e,n,t){return!(t+1===e.path.length||!Ke(n.path,t+1)||!bh(e,t+1))}function Ke(e,n){for(;n<e.length;){if(e[n]!==0)return!1;n++}return!0}function bh(e,n){let t=e.parent,s=e.path.length-1,i=0;for(;s>=n;){if(e.path[s]+i!==t.maxOffset)return!1;i=1,s--,t=t.parent}return!0}class m extends bt{constructor(t,s){super();h(this,"start");h(this,"end");this.start=w._createAt(t),this.end=s?w._createAt(s):w._createAt(t),this.start.stickiness=this.isCollapsed?"toNone":"toNext",this.end.stickiness=this.isCollapsed?"toNone":"toPrevious"}*[Symbol.iterator](){yield*new Ut({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){const t=this.start.getParentPath(),s=this.end.getParentPath();return j(t,s)=="same"}get root(){return this.start.root}containsPosition(t){return t.isAfter(this.start)&&t.isBefore(this.end)}containsRange(t,s=!1){t.isCollapsed&&(s=!1);const i=this.containsPosition(t.start)||s&&this.start.isEqual(t.start),r=this.containsPosition(t.end)||s&&this.end.isEqual(t.end);return i&&r}containsItem(t){const s=w._createBefore(t);return this.containsPosition(s)||this.start.isEqual(s)}isEqual(t){return this.start.isEqual(t.start)&&this.end.isEqual(t.end)}isIntersecting(t){return this.start.isBefore(t.end)&&this.end.isAfter(t.start)}getDifference(t){const s=[];return this.isIntersecting(t)?(this.containsPosition(t.start)&&s.push(new m(this.start,t.start)),this.containsPosition(t.end)&&s.push(new m(t.end,this.end))):s.push(new m(this.start,this.end)),s}getIntersection(t){if(this.isIntersecting(t)){let s=this.start,i=this.end;return this.containsPosition(t.start)&&(s=t.start),this.containsPosition(t.end)&&(i=t.end),new m(s,i)}return null}getJoined(t,s=!1){let i=this.isIntersecting(t);if(i||(this.start.isBefore(t.start)?i=s?this.end.isTouching(t.start):this.end.isEqual(t.start):i=s?t.end.isTouching(this.start):t.end.isEqual(this.start)),!i)return null;let r=this.start,o=this.end;return t.start.isBefore(r)&&(r=t.start),t.end.isAfter(o)&&(o=t.end),new m(r,o)}getMinimalFlatRanges(){const t=[],s=this.start.getCommonPath(this.end).length,i=w._createAt(this.start);let r=i.parent;for(;i.path.length>s+1;){const o=r.maxOffset-i.offset;o!==0&&t.push(new m(i,i.getShiftedBy(o))),i.path=i.path.slice(0,-1),i.offset++,r=r.parent}for(;i.path.length<=this.end.path.length;){const o=this.end.path[i.path.length-1],a=o-i.offset;a!==0&&t.push(new m(i,i.getShiftedBy(a))),i.offset=o,i.path.push(0)}return t}getWalker(t={}){return t.boundaries=this,new Ut(t)}*getItems(t={}){t.boundaries=this,t.ignoreElementEnd=!0;const s=new Ut(t);for(const i of s)yield i.item}*getPositions(t={}){t.boundaries=this;const s=new Ut(t);yield s.position;for(const i of s)yield i.nextPosition}getTransformedByOperation(t){switch(t.type){case"insert":return this._getTransformedByInsertOperation(t);case"move":case"remove":case"reinsert":return this._getTransformedByMoveOperation(t);case"split":return[this._getTransformedBySplitOperation(t)];case"merge":return[this._getTransformedByMergeOperation(t)]}return[new m(this.start,this.end)]}getTransformedByOperations(t){const s=[new m(this.start,this.end)];for(const i of t)for(let r=0;r<s.length;r++){const o=s[r].getTransformedByOperation(i);s.splice(r,1,...o),r+=o.length-1}for(let i=0;i<s.length;i++){const r=s[i];for(let o=i+1;o<s.length;o++){const a=s[o];(r.containsRange(a)||a.containsRange(r)||r.isEqual(a))&&s.splice(o,1)}}return s}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;const t=this.start.nodeAfter,s=this.end.nodeBefore;return t&&t.is("element")&&t===s?t:null}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}clone(){return new this.constructor(this.start,this.end)}_getTransformedByInsertOperation(t,s=!1){return this._getTransformedByInsertion(t.position,t.howMany,s)}_getTransformedByMoveOperation(t,s=!1){const i=t.sourcePosition,r=t.howMany,o=t.targetPosition;return this._getTransformedByMove(i,o,r,s)}_getTransformedBySplitOperation(t){const s=this.start._getTransformedBySplitOperation(t);let i=this.end._getTransformedBySplitOperation(t);return this.end.isEqual(t.insertionPosition)&&(i=this.end.getShiftedBy(1)),s.root!=i.root&&(i=this.end.getShiftedBy(-1)),new m(s,i)}_getTransformedByMergeOperation(t){if(this.start.isEqual(t.targetPosition)&&this.end.isEqual(t.deletionPosition))return new m(this.start);let s=this.start._getTransformedByMergeOperation(t),i=this.end._getTransformedByMergeOperation(t);return s.root!=i.root&&(i=this.end.getShiftedBy(-1)),s.isAfter(i)?(t.sourcePosition.isBefore(t.targetPosition)?(s=w._createAt(i),s.offset=0):(t.deletionPosition.isEqual(s)||(i=t.deletionPosition),s=t.targetPosition),new m(s,i)):new m(s,i)}_getTransformedByInsertion(t,s,i=!1){if(i&&this.containsPosition(t))return[new m(this.start,t),new m(t.getShiftedBy(s),this.end._getTransformedByInsertion(t,s))];{const r=new m(this.start,this.end);return r.start=r.start._getTransformedByInsertion(t,s),r.end=r.end._getTransformedByInsertion(t,s),[r]}}_getTransformedByMove(t,s,i,r=!1){if(this.isCollapsed){const p=this.start._getTransformedByMove(t,s,i);return[new m(p)]}const o=m._createFromPositionAndShift(t,i),a=s._getTransformedByDeletion(t,i);if(this.containsPosition(s)&&!r&&(o.containsPosition(this.start)||o.containsPosition(this.end))){const p=this.start._getTransformedByMove(t,s,i),g=this.end._getTransformedByMove(t,s,i);return[new m(p,g)]}let l;const c=this.getDifference(o);let u=null;const d=this.getIntersection(o);if(c.length==1?u=new m(c[0].start._getTransformedByDeletion(t,i),c[0].end._getTransformedByDeletion(t,i)):c.length==2&&(u=new m(this.start,this.end._getTransformedByDeletion(t,i))),u?l=u._getTransformedByInsertion(a,i,d!==null||r):l=[],d){const p=new m(d.start._getCombined(o.start,a),d.end._getCombined(o.start,a));l.length==2?l.splice(1,0,p):l.push(p)}return l}_getTransformedByDeletion(t,s){let i=this.start._getTransformedByDeletion(t,s),r=this.end._getTransformedByDeletion(t,s);return i==null&&r==null?null:(i==null&&(i=t),r==null&&(r=t),new m(i,r))}static _createFromPositionAndShift(t,s){const i=t,r=t.getShiftedBy(s);return s>0?new this(i,r):new this(r,i)}static _createIn(t){return new this(w._createAt(t,0),w._createAt(t,t.maxOffset))}static _createOn(t){return this._createFromPositionAndShift(w._createBefore(t),t.offsetSize)}static _createFromRanges(t){if(t.length===0)throw new f("range-create-from-ranges-empty-array",null);if(t.length==1)return t[0].clone();const s=t[0];t.sort((o,a)=>o.start.isAfter(a.start)?1:-1);const i=t.indexOf(s),r=new this(s.start,s.end);for(let o=i-1;o>=0&&t[o].end.isEqual(r.start);o--)r.start=w._createAt(t[o].start);for(let o=i+1;o<t.length&&t[o].start.isEqual(r.end);o++)r.end=w._createAt(t[o].end);return r}static fromJSON(t,s){return new this(w.fromJSON(t.start,s),w.fromJSON(t.end,s))}}m.prototype.is=function(e){return e==="range"||e==="model:range"};class Ae extends F(bt){constructor(...t){super();h(this,"_lastRangeBackward",!1);h(this,"_attrs",new Map);h(this,"_ranges",[]);t.length&&this.setTo(...t)}get anchor(){if(this._ranges.length>0){const t=this._ranges[this._ranges.length-1];return this._lastRangeBackward?t.end:t.start}return null}get focus(){if(this._ranges.length>0){const t=this._ranges[this._ranges.length-1];return this._lastRangeBackward?t.start:t.end}return null}get isCollapsed(){return this._ranges.length===1?this._ranges[0].isCollapsed:!1}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}isEqual(t){if(this.rangeCount!=t.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(t.anchor)||!this.focus.isEqual(t.focus))return!1;for(const s of this._ranges){let i=!1;for(const r of t._ranges)if(s.isEqual(r)){i=!0;break}if(!i)return!1}return!0}*getRanges(){for(const t of this._ranges)yield new m(t.start,t.end)}getFirstRange(){let t=null;for(const s of this._ranges)(!t||s.start.isBefore(t.start))&&(t=s);return t?new m(t.start,t.end):null}getLastRange(){let t=null;for(const s of this._ranges)(!t||s.end.isAfter(t.end))&&(t=s);return t?new m(t.start,t.end):null}getFirstPosition(){const t=this.getFirstRange();return t?t.start.clone():null}getLastPosition(){const t=this.getLastRange();return t?t.end.clone():null}setTo(...t){let[s,i,r]=t;if(typeof i=="object"&&(r=i,i=void 0),s===null)this._setRanges([]);else if(s instanceof Ae)this._setRanges(s.getRanges(),s.isBackward);else if(s&&typeof s.getRanges=="function")this._setRanges(s.getRanges(),s.isBackward);else if(s instanceof m)this._setRanges([s],!!r&&!!r.backward);else if(s instanceof w)this._setRanges([new m(s)]);else if(s instanceof Lt){const o=!!r&&!!r.backward;let a;if(i=="in")a=m._createIn(s);else if(i=="on")a=m._createOn(s);else if(i!==void 0)a=new m(w._createAt(s,i));else throw new f("model-selection-setto-required-second-parameter",[this,s]);this._setRanges([a],o)}else if(ft(s))this._setRanges(s,r&&!!r.backward);else throw new f("model-selection-setto-not-selectable",[this,s])}_setRanges(t,s=!1){const i=Array.from(t),r=i.some(o=>{if(!(o instanceof m))throw new f("model-selection-set-ranges-not-range",[this,t]);return this._ranges.every(a=>!a.isEqual(o))});i.length===this._ranges.length&&!r||(this._replaceAllRanges(i),this._lastRangeBackward=!!s,this.fire("change:range",{directChange:!0}))}setFocus(t,s){if(this.anchor===null)throw new f("model-selection-setfocus-no-ranges",[this,t]);const i=w._createAt(t,s);if(i.compareWith(this.focus)=="same")return;const r=this.anchor;this._ranges.length&&this._popRange(),i.compareWith(r)=="before"?(this._pushRange(new m(i,r)),this._lastRangeBackward=!0):(this._pushRange(new m(r,i)),this._lastRangeBackward=!1),this.fire("change:range",{directChange:!0})}getAttribute(t){return this._attrs.get(t)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}hasAttribute(t){return this._attrs.has(t)}removeAttribute(t){this.hasAttribute(t)&&(this._attrs.delete(t),this.fire("change:attribute",{attributeKeys:[t],directChange:!0}))}setAttribute(t,s){this.getAttribute(t)!==s&&(this._attrs.set(t,s),this.fire("change:attribute",{attributeKeys:[t],directChange:!0}))}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}*getSelectedBlocks(){const t=new WeakSet;for(const s of this.getRanges()){const i=is(s.start,t);vh(i,s)&&(yield i);for(const o of s.getWalker()){const a=o.item;o.type=="elementEnd"&&Ph(a,t,s)&&(yield a)}const r=is(s.end,t);xh(r,s)&&(yield r)}}containsEntireContent(t=this.anchor.root){const s=w._createAt(t,0),i=w._createAt(t,"end");return s.isTouching(this.getFirstPosition())&&i.isTouching(this.getLastPosition())}_pushRange(t){this._checkRange(t),this._ranges.push(new m(t.start,t.end))}_checkRange(t){for(let s=0;s<this._ranges.length;s++)if(t.isIntersecting(this._ranges[s]))throw new f("model-selection-range-intersects",[this,t],{addedRange:t,intersectingRange:this._ranges[s]})}_replaceAllRanges(t){this._removeAllRanges();for(const s of t)this._pushRange(s)}_removeAllRanges(){for(;this._ranges.length>0;)this._popRange()}_popRange(){this._ranges.pop()}}Ae.prototype.is=function(e){return e==="selection"||e==="model:selection"};function oi(e,n){return n.has(e)?!1:(n.add(e),e.root.document.model.schema.isBlock(e)&&!!e.parent)}function Ph(e,n,t){return oi(e,n)&&hn(e,t)}function is(e,n){const s=e.parent.root.document.model.schema,i=e.parent.getAncestors({parentFirst:!0,includeSelf:!0});let r=!1;const o=i.find(a=>r?!1:(r=s.isLimit(a),!r&&oi(a,n)));return i.forEach(a=>n.add(a)),o}function hn(e,n){const t=kh(e);return t?!n.containsRange(m._createOn(t),!0):!0}function vh(e,n){return e?n.isCollapsed||e.isEmpty?!0:n.start.isTouching(w._createAt(e,e.maxOffset))?!1:hn(e,n):!1}function xh(e,n){return e?n.isCollapsed||e.isEmpty?!0:n.end.isTouching(w._createAt(e,0))?!1:hn(e,n):!1}function kh(e){const n=e.root.document.model.schema;let t=e.parent;for(;t;){if(n.isBlock(t))return t;t=t.parent}}class Se extends F(m){constructor(n,t){super(n,t),Ah.call(this)}detach(){this.stopListening()}toRange(){return new m(this.start,this.end)}static fromRange(n){return new Se(n.start,n.end)}}Se.prototype.is=function(e){return e==="liveRange"||e==="model:liveRange"||e=="range"||e==="model:range"};function Ah(){this.listenTo(this.root.document.model,"applyOperation",(e,n)=>{const t=n[0];t.isDocumentOperation&&Sh.call(this,t)},{priority:"low"})}function Sh(e){const n=this.getTransformedByOperation(e),t=m._createFromRanges(n),s=!t.isEqual(this),i=Th(this,e);let r=null;if(s){t.root.rootName=="$graveyard"&&(e.type=="remove"?r=e.sourcePosition:r=e.deletionPosition);const o=this.toRange();this.start=t.start,this.end=t.end,this.fire("change:range",o,{deletionPosition:r})}else i&&this.fire("change:content",this.toRange(),{deletionPosition:r})}function Th(e,n){switch(n.type){case"insert":return e.containsPosition(n.position);case"move":case"remove":case"reinsert":case"merge":return e.containsPosition(n.sourcePosition)||e.start.isEqual(n.sourcePosition)||e.containsPosition(n.targetPosition);case"split":return e.containsPosition(n.splitPosition)||e.containsPosition(n.insertionPosition)}return!1}const ie="selection:";class Eh extends F(bt){constructor(t){super();h(this,"_selection");this._selection=new Oh(t),this._selection.delegate("change:range").to(this),this._selection.delegate("change:attribute").to(this),this._selection.delegate("change:marker").to(this)}get isCollapsed(){return this._selection.isCollapsed}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get rangeCount(){return this._selection.rangeCount}get hasOwnRange(){return this._selection.hasOwnRange}get isBackward(){return this._selection.isBackward}get isGravityOverridden(){return this._selection.isGravityOverridden}get markers(){return this._selection.markers}get _ranges(){return this._selection._ranges}getRanges(){return this._selection.getRanges()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getSelectedBlocks(){return this._selection.getSelectedBlocks()}getSelectedElement(){return this._selection.getSelectedElement()}containsEntireContent(t){return this._selection.containsEntireContent(t)}destroy(){this._selection.destroy()}getAttributeKeys(){return this._selection.getAttributeKeys()}getAttributes(){return this._selection.getAttributes()}getAttribute(t){return this._selection.getAttribute(t)}hasAttribute(t){return this._selection.hasAttribute(t)}refresh(){this._selection.updateMarkers(),this._selection._updateAttributes(!1)}observeMarkers(t){this._selection.observeMarkers(t)}_setFocus(t,s){this._selection.setFocus(t,s)}_setTo(...t){this._selection.setTo(...t)}_setAttribute(t,s){this._selection.setAttribute(t,s)}_removeAttribute(t){this._selection.removeAttribute(t)}_getStoredAttributes(){return this._selection.getStoredAttributes()}_overrideGravity(){return this._selection.overrideGravity()}_restoreGravity(t){this._selection.restoreGravity(t)}static _getStoreAttributeKey(t){return ie+t}static _isStoreAttributeKey(t){return t.startsWith(ie)}}Eh.prototype.is=function(e){return e==="selection"||e=="model:selection"||e=="documentSelection"||e=="model:documentSelection"};class Oh extends Ae{constructor(t){super();h(this,"markers",new Dc({idProperty:"name"}));h(this,"_model");h(this,"_document");h(this,"_attributePriority",new Map);h(this,"_selectionRestorePosition",null);h(this,"_hasChangedRange",!1);h(this,"_overriddenGravityRegister",new Set);h(this,"_observedMarkers",new Set);this._model=t.model,this._document=t,this.listenTo(this._model,"applyOperation",(s,i)=>{const r=i[0];!r.isDocumentOperation||r.type=="marker"||r.type=="rename"||r.type=="noop"||(this._ranges.length==0&&this._selectionRestorePosition&&this._fixGraveyardSelection(this._selectionRestorePosition),this._selectionRestorePosition=null,this._hasChangedRange&&(this._hasChangedRange=!1,this.fire("change:range",{directChange:!1})))},{priority:"lowest"}),this.on("change:range",()=>{this._validateSelectionRanges(this.getRanges())}),this.listenTo(this._model.markers,"update",(s,i,r,o)=>{this._updateMarker(i,o)}),this.listenTo(this._document,"change",(s,i)=>{Rh(this._model,i)})}get isCollapsed(){return this._ranges.length===0?this._document._getDefaultRange().isCollapsed:super.isCollapsed}get anchor(){return super.anchor||this._document._getDefaultRange().start}get focus(){return super.focus||this._document._getDefaultRange().end}get rangeCount(){return this._ranges.length?this._ranges.length:1}get hasOwnRange(){return this._ranges.length>0}get isGravityOverridden(){return!!this._overriddenGravityRegister.size}destroy(){for(let t=0;t<this._ranges.length;t++)this._ranges[t].detach();this.stopListening()}*getRanges(){this._ranges.length?yield*super.getRanges():yield this._document._getDefaultRange()}getFirstRange(){return super.getFirstRange()||this._document._getDefaultRange()}getLastRange(){return super.getLastRange()||this._document._getDefaultRange()}setTo(...t){super.setTo(...t),this._updateAttributes(!0),this.updateMarkers()}setFocus(t,s){super.setFocus(t,s),this._updateAttributes(!0),this.updateMarkers()}setAttribute(t,s){if(this._setAttribute(t,s)){const i=[t];this.fire("change:attribute",{attributeKeys:i,directChange:!0})}}removeAttribute(t){if(this._removeAttribute(t)){const s=[t];this.fire("change:attribute",{attributeKeys:s,directChange:!0})}}overrideGravity(){const t=ke();return this._overriddenGravityRegister.add(t),this._overriddenGravityRegister.size===1&&this._updateAttributes(!0),t}restoreGravity(t){if(!this._overriddenGravityRegister.has(t))throw new f("document-selection-gravity-wrong-restore",this,{uid:t});this._overriddenGravityRegister.delete(t),this.isGravityOverridden||this._updateAttributes(!0)}observeMarkers(t){this._observedMarkers.add(t),this.updateMarkers()}_replaceAllRanges(t){this._validateSelectionRanges(t),super._replaceAllRanges(t)}_popRange(){this._ranges.pop().detach()}_pushRange(t){const s=this._prepareRange(t);s&&this._ranges.push(s)}_validateSelectionRanges(t){for(const s of t)if(!this._document._validateSelectionRange(s))throw new f("document-selection-wrong-position",this,{range:s})}_prepareRange(t){if(this._checkRange(t),t.root==this._document.graveyard)return;const s=Se.fromRange(t);return s.on("change:range",(i,r,o)=>{if(this._hasChangedRange=!0,s.root==this._document.graveyard){this._selectionRestorePosition=o.deletionPosition;const a=this._ranges.indexOf(s);this._ranges.splice(a,1),s.detach()}}),s}updateMarkers(){if(!this._observedMarkers.size)return;const t=[];let s=!1;for(const r of this._model.markers){const o=r.name.split(":",1)[0];if(!this._observedMarkers.has(o))continue;const a=r.getRange();for(const l of this.getRanges())a.containsRange(l,!l.isCollapsed)&&t.push(r)}const i=Array.from(this.markers);for(const r of t)this.markers.has(r)||(this.markers.add(r),s=!0);for(const r of Array.from(this.markers))t.includes(r)||(this.markers.remove(r),s=!0);s&&this.fire("change:marker",{oldMarkers:i,directChange:!1})}_updateMarker(t,s){const i=t.name.split(":",1)[0];if(!this._observedMarkers.has(i))return;let r=!1;const o=Array.from(this.markers),a=this.markers.has(t);if(!s)a&&(this.markers.remove(t),r=!0);else{let l=!1;for(const c of this.getRanges())if(s.containsRange(c,!c.isCollapsed)){l=!0;break}l&&!a?(this.markers.add(t),r=!0):!l&&a&&(this.markers.remove(t),r=!0)}r&&this.fire("change:marker",{oldMarkers:o,directChange:!1})}_updateAttributes(t){const s=se(this._getSurroundingAttributes()),i=se(this.getAttributes());if(t)this._attributePriority=new Map,this._attrs=new Map;else for(const[o,a]of this._attributePriority)a=="low"&&(this._attrs.delete(o),this._attributePriority.delete(o));this._setAttributesTo(s);const r=[];for(const[o,a]of this.getAttributes())(!i.has(o)||i.get(o)!==a)&&r.push(o);for(const[o]of i)this.hasAttribute(o)||r.push(o);r.length>0&&this.fire("change:attribute",{attributeKeys:r,directChange:!1})}_setAttribute(t,s,i=!0){const r=i?"normal":"low";return r=="low"&&this._attributePriority.get(t)=="normal"||super.getAttribute(t)===s?!1:(this._attrs.set(t,s),this._attributePriority.set(t,r),!0)}_removeAttribute(t,s=!0){const i=s?"normal":"low";return i=="low"&&this._attributePriority.get(t)=="normal"||(this._attributePriority.set(t,i),!super.hasAttribute(t))?!1:(this._attrs.delete(t),!0)}_setAttributesTo(t){const s=new Set;for(const[i,r]of this.getAttributes())t.get(i)!==r&&this._removeAttribute(i,!1);for(const[i,r]of t)this._setAttribute(i,r,!1)&&s.add(i);return s}*getStoredAttributes(){const t=this.getFirstPosition().parent;if(this.isCollapsed&&t.isEmpty)for(const s of t.getAttributeKeys())s.startsWith(ie)&&(yield[s.substr(ie.length),t.getAttribute(s)])}_getSurroundingAttributes(){const t=this.getFirstPosition(),s=this._model.schema;if(t.root.rootName=="$graveyard")return null;let i=null;if(this.isCollapsed){const r=t.textNode?t.textNode:t.nodeBefore,o=t.textNode?t.textNode:t.nodeAfter;if(this.isGravityOverridden||(i=Vt(r,s)),i||(i=Vt(o,s)),!this.isGravityOverridden&&!i){let a=r;for(;a&&!i;)a=a.previousSibling,i=Vt(a,s)}if(!i){let a=o;for(;a&&!i;)a=a.nextSibling,i=Vt(a,s)}i||(i=this.getStoredAttributes())}else{const r=this.getFirstRange();for(const o of r){if(o.item.is("element")&&s.isObject(o.item)){i=Vt(o.item,s);break}if(o.type=="text"){i=o.item.getAttributes();break}}}return i}_fixGraveyardSelection(t){const s=this._model.schema.getNearestSelectionRange(t);s&&this._pushRange(s)}}function Vt(e,n){if(!e)return null;if(e instanceof St||e instanceof N)return e.getAttributes();if(!n.isInline(e))return null;if(!n.isObject(e))return[];const t=[];for(const[s,i]of e.getAttributes())n.checkAttribute("$text",s)&&n.getAttributeProperties(s).copyFromObject!==!1&&t.push([s,i]);return t}function Rh(e,n){const t=e.document.differ;for(const s of t.getChanges()){if(s.type!="insert")continue;const i=s.position.parent;s.length===i.maxOffset&&e.enqueueChange(n,o=>{const a=Array.from(i.getAttributeKeys()).filter(l=>l.startsWith(ie));for(const l of a)o.removeAttribute(l,i)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Z{constructor(n){h(this,"baseVersion");h(this,"isDocumentOperation");h(this,"batch");this.baseVersion=n,this.isDocumentOperation=this.baseVersion!==null,this.batch=null}_validate(){}toJSON(){const n=Object.assign({},this);return n.__className=this.constructor.className,delete n.batch,delete n.isDocumentOperation,n}static get className(){return"Operation"}static fromJSON(n,t){return new this(n.baseVersion)}}function un(e,n){const t=ai(n),s=t.reduce((o,a)=>o+a.offsetSize,0),i=e.parent;ae(e);const r=e.index;return i._insertChild(r,t),oe(i,r+t.length),oe(i,r),new m(e,e.getShiftedBy(s))}function Mh(e){if(!e.isFlat)throw new f("operation-utils-remove-range-not-flat",this);const n=e.start.parent;ae(e.start),ae(e.end);const t=n._removeChildren(e.start.index,e.end.index-e.start.index);return oe(n,e.start.index),t}function re(e,n){if(!e.isFlat)throw new f("operation-utils-move-range-not-flat",this);const t=Mh(e);return n=n._getTransformedByDeletion(e.start,e.end.offset-e.start.offset),un(n,t)}function Ch(e,n,t){ae(e.start),ae(e.end);for(const s of e.getItems({shallow:!0})){const i=s.is("$textProxy")?s.textNode:s;t!==null?i._setAttribute(n,t):i._removeAttribute(n),oe(i.parent,i.index)}oe(e.end.parent,e.end.index)}function ai(e){const n=[];function t(s){if(typeof s=="string")n.push(new N(s));else if(s instanceof St)n.push(new N(s.data,s.getAttributes()));else if(s instanceof Lt)n.push(s);else if(ft(s))for(const i of s)t(i)}t(e);for(let s=1;s<n.length;s++){const i=n[s],r=n[s-1];i instanceof N&&r instanceof N&&li(i,r)&&(n.splice(s-1,2,new N(r.data+i.data,r.getAttributes())),s--)}return n}function oe(e,n){const t=e.getChild(n-1),s=e.getChild(n);if(t&&s&&t.is("$text")&&s.is("$text")&&li(t,s)){const i=new N(t.data+s.data,t.getAttributes());e._removeChildren(n-1,2),e._insertChild(n-1,i)}}function ae(e){const n=e.textNode,t=e.parent;if(n){const s=e.offset-n.startOffset,i=n.index;t._removeChildren(i,1);const r=new N(n.data.substr(0,s),n.getAttributes()),o=new N(n.data.substr(s),n.getAttributes());t._insertChild(i,[r,o])}}function li(e,n){const t=e.getAttributes(),s=n.getAttributes();for(const i of t){if(i[1]!==n.getAttribute(i[0]))return!1;s.next()}return s.next().done}class R extends Z{constructor(t,s,i,r){super(r);h(this,"sourcePosition");h(this,"howMany");h(this,"targetPosition");this.sourcePosition=t.clone(),this.sourcePosition.stickiness="toNext",this.howMany=s,this.targetPosition=i.clone(),this.targetPosition.stickiness="toNone"}get type(){return this.targetPosition.root.rootName=="$graveyard"?"remove":this.sourcePosition.root.rootName=="$graveyard"?"reinsert":"move"}get affectedSelectable(){return[m._createFromPositionAndShift(this.sourcePosition,this.howMany),m._createFromPositionAndShift(this.targetPosition,0)]}clone(){return new R(this.sourcePosition,this.howMany,this.targetPosition,this.baseVersion)}getMovedRangeStart(){return this.targetPosition._getTransformedByDeletion(this.sourcePosition,this.howMany)}getReversed(){const t=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new R(this.getMovedRangeStart(),this.howMany,t,this.baseVersion+1)}_validate(){const t=this.sourcePosition.parent,s=this.targetPosition.parent,i=this.sourcePosition.offset,r=this.targetPosition.offset;if(i+this.howMany>t.maxOffset)throw new f("move-operation-nodes-do-not-exist",this);if(t===s&&i<r&&r<i+this.howMany)throw new f("move-operation-range-into-itself",this);if(this.sourcePosition.root==this.targetPosition.root&&j(this.sourcePosition.getParentPath(),this.targetPosition.getParentPath())=="prefix"){const o=this.sourcePosition.path.length-1;if(this.targetPosition.path[o]>=i&&this.targetPosition.path[o]<i+this.howMany)throw new f("move-operation-node-into-itself",this)}}_execute(){re(m._createFromPositionAndShift(this.sourcePosition,this.howMany),this.targetPosition)}toJSON(){const t=super.toJSON();return t.sourcePosition=this.sourcePosition.toJSON(),t.targetPosition=this.targetPosition.toJSON(),t}static get className(){return"MoveOperation"}static fromJSON(t,s){const i=w.fromJSON(t.sourcePosition,s),r=w.fromJSON(t.targetPosition,s);return new this(i,t.howMany,r,t.baseVersion)}}class z extends Z{constructor(t,s,i){super(i);h(this,"position");h(this,"nodes");h(this,"shouldReceiveAttributes");this.position=t.clone(),this.position.stickiness="toNone",this.nodes=new Ht(ai(s)),this.shouldReceiveAttributes=!1}get type(){return"insert"}get howMany(){return this.nodes.maxOffset}get affectedSelectable(){return this.position.clone()}clone(){const t=new Ht([...this.nodes].map(i=>i._clone(!0))),s=new z(this.position,t,this.baseVersion);return s.shouldReceiveAttributes=this.shouldReceiveAttributes,s}getReversed(){const t=this.position.root.document.graveyard,s=new w(t,[0]);return new R(this.position,this.nodes.maxOffset,s,this.baseVersion+1)}_validate(){const t=this.position.parent;if(!t||t.maxOffset<this.position.offset)throw new f("insert-operation-position-invalid",this)}_execute(){const t=this.nodes;this.nodes=new Ht([...t].map(s=>s._clone(!0))),un(this.position,t)}toJSON(){const t=super.toJSON();return t.position=this.position.toJSON(),t.nodes=this.nodes.toJSON(),t}static get className(){return"InsertOperation"}static fromJSON(t,s){const i=[];for(const o of t.nodes)o.name?i.push(Q.fromJSON(o)):i.push(N.fromJSON(o));const r=new z(w.fromJSON(t.position,s),i,t.baseVersion);return r.shouldReceiveAttributes=t.shouldReceiveAttributes,r}}class B extends Z{constructor(t,s,i,r,o){super(o);h(this,"splitPosition");h(this,"howMany");h(this,"insertionPosition");h(this,"graveyardPosition");this.splitPosition=t.clone(),this.splitPosition.stickiness="toNext",this.howMany=s,this.insertionPosition=i,this.graveyardPosition=r?r.clone():null,this.graveyardPosition&&(this.graveyardPosition.stickiness="toNext")}get type(){return"split"}get moveTargetPosition(){const t=this.insertionPosition.path.slice();return t.push(0),new w(this.insertionPosition.root,t)}get movedRange(){const t=this.splitPosition.getShiftedBy(Number.POSITIVE_INFINITY);return new m(this.splitPosition,t)}get affectedSelectable(){const t=[m._createFromPositionAndShift(this.splitPosition,0),m._createFromPositionAndShift(this.insertionPosition,0)];return this.graveyardPosition&&t.push(m._createFromPositionAndShift(this.graveyardPosition,0)),t}clone(){return new B(this.splitPosition,this.howMany,this.insertionPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const t=this.splitPosition.root.document.graveyard,s=new w(t,[0]);return new q(this.moveTargetPosition,this.howMany,this.splitPosition,s,this.baseVersion+1)}_validate(){const t=this.splitPosition.parent,s=this.splitPosition.offset;if(!t||t.maxOffset<s)throw new f("split-operation-position-invalid",this);if(t.parent){if(this.howMany!=t.maxOffset-this.splitPosition.offset)throw new f("split-operation-how-many-invalid",this);if(this.graveyardPosition&&!this.graveyardPosition.nodeAfter)throw new f("split-operation-graveyard-position-invalid",this)}else throw new f("split-operation-split-in-root",this)}_execute(){const t=this.splitPosition.parent;if(this.graveyardPosition)re(m._createFromPositionAndShift(this.graveyardPosition,1),this.insertionPosition);else{const i=t._clone();un(this.insertionPosition,i)}const s=new m(w._createAt(t,this.splitPosition.offset),w._createAt(t,t.maxOffset));re(s,this.moveTargetPosition)}toJSON(){const t=super.toJSON();return t.splitPosition=this.splitPosition.toJSON(),t.insertionPosition=this.insertionPosition.toJSON(),this.graveyardPosition&&(t.graveyardPosition=this.graveyardPosition.toJSON()),t}static get className(){return"SplitOperation"}static getInsertionPosition(t){const s=t.path.slice(0,-1);return s[s.length-1]++,new w(t.root,s,"toPrevious")}static fromJSON(t,s){const i=w.fromJSON(t.splitPosition,s),r=w.fromJSON(t.insertionPosition,s),o=t.graveyardPosition?w.fromJSON(t.graveyardPosition,s):null;return new this(i,t.howMany,r,o,t.baseVersion)}}class q extends Z{constructor(t,s,i,r,o){super(o);h(this,"sourcePosition");h(this,"howMany");h(this,"targetPosition");h(this,"graveyardPosition");this.sourcePosition=t.clone(),this.sourcePosition.stickiness="toPrevious",this.howMany=s,this.targetPosition=i.clone(),this.targetPosition.stickiness="toNext",this.graveyardPosition=r.clone()}get type(){return"merge"}get deletionPosition(){return new w(this.sourcePosition.root,this.sourcePosition.path.slice(0,-1))}get movedRange(){const t=this.sourcePosition.getShiftedBy(Number.POSITIVE_INFINITY);return new m(this.sourcePosition,t)}get affectedSelectable(){const t=this.sourcePosition.parent;return[m._createOn(t),m._createFromPositionAndShift(this.targetPosition,0),m._createFromPositionAndShift(this.graveyardPosition,0)]}clone(){return new q(this.sourcePosition,this.howMany,this.targetPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const t=this.targetPosition._getTransformedByMergeOperation(this),s=this.sourcePosition.path.slice(0,-1),i=new w(this.sourcePosition.root,s)._getTransformedByMergeOperation(this);return new B(t,this.howMany,i,this.graveyardPosition,this.baseVersion+1)}_validate(){const t=this.sourcePosition.parent,s=this.targetPosition.parent;if(t.parent)if(s.parent){if(this.howMany!=t.maxOffset)throw new f("merge-operation-how-many-invalid",this)}else throw new f("merge-operation-target-position-invalid",this);else throw new f("merge-operation-source-position-invalid",this)}_execute(){const t=this.sourcePosition.parent,s=m._createIn(t);re(s,this.targetPosition),re(m._createOn(t),this.graveyardPosition)}toJSON(){const t=super.toJSON();return t.sourcePosition=t.sourcePosition.toJSON(),t.targetPosition=t.targetPosition.toJSON(),t.graveyardPosition=t.graveyardPosition.toJSON(),t}static get className(){return"MergeOperation"}static fromJSON(t,s){const i=w.fromJSON(t.sourcePosition,s),r=w.fromJSON(t.targetPosition,s),o=w.fromJSON(t.graveyardPosition,s);return new this(i,t.howMany,r,o,t.baseVersion)}}class K extends Z{constructor(t,s,i,r,o,a){super(a);h(this,"name");h(this,"oldRange");h(this,"newRange");h(this,"affectsData");h(this,"_markers");this.name=t,this.oldRange=s?s.clone():null,this.newRange=i?i.clone():null,this.affectsData=o,this._markers=r}get type(){return"marker"}get affectedSelectable(){const t=[];return this.oldRange&&t.push(this.oldRange.clone()),this.newRange&&(this.oldRange?t.push(...this.newRange.getDifference(this.oldRange)):t.push(this.newRange.clone())),t}clone(){return new K(this.name,this.oldRange,this.newRange,this._markers,this.affectsData,this.baseVersion)}getReversed(){return new K(this.name,this.newRange,this.oldRange,this._markers,this.affectsData,this.baseVersion+1)}_execute(){this.newRange?this._markers._set(this.name,this.newRange,!0,this.affectsData):this._markers._remove(this.name)}toJSON(){const t=super.toJSON();return this.oldRange&&(t.oldRange=this.oldRange.toJSON()),this.newRange&&(t.newRange=this.newRange.toJSON()),delete t._markers,t}static get className(){return"MarkerOperation"}static fromJSON(t,s){return new K(t.name,t.oldRange?m.fromJSON(t.oldRange,s):null,t.newRange?m.fromJSON(t.newRange,s):null,s.model.markers,t.affectsData,t.baseVersion)}}class $ extends Z{constructor(t,s,i,r,o){super(o);h(this,"range");h(this,"key");h(this,"oldValue");h(this,"newValue");this.range=t.clone(),this.key=s,this.oldValue=i===void 0?null:i,this.newValue=r===void 0?null:r}get type(){return this.oldValue===null?"addAttribute":this.newValue===null?"removeAttribute":"changeAttribute"}get affectedSelectable(){return this.range.clone()}clone(){return new $(this.range,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new $(this.range,this.key,this.newValue,this.oldValue,this.baseVersion+1)}toJSON(){const t=super.toJSON();return t.range=this.range.toJSON(),t}_validate(){if(!this.range.isFlat)throw new f("attribute-operation-range-not-flat",this);for(const t of this.range.getItems({shallow:!0})){if(this.oldValue!==null&&!Vn(t.getAttribute(this.key),this.oldValue))throw new f("attribute-operation-wrong-old-value",this,{item:t,key:this.key,value:this.oldValue});if(this.oldValue===null&&this.newValue!==null&&t.hasAttribute(this.key))throw new f("attribute-operation-attribute-exists",this,{node:t,key:this.key})}}_execute(){Vn(this.oldValue,this.newValue)||Ch(this.range,this.key,this.newValue)}static get className(){return"AttributeOperation"}static fromJSON(t,s){return new $(m.fromJSON(t.range,s),t.key,t.oldValue,t.newValue,t.baseVersion)}}class L extends Z{get type(){return"noop"}get affectedSelectable(){return null}clone(){return new L(this.baseVersion)}getReversed(){return new L(this.baseVersion+1)}_execute(){}static get className(){return"NoOperation"}}class U extends Z{constructor(t,s,i,r){super(r);h(this,"position");h(this,"oldName");h(this,"newName");this.position=t,this.position.stickiness="toNext",this.oldName=s,this.newName=i}get type(){return"rename"}get affectedSelectable(){return this.position.nodeAfter}clone(){return new U(this.position.clone(),this.oldName,this.newName,this.baseVersion)}getReversed(){return new U(this.position.clone(),this.newName,this.oldName,this.baseVersion+1)}_validate(){const t=this.position.nodeAfter;if(t instanceof Q){if(t.name!==this.oldName)throw new f("rename-operation-wrong-name",this)}else throw new f("rename-operation-wrong-position",this)}_execute(){const t=this.position.nodeAfter;t.name=this.newName}toJSON(){const t=super.toJSON();return t.position=this.position.toJSON(),t}static get className(){return"RenameOperation"}static fromJSON(t,s){return new U(w.fromJSON(t.position,s),t.oldName,t.newName,t.baseVersion)}}class pt extends Z{constructor(t,s,i,r,o){super(o);h(this,"root");h(this,"key");h(this,"oldValue");h(this,"newValue");this.root=t,this.key=s,this.oldValue=i===void 0?null:i,this.newValue=r===void 0?null:r}get type(){return this.oldValue===null?"addRootAttribute":this.newValue===null?"removeRootAttribute":"changeRootAttribute"}get affectedSelectable(){return this.root}clone(){return new pt(this.root,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new pt(this.root,this.key,this.newValue,this.oldValue,this.baseVersion+1)}_validate(){if(this.root!=this.root.root||this.root.is("documentFragment"))throw new f("rootattribute-operation-not-a-root",this,{root:this.root,key:this.key});if(this.oldValue!==null&&this.root.getAttribute(this.key)!==this.oldValue)throw new f("rootattribute-operation-wrong-old-value",this,{root:this.root,key:this.key});if(this.oldValue===null&&this.newValue!==null&&this.root.hasAttribute(this.key))throw new f("rootattribute-operation-attribute-exists",this,{root:this.root,key:this.key})}_execute(){this.newValue!==null?this.root._setAttribute(this.key,this.newValue):this.root._removeAttribute(this.key)}toJSON(){const t=super.toJSON();return t.root=this.root.toJSON(),t}static get className(){return"RootAttributeOperation"}static fromJSON(t,s){if(!s.getRoot(t.root))throw new f("rootattribute-operation-fromjson-no-root",this,{rootName:t.root});return new pt(s.getRoot(t.root),t.key,t.oldValue,t.newValue,t.baseVersion)}}class mt extends Z{constructor(t,s,i,r,o){super(o);h(this,"rootName");h(this,"elementName");h(this,"isAdd");h(this,"_document");if(this.rootName=t,this.elementName=s,this.isAdd=i,this._document=r,!this._document.getRoot(this.rootName)){const a=this._document.createRoot(this.elementName,this.rootName);a._isAttached=!1}}get type(){return this.isAdd?"addRoot":"detachRoot"}get affectedSelectable(){return this._document.getRoot(this.rootName)}clone(){return new mt(this.rootName,this.elementName,this.isAdd,this._document,this.baseVersion)}getReversed(){return new mt(this.rootName,this.elementName,!this.isAdd,this._document,this.baseVersion+1)}_execute(){this._document.getRoot(this.rootName)._isAttached=this.isAdd}toJSON(){const t=super.toJSON();return delete t._document,t}static get className(){return"RootOperation"}static fromJSON(t,s){return new mt(t.rootName,t.elementName,t.isAdd,s,t.baseVersion)}}const X={};X[$.className]=$;X[z.className]=z;X[K.className]=K;X[R.className]=R;X[L.className]=L;X[Z.className]=Z;X[U.className]=U;X[pt.className]=pt;X[mt.className]=mt;X[B.className]=B;X[q.className]=q;const rs=new Map;function x(e,n,t){let s=rs.get(e);s||(s=new Map,rs.set(e,s)),s.set(n,t)}x($,$,(e,n,t)=>{if(e.key===n.key&&e.range.start.hasSameParentAs(n.range.start)){const s=e.range.getDifference(n.range).map(r=>new $(r,e.key,e.oldValue,e.newValue,0)),i=e.range.getIntersection(n.range);return i&&t.aIsStrong&&s.push(new $(i,n.key,n.newValue,e.newValue,0)),s.length==0?[new L(0)]:s}else return[e]});x($,z,(e,n)=>{if(e.range.start.hasSameParentAs(n.position)&&e.range.containsPosition(n.position)){const s=e.range._getTransformedByInsertion(n.position,n.howMany,!n.shouldReceiveAttributes).map(i=>new $(i,e.key,e.oldValue,e.newValue,e.baseVersion));if(n.shouldReceiveAttributes){const i=ci(n,e.key,e.oldValue);i&&s.unshift(i)}return s}return e.range=e.range._getTransformedByInsertion(n.position,n.howMany,!1)[0],[e]});function ci(e,n,t){const i=e.nodes.getNode(0).getAttribute(n);if(i==t)return null;const r=new m(e.position,e.position.getShiftedBy(e.howMany));return new $(r,n,i,t,0)}x($,q,(e,n)=>{const t=[];e.range.start.hasSameParentAs(n.deletionPosition)&&(e.range.containsPosition(n.deletionPosition)||e.range.start.isEqual(n.deletionPosition))&&t.push(m._createFromPositionAndShift(n.graveyardPosition,1));const s=e.range._getTransformedByMergeOperation(n);return s.isCollapsed||t.push(s),t.map(i=>new $(i,e.key,e.oldValue,e.newValue,e.baseVersion))});x($,R,(e,n)=>Nh(e.range,n).map(s=>new $(s,e.key,e.oldValue,e.newValue,e.baseVersion)));function Nh(e,n){const t=m._createFromPositionAndShift(n.sourcePosition,n.howMany);let s=null,i=[];t.containsRange(e,!0)?s=e:e.start.hasSameParentAs(t.start)?(i=e.getDifference(t),s=e.getIntersection(t)):i=[e];const r=[];for(let o of i){o=o._getTransformedByDeletion(n.sourcePosition,n.howMany);const a=n.getMovedRangeStart(),l=o.start.hasSameParentAs(a),c=o._getTransformedByInsertion(a,n.howMany,l);r.push(...c)}return s&&r.push(s._getTransformedByMove(n.sourcePosition,n.targetPosition,n.howMany,!1)[0]),r}x($,B,(e,n)=>{if(e.range.end.isEqual(n.insertionPosition))return n.graveyardPosition||e.range.end.offset++,[e];if(e.range.start.hasSameParentAs(n.splitPosition)&&e.range.containsPosition(n.splitPosition)){const t=e.clone();return t.range=new m(n.moveTargetPosition.clone(),e.range.end._getCombined(n.splitPosition,n.moveTargetPosition)),e.range.end=n.splitPosition.clone(),e.range.end.stickiness="toPrevious",[e,t]}return e.range=e.range._getTransformedBySplitOperation(n),[e]});x(z,$,(e,n)=>{const t=[e];if(e.shouldReceiveAttributes&&e.position.hasSameParentAs(n.range.start)&&n.range.containsPosition(e.position)){const s=ci(e,n.key,n.newValue);s&&t.push(s)}return t});x(z,z,(e,n,t)=>e.position.isEqual(n.position)&&t.aIsStrong?[e]:(e.position=e.position._getTransformedByInsertOperation(n),[e]));x(z,R,(e,n)=>(e.position=e.position._getTransformedByMoveOperation(n),[e]));x(z,B,(e,n)=>(e.position=e.position._getTransformedBySplitOperation(n),[e]));x(z,q,(e,n)=>(e.position=e.position._getTransformedByMergeOperation(n),[e]));x(K,z,(e,n)=>(e.oldRange&&(e.oldRange=e.oldRange._getTransformedByInsertOperation(n)[0]),e.newRange&&(e.newRange=e.newRange._getTransformedByInsertOperation(n)[0]),[e]));x(K,K,(e,n,t)=>{if(e.name==n.name)if(t.aIsStrong)e.oldRange=n.newRange?n.newRange.clone():null;else return[new L(0)];return[e]});x(K,q,(e,n)=>(e.oldRange&&(e.oldRange=e.oldRange._getTransformedByMergeOperation(n)),e.newRange&&(e.newRange=e.newRange._getTransformedByMergeOperation(n)),[e]));x(K,R,(e,n)=>{const t=[e];if(e.oldRange&&(e.oldRange=m._createFromRanges(e.oldRange._getTransformedByMoveOperation(n))),e.newRange){const s=e.newRange._getTransformedByMoveOperation(n);e.newRange=s[0];for(let i=1;i<s.length;i++){const r=e.clone();r.oldRange=null,r.newRange=s[i],r.baseVersion=-1,t.push(r)}}return t});x(K,B,(e,n,t)=>{if(e.oldRange&&(e.oldRange=e.oldRange._getTransformedBySplitOperation(n)),e.newRange){if(t.abRelation){const s=e.newRange._getTransformedBySplitOperation(n);return e.newRange.start.isEqual(n.splitPosition)&&t.abRelation.wasStartBeforeMergedElement?e.newRange.start=w._createAt(n.insertionPosition):e.newRange.start.isEqual(n.splitPosition)&&!t.abRelation.wasInLeftElement?e.newRange.start=w._createAt(n.moveTargetPosition):e.newRange.start=s.start,e.newRange.end.isEqual(n.splitPosition)&&t.abRelation.wasInRightElement?e.newRange.end=w._createAt(n.moveTargetPosition):e.newRange.end.isEqual(n.splitPosition)&&t.abRelation.wasEndBeforeMergedElement?e.newRange.end=w._createAt(n.insertionPosition):e.newRange.end=s.end,[e]}e.newRange=e.newRange._getTransformedBySplitOperation(n)}return[e]});x(q,z,(e,n)=>(e.sourcePosition.hasSameParentAs(n.position)&&(e.howMany+=n.howMany),e.sourcePosition=e.sourcePosition._getTransformedByInsertOperation(n),e.targetPosition=e.targetPosition._getTransformedByInsertOperation(n),[e]));x(q,q,(e,n,t)=>{if(e.sourcePosition.isEqual(n.sourcePosition)&&e.targetPosition.isEqual(n.targetPosition))if(t.bWasUndone){const s=n.graveyardPosition.path.slice();return s.push(0),e.sourcePosition=new w(n.graveyardPosition.root,s),e.howMany=0,[e]}else return[new L(0)];if(e.sourcePosition.isEqual(n.sourcePosition)&&!e.targetPosition.isEqual(n.targetPosition)&&!t.bWasUndone&&t.abRelation!="splitAtSource"){const s=e.targetPosition.root.rootName=="$graveyard",i=n.targetPosition.root.rootName=="$graveyard";if(i&&!s||!(s&&!i)&&t.aIsStrong){const l=n.targetPosition._getTransformedByMergeOperation(n),c=e.targetPosition._getTransformedByMergeOperation(n);return[new R(l,e.howMany,c,0)]}else return[new L(0)]}return e.sourcePosition.hasSameParentAs(n.targetPosition)&&(e.howMany+=n.howMany),e.sourcePosition=e.sourcePosition._getTransformedByMergeOperation(n),e.targetPosition=e.targetPosition._getTransformedByMergeOperation(n),(!e.graveyardPosition.isEqual(n.graveyardPosition)||!t.aIsStrong)&&(e.graveyardPosition=e.graveyardPosition._getTransformedByMergeOperation(n)),[e]});x(q,R,(e,n,t)=>{const s=m._createFromPositionAndShift(n.sourcePosition,n.howMany);return n.type=="remove"&&!t.bWasUndone&&e.deletionPosition.hasSameParentAs(n.sourcePosition)&&s.containsPosition(e.sourcePosition)?[new L(0)]:(n.sourcePosition.getShiftedBy(n.howMany).isEqual(e.sourcePosition)?e.sourcePosition.stickiness="toNone":n.targetPosition.isEqual(e.sourcePosition)&&t.abRelation=="mergeSourceAffected"?e.sourcePosition.stickiness="toNext":n.sourcePosition.isEqual(e.targetPosition)?(e.targetPosition.stickiness="toNone",e.howMany-=n.howMany):n.targetPosition.isEqual(e.targetPosition)&&t.abRelation=="mergeTargetWasBefore"?(e.targetPosition.stickiness="toPrevious",e.howMany+=n.howMany):(e.sourcePosition.hasSameParentAs(n.targetPosition)&&(e.howMany+=n.howMany),e.sourcePosition.hasSameParentAs(n.sourcePosition)&&(e.howMany-=n.howMany)),e.sourcePosition=e.sourcePosition._getTransformedByMoveOperation(n),e.targetPosition=e.targetPosition._getTransformedByMoveOperation(n),e.sourcePosition.stickiness="toPrevious",e.targetPosition.stickiness="toNext",e.graveyardPosition.isEqual(n.targetPosition)||(e.graveyardPosition=e.graveyardPosition._getTransformedByMoveOperation(n)),[e])});x(q,B,(e,n,t)=>{if(n.graveyardPosition&&(e.graveyardPosition=e.graveyardPosition._getTransformedByDeletion(n.graveyardPosition,1),e.deletionPosition.isEqual(n.graveyardPosition)&&(e.howMany=n.howMany)),e.targetPosition.isEqual(n.splitPosition)&&(n.graveyardPosition&&e.deletionPosition.isEqual(n.graveyardPosition)||t.abRelation=="mergeTargetNotMoved"))return e.sourcePosition=e.sourcePosition._getTransformedBySplitOperation(n),[e];if(e.sourcePosition.isEqual(n.splitPosition)){if(t.abRelation=="mergeSourceNotMoved")return e.howMany=0,e.targetPosition=e.targetPosition._getTransformedBySplitOperation(n),[e];if(t.abRelation=="mergeSameElement"||e.sourcePosition.offset>0)return e.sourcePosition=n.moveTargetPosition.clone(),e.targetPosition=e.targetPosition._getTransformedBySplitOperation(n),[e]}return e.sourcePosition.hasSameParentAs(n.splitPosition)&&(e.howMany=n.splitPosition.offset),e.sourcePosition=e.sourcePosition._getTransformedBySplitOperation(n),e.targetPosition=e.targetPosition._getTransformedBySplitOperation(n),[e]});x(R,z,(e,n)=>{const s=m._createFromPositionAndShift(e.sourcePosition,e.howMany)._getTransformedByInsertOperation(n,!1)[0];return e.sourcePosition=s.start,e.howMany=s.end.offset-s.start.offset,e.targetPosition.isEqual(n.position)||(e.targetPosition=e.targetPosition._getTransformedByInsertOperation(n)),[e]});x(R,R,(e,n,t)=>{const s=m._createFromPositionAndShift(e.sourcePosition,e.howMany),i=m._createFromPositionAndShift(n.sourcePosition,n.howMany);let r=t.aIsStrong,o=!t.aIsStrong;t.abRelation=="insertBefore"||t.baRelation=="insertAfter"?o=!0:(t.abRelation=="insertAfter"||t.baRelation=="insertBefore")&&(o=!1);let a;if(e.targetPosition.isEqual(n.targetPosition)&&o?a=e.targetPosition._getTransformedByDeletion(n.sourcePosition,n.howMany):a=e.targetPosition._getTransformedByMove(n.sourcePosition,n.targetPosition,n.howMany),os(e,n)&&os(n,e))return[n.getReversed()];if(s.containsPosition(n.targetPosition)&&s.containsRange(i,!0))return s.start=s.start._getTransformedByMove(n.sourcePosition,n.targetPosition,n.howMany),s.end=s.end._getTransformedByMove(n.sourcePosition,n.targetPosition,n.howMany),$t([s],a);if(i.containsPosition(e.targetPosition)&&i.containsRange(s,!0))return s.start=s.start._getCombined(n.sourcePosition,n.getMovedRangeStart()),s.end=s.end._getCombined(n.sourcePosition,n.getMovedRangeStart()),$t([s],a);const u=j(e.sourcePosition.getParentPath(),n.sourcePosition.getParentPath());if(u=="prefix"||u=="extension")return s.start=s.start._getTransformedByMove(n.sourcePosition,n.targetPosition,n.howMany),s.end=s.end._getTransformedByMove(n.sourcePosition,n.targetPosition,n.howMany),$t([s],a);e.type=="remove"&&n.type!="remove"&&!t.aWasUndone&&!t.forceWeakRemove?r=!0:e.type!="remove"&&n.type=="remove"&&!t.bWasUndone&&!t.forceWeakRemove&&(r=!1);const d=[],p=s.getDifference(i);for(const k of p){k.start=k.start._getTransformedByDeletion(n.sourcePosition,n.howMany),k.end=k.end._getTransformedByDeletion(n.sourcePosition,n.howMany);const A=j(k.start.getParentPath(),n.getMovedRangeStart().getParentPath())=="same",S=k._getTransformedByInsertion(n.getMovedRangeStart(),n.howMany,A);d.push(...S)}const g=s.getIntersection(i);return g!==null&&r&&(g.start=g.start._getCombined(n.sourcePosition,n.getMovedRangeStart()),g.end=g.end._getCombined(n.sourcePosition,n.getMovedRangeStart()),d.length===0?d.push(g):d.length==1?i.start.isBefore(s.start)||i.start.isEqual(s.start)?d.unshift(g):d.push(g):d.splice(1,0,g)),d.length===0?[new L(e.baseVersion)]:$t(d,a)});x(R,B,(e,n,t)=>{let s=e.targetPosition.clone();(!e.targetPosition.isEqual(n.insertionPosition)||!n.graveyardPosition||t.abRelation=="moveTargetAfter")&&(s=e.targetPosition._getTransformedBySplitOperation(n));const i=m._createFromPositionAndShift(e.sourcePosition,e.howMany);if(i.end.isEqual(n.insertionPosition))return n.graveyardPosition||e.howMany++,e.targetPosition=s,[e];if(i.start.hasSameParentAs(n.splitPosition)&&i.containsPosition(n.splitPosition)){let a=new m(n.splitPosition,i.end);a=a._getTransformedBySplitOperation(n);const l=[new m(i.start,n.splitPosition),a];return $t(l,s)}e.targetPosition.isEqual(n.splitPosition)&&t.abRelation=="insertAtSource"&&(s=n.moveTargetPosition),e.targetPosition.isEqual(n.insertionPosition)&&t.abRelation=="insertBetween"&&(s=e.targetPosition);const o=[i._getTransformedBySplitOperation(n)];if(n.graveyardPosition){const a=i.start.isEqual(n.graveyardPosition)||i.containsPosition(n.graveyardPosition);e.howMany>1&&a&&!t.aWasUndone&&o.push(m._createFromPositionAndShift(n.insertionPosition,1))}return $t(o,s)});x(R,q,(e,n,t)=>{const s=m._createFromPositionAndShift(e.sourcePosition,e.howMany);if(n.deletionPosition.hasSameParentAs(e.sourcePosition)&&s.containsPosition(n.sourcePosition)){if(e.type=="remove"&&!t.forceWeakRemove){if(!t.aWasUndone){const o=[];let a=n.graveyardPosition.clone(),l=n.targetPosition._getTransformedByMergeOperation(n);const c=e.targetPosition.getTransformedByOperation(n);e.howMany>1&&(o.push(new R(e.sourcePosition,e.howMany-1,c,0)),a=a._getTransformedByMove(e.sourcePosition,c,e.howMany-1),l=l._getTransformedByMove(e.sourcePosition,c,e.howMany-1));const u=n.deletionPosition._getCombined(e.sourcePosition,c),d=new R(a,1,u,0),p=d.getMovedRangeStart().path.slice();p.push(0);const g=new w(d.targetPosition.root,p);l=l._getTransformedByMove(a,u,1);const k=new R(l,n.howMany,g,0);return o.push(d),o.push(k),o}}else if(e.howMany==1)return t.bWasUndone?(e.sourcePosition=n.graveyardPosition.clone(),e.targetPosition=e.targetPosition._getTransformedByMergeOperation(n),[e]):[new L(0)]}const r=m._createFromPositionAndShift(e.sourcePosition,e.howMany)._getTransformedByMergeOperation(n);return e.sourcePosition=r.start,e.howMany=r.end.offset-r.start.offset,e.targetPosition=e.targetPosition._getTransformedByMergeOperation(n),[e]});x(U,z,(e,n)=>(e.position=e.position._getTransformedByInsertOperation(n),[e]));x(U,q,(e,n)=>e.position.isEqual(n.deletionPosition)?(e.position=n.graveyardPosition.clone(),e.position.stickiness="toNext",[e]):(e.position=e.position._getTransformedByMergeOperation(n),[e]));x(U,R,(e,n)=>(e.position=e.position._getTransformedByMoveOperation(n),[e]));x(U,U,(e,n,t)=>{if(e.position.isEqual(n.position))if(t.aIsStrong)e.oldName=n.newName;else return[new L(0)];return[e]});x(U,B,(e,n)=>{const t=e.position.path,s=n.splitPosition.getParentPath();if(j(t,s)=="same"&&!n.graveyardPosition){const i=new U(e.position.getShiftedBy(1),e.oldName,e.newName,0);return[e,i]}return e.position=e.position._getTransformedBySplitOperation(n),[e]});x(pt,pt,(e,n,t)=>{if(e.root===n.root&&e.key===n.key){if(!t.aIsStrong||e.newValue===n.newValue)return[new L(0)];e.oldValue=n.newValue}return[e]});x(mt,mt,(e,n)=>e.rootName===n.rootName&&e.isAdd===n.isAdd?[new L(0)]:[e]);x(B,z,(e,n)=>(e.splitPosition.hasSameParentAs(n.position)&&e.splitPosition.offset<n.position.offset&&(e.howMany+=n.howMany),e.splitPosition=e.splitPosition._getTransformedByInsertOperation(n),e.insertionPosition=e.insertionPosition._getTransformedByInsertOperation(n),[e]));x(B,q,(e,n,t)=>{if(!e.graveyardPosition&&!t.bWasUndone&&e.splitPosition.hasSameParentAs(n.sourcePosition)){const s=n.graveyardPosition.path.slice();s.push(0);const i=new w(n.graveyardPosition.root,s),r=B.getInsertionPosition(new w(n.graveyardPosition.root,s)),o=new B(i,0,r,null,0);return e.splitPosition=e.splitPosition._getTransformedByMergeOperation(n),e.insertionPosition=B.getInsertionPosition(e.splitPosition),e.graveyardPosition=o.insertionPosition.clone(),e.graveyardPosition.stickiness="toNext",[o,e]}return e.splitPosition.hasSameParentAs(n.deletionPosition)&&!e.splitPosition.isAfter(n.deletionPosition)&&e.howMany--,e.splitPosition.hasSameParentAs(n.targetPosition)&&(e.howMany+=n.howMany),e.splitPosition=e.splitPosition._getTransformedByMergeOperation(n),e.insertionPosition=B.getInsertionPosition(e.splitPosition),e.graveyardPosition&&(e.graveyardPosition=e.graveyardPosition._getTransformedByMergeOperation(n)),[e]});x(B,R,(e,n,t)=>{const s=m._createFromPositionAndShift(n.sourcePosition,n.howMany);if(e.graveyardPosition){const r=s.start.isEqual(e.graveyardPosition)||s.containsPosition(e.graveyardPosition);if(!t.bWasUndone&&r){const o=e.splitPosition._getTransformedByMoveOperation(n),a=e.graveyardPosition._getTransformedByMoveOperation(n),l=a.path.slice();l.push(0);const c=new w(a.root,l);return[new R(o,e.howMany,c,0)]}e.graveyardPosition=e.graveyardPosition._getTransformedByMoveOperation(n)}const i=e.splitPosition.isEqual(n.targetPosition);if(i&&(t.baRelation=="insertAtSource"||t.abRelation=="splitBefore"))return e.howMany+=n.howMany,e.splitPosition=e.splitPosition._getTransformedByDeletion(n.sourcePosition,n.howMany),e.insertionPosition=B.getInsertionPosition(e.splitPosition),[e];if(i&&t.abRelation&&t.abRelation.howMany){const{howMany:r,offset:o}=t.abRelation;return e.howMany+=r,e.splitPosition=e.splitPosition.getShiftedBy(o),[e]}if(e.splitPosition.hasSameParentAs(n.sourcePosition)&&s.containsPosition(e.splitPosition)){const r=n.howMany-(e.splitPosition.offset-n.sourcePosition.offset);return e.howMany-=r,e.splitPosition.hasSameParentAs(n.targetPosition)&&e.splitPosition.offset<n.targetPosition.offset&&(e.howMany+=n.howMany),e.splitPosition=n.sourcePosition.clone(),e.insertionPosition=B.getInsertionPosition(e.splitPosition),[e]}return n.sourcePosition.isEqual(n.targetPosition)||(e.splitPosition.hasSameParentAs(n.sourcePosition)&&e.splitPosition.offset<=n.sourcePosition.offset&&(e.howMany-=n.howMany),e.splitPosition.hasSameParentAs(n.targetPosition)&&e.splitPosition.offset<n.targetPosition.offset&&(e.howMany+=n.howMany)),e.splitPosition.stickiness="toNone",e.splitPosition=e.splitPosition._getTransformedByMoveOperation(n),e.splitPosition.stickiness="toNext",e.graveyardPosition?e.insertionPosition=e.insertionPosition._getTransformedByMoveOperation(n):e.insertionPosition=B.getInsertionPosition(e.splitPosition),[e]});x(B,B,(e,n,t)=>{if(e.splitPosition.isEqual(n.splitPosition)){if(!e.graveyardPosition&&!n.graveyardPosition)return[new L(0)];if(e.graveyardPosition&&n.graveyardPosition&&e.graveyardPosition.isEqual(n.graveyardPosition))return[new L(0)];if(t.abRelation=="splitBefore")return e.howMany=0,e.graveyardPosition=e.graveyardPosition._getTransformedBySplitOperation(n),[e]}if(e.graveyardPosition&&n.graveyardPosition&&e.graveyardPosition.isEqual(n.graveyardPosition)){const s=e.splitPosition.root.rootName=="$graveyard",i=n.splitPosition.root.rootName=="$graveyard";if(i&&!s||!(s&&!i)&&t.aIsStrong){const l=[];return n.howMany&&l.push(new R(n.moveTargetPosition,n.howMany,n.splitPosition,0)),e.howMany&&l.push(new R(e.splitPosition,e.howMany,e.moveTargetPosition,0)),l}else return[new L(0)]}if(e.graveyardPosition&&(e.graveyardPosition=e.graveyardPosition._getTransformedBySplitOperation(n)),e.splitPosition.isEqual(n.insertionPosition)&&t.abRelation=="splitBefore")return e.howMany++,[e];if(n.splitPosition.isEqual(e.insertionPosition)&&t.baRelation=="splitBefore"){const s=n.insertionPosition.path.slice();s.push(0);const i=new w(n.insertionPosition.root,s),r=new R(e.insertionPosition,1,i,0);return[e,r]}return e.splitPosition.hasSameParentAs(n.splitPosition)&&e.splitPosition.offset<n.splitPosition.offset&&(e.howMany-=n.howMany),e.splitPosition=e.splitPosition._getTransformedBySplitOperation(n),e.insertionPosition=B.getInsertionPosition(e.splitPosition),[e]});function os(e,n){return e.targetPosition._getTransformedByDeletion(n.sourcePosition,n.howMany)===null}function $t(e,n){const t=[];for(let s=0;s<e.length;s++){const i=e[s],r=new R(i.start,i.end.offset-i.start.offset,n,0);t.push(r);for(let o=s+1;o<e.length;o++)e[o]=e[o]._getTransformedByMove(r.sourcePosition,r.targetPosition,r.howMany)[0];n=n._getTransformedByMove(r.sourcePosition,r.targetPosition,r.howMany)}return t}class Bh extends F(w){constructor(n,t,s="toNone"){if(super(n,t,s),!this.root.is("rootElement"))throw new f("model-liveposition-root-not-rootelement",n);$h.call(this)}detach(){this.stopListening()}toPosition(){return new w(this.root,this.path.slice(),this.stickiness)}static fromPosition(n,t){return new this(n.root,n.path.slice(),t||n.stickiness)}}Bh.prototype.is=function(e){return e==="livePosition"||e==="model:livePosition"||e=="position"||e==="model:position"};function $h(){this.listenTo(this.root.document.model,"applyOperation",(e,n)=>{const t=n[0];t.isDocumentOperation&&Ih.call(this,t)},{priority:"low"})}function Ih(e){const n=this.getTransformedByOperation(e);if(!this.isEqual(n)){const t=this.toPosition();this.path=n.path,this.root=n.root,this.fire("change",t)}}class Fh extends Q{constructor(t,s,i="main"){super(s);h(this,"rootName");h(this,"_document");h(this,"_isAttached",!0);h(this,"_isLoaded",!0);this._document=t,this.rootName=i}get document(){return this._document}isAttached(){return this._isAttached}toJSON(){return this.rootName}}Fh.prototype.is=function(e,n){return n?n===this.name&&(e==="rootElement"||e==="model:rootElement"||e==="element"||e==="model:element"):e==="rootElement"||e==="model:rootElement"||e==="element"||e==="model:element"||e==="node"||e==="model:node"};class Lh extends F(bt){constructor(t,s,i,r){super();h(this,"name");h(this,"_managedUsingOperations");h(this,"_affectsData");h(this,"_liveRange");this.name=t,this._liveRange=this._attachLiveRange(s),this._managedUsingOperations=i,this._affectsData=r}get managedUsingOperations(){if(!this._liveRange)throw new f("marker-destroyed",this);return this._managedUsingOperations}get affectsData(){if(!this._liveRange)throw new f("marker-destroyed",this);return this._affectsData}getData(){return{range:this.getRange(),affectsData:this.affectsData,managedUsingOperations:this.managedUsingOperations}}getStart(){if(!this._liveRange)throw new f("marker-destroyed",this);return this._liveRange.start.clone()}getEnd(){if(!this._liveRange)throw new f("marker-destroyed",this);return this._liveRange.end.clone()}getRange(){if(!this._liveRange)throw new f("marker-destroyed",this);return this._liveRange.toRange()}_attachLiveRange(t){return this._liveRange&&this._detachLiveRange(),t.delegate("change:range").to(this),t.delegate("change:content").to(this),this._liveRange=t,t}_detachLiveRange(){this._liveRange.stopDelegating("change:range",this),this._liveRange.stopDelegating("change:content",this),this._liveRange.detach(),this._liveRange=null}}Lh.prototype.is=function(e){return e==="marker"||e==="model:marker"};class fn extends bt{constructor(t){super();h(this,"markers",new Map);h(this,"_children",new Ht);t&&this._insertChild(0,t)}[Symbol.iterator](){return this.getChildren()}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}get nextSibling(){return null}get previousSibling(){return null}get root(){return this}get parent(){return null}get document(){return null}isAttached(){return!1}getAncestors(){return[]}getChild(t){return this._children.getNode(t)}getChildAtOffset(t){return this._children.getNodeAtOffset(t)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(t){return this._children.getNodeIndex(t)}getChildStartOffset(t){return this._children.getNodeStartOffset(t)}getPath(){return[]}getNodeByPath(t){let s=this;for(const i of t)s=s.getChildAtOffset(i);return s}offsetToIndex(t){return this._children.offsetToIndex(t)}toJSON(){const t=[];for(const s of this._children)t.push(s.toJSON());return t}static fromJSON(t){const s=[];for(const i of t)i.name?s.push(Q.fromJSON(i)):s.push(N.fromJSON(i));return new fn(s)}_appendChild(t){this._insertChild(this.childCount,t)}_insertChild(t,s){const i=zh(s);for(const r of i)r.parent!==null&&r._remove(),r.parent=this;this._children._insertNodes(t,i)}_removeChildren(t,s=1){const i=this._children._removeNodes(t,s);for(const r of i)r.parent=null;return i}}fn.prototype.is=function(e){return e==="documentFragment"||e==="model:documentFragment"};function zh(e){return typeof e=="string"?[new N(e)]:(ft(e)||(e=[e]),Array.from(e).map(n=>typeof n=="string"?new N(n):n instanceof St?new N(n.data,n.getAttributes()):n))}var Dh={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};const le=Dh,hi={};for(const e of Object.keys(le))hi[le[e]]=e;const y={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};var ui=y;for(const e of Object.keys(y)){if(!("channels"in y[e]))throw new Error("missing channels property: "+e);if(!("labels"in y[e]))throw new Error("missing channel labels property: "+e);if(y[e].labels.length!==y[e].channels)throw new Error("channel and label counts mismatch: "+e);const{channels:n,labels:t}=y[e];delete y[e].channels,delete y[e].labels,Object.defineProperty(y[e],"channels",{value:n}),Object.defineProperty(y[e],"labels",{value:t})}y.rgb.hsl=function(e){const n=e[0]/255,t=e[1]/255,s=e[2]/255,i=Math.min(n,t,s),r=Math.max(n,t,s),o=r-i;let a,l;r===i?a=0:n===r?a=(t-s)/o:t===r?a=2+(s-n)/o:s===r&&(a=4+(n-t)/o),a=Math.min(a*60,360),a<0&&(a+=360);const c=(i+r)/2;return r===i?l=0:c<=.5?l=o/(r+i):l=o/(2-r-i),[a,l*100,c*100]};y.rgb.hsv=function(e){let n,t,s,i,r;const o=e[0]/255,a=e[1]/255,l=e[2]/255,c=Math.max(o,a,l),u=c-Math.min(o,a,l),d=function(p){return(c-p)/6/u+1/2};return u===0?(i=0,r=0):(r=u/c,n=d(o),t=d(a),s=d(l),o===c?i=s-t:a===c?i=1/3+n-s:l===c&&(i=2/3+t-n),i<0?i+=1:i>1&&(i-=1)),[i*360,r*100,c*100]};y.rgb.hwb=function(e){const n=e[0],t=e[1];let s=e[2];const i=y.rgb.hsl(e)[0],r=1/255*Math.min(n,Math.min(t,s));return s=1-1/255*Math.max(n,Math.max(t,s)),[i,r*100,s*100]};y.rgb.cmyk=function(e){const n=e[0]/255,t=e[1]/255,s=e[2]/255,i=Math.min(1-n,1-t,1-s),r=(1-n-i)/(1-i)||0,o=(1-t-i)/(1-i)||0,a=(1-s-i)/(1-i)||0;return[r*100,o*100,a*100,i*100]};function qh(e,n){return(e[0]-n[0])**2+(e[1]-n[1])**2+(e[2]-n[2])**2}y.rgb.keyword=function(e){const n=hi[e];if(n)return n;let t=1/0,s;for(const i of Object.keys(le)){const r=le[i],o=qh(e,r);o<t&&(t=o,s=i)}return s};y.keyword.rgb=function(e){return le[e]};y.rgb.xyz=function(e){let n=e[0]/255,t=e[1]/255,s=e[2]/255;n=n>.04045?((n+.055)/1.055)**2.4:n/12.92,t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,s=s>.04045?((s+.055)/1.055)**2.4:s/12.92;const i=n*.4124+t*.3576+s*.1805,r=n*.2126+t*.7152+s*.0722,o=n*.0193+t*.1192+s*.9505;return[i*100,r*100,o*100]};y.rgb.lab=function(e){const n=y.rgb.xyz(e);let t=n[0],s=n[1],i=n[2];t/=95.047,s/=100,i/=108.883,t=t>.008856?t**(1/3):7.787*t+16/116,s=s>.008856?s**(1/3):7.787*s+16/116,i=i>.008856?i**(1/3):7.787*i+16/116;const r=116*s-16,o=500*(t-s),a=200*(s-i);return[r,o,a]};y.hsl.rgb=function(e){const n=e[0]/360,t=e[1]/100,s=e[2]/100;let i,r,o;if(t===0)return o=s*255,[o,o,o];s<.5?i=s*(1+t):i=s+t-s*t;const a=2*s-i,l=[0,0,0];for(let c=0;c<3;c++)r=n+1/3*-(c-1),r<0&&r++,r>1&&r--,6*r<1?o=a+(i-a)*6*r:2*r<1?o=i:3*r<2?o=a+(i-a)*(2/3-r)*6:o=a,l[c]=o*255;return l};y.hsl.hsv=function(e){const n=e[0];let t=e[1]/100,s=e[2]/100,i=t;const r=Math.max(s,.01);s*=2,t*=s<=1?s:2-s,i*=r<=1?r:2-r;const o=(s+t)/2,a=s===0?2*i/(r+i):2*t/(s+t);return[n,a*100,o*100]};y.hsv.rgb=function(e){const n=e[0]/60,t=e[1]/100;let s=e[2]/100;const i=Math.floor(n)%6,r=n-Math.floor(n),o=255*s*(1-t),a=255*s*(1-t*r),l=255*s*(1-t*(1-r));switch(s*=255,i){case 0:return[s,l,o];case 1:return[a,s,o];case 2:return[o,s,l];case 3:return[o,a,s];case 4:return[l,o,s];case 5:return[s,o,a]}};y.hsv.hsl=function(e){const n=e[0],t=e[1]/100,s=e[2]/100,i=Math.max(s,.01);let r,o;o=(2-t)*s;const a=(2-t)*i;return r=t*i,r/=a<=1?a:2-a,r=r||0,o/=2,[n,r*100,o*100]};y.hwb.rgb=function(e){const n=e[0]/360;let t=e[1]/100,s=e[2]/100;const i=t+s;let r;i>1&&(t/=i,s/=i);const o=Math.floor(6*n),a=1-s;r=6*n-o,o&1&&(r=1-r);const l=t+r*(a-t);let c,u,d;switch(o){default:case 6:case 0:c=a,u=l,d=t;break;case 1:c=l,u=a,d=t;break;case 2:c=t,u=a,d=l;break;case 3:c=t,u=l,d=a;break;case 4:c=l,u=t,d=a;break;case 5:c=a,u=t,d=l;break}return[c*255,u*255,d*255]};y.cmyk.rgb=function(e){const n=e[0]/100,t=e[1]/100,s=e[2]/100,i=e[3]/100,r=1-Math.min(1,n*(1-i)+i),o=1-Math.min(1,t*(1-i)+i),a=1-Math.min(1,s*(1-i)+i);return[r*255,o*255,a*255]};y.xyz.rgb=function(e){const n=e[0]/100,t=e[1]/100,s=e[2]/100;let i,r,o;return i=n*3.2406+t*-1.5372+s*-.4986,r=n*-.9689+t*1.8758+s*.0415,o=n*.0557+t*-.204+s*1.057,i=i>.0031308?1.055*i**(1/2.4)-.055:i*12.92,r=r>.0031308?1.055*r**(1/2.4)-.055:r*12.92,o=o>.0031308?1.055*o**(1/2.4)-.055:o*12.92,i=Math.min(Math.max(0,i),1),r=Math.min(Math.max(0,r),1),o=Math.min(Math.max(0,o),1),[i*255,r*255,o*255]};y.xyz.lab=function(e){let n=e[0],t=e[1],s=e[2];n/=95.047,t/=100,s/=108.883,n=n>.008856?n**(1/3):7.787*n+16/116,t=t>.008856?t**(1/3):7.787*t+16/116,s=s>.008856?s**(1/3):7.787*s+16/116;const i=116*t-16,r=500*(n-t),o=200*(t-s);return[i,r,o]};y.lab.xyz=function(e){const n=e[0],t=e[1],s=e[2];let i,r,o;r=(n+16)/116,i=t/500+r,o=r-s/200;const a=r**3,l=i**3,c=o**3;return r=a>.008856?a:(r-16/116)/7.787,i=l>.008856?l:(i-16/116)/7.787,o=c>.008856?c:(o-16/116)/7.787,i*=95.047,r*=100,o*=108.883,[i,r,o]};y.lab.lch=function(e){const n=e[0],t=e[1],s=e[2];let i;i=Math.atan2(s,t)*360/2/Math.PI,i<0&&(i+=360);const o=Math.sqrt(t*t+s*s);return[n,o,i]};y.lch.lab=function(e){const n=e[0],t=e[1],i=e[2]/360*2*Math.PI,r=t*Math.cos(i),o=t*Math.sin(i);return[n,r,o]};y.rgb.ansi16=function(e,n=null){const[t,s,i]=e;let r=n===null?y.rgb.hsv(e)[2]:n;if(r=Math.round(r/50),r===0)return 30;let o=30+(Math.round(i/255)<<2|Math.round(s/255)<<1|Math.round(t/255));return r===2&&(o+=60),o};y.hsv.ansi16=function(e){return y.rgb.ansi16(y.hsv.rgb(e),e[2])};y.rgb.ansi256=function(e){const n=e[0],t=e[1],s=e[2];return n===t&&t===s?n<8?16:n>248?231:Math.round((n-8)/247*24)+232:16+36*Math.round(n/255*5)+6*Math.round(t/255*5)+Math.round(s/255*5)};y.ansi16.rgb=function(e){let n=e%10;if(n===0||n===7)return e>50&&(n+=3.5),n=n/10.5*255,[n,n,n];const t=(~~(e>50)+1)*.5,s=(n&1)*t*255,i=(n>>1&1)*t*255,r=(n>>2&1)*t*255;return[s,i,r]};y.ansi256.rgb=function(e){if(e>=232){const r=(e-232)*10+8;return[r,r,r]}e-=16;let n;const t=Math.floor(e/36)/5*255,s=Math.floor((n=e%36)/6)/5*255,i=n%6/5*255;return[t,s,i]};y.rgb.hex=function(e){const t=(((Math.round(e[0])&255)<<16)+((Math.round(e[1])&255)<<8)+(Math.round(e[2])&255)).toString(16).toUpperCase();return"000000".substring(t.length)+t};y.hex.rgb=function(e){const n=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!n)return[0,0,0];let t=n[0];n[0].length===3&&(t=t.split("").map(a=>a+a).join(""));const s=parseInt(t,16),i=s>>16&255,r=s>>8&255,o=s&255;return[i,r,o]};y.rgb.hcg=function(e){const n=e[0]/255,t=e[1]/255,s=e[2]/255,i=Math.max(Math.max(n,t),s),r=Math.min(Math.min(n,t),s),o=i-r;let a,l;return o<1?a=r/(1-o):a=0,o<=0?l=0:i===n?l=(t-s)/o%6:i===t?l=2+(s-n)/o:l=4+(n-t)/o,l/=6,l%=1,[l*360,o*100,a*100]};y.hsl.hcg=function(e){const n=e[1]/100,t=e[2]/100,s=t<.5?2*n*t:2*n*(1-t);let i=0;return s<1&&(i=(t-.5*s)/(1-s)),[e[0],s*100,i*100]};y.hsv.hcg=function(e){const n=e[1]/100,t=e[2]/100,s=n*t;let i=0;return s<1&&(i=(t-s)/(1-s)),[e[0],s*100,i*100]};y.hcg.rgb=function(e){const n=e[0]/360,t=e[1]/100,s=e[2]/100;if(t===0)return[s*255,s*255,s*255];const i=[0,0,0],r=n%1*6,o=r%1,a=1-o;let l=0;switch(Math.floor(r)){case 0:i[0]=1,i[1]=o,i[2]=0;break;case 1:i[0]=a,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=o;break;case 3:i[0]=0,i[1]=a,i[2]=1;break;case 4:i[0]=o,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=a}return l=(1-t)*s,[(t*i[0]+l)*255,(t*i[1]+l)*255,(t*i[2]+l)*255]};y.hcg.hsv=function(e){const n=e[1]/100,t=e[2]/100,s=n+t*(1-n);let i=0;return s>0&&(i=n/s),[e[0],i*100,s*100]};y.hcg.hsl=function(e){const n=e[1]/100,s=e[2]/100*(1-n)+.5*n;let i=0;return s>0&&s<.5?i=n/(2*s):s>=.5&&s<1&&(i=n/(2*(1-s))),[e[0],i*100,s*100]};y.hcg.hwb=function(e){const n=e[1]/100,t=e[2]/100,s=n+t*(1-n);return[e[0],(s-n)*100,(1-s)*100]};y.hwb.hcg=function(e){const n=e[1]/100,s=1-e[2]/100,i=s-n;let r=0;return i<1&&(r=(s-i)/(1-i)),[e[0],i*100,r*100]};y.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]};y.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]};y.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]};y.gray.hsl=function(e){return[0,0,e[0]]};y.gray.hsv=y.gray.hsl;y.gray.hwb=function(e){return[0,100,e[0]]};y.gray.cmyk=function(e){return[0,0,0,e[0]]};y.gray.lab=function(e){return[e[0],0,0]};y.gray.hex=function(e){const n=Math.round(e[0]/100*255)&255,s=((n<<16)+(n<<8)+n).toString(16).toUpperCase();return"000000".substring(s.length)+s};y.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]};const ye=ui;function jh(){const e={},n=Object.keys(ye);for(let t=n.length,s=0;s<t;s++)e[n[s]]={distance:-1,parent:null};return e}function Vh(e){const n=jh(),t=[e];for(n[e].distance=0;t.length;){const s=t.pop(),i=Object.keys(ye[s]);for(let r=i.length,o=0;o<r;o++){const a=i[o],l=n[a];l.distance===-1&&(l.distance=n[s].distance+1,l.parent=s,t.unshift(a))}}return n}function Jh(e,n){return function(t){return n(e(t))}}function Uh(e,n){const t=[n[e].parent,e];let s=ye[n[e].parent][e],i=n[e].parent;for(;n[i].parent;)t.unshift(n[i].parent),s=Jh(ye[n[i].parent][i],s),i=n[i].parent;return s.conversion=t,s}var Wh=function(e){const n=Vh(e),t={},s=Object.keys(n);for(let i=s.length,r=0;r<i;r++){const o=s[r];n[o].parent!==null&&(t[o]=Uh(o,n))}return t};const Ze=ui,Gh=Wh,Jt={},Kh=Object.keys(Ze);function Zh(e){const n=function(...t){const s=t[0];return s==null?s:(s.length>1&&(t=s),e(t))};return"conversion"in e&&(n.conversion=e.conversion),n}function Hh(e){const n=function(...t){const s=t[0];if(s==null)return s;s.length>1&&(t=s);const i=e(t);if(typeof i=="object")for(let r=i.length,o=0;o<r;o++)i[o]=Math.round(i[o]);return i};return"conversion"in e&&(n.conversion=e.conversion),n}Kh.forEach(e=>{Jt[e]={},Object.defineProperty(Jt[e],"channels",{value:Ze[e].channels}),Object.defineProperty(Jt[e],"labels",{value:Ze[e].labels});const n=Gh(e);Object.keys(n).forEach(s=>{const i=n[s];Jt[e][s]=Hh(i),Jt[e][s].raw=Zh(i)})});/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */var Qh='<svg viewBox="0 0 10 8" xmlns="http://www.w3.org/2000/svg"><path d="M9.055.263v3.972h-6.77M1 4.216l2-2.038m-2 2 2 2.038"/></svg>';new DOMParser().parseFromString(Qh,"image/svg+xml").firstChild;/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Xh=[{listStyle:"disc",typeAttribute:"disc",listType:"bulleted"},{listStyle:"circle",typeAttribute:"circle",listType:"bulleted"},{listStyle:"square",typeAttribute:"square",listType:"bulleted"},{listStyle:"decimal",typeAttribute:"1",listType:"numbered"},{listStyle:"decimal-leading-zero",typeAttribute:null,listType:"numbered"},{listStyle:"lower-roman",typeAttribute:"i",listType:"numbered"},{listStyle:"upper-roman",typeAttribute:"I",listType:"numbered"},{listStyle:"lower-alpha",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-alpha",typeAttribute:"A",listType:"numbered"},{listStyle:"lower-latin",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-latin",typeAttribute:"A",listType:"numbered"}];for(const{listStyle:e,typeAttribute:n,listType:t}of Xh);function fi(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}let zt=fi();function Yh(e){zt=e}const tu=/[&<>"']/,eu=/[&<>"']/g,nu=/[<>"']|&(?!#?\w+;)/,su=/[<>"']|&(?!#?\w+;)/g,iu={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},as=e=>iu[e];function I(e,n){if(n){if(tu.test(e))return e.replace(eu,as)}else if(nu.test(e))return e.replace(su,as);return e}const ru=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function di(e){return e.replace(ru,(n,t)=>(t=t.toLowerCase(),t==="colon"?":":t.charAt(0)==="#"?t.charAt(1)==="x"?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}const ou=/(^|[^\[])\^/g;function E(e,n){e=e.source||e,n=n||"";const t={replace:(s,i)=>(i=i.source||i,i=i.replace(ou,"$1"),e=e.replace(s,i),t),getRegex:()=>new RegExp(e,n)};return t}const au=/[^\w:]/g,lu=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function ls(e,n,t){if(e){let s;try{s=decodeURIComponent(di(t)).replace(au,"").toLowerCase()}catch{return null}if(s.indexOf("javascript:")===0||s.indexOf("vbscript:")===0||s.indexOf("data:")===0)return null}n&&!lu.test(t)&&(t=fu(n,t));try{t=encodeURI(t).replace(/%25/g,"%")}catch{return null}return t}const fe={},cu=/^[^:]+:\/*[^/]*$/,hu=/^([^:]+:)[\s\S]*$/,uu=/^([^:]+:\/*[^/]*)[\s\S]*$/;function fu(e,n){fe[" "+e]||(cu.test(e)?fe[" "+e]=e+"/":fe[" "+e]=pe(e,"/",!0)),e=fe[" "+e];const t=e.indexOf(":")===-1;return n.substring(0,2)==="//"?t?n:e.replace(hu,"$1")+n:n.charAt(0)==="/"?t?n:e.replace(uu,"$1")+n:e+n}const be={exec:function(){}};function Y(e){let n=1,t,s;for(;n<arguments.length;n++){t=arguments[n];for(s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e}function cs(e,n){const t=e.replace(/\|/g,(r,o,a)=>{let l=!1,c=o;for(;--c>=0&&a[c]==="\\";)l=!l;return l?"|":" |"}),s=t.split(/ \|/);let i=0;if(s[0].trim()||s.shift(),s.length>0&&!s[s.length-1].trim()&&s.pop(),s.length>n)s.splice(n);else for(;s.length<n;)s.push("");for(;i<s.length;i++)s[i]=s[i].trim().replace(/\\\|/g,"|");return s}function pe(e,n,t){const s=e.length;if(s===0)return"";let i=0;for(;i<s;){const r=e.charAt(s-i-1);if(r===n&&!t)i++;else if(r!==n&&t)i++;else break}return e.substr(0,s-i)}function du(e,n){if(e.indexOf(n[1])===-1)return-1;const t=e.length;let s=0,i=0;for(;i<t;i++)if(e[i]==="\\")i++;else if(e[i]===n[0])s++;else if(e[i]===n[1]&&(s--,s<0))return i;return-1}function gi(e){e&&e.sanitize&&!e.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function hs(e,n){if(n<1)return"";let t="";for(;n>1;)n&1&&(t+=e),n>>=1,e+=e;return t+e}function us(e,n,t,s){const i=n.href,r=n.title?I(n.title):null,o=e[1].replace(/\\([\[\]])/g,"$1");if(e[0].charAt(0)!=="!"){s.state.inLink=!0;const a={type:"link",raw:t,href:i,title:r,text:o,tokens:s.inlineTokens(o,[])};return s.state.inLink=!1,a}else return{type:"image",raw:t,href:i,title:r,text:I(o)}}function gu(e,n){const t=e.match(/^(\s+)(?:```)/);if(t===null)return n;const s=t[1];return n.split(`
`).map(i=>{const r=i.match(/^\s+/);if(r===null)return i;const[o]=r;return o.length>=s.length?i.slice(s.length):i}).join(`
`)}class dn{constructor(n){this.options=n||zt}space(n){const t=this.rules.block.newline.exec(n);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(n){const t=this.rules.block.code.exec(n);if(t){const s=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?s:pe(s,`
`)}}}fences(n){const t=this.rules.block.fences.exec(n);if(t){const s=t[0],i=gu(s,t[3]||"");return{type:"code",raw:s,lang:t[2]?t[2].trim():t[2],text:i}}}heading(n){const t=this.rules.block.heading.exec(n);if(t){let s=t[2].trim();if(/#$/.test(s)){const r=pe(s,"#");(this.options.pedantic||!r||/ $/.test(r))&&(s=r.trim())}const i={type:"heading",raw:t[0],depth:t[1].length,text:s,tokens:[]};return this.lexer.inline(i.text,i.tokens),i}}hr(n){const t=this.rules.block.hr.exec(n);if(t)return{type:"hr",raw:t[0]}}blockquote(n){const t=this.rules.block.blockquote.exec(n);if(t){const s=t[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:t[0],tokens:this.lexer.blockTokens(s,[]),text:s}}}list(n){let t=this.rules.block.list.exec(n);if(t){let s,i,r,o,a,l,c,u,d,p,g,k,A=t[1].trim();const S=A.length>1,v={type:"list",raw:"",ordered:S,start:S?+A.slice(0,-1):"",loose:!1,items:[]};A=S?`\\d{1,9}\\${A.slice(-1)}`:`\\${A}`,this.options.pedantic&&(A=S?A:"[*+-]");const M=new RegExp(`^( {0,3}${A})((?: [^\\n]*)?(?:\\n|$))`);for(;n&&(k=!1,!(!(t=M.exec(n))||this.rules.block.hr.test(n)));){if(s=t[0],n=n.substring(s.length),u=t[2].split(`
`,1)[0],d=n.split(`
`,1)[0],this.options.pedantic?(o=2,g=u.trimLeft()):(o=t[2].search(/[^ ]/),o=o>4?1:o,g=u.slice(o),o+=t[1].length),l=!1,!u&&/^ *$/.test(d)&&(s+=d+`
`,n=n.substring(d.length+1),k=!0),!k){const W=new RegExp(`^ {0,${Math.min(3,o-1)}}(?:[*+-]|\\d{1,9}[.)])`);for(;n&&(p=n.split(`
`,1)[0],u=p,this.options.pedantic&&(u=u.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!W.test(u));){if(u.search(/[^ ]/)>=o||!u.trim())g+=`
`+u.slice(o);else if(!l)g+=`
`+u;else break;!l&&!u.trim()&&(l=!0),s+=p+`
`,n=n.substring(p.length+1)}}v.loose||(c?v.loose=!0:/\n *\n *$/.test(s)&&(c=!0)),this.options.gfm&&(i=/^\[[ xX]\] /.exec(g),i&&(r=i[0]!=="[ ] ",g=g.replace(/^\[[ xX]\] +/,""))),v.items.push({type:"list_item",raw:s,task:!!i,checked:r,loose:!1,text:g}),v.raw+=s}v.items[v.items.length-1].raw=s.trimRight(),v.items[v.items.length-1].text=g.trimRight(),v.raw=v.raw.trimRight();const dt=v.items.length;for(a=0;a<dt;a++){this.lexer.state.top=!1,v.items[a].tokens=this.lexer.blockTokens(v.items[a].text,[]);const W=v.items[a].tokens.filter(Pt=>Pt.type==="space"),G=W.every(Pt=>{const ce=Pt.raw.split("");let Dt=0;for(const _i of ce)if(_i===`
`&&(Dt+=1),Dt>1)return!0;return!1});!v.loose&&W.length&&G&&(v.loose=!0,v.items[a].loose=!0)}return v}}html(n){const t=this.rules.block.html.exec(n);if(t){const s={type:"html",raw:t[0],pre:!this.options.sanitizer&&(t[1]==="pre"||t[1]==="script"||t[1]==="style"),text:t[0]};return this.options.sanitize&&(s.type="paragraph",s.text=this.options.sanitizer?this.options.sanitizer(t[0]):I(t[0]),s.tokens=[],this.lexer.inline(s.text,s.tokens)),s}}def(n){const t=this.rules.block.def.exec(n);if(t)return t[3]&&(t[3]=t[3].substring(1,t[3].length-1)),{type:"def",tag:t[1].toLowerCase().replace(/\s+/g," "),raw:t[0],href:t[2],title:t[3]}}table(n){const t=this.rules.block.table.exec(n);if(t){const s={type:"table",header:cs(t[1]).map(i=>({text:i})),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(s.header.length===s.align.length){s.raw=t[0];let i=s.align.length,r,o,a,l;for(r=0;r<i;r++)/^ *-+: *$/.test(s.align[r])?s.align[r]="right":/^ *:-+: *$/.test(s.align[r])?s.align[r]="center":/^ *:-+ *$/.test(s.align[r])?s.align[r]="left":s.align[r]=null;for(i=s.rows.length,r=0;r<i;r++)s.rows[r]=cs(s.rows[r],s.header.length).map(c=>({text:c}));for(i=s.header.length,o=0;o<i;o++)s.header[o].tokens=[],this.lexer.inlineTokens(s.header[o].text,s.header[o].tokens);for(i=s.rows.length,o=0;o<i;o++)for(l=s.rows[o],a=0;a<l.length;a++)l[a].tokens=[],this.lexer.inlineTokens(l[a].text,l[a].tokens);return s}}}lheading(n){const t=this.rules.block.lheading.exec(n);if(t){const s={type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:[]};return this.lexer.inline(s.text,s.tokens),s}}paragraph(n){const t=this.rules.block.paragraph.exec(n);if(t){const s={type:"paragraph",raw:t[0],text:t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1],tokens:[]};return this.lexer.inline(s.text,s.tokens),s}}text(n){const t=this.rules.block.text.exec(n);if(t){const s={type:"text",raw:t[0],text:t[0],tokens:[]};return this.lexer.inline(s.text,s.tokens),s}}escape(n){const t=this.rules.inline.escape.exec(n);if(t)return{type:"escape",raw:t[0],text:I(t[1])}}tag(n){const t=this.rules.inline.tag.exec(n);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):I(t[0]):t[0]}}link(n){const t=this.rules.inline.link.exec(n);if(t){const s=t[2].trim();if(!this.options.pedantic&&/^</.test(s)){if(!/>$/.test(s))return;const o=pe(s.slice(0,-1),"\\");if((s.length-o.length)%2===0)return}else{const o=du(t[2],"()");if(o>-1){const l=(t[0].indexOf("!")===0?5:4)+t[1].length+o;t[2]=t[2].substring(0,o),t[0]=t[0].substring(0,l).trim(),t[3]=""}}let i=t[2],r="";if(this.options.pedantic){const o=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);o&&(i=o[1],r=o[3])}else r=t[3]?t[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(this.options.pedantic&&!/>$/.test(s)?i=i.slice(1):i=i.slice(1,-1)),us(t,{href:i&&i.replace(this.rules.inline._escapes,"$1"),title:r&&r.replace(this.rules.inline._escapes,"$1")},t[0],this.lexer)}}reflink(n,t){let s;if((s=this.rules.inline.reflink.exec(n))||(s=this.rules.inline.nolink.exec(n))){let i=(s[2]||s[1]).replace(/\s+/g," ");if(i=t[i.toLowerCase()],!i||!i.href){const r=s[0].charAt(0);return{type:"text",raw:r,text:r}}return us(s,i,s[0],this.lexer)}}emStrong(n,t,s=""){let i=this.rules.inline.emStrong.lDelim.exec(n);if(!i||i[3]&&s.match(/[\p{L}\p{N}]/u))return;const r=i[1]||i[2]||"";if(!r||r&&(s===""||this.rules.inline.punctuation.exec(s))){const o=i[0].length-1;let a,l,c=o,u=0;const d=i[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(d.lastIndex=0,t=t.slice(-1*n.length+o);(i=d.exec(t))!=null;){if(a=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!a)continue;if(l=a.length,i[3]||i[4]){c+=l;continue}else if((i[5]||i[6])&&o%3&&!((o+l)%3)){u+=l;continue}if(c-=l,c>0)continue;if(l=Math.min(l,l+c+u),Math.min(o,l)%2){const g=n.slice(1,o+i.index+l);return{type:"em",raw:n.slice(0,o+i.index+l+1),text:g,tokens:this.lexer.inlineTokens(g,[])}}const p=n.slice(2,o+i.index+l-1);return{type:"strong",raw:n.slice(0,o+i.index+l+1),text:p,tokens:this.lexer.inlineTokens(p,[])}}}}codespan(n){const t=this.rules.inline.code.exec(n);if(t){let s=t[2].replace(/\n/g," ");const i=/[^ ]/.test(s),r=/^ /.test(s)&&/ $/.test(s);return i&&r&&(s=s.substring(1,s.length-1)),s=I(s,!0),{type:"codespan",raw:t[0],text:s}}}br(n){const t=this.rules.inline.br.exec(n);if(t)return{type:"br",raw:t[0]}}del(n){const t=this.rules.inline.del.exec(n);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2],[])}}autolink(n,t){const s=this.rules.inline.autolink.exec(n);if(s){let i,r;return s[2]==="@"?(i=I(this.options.mangle?t(s[1]):s[1]),r="mailto:"+i):(i=I(s[1]),r=i),{type:"link",raw:s[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}}}url(n,t){let s;if(s=this.rules.inline.url.exec(n)){let i,r;if(s[2]==="@")i=I(this.options.mangle?t(s[0]):s[0]),r="mailto:"+i;else{let o;do o=s[0],s[0]=this.rules.inline._backpedal.exec(s[0])[0];while(o!==s[0]);i=I(s[0]),s[1]==="www."?r="http://"+i:r=i}return{type:"link",raw:s[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(n,t){const s=this.rules.inline.text.exec(n);if(s){let i;return this.lexer.state.inRawBlock?i=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(s[0]):I(s[0]):s[0]:i=I(this.options.smartypants?t(s[0]):s[0]),{type:"text",raw:s[0],text:i}}}}const b={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)( [^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:be,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};b._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;b._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;b.def=E(b.def).replace("label",b._label).replace("title",b._title).getRegex();b.bullet=/(?:[*+-]|\d{1,9}[.)])/;b.listItemStart=E(/^( *)(bull) */).replace("bull",b.bullet).getRegex();b.list=E(b.list).replace(/bull/g,b.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+b.def.source+")").getRegex();b._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";b._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;b.html=E(b.html,"i").replace("comment",b._comment).replace("tag",b._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();b.paragraph=E(b._paragraph).replace("hr",b.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",b._tag).getRegex();b.blockquote=E(b.blockquote).replace("paragraph",b.paragraph).getRegex();b.normal=Y({},b);b.gfm=Y({},b.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"});b.gfm.table=E(b.gfm.table).replace("hr",b.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",b._tag).getRegex();b.gfm.paragraph=E(b._paragraph).replace("hr",b.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",b.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",b._tag).getRegex();b.pedantic=Y({},b.normal,{html:E(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",b._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:be,paragraph:E(b.normal._paragraph).replace("hr",b.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",b.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const _={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:be,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:be,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};_._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~";_.punctuation=E(_.punctuation).replace(/punctuation/g,_._punctuation).getRegex();_.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g;_.escapedEmSt=/\\\*|\\_/g;_._comment=E(b._comment).replace("(?:-->|$)","-->").getRegex();_.emStrong.lDelim=E(_.emStrong.lDelim).replace(/punct/g,_._punctuation).getRegex();_.emStrong.rDelimAst=E(_.emStrong.rDelimAst,"g").replace(/punct/g,_._punctuation).getRegex();_.emStrong.rDelimUnd=E(_.emStrong.rDelimUnd,"g").replace(/punct/g,_._punctuation).getRegex();_._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g;_._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;_._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;_.autolink=E(_.autolink).replace("scheme",_._scheme).replace("email",_._email).getRegex();_._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;_.tag=E(_.tag).replace("comment",_._comment).replace("attribute",_._attribute).getRegex();_._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;_._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;_._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;_.link=E(_.link).replace("label",_._label).replace("href",_._href).replace("title",_._title).getRegex();_.reflink=E(_.reflink).replace("label",_._label).replace("ref",b._label).getRegex();_.nolink=E(_.nolink).replace("ref",b._label).getRegex();_.reflinkSearch=E(_.reflinkSearch,"g").replace("reflink",_.reflink).replace("nolink",_.nolink).getRegex();_.normal=Y({},_);_.pedantic=Y({},_.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:E(/^!?\[(label)\]\((.*?)\)/).replace("label",_._label).getRegex(),reflink:E(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",_._label).getRegex()});_.gfm=Y({},_.normal,{escape:E(_.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/});_.gfm.url=E(_.gfm.url,"i").replace("email",_.gfm._extended_email).getRegex();_.breaks=Y({},_.gfm,{br:E(_.br).replace("{2,}","*").getRegex(),text:E(_.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});function pu(e){return e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function fs(e){let n="",t,s;const i=e.length;for(t=0;t<i;t++)s=e.charCodeAt(t),Math.random()>.5&&(s="x"+s.toString(16)),n+="&#"+s+";";return n}class lt{constructor(n){this.tokens=[],this.tokens.links=Object.create(null),this.options=n||zt,this.options.tokenizer=this.options.tokenizer||new dn,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:b.normal,inline:_.normal};this.options.pedantic?(t.block=b.pedantic,t.inline=_.pedantic):this.options.gfm&&(t.block=b.gfm,this.options.breaks?t.inline=_.breaks:t.inline=_.gfm),this.tokenizer.rules=t}static get rules(){return{block:b,inline:_}}static lex(n,t){return new lt(t).lex(n)}static lexInline(n,t){return new lt(t).inlineTokens(n)}lex(n){n=n.replace(/\r\n|\r/g,`
`).replace(/\t/g,"    "),this.blockTokens(n,this.tokens);let t;for(;t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens}blockTokens(n,t=[]){this.options.pedantic&&(n=n.replace(/^ +$/gm,""));let s,i,r,o;for(;n;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>(s=a.call({lexer:this},n,t))?(n=n.substring(s.raw.length),t.push(s),!0):!1))){if(s=this.tokenizer.space(n)){n=n.substring(s.raw.length),s.raw.length===1&&t.length>0?t[t.length-1].raw+=`
`:t.push(s);continue}if(s=this.tokenizer.code(n)){n=n.substring(s.raw.length),i=t[t.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+s.raw,i.text+=`
`+s.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(s);continue}if(s=this.tokenizer.fences(n)){n=n.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.heading(n)){n=n.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.hr(n)){n=n.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.blockquote(n)){n=n.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.list(n)){n=n.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.html(n)){n=n.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.def(n)){n=n.substring(s.raw.length),i=t[t.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+s.raw,i.text+=`
`+s.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text):this.tokens.links[s.tag]||(this.tokens.links[s.tag]={href:s.href,title:s.title});continue}if(s=this.tokenizer.table(n)){n=n.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.lheading(n)){n=n.substring(s.raw.length),t.push(s);continue}if(r=n,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const l=n.slice(1);let c;this.options.extensions.startBlock.forEach(function(u){c=u.call({lexer:this},l),typeof c=="number"&&c>=0&&(a=Math.min(a,c))}),a<1/0&&a>=0&&(r=n.substring(0,a+1))}if(this.state.top&&(s=this.tokenizer.paragraph(r))){i=t[t.length-1],o&&i.type==="paragraph"?(i.raw+=`
`+s.raw,i.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(s),o=r.length!==n.length,n=n.substring(s.raw.length);continue}if(s=this.tokenizer.text(n)){n=n.substring(s.raw.length),i=t[t.length-1],i&&i.type==="text"?(i.raw+=`
`+s.raw,i.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(s);continue}if(n){const a="Infinite loop on byte: "+n.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,t}inline(n,t){this.inlineQueue.push({src:n,tokens:t})}inlineTokens(n,t=[]){let s,i,r,o=n,a,l,c;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(o))!=null;)u.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,a.index)+"["+hs("a",a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.blockSkip.exec(o))!=null;)o=o.slice(0,a.index)+"["+hs("a",a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(a=this.tokenizer.rules.inline.escapedEmSt.exec(o))!=null;)o=o.slice(0,a.index)+"++"+o.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;n;)if(l||(c=""),l=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(u=>(s=u.call({lexer:this},n,t))?(n=n.substring(s.raw.length),t.push(s),!0):!1))){if(s=this.tokenizer.escape(n)){n=n.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.tag(n)){n=n.substring(s.raw.length),i=t[t.length-1],i&&s.type==="text"&&i.type==="text"?(i.raw+=s.raw,i.text+=s.text):t.push(s);continue}if(s=this.tokenizer.link(n)){n=n.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.reflink(n,this.tokens.links)){n=n.substring(s.raw.length),i=t[t.length-1],i&&s.type==="text"&&i.type==="text"?(i.raw+=s.raw,i.text+=s.text):t.push(s);continue}if(s=this.tokenizer.emStrong(n,o,c)){n=n.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.codespan(n)){n=n.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.br(n)){n=n.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.del(n)){n=n.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.autolink(n,fs)){n=n.substring(s.raw.length),t.push(s);continue}if(!this.state.inLink&&(s=this.tokenizer.url(n,fs))){n=n.substring(s.raw.length),t.push(s);continue}if(r=n,this.options.extensions&&this.options.extensions.startInline){let u=1/0;const d=n.slice(1);let p;this.options.extensions.startInline.forEach(function(g){p=g.call({lexer:this},d),typeof p=="number"&&p>=0&&(u=Math.min(u,p))}),u<1/0&&u>=0&&(r=n.substring(0,u+1))}if(s=this.tokenizer.inlineText(r,pu)){n=n.substring(s.raw.length),s.raw.slice(-1)!=="_"&&(c=s.raw.slice(-1)),l=!0,i=t[t.length-1],i&&i.type==="text"?(i.raw+=s.raw,i.text+=s.text):t.push(s);continue}if(n){const u="Infinite loop on byte: "+n.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return t}}class gn{constructor(n){this.options=n||zt}code(n,t,s){const i=(t||"").match(/\S*/)[0];if(this.options.highlight){const r=this.options.highlight(n,i);r!=null&&r!==n&&(s=!0,n=r)}return n=n.replace(/\n$/,"")+`
`,i?'<pre><code class="'+this.options.langPrefix+I(i,!0)+'">'+(s?n:I(n,!0))+`</code></pre>
`:"<pre><code>"+(s?n:I(n,!0))+`</code></pre>
`}blockquote(n){return`<blockquote>
`+n+`</blockquote>
`}html(n){return n}heading(n,t,s,i){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+i.slug(s)+'">'+n+"</h"+t+`>
`:"<h"+t+">"+n+"</h"+t+`>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(n,t,s){const i=t?"ol":"ul",r=t&&s!==1?' start="'+s+'"':"";return"<"+i+r+`>
`+n+"</"+i+`>
`}listitem(n){return"<li>"+n+`</li>
`}checkbox(n){return"<input "+(n?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(n){return"<p>"+n+`</p>
`}table(n,t){return t&&(t="<tbody>"+t+"</tbody>"),`<table>
<thead>
`+n+`</thead>
`+t+`</table>
`}tablerow(n){return`<tr>
`+n+`</tr>
`}tablecell(n,t){const s=t.header?"th":"td";return(t.align?"<"+s+' align="'+t.align+'">':"<"+s+">")+n+"</"+s+`>
`}strong(n){return"<strong>"+n+"</strong>"}em(n){return"<em>"+n+"</em>"}codespan(n){return"<code>"+n+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(n){return"<del>"+n+"</del>"}link(n,t,s){if(n=ls(this.options.sanitize,this.options.baseUrl,n),n===null)return s;let i='<a href="'+I(n)+'"';return t&&(i+=' title="'+t+'"'),i+=">"+s+"</a>",i}image(n,t,s){if(n=ls(this.options.sanitize,this.options.baseUrl,n),n===null)return s;let i='<img src="'+n+'" alt="'+s+'"';return t&&(i+=' title="'+t+'"'),i+=this.options.xhtml?"/>":">",i}text(n){return n}}class pi{strong(n){return n}em(n){return n}codespan(n){return n}del(n){return n}html(n){return n}text(n){return n}link(n,t,s){return""+s}image(n,t,s){return""+s}br(){return""}}class mi{constructor(){this.seen={}}serialize(n){return n.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(n,t){let s=n,i=0;if(this.seen.hasOwnProperty(s)){i=this.seen[n];do i++,s=n+"-"+i;while(this.seen.hasOwnProperty(s))}return t||(this.seen[n]=i,this.seen[s]=0),s}slug(n,t={}){const s=this.serialize(n);return this.getNextSafeSlug(s,t.dryrun)}}class ct{constructor(n){this.options=n||zt,this.options.renderer=this.options.renderer||new gn,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new pi,this.slugger=new mi}static parse(n,t){return new ct(t).parse(n)}static parseInline(n,t){return new ct(t).parseInline(n)}parse(n,t=!0){let s="",i,r,o,a,l,c,u,d,p,g,k,A,S,v,M,dt,W,G,Pt;const ce=n.length;for(i=0;i<ce;i++){if(g=n[i],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[g.type]&&(Pt=this.options.extensions.renderers[g.type].call({parser:this},g),Pt!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(g.type))){s+=Pt||"";continue}switch(g.type){case"space":continue;case"hr":{s+=this.renderer.hr();continue}case"heading":{s+=this.renderer.heading(this.parseInline(g.tokens),g.depth,di(this.parseInline(g.tokens,this.textRenderer)),this.slugger);continue}case"code":{s+=this.renderer.code(g.text,g.lang,g.escaped);continue}case"table":{for(d="",u="",a=g.header.length,r=0;r<a;r++)u+=this.renderer.tablecell(this.parseInline(g.header[r].tokens),{header:!0,align:g.align[r]});for(d+=this.renderer.tablerow(u),p="",a=g.rows.length,r=0;r<a;r++){for(c=g.rows[r],u="",l=c.length,o=0;o<l;o++)u+=this.renderer.tablecell(this.parseInline(c[o].tokens),{header:!1,align:g.align[o]});p+=this.renderer.tablerow(u)}s+=this.renderer.table(d,p);continue}case"blockquote":{p=this.parse(g.tokens),s+=this.renderer.blockquote(p);continue}case"list":{for(k=g.ordered,A=g.start,S=g.loose,a=g.items.length,p="",r=0;r<a;r++)M=g.items[r],dt=M.checked,W=M.task,v="",M.task&&(G=this.renderer.checkbox(dt),S?M.tokens.length>0&&M.tokens[0].type==="paragraph"?(M.tokens[0].text=G+" "+M.tokens[0].text,M.tokens[0].tokens&&M.tokens[0].tokens.length>0&&M.tokens[0].tokens[0].type==="text"&&(M.tokens[0].tokens[0].text=G+" "+M.tokens[0].tokens[0].text)):M.tokens.unshift({type:"text",text:G}):v+=G),v+=this.parse(M.tokens,S),p+=this.renderer.listitem(v,W,dt);s+=this.renderer.list(p,k,A);continue}case"html":{s+=this.renderer.html(g.text);continue}case"paragraph":{s+=this.renderer.paragraph(this.parseInline(g.tokens));continue}case"text":{for(p=g.tokens?this.parseInline(g.tokens):g.text;i+1<ce&&n[i+1].type==="text";)g=n[++i],p+=`
`+(g.tokens?this.parseInline(g.tokens):g.text);s+=t?this.renderer.paragraph(p):p;continue}default:{const Dt='Token with "'+g.type+'" type was not found.';if(this.options.silent){console.error(Dt);return}else throw new Error(Dt)}}}return s}parseInline(n,t){t=t||this.renderer;let s="",i,r,o;const a=n.length;for(i=0;i<a;i++){if(r=n[i],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[r.type]&&(o=this.options.extensions.renderers[r.type].call({parser:this},r),o!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(r.type))){s+=o||"";continue}switch(r.type){case"escape":{s+=t.text(r.text);break}case"html":{s+=t.html(r.text);break}case"link":{s+=t.link(r.href,r.title,this.parseInline(r.tokens,t));break}case"image":{s+=t.image(r.href,r.title,r.text);break}case"strong":{s+=t.strong(this.parseInline(r.tokens,t));break}case"em":{s+=t.em(this.parseInline(r.tokens,t));break}case"codespan":{s+=t.codespan(r.text);break}case"br":{s+=t.br();break}case"del":{s+=t.del(this.parseInline(r.tokens,t));break}case"text":{s+=t.text(r.text);break}default:{const l='Token with "'+r.type+'" type was not found.';if(this.options.silent){console.error(l);return}else throw new Error(l)}}}return s}}function P(e,n,t){if(typeof e>"u"||e===null)throw new Error("marked(): input parameter is undefined or null");if(typeof e!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if(typeof n=="function"&&(t=n,n=null),n=Y({},P.defaults,n||{}),gi(n),t){const s=n.highlight;let i;try{i=lt.lex(e,n)}catch(a){return t(a)}const r=function(a){let l;if(!a)try{n.walkTokens&&P.walkTokens(i,n.walkTokens),l=ct.parse(i,n)}catch(c){a=c}return n.highlight=s,a?t(a):t(null,l)};if(!s||s.length<3||(delete n.highlight,!i.length))return r();let o=0;P.walkTokens(i,function(a){a.type==="code"&&(o++,setTimeout(()=>{s(a.text,a.lang,function(l,c){if(l)return r(l);c!=null&&c!==a.text&&(a.text=c,a.escaped=!0),o--,o===0&&r()})},0))}),o===0&&r();return}try{const s=lt.lex(e,n);return n.walkTokens&&P.walkTokens(s,n.walkTokens),ct.parse(s,n)}catch(s){if(s.message+=`
Please report this to https://github.com/markedjs/marked.`,n.silent)return"<p>An error occurred:</p><pre>"+I(s.message+"",!0)+"</pre>";throw s}}P.options=P.setOptions=function(e){return Y(P.defaults,e),Yh(P.defaults),P};P.getDefaults=fi;P.defaults=zt;P.use=function(...e){const n=Y({},...e),t=P.defaults.extensions||{renderers:{},childTokens:{}};let s;e.forEach(i=>{if(i.extensions&&(s=!0,i.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if(r.renderer){const o=t.renderers?t.renderers[r.name]:null;o?t.renderers[r.name]=function(...a){let l=r.renderer.apply(this,a);return l===!1&&(l=o.apply(this,a)),l}:t.renderers[r.name]=r.renderer}if(r.tokenizer){if(!r.level||r.level!=="block"&&r.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");t[r.level]?t[r.level].unshift(r.tokenizer):t[r.level]=[r.tokenizer],r.start&&(r.level==="block"?t.startBlock?t.startBlock.push(r.start):t.startBlock=[r.start]:r.level==="inline"&&(t.startInline?t.startInline.push(r.start):t.startInline=[r.start]))}r.childTokens&&(t.childTokens[r.name]=r.childTokens)})),i.renderer){const r=P.defaults.renderer||new gn;for(const o in i.renderer){const a=r[o];r[o]=(...l)=>{let c=i.renderer[o].apply(r,l);return c===!1&&(c=a.apply(r,l)),c}}n.renderer=r}if(i.tokenizer){const r=P.defaults.tokenizer||new dn;for(const o in i.tokenizer){const a=r[o];r[o]=(...l)=>{let c=i.tokenizer[o].apply(r,l);return c===!1&&(c=a.apply(r,l)),c}}n.tokenizer=r}if(i.walkTokens){const r=P.defaults.walkTokens;n.walkTokens=function(o){i.walkTokens.call(this,o),r&&r.call(this,o)}}s&&(n.extensions=t),P.setOptions(n)})};P.walkTokens=function(e,n){for(const t of e)switch(n.call(P,t),t.type){case"table":{for(const s of t.header)P.walkTokens(s.tokens,n);for(const s of t.rows)for(const i of s)P.walkTokens(i.tokens,n);break}case"list":{P.walkTokens(t.items,n);break}default:P.defaults.extensions&&P.defaults.extensions.childTokens&&P.defaults.extensions.childTokens[t.type]?P.defaults.extensions.childTokens[t.type].forEach(function(s){P.walkTokens(t[s],n)}):t.tokens&&P.walkTokens(t.tokens,n)}};P.parseInline=function(e,n){if(typeof e>"u"||e===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof e!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");n=Y({},P.defaults,n||{}),gi(n);try{const t=lt.lexInline(e,n);return n.walkTokens&&P.walkTokens(t,n.walkTokens),ct.parseInline(t,n)}catch(t){if(t.message+=`
Please report this to https://github.com/markedjs/marked.`,n.silent)return"<p>An error occurred:</p><pre>"+I(t.message+"",!0)+"</pre>";throw t}};P.Parser=ct;P.parser=ct.parse;P.Renderer=gn;P.TextRenderer=pi;P.Lexer=lt;P.lexer=lt.lex;P.Tokenizer=dn;P.Slugger=mi;P.parse=P;P.options;P.setOptions;P.use;P.walkTokens;P.parseInline;ct.parse;lt.lex;var pn=typeof window<"u"?window:{};function mu(){var e=pn.DOMParser,n=!1;try{new e().parseFromString("","text/html")&&(n=!0)}catch{}return n}function _u(){var e=function(){};return wu()?e.prototype.parseFromString=function(n){var t=new window.ActiveXObject("htmlfile");return t.designMode="on",t.open(),t.write(n),t.close(),t}:e.prototype.parseFromString=function(n){var t=document.implementation.createHTMLDocument("");return t.open(),t.write(n),t.close(),t},e}function wu(){var e=!1;try{document.implementation.createHTMLDocument("").open()}catch{pn.ActiveXObject&&(e=!0)}return e}mu()?pn.DOMParser:_u();/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */Zt.arrowup,Zt.arrowdown,Zt.esc;Zt.enter,Zt.tab});export default yu();

import{r as a,a as R,j as e,e as N}from"./app-15f89b86.js";import{s as B}from"./user-service-affa167d.js";import{a as W,g as q}from"./employee-attrition-thunk-9b7cd38a.js";import{M}from"./index-e5a4beb1.js";import{U as $}from"./UserAddOutlined-ffe2d5f3.js";import{m as u}from"./index-4178a254.js";import{U as z}from"./UserDeleteOutlined-b60b88e0.js";import"./genStyleUtils-5f96e1a3.js";import"./typeof-7fd5df1e.js";import"./presets-977134d2.js";import"./toPropertyKey-d8419463.js";import"./createSuper-c7e84a61.js";import"./index-62b1f8a5.js";import"./AntdIcon-caa6af62.js";import"./UnstableContext-799a5b2b.js";import"./regeneratorRuntime-92fa3873.js";import"./asyncToGenerator-8c72b493.js";import"./CheckCircleFilled-536567cb.js";import"./CloseCircleFilled-1fb328e0.js";import"./InfoCircleFilled-15314304.js";import"./useZIndex-a5952232.js";import"./useId-de56b7c9.js";import"./button-9b2d9684.js";import"./omit-644b1847.js";import"./Compact-7cf8c440.js";import"./useSize-08cc114d.js";import"./CloseOutlined-85a7e9fa.js";import"./index-3b2384d6.js";import"./KeyCode-b610de31.js";import"./pickAttrs-3e2a7d55.js";import"./fade-3a77cf3a.js";import"./ContextIsolator-b75a4745.js";import"./useClosable-b6001b82.js";import"./Skeleton-92efc64c.js";import"./useLocale-796d5b5b.js";import"./PurePanel-5e434672.js";function Ee(){var p,m,x,b,f,h,g,y,j,w,v,k;const[E,i]=a.useState(!1),[O,A]=a.useState("");R(t=>t.employees);const[C,_]=a.useState([]),[s,P]=a.useState({});R(t=>t.app);const[o,D]=a.useState({}),[T,c]=a.useState(!1),[r,d]=a.useState({reason:"",resignationReasonSelect:"",dismissalReasonSelect:"",emp_id:((p=s==null?void 0:s.employee)==null?void 0:p.emp_id)||"",separation:""}),F=t=>{const{value:n}=t.target;d({...r,reason:n,resignationReasonSelect:"",dismissalReasonSelect:""})};async function L(t){t.preventDefault();const n=await B({search:O});_(n.data)}async function U(t){var n,S;c(!0);try{const l=await N.dispatch(W({...s,...r}));l.status=="success"?(console.log("ressss",l.status),await N.dispatch(q()),u.success("Successfully Added"),c(!1),i(!1)):(u.error("Employee has been already added to Attrition Records"),c(!1),i(!1))}catch(l){(S=(n=l==null?void 0:l.response)==null?void 0:n.data)!=null&&S.errors?D(l.response.data.errors):u.error("An error occurred. Please try again later."),c(!1)}}const H=C.filter(t=>t.employee!==null&&t.employee!==0);return console.log("employeesasda",s),e.jsxs("div",{className:"my-2",children:[e.jsx("div",{class:"inline-flex rounded-md bg-white shadow-2xl",role:"group",children:e.jsxs("button",{type:"button",onClick:()=>i(!0),class:"inline-flex items-center px-4 py-2 text-sm font-medium text-blue-500 bg-transparent border border-blue-500 rounded-lg hover:bg-blue-500 hover:text-white focus:z-10 focus:ring-2 focus:ring-blue-500 focus:bg-blue-500 focus:text-white      gap-1",children:[e.jsx(z,{className:"text-xl"}),"Select Employee Attirition"]})}),e.jsxs(M,{title:"Select Employee Attrition",centered:!0,open:E,onOk:()=>U(),onCancel:()=>i(!1),width:1e3,okText:"Submit",confirmLoading:T,cancelText:"Cancel",children:[e.jsxs("form",{onSubmit:L,class:"flex items-center w-full mx-auto",children:[e.jsx("label",{for:"simple-search",class:"sr-only",children:"Search"}),e.jsxs("div",{class:"relative w-full",children:[e.jsx("div",{class:"absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none",children:e.jsx($,{})}),e.jsx("input",{onChange:t=>A(t.target.value),type:"text",id:"simple-search",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full ps-10 p-2.5",placeholder:"Search employee..."})]}),e.jsxs("button",{type:"submit",class:"p-2.5 ms-2 text-sm font-medium text-white bg-blue-700 rounded-lg border border-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 ",children:[e.jsx("svg",{class:"w-4 h-4","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",children:e.jsx("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"})}),e.jsx("span",{class:"sr-only",children:"Search"})]})]}),e.jsx("ul",{role:"list",className:"divide-y divide-gray-100 my-3",children:H.map(t=>e.jsxs("li",{className:"flex items-center justify-between gap-x-6 bg-blue-200 rounded-lg px-3",children:[e.jsx("div",{className:"min-w-0 my-3",children:e.jsxs("div",{className:"flex items-start gap-x-3 font-bold",children:[t.fname," ",t.lname]})}),e.jsx("div",{className:"flex flex-none items-center gap-x-4",children:e.jsxs("a",{onClick:()=>P(t),href:t.href,className:"hidden rounded-md bg-white px-2.5 py-1.5 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:block",children:["Choose",e.jsxs("span",{className:"sr-only",children:[", ",t.name]})]})})]},t.id))}),e.jsx("form",{class:"w-full h-full",children:e.jsxs("div",{class:"flex flex-col -mx-3 mb-6",children:[e.jsxs("div",{class:"w-full px-3",children:[e.jsx("label",{class:"block uppercase tracking-wide  text-xs font-bold mb-1 mt-2",children:"Employee No."}),e.jsx("input",{class:"appearance-none block w-full   border border-gray-400 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",id:"grid-text",type:"text",value:(m=s==null?void 0:s.employee)==null?void 0:m.emp_id,placeholder:"",readOnly:!0})]}),e.jsxs("div",{className:"flex flex-1 ",children:[e.jsxs("div",{class:"w-full px-3",children:[e.jsx("label",{class:"block uppercase tracking-wide  text-xs font-bold mb-1 mt-2",children:"job Position"}),e.jsx("input",{value:(x=s==null?void 0:s.employee)==null?void 0:x.position,class:"appearance-none block w-full   border border-gray-400 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",id:"grid-text",type:"text",placeholder:"",readOnly:!0})]}),e.jsxs("div",{class:"w-full px-3",children:[e.jsx("label",{class:"block uppercase tracking-wide  text-xs font-bold mb-1 mt-2",children:"Department"}),e.jsx("input",{value:(b=s==null?void 0:s.employee)==null?void 0:b.dept,class:"appearance-none block w-full   border border-gray-400 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",id:"grid-text",type:"text",placeholder:"",readOnly:!0})]}),e.jsxs("div",{class:"w-full px-3",children:[e.jsxs("label",{class:"block uppercase tracking-wide  text-xs font-bold mb-1 mt-2",children:["Account ",e.jsx("i",{children:"(If Applicable)"})]}),e.jsx("input",{value:((f=s==null?void 0:s.employee)==null?void 0:f.account)??"",class:"appearance-none block w-full   border border-gray-400 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",id:"grid-text",type:"text",placeholder:"",readOnly:!0})]})]}),e.jsxs("div",{className:"flex flex-1",children:[e.jsxs("div",{class:"w-full px-3",children:[e.jsx("label",{class:"block uppercase tracking-wide  text-xs font-bold mb-1 mt-2",children:"Supervisor"}),e.jsx("input",{value:(((g=(h=s==null?void 0:s.employee)==null?void 0:h.user)==null?void 0:g.employee_fname)??"")+" "+(((j=(y=s==null?void 0:s.employee)==null?void 0:y.user)==null?void 0:j.employee_lname)??""),class:"appearance-none block w-full   border border-gray-400 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",id:"grid-text",type:"text",placeholder:"",readOnly:!0})]}),e.jsxs("div",{class:"w-full px-3",children:[e.jsx("label",{class:"block uppercase tracking-wide  text-xs font-bold mb-1 mt-2",children:"EOGS Email"}),e.jsx("input",{value:((w=s==null?void 0:s.employee)==null?void 0:w.eogs)??"",class:"appearance-none block w-full   border border-gray-400 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",id:"grid-text",type:"email",placeholder:"",readOnly:!0})]})]}),e.jsxs("div",{className:"flex flex-1",children:[e.jsxs("div",{class:"w-full px-3",children:[e.jsx("label",{class:"block uppercase tracking-wide  text-xs font-bold mb-1 mt-2",children:"Hired Date"}),e.jsx("input",{class:"appearance-none block w-full   border border-gray-400 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",id:"grid-text",type:"text",value:((v=s==null?void 0:s.employee)==null?void 0:v.hired)??"",placeholder:"",readOnly:!0})]}),e.jsxs("div",{class:"w-full px-3",children:[e.jsx("label",{class:"block uppercase tracking-wide  text-xs font-bold mb-1 mt-2",children:"Status"}),e.jsx("input",{value:((k=s==null?void 0:s.employee)==null?void 0:k.status)??"",class:"appearance-none block w-full   border border-gray-400 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",id:"grid-text",type:"text",placeholder:"",readOnly:!0})]})]}),e.jsxs("div",{className:"flex flex-1",children:[e.jsxs("div",{class:"w-full px-3",children:[e.jsx("label",{class:"block uppercase tracking-wide  text-xs font-bold mb-1 mt-2",children:"Separation Date"}),e.jsx("input",{onChange:t=>d({...r,[t.target.name]:t.target.value}),value:r.separation||"",name:"separation",className:`appearance-none block w-full border py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white ${o!=null&&o.separation?"border-red-500":"border-gray-400"} rounded focus:border-gray-500`,id:"grid-text",type:"date",placeholder:"",required:!0}),(o==null?void 0:o.separation)&&e.jsx("span",{className:"text-red-500 text-sm mt-1",children:"Please input date of separation."})]}),e.jsxs("div",{class:"w-full px-3",children:[e.jsx("label",{class:"block uppercase tracking-wide  text-xs font-bold mb-1 mt-2",children:"Reason for Separation"}),e.jsxs("select",{onChange:F,className:`appearance-none block w-full border py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white ${o!=null&&o.reason?"border-red-500":"border-gray-400"} rounded focus:border-gray-500`,name:"reason",value:r.reason||"",required:!0,children:[e.jsx("option",{value:""}),e.jsx("option",{value:"Resigned",children:"Resignation"}),e.jsx("option",{value:"Dismissal",children:"Dismissal"}),e.jsx("option",{value:"Terminated",children:"Terminated"}),e.jsx("option",{value:"End of Contract",children:"End of Contract"}),e.jsx("option",{value:"EOPE",children:"EOPE (End of Probationary Employment)"}),e.jsx("option",{value:"AWOL",children:"AWOL (Absent Without Official Leave)"})]}),(o==null?void 0:o.reason)&&e.jsx("span",{className:"text-red-500 text-sm mt-1",children:"Please select reason of separation."})]})]}),r.reason==="Resignation"&&e.jsxs("div",{className:"w-full px-3",id:"resignationReason",children:[e.jsx("label",{className:"block uppercase tracking-wide text-xs font-bold mb-1 mt-2",htmlFor:"resignationReasonSelect",children:"Reason for Resignation:"}),e.jsxs("select",{name:"resignationReasonSelect",id:"resignationReasonSelect",className:"appearance-none block w-full border border-gray-400 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",onChange:t=>d({...r,resignationReasonSelect:t.target.value}),children:[e.jsx("option",{value:""}),e.jsx("option",{children:"Shift Career Path"}),e.jsx("option",{children:"Health Reason"}),e.jsx("option",{children:"Pursue Education"}),e.jsx("option",{children:"Family Care"}),e.jsx("option",{children:"Higher Salary"}),e.jsx("option",{children:"Higher Position"}),e.jsx("option",{children:"Better Job Scope"}),e.jsx("option",{children:"Better Environment"})]})]}),r.reason==="Dismissal"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"w-full px-3",id:"dismissalReason",children:[e.jsx("label",{className:"block uppercase tracking-wide text-xs font-bold mb-1 mt-2",htmlFor:"dismissalReasonSelect",children:"Reason for Dismissal:"}),e.jsxs("select",{name:"dismissalReasonSelect",id:"dismissalReasonSelect",className:"appearance-none block w-full border border-gray-400 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",onChange:t=>d({...r,dismissalReasonSelect:t.target.value}),children:[e.jsx("option",{value:""}),e.jsx("option",{children:"Policy Violations"}),e.jsx("option",{children:"Performance"}),e.jsx("option",{children:"Others"})]})]}),e.jsxs("div",{className:"w-full px-3",id:"TerminationReport",children:[e.jsx("label",{className:"block uppercase tracking-wide text-xs font-bold mb-1 mt-2",htmlFor:"TerminationReportSelect",children:"Upload Termination Report:"}),e.jsx("input",{type:"file",name:"TerminationReportSelect[]",id:"TerminationReportSelect",className:"appearance-none block w-full border border-gray-400 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",accept:".jpg, .jpeg, .png, .pdf",multiple:!0})]})]})]})})]})]})}export{Ee as default};

import{r}from"./store-be97c391.js";import{b as B}from"./warning-ac26fe93.js";import{R as de}from"./index-f3aa1ef9.js";import{g as Y,m as Z,r as J,u as pe,d as ge,C as q,c as me}from"./genStyleUtils-83711dd6.js";import{u as ue,r as ve}from"./useBreakpoint-ac3b4255.js";import"./index-bf6defa8.js";import{u as Q,K as fe}from"./KeyCode-18fe19fc.js";import{u as he,t as ye}from"./useSize-b144bbcd.js";import{P as be,c as ee}from"./Compact-78743f5f.js";import{a as Ce,u as xe,g as Se}from"./useId-746721ed.js";import{b as Oe,d as Pe,c as $e,P as ze,T as je}from"./index-99aeffdd.js";import"./app-11e384d0.js";const we=r.createContext({}),K=we,Ne=e=>{const{antCls:o,componentCls:n,iconCls:t,avatarBg:s,avatarColor:i,containerSize:p,containerSizeLG:g,containerSizeSM:c,textFontSize:m,textFontSizeLG:l,textFontSizeSM:C,borderRadius:v,borderRadiusLG:d,borderRadiusSM:x,lineWidth:f,lineType:O}=e,z=(a,S,N)=>({width:a,height:a,borderRadius:"50%",[`&${n}-square`]:{borderRadius:N},[`&${n}-icon`]:{fontSize:S,[`> ${t}`]:{margin:0}}});return{[n]:Object.assign(Object.assign(Object.assign(Object.assign({},J(e)),{position:"relative",display:"inline-flex",justifyContent:"center",alignItems:"center",overflow:"hidden",color:i,whiteSpace:"nowrap",textAlign:"center",verticalAlign:"middle",background:s,border:`${pe(f)} ${O} transparent`,"&-image":{background:"transparent"},[`${o}-image-img`]:{display:"block"}}),z(p,m,v)),{"&-lg":Object.assign({},z(g,l,d)),"&-sm":Object.assign({},z(c,C,x)),"> img":{display:"block",width:"100%",height:"100%",objectFit:"cover"}})}},Ee=e=>{const{componentCls:o,groupBorderColor:n,groupOverlapping:t,groupSpace:s}=e;return{[`${o}-group`]:{display:"inline-flex",[o]:{borderColor:n},"> *:not(:first-child)":{marginInlineStart:t}},[`${o}-group-popover`]:{[`${o} + ${o}`]:{marginInlineStart:s}}}},Te=e=>{const{controlHeight:o,controlHeightLG:n,controlHeightSM:t,fontSize:s,fontSizeLG:i,fontSizeXL:p,fontSizeHeading3:g,marginXS:c,marginXXS:m,colorBorderBg:l}=e;return{containerSize:o,containerSizeLG:n,containerSizeSM:t,textFontSize:Math.round((i+p)/2),textFontSizeLG:g,textFontSizeSM:s,groupSpace:m,groupOverlapping:-c,groupBorderColor:l}},te=Y("Avatar",e=>{const{colorTextLightSolid:o,colorTextPlaceholder:n}=e,t=Z(e,{avatarBg:n,avatarColor:o});return[Ne(t),Ee(t)]},Te);var Be=globalThis&&globalThis.__rest||function(e,o){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&o.indexOf(t)<0&&(n[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,t=Object.getOwnPropertySymbols(e);s<t.length;s++)o.indexOf(t[s])<0&&Object.prototype.propertyIsEnumerable.call(e,t[s])&&(n[t[s]]=e[t[s]]);return n};const ke=(e,o)=>{const[n,t]=r.useState(1),[s,i]=r.useState(!1),[p,g]=r.useState(!0),c=r.useRef(null),m=r.useRef(null),l=ge(o,c),{getPrefixCls:C,avatar:v}=r.useContext(q),d=r.useContext(K),x=()=>{if(!m.current||!c.current)return;const h=m.current.offsetWidth,y=c.current.offsetWidth;if(h!==0&&y!==0){const{gap:T=4}=e;T*2<y&&t(y-T*2<h?(y-T*2)/h:1)}};r.useEffect(()=>{i(!0)},[]),r.useEffect(()=>{g(!0),t(1)},[e.src]),r.useEffect(x,[e.gap]);const f=()=>{const{onError:h}=e;(h==null?void 0:h())!==!1&&g(!1)},{prefixCls:O,shape:z,size:a,src:S,srcSet:N,icon:$,className:k,rootClassName:I,alt:D,draggable:_,children:j,crossOrigin:E}=e,w=Be(e,["prefixCls","shape","size","src","srcSet","icon","className","rootClassName","alt","draggable","children","crossOrigin"]),u=he(h=>{var y,T;return(T=(y=a??(d==null?void 0:d.size))!==null&&y!==void 0?y:h)!==null&&T!==void 0?T:"default"}),R=Object.keys(typeof u=="object"?u||{}:{}).some(h=>["xs","sm","md","lg","xl","xxl"].includes(h)),A=ue(R),M=r.useMemo(()=>{if(typeof u!="object")return{};const h=ve.find(T=>A[T]),y=u[h];return y?{width:y,height:y,fontSize:y&&($||j)?y/2:18}:{}},[A,u]),b=C("avatar",O),W=Q(b),[F,H,P]=te(b,W),L=B({[`${b}-lg`]:u==="large",[`${b}-sm`]:u==="small"}),G=r.isValidElement(S),ie=z||(d==null?void 0:d.shape)||"circle",le=B(b,L,v==null?void 0:v.className,`${b}-${ie}`,{[`${b}-image`]:G||S&&p,[`${b}-icon`]:!!$},P,W,k,I,H),ce=typeof u=="number"?{width:u,height:u,fontSize:$?u/2:18}:{};let V;if(typeof S=="string"&&p)V=r.createElement("img",{src:S,draggable:_,srcSet:N,onError:f,alt:D,crossOrigin:E});else if(G)V=S;else if($)V=$;else if(s||n!==1){const h=`scale(${n})`,y={msTransform:h,WebkitTransform:h,transform:h};V=r.createElement(de,{onResize:x},r.createElement("span",{className:`${b}-string`,ref:m,style:Object.assign({},y)},j))}else V=r.createElement("span",{className:`${b}-string`,style:{opacity:0},ref:m},j);return delete w.onError,delete w.gap,F(r.createElement("span",Object.assign({},w,{style:Object.assign(Object.assign(Object.assign(Object.assign({},ce),M),v==null?void 0:v.style),w.style),className:le,ref:l}),V))},Ie=r.forwardRef(ke),oe=Ie,X=e=>e?typeof e=="function"?e():e:null,Re=e=>{const{componentCls:o,popoverColor:n,titleMinWidth:t,fontWeightStrong:s,innerPadding:i,boxShadowSecondary:p,colorTextHeading:g,borderRadiusLG:c,zIndexPopup:m,titleMarginBottom:l,colorBgElevated:C,popoverBg:v,titleBorderBottom:d,innerContentPadding:x,titlePadding:f}=e;return[{[o]:Object.assign(Object.assign({},J(e)),{position:"absolute",top:0,left:{_skip_check_:!0,value:0},zIndex:m,fontWeight:"normal",whiteSpace:"normal",textAlign:"start",cursor:"auto",userSelect:"text","--valid-offset-x":"var(--arrow-offset-horizontal, var(--arrow-x))",transformOrigin:["var(--valid-offset-x, 50%)","var(--arrow-y, 50%)"].join(" "),"--antd-arrow-background-color":C,width:"max-content",maxWidth:"100vw","&-rtl":{direction:"rtl"},"&-hidden":{display:"none"},[`${o}-content`]:{position:"relative"},[`${o}-inner`]:{backgroundColor:v,backgroundClip:"padding-box",borderRadius:c,boxShadow:p,padding:i},[`${o}-title`]:{minWidth:t,marginBottom:l,color:g,fontWeight:s,borderBottom:d,padding:f},[`${o}-inner-content`]:{color:n,padding:x}})},Oe(e,"var(--antd-arrow-background-color)"),{[`${o}-pure`]:{position:"relative",maxWidth:"none",margin:e.sizePopupArrow,display:"inline-block",[`${o}-content`]:{display:"inline-block"}}}]},_e=e=>{const{componentCls:o}=e;return{[o]:be.map(n=>{const t=e[`${n}6`];return{[`&${o}-${n}`]:{"--antd-arrow-background-color":t,[`${o}-inner`]:{backgroundColor:t},[`${o}-arrow`]:{background:"transparent"}}}})}},Ae=e=>{const{lineWidth:o,controlHeight:n,fontHeight:t,padding:s,wireframe:i,zIndexPopupBase:p,borderRadiusLG:g,marginXS:c,lineType:m,colorSplit:l,paddingSM:C}=e,v=n-t,d=v/2,x=v/2-o,f=s;return Object.assign(Object.assign(Object.assign({titleMinWidth:177,zIndexPopup:p+30},Pe(e)),$e({contentRadius:g,limitVerticalRadius:!0})),{innerPadding:i?0:12,titleMarginBottom:i?0:c,titlePadding:i?`${d}px ${f}px ${x}px`:0,titleBorderBottom:i?`${o}px ${m} ${l}`:"none",innerContentPadding:i?`${C}px ${f}px`:0})},ne=Y("Popover",e=>{const{colorBgElevated:o,colorText:n}=e,t=Z(e,{popoverBg:o,popoverColor:n});return[Re(t),_e(t),Ce(t,"zoom-big")]},Ae,{resetStyle:!1,deprecatedTokens:[["width","titleMinWidth"],["minWidth","titleMinWidth"]]});var Me=globalThis&&globalThis.__rest||function(e,o){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&o.indexOf(t)<0&&(n[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,t=Object.getOwnPropertySymbols(e);s<t.length;s++)o.indexOf(t[s])<0&&Object.prototype.propertyIsEnumerable.call(e,t[s])&&(n[t[s]]=e[t[s]]);return n};const re=e=>{let{title:o,content:n,prefixCls:t}=e;return!o&&!n?null:r.createElement(r.Fragment,null,o&&r.createElement("div",{className:`${t}-title`},o),n&&r.createElement("div",{className:`${t}-inner-content`},n))},We=e=>{const{hashId:o,prefixCls:n,className:t,style:s,placement:i="top",title:p,content:g,children:c}=e,m=X(p),l=X(g),C=B(o,n,`${n}-pure`,`${n}-placement-${i}`,t);return r.createElement("div",{className:C,style:s},r.createElement("div",{className:`${n}-arrow`}),r.createElement(ze,Object.assign({},e,{className:o,prefixCls:n}),c||r.createElement(re,{prefixCls:n,title:m,content:l})))},Le=e=>{const{prefixCls:o,className:n}=e,t=Me(e,["prefixCls","className"]),{getPrefixCls:s}=r.useContext(q),i=s("popover",o),[p,g,c]=ne(i);return p(r.createElement(We,Object.assign({},t,{prefixCls:i,hashId:g,className:B(n,c)})))},Ge=Le;var Ve=globalThis&&globalThis.__rest||function(e,o){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&o.indexOf(t)<0&&(n[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,t=Object.getOwnPropertySymbols(e);s<t.length;s++)o.indexOf(t[s])<0&&Object.prototype.propertyIsEnumerable.call(e,t[s])&&(n[t[s]]=e[t[s]]);return n};const De=r.forwardRef((e,o)=>{var n,t;const{prefixCls:s,title:i,content:p,overlayClassName:g,placement:c="top",trigger:m="hover",children:l,mouseEnterDelay:C=.1,mouseLeaveDelay:v=.1,onOpenChange:d,overlayStyle:x={},styles:f,classNames:O}=e,z=Ve(e,["prefixCls","title","content","overlayClassName","placement","trigger","children","mouseEnterDelay","mouseLeaveDelay","onOpenChange","overlayStyle","styles","classNames"]),{getPrefixCls:a,className:S,style:N,classNames:$,styles:k}=me("popover"),I=a("popover",s),[D,_,j]=ne(I),E=a(),w=B(g,_,j,S,$.root,O==null?void 0:O.root),u=B($.body,O==null?void 0:O.body),[R,A]=xe(!1,{value:(n=e.open)!==null&&n!==void 0?n:e.visible,defaultValue:(t=e.defaultOpen)!==null&&t!==void 0?t:e.defaultVisible}),M=(P,L)=>{A(P,!0),d==null||d(P,L)},b=P=>{P.keyCode===fe.ESC&&M(!1,P)},W=P=>{M(P)},F=X(i),H=X(p);return D(r.createElement(je,Object.assign({placement:c,trigger:m,mouseEnterDelay:C,mouseLeaveDelay:v},z,{prefixCls:I,classNames:{root:w,body:u},styles:{root:Object.assign(Object.assign(Object.assign(Object.assign({},k.root),N),x),f==null?void 0:f.root),body:Object.assign(Object.assign({},k.body),f==null?void 0:f.body)},ref:o,open:R,onOpenChange:W,overlay:F||H?r.createElement(re,{prefixCls:I,title:F,content:H}):null,transitionName:Se(E,"zoom-big",z.transitionName),"data-popover-inject":!0}),ee(l,{onKeyDown:P=>{var L,G;r.isValidElement(l)&&((G=l==null?void 0:(L=l.props).onKeyDown)===null||G===void 0||G.call(L,P)),b(P)}})))}),se=De;se._InternalPanelDoNotUseOrYouWillBeFired=Ge;const Fe=se,U=e=>{const{size:o,shape:n}=r.useContext(K),t=r.useMemo(()=>({size:e.size||o,shape:e.shape||n}),[e.size,e.shape,o,n]);return r.createElement(K.Provider,{value:t},e.children)},He=e=>{var o,n,t,s;const{getPrefixCls:i,direction:p}=r.useContext(q),{prefixCls:g,className:c,rootClassName:m,style:l,maxCount:C,maxStyle:v,size:d,shape:x,maxPopoverPlacement:f,maxPopoverTrigger:O,children:z,max:a}=e,S=i("avatar",g),N=`${S}-group`,$=Q(S),[k,I,D]=te(S,$),_=B(N,{[`${N}-rtl`]:p==="rtl"},D,$,c,m,I),j=ye(z).map((u,R)=>ee(u,{key:`avatar-key-${R}`})),E=(a==null?void 0:a.count)||C,w=j.length;if(E&&E<w){const u=j.slice(0,E),R=j.slice(E,w),A=(a==null?void 0:a.style)||v,M=((o=a==null?void 0:a.popover)===null||o===void 0?void 0:o.trigger)||O||"hover",b=((n=a==null?void 0:a.popover)===null||n===void 0?void 0:n.placement)||f||"top",W=Object.assign(Object.assign({content:R},a==null?void 0:a.popover),{classNames:{root:B(`${N}-popover`,(s=(t=a==null?void 0:a.popover)===null||t===void 0?void 0:t.classNames)===null||s===void 0?void 0:s.root)},placement:b,trigger:M});return u.push(r.createElement(Fe,Object.assign({key:"avatar-popover-key",destroyTooltipOnHide:!0},W),r.createElement(oe,{style:A},`+${w-E}`))),k(r.createElement(U,{shape:x,size:d},r.createElement("div",{className:_,style:l},u)))}return k(r.createElement(U,{shape:x,size:d},r.createElement("div",{className:_,style:l},j)))},Xe=He,ae=oe;ae.Group=Xe;const st=ae;export{st as A};

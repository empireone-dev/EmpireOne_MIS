import{r as c,X as A,j as e,b as P}from"./store-dfefbe8e.js";import{h}from"./moment-a9aaa855.js";import{S as k}from"./index-b26a1c2e.js";import{A as I,C as m}from"./index-d0fb6e95.js";import{B as N}from"./button-5cad0b4b.js";import{A as C}from"./ArrowLeftOutlined-d28b7d9b.js";import{A as z}from"./index-1589f8c8.js";import{D as t}from"./index-abe368a6.js";import{U as B}from"./UserOutlined-0eafaf14.js";import"./warning-84b5a13c.js";import"./defineProperty-83f36300.js";import"./toPropertyKey-d8419463.js";import"./typeof-7fd5df1e.js";import"./genStyleUtils-dc2953b7.js";import"./createSuper-f29e89b0.js";import"./Compact-dcad238e.js";import"./useSize-ded6274f.js";import"./index-f38aaba4.js";import"./shadow-715c9ad9.js";import"./app-637a4c72.js";import"./CheckCircleFilled-27464bf9.js";import"./AntdIcon-662b4ce2.js";import"./CloseCircleFilled-1636f424.js";import"./CloseOutlined-1d44fcd4.js";import"./InfoCircleFilled-00494e98.js";import"./pickAttrs-d3af9801.js";import"./omit-644b1847.js";import"./Skeleton-03c49883.js";import"./index-90cdfe9e.js";import"./index-8f4d8cbf.js";import"./useId-e93501fb.js";import"./index-987a58b2.js";import"./KeyCode-15b469c5.js";import"./PlusOutlined-466bc851.js";import"./Dropdown-07be9972.js";import"./useVariants-233c715b.js";import"./ContextIsolator-fde72040.js";import"./regeneratorRuntime-92fa3873.js";import"./asyncToGenerator-8c72b493.js";import"./UnstableContext-8b8d2963.js";import"./useBreakpoint-ef4b73a6.js";import"./useForceUpdate-7f81535d.js";import"./index-debeb8e0.js";import"./useZIndex-116715ea.js";function Se(){const[s,u]=c.useState(null),[D,S]=c.useState(!0),[b,n]=c.useState(null),[g,w]=c.useState(!1),{props:E}=A(),d=E.emp_id;c.useEffect(()=>{const i=()=>{w(window.innerWidth<768)};return i(),window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[]);const l=i=>i==null||i===""||i==="undefined"?"--":i,v=i=>{if(!i)return"--";const x=h(),p=h(i);return p.isValid()?x.diff(p,"years"):"--"};c.useEffect(()=>{(async()=>{var x,p,y;try{if(d){console.log("Fetching employee data for ID:",d);const r=await P.get(`/api/employee/${d}`);console.log("API Response:",r.data);const o=r.data.data;if(o&&o.applicant){const a=o.applicant,f={employeeId:l(o.emp_id),applicationId:l(a.app_id),fullName:`${l(a.fname)} ${l(a.mname)} ${l(a.lname)} ${l(a.suffix)}`.trim(),dateOfBirth:a.dob?h(a.dob).format("YYYY-MM-DD"):"--",age:v(a.dob),gender:l(a.gender),maritalStatus:l(a.marital),religion:l(a.religion),nationality:l(a.nationality),email:l(a.email),phone:l(a.phone),currentAddress:l(a.caddress),permanentAddress:l(a.paddress),sss:l(a.sss),tin:l(a.tin),philhealth:l(a.philh),pagibig:l(a.pagibig),motherName:l(a.mmname),fatherName:l(a.ffname),emergencyContactName:l(a.ename),emergencyContactAddress:l(a.eaddress),emergencyContactPhone:l(a.ephone),relationship:l(a.relationship),position:l(o.position),department:l(((x=o.dept)==null?void 0:x.dept)||o.dept),account:l(o.account),site:l(((p=o.dept)==null?void 0:p.site)||a.site),hiredDate:o.hired?h(o.hired).format("YYYY-MM-DD"):"--",status:l(o.status),education:l(a.educ),course:l(a.courset)};u(f)}else n("Employee not found.")}else{const o=new URLSearchParams(window.location.search).get("data");if(o){const a=decodeURIComponent(o),f=JSON.parse(a);u(f)}else{const a=localStorage.getItem("scannedEmployeeData");a?(u(JSON.parse(a)),localStorage.removeItem("scannedEmployeeData")):n("No employee data found. Please scan a valid QR code or provide an employee ID.")}}}catch(r){console.error("Error fetching employee data:",r),console.error("Error response:",r.response),console.error("Error request:",r.request),r.response?r.response.status===404?n(`Employee with ID "${d}" not found. Please check the employee ID.`):r.response.status===401?n("Authentication required. Please log in to view employee data."):r.response.status===403?n("Access denied. You do not have permission to view this employee data."):n(`Server error (${r.response.status}): ${((y=r.response.data)==null?void 0:y.message)||"Failed to load employee data"}`):r.request?n("Network error: Unable to connect to the server. Please check your internet connection."):n("Failed to load employee data. Please try again.")}finally{S(!1)}})()},[d]);const j=()=>{window.history.back()};return D?e.jsx("div",{className:"flex justify-center items-center min-h-screen",children:e.jsx(k,{size:"large"})}):b?e.jsx("div",{className:"container mx-auto p-6",children:e.jsx(I,{message:"Error",description:b,type:"error",showIcon:!0,action:e.jsx(N,{onClick:j,type:"primary",children:"Go Back"})})}):s?e.jsxs("div",{className:"container mx-auto p-3 sm:p-6 bg-gray-50 min-h-screen",children:[e.jsxs("div",{className:"mb-4 sm:mb-6",children:[e.jsx(N,{onClick:j,icon:e.jsx(C,{}),className:"mb-2 sm:mb-4",size:g?"small":"middle",children:"Back"}),e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Employee Information"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Scanned QR Code Data"})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-4 md:gap-6",children:[e.jsx("div",{className:"xl:col-span-1",children:e.jsxs(m,{className:"text-center",children:[e.jsx(z,{size:g?80:120,icon:e.jsx(B,{}),className:"mb-4"}),e.jsx("h2",{className:"text-lg sm:text-xl font-semibold mb-2 break-words",children:s.fullName}),e.jsxs("p",{className:"text-gray-600 mb-1 text-sm sm:text-base",children:["Employee ID: ",s.employeeId]}),e.jsxs("p",{className:"text-gray-600 mb-1 text-sm sm:text-base break-words",children:["Position: ",s.position]}),e.jsxs("p",{className:"text-gray-600 text-sm sm:text-base break-words",children:["Department: ",s.department]})]})}),e.jsxs("div",{className:"xl:col-span-2 space-y-4 md:space-y-6",children:[e.jsx(m,{title:"Personal Information",className:"shadow-sm",children:e.jsxs(t,{column:{xs:1,sm:1,md:2,lg:2,xl:2},size:"small",labelStyle:{fontWeight:"bold"},children:[e.jsx(t.Item,{label:"Full Name",children:s.fullName}),e.jsx(t.Item,{label:"Application ID",children:s.applicationId}),e.jsx(t.Item,{label:"Date of Birth",children:h(s.dateOfBirth).format("LL")}),e.jsx(t.Item,{label:"Age",children:s.age}),e.jsx(t.Item,{label:"Gender",children:s.gender}),e.jsx(t.Item,{label:"Marital Status",children:s.maritalStatus}),e.jsx(t.Item,{label:"Religion",children:s.religion}),e.jsx(t.Item,{label:"Nationality",children:s.nationality})]})}),e.jsx(m,{title:"Contact Information",className:"shadow-sm",children:e.jsxs(t,{column:{xs:1,sm:1,md:1,lg:1,xl:1},size:"small",labelStyle:{fontWeight:"bold"},children:[e.jsx(t.Item,{label:"Address",children:s.currentAddress}),e.jsx(t.Item,{label:"Email",children:s.email}),e.jsx(t.Item,{label:"Phone",children:s.phone})]})}),e.jsx(m,{title:"Government IDs",className:"shadow-sm",children:e.jsxs(t,{column:{xs:1,sm:1,md:2,lg:2,xl:2},size:"small",labelStyle:{fontWeight:"bold"},children:[e.jsx(t.Item,{label:"SSS",children:s.sss}),e.jsx(t.Item,{label:"TIN",children:s.tin}),e.jsx(t.Item,{label:"PhilHealth",children:s.philhealth}),e.jsx(t.Item,{label:"Pag-IBIG",children:s.pagibig})]})}),e.jsx(m,{title:"Work Information",className:"shadow-sm",children:e.jsxs(t,{column:{xs:1,sm:1,md:2,lg:2,xl:2},size:"small",labelStyle:{fontWeight:"bold"},children:[e.jsx(t.Item,{label:"Employee ID",children:s.employeeId}),e.jsx(t.Item,{label:"Position",children:s.position}),e.jsx(t.Item,{label:"Department",children:s.department}),e.jsx(t.Item,{label:"Account",children:s.account}),e.jsx(t.Item,{label:"Site",children:s.site}),e.jsx(t.Item,{label:"Hired Date",children:s.hiredDate}),e.jsx(t.Item,{label:"Status",span:2,children:s.status})]})}),e.jsx(m,{title:"Family Information",className:"shadow-sm",children:e.jsxs(t,{column:{xs:1,sm:1,md:2,lg:2,xl:2},size:"small",labelStyle:{fontWeight:"bold"},children:[e.jsx(t.Item,{label:"Mother's Name",children:s.motherName}),e.jsx(t.Item,{label:"Father's Name",children:s.fatherName})]})}),e.jsx(m,{title:"Emergency Contact",className:"shadow-sm",children:e.jsxs(t,{column:{xs:1,sm:1,md:2,lg:2,xl:2},size:"small",labelStyle:{fontWeight:"bold"},children:[e.jsx(t.Item,{label:"Name",children:s.emergencyContactName}),e.jsx(t.Item,{label:"Phone",children:s.emergencyContactPhone}),e.jsx(t.Item,{label:"Relationship",children:s.relationship}),e.jsx(t.Item,{label:"Address",span:2,children:s.emergencyContactAddress})]})}),e.jsx(m,{title:"Education Information",className:"shadow-sm",children:e.jsxs(t,{column:{xs:1,sm:1,md:2,lg:2,xl:2},size:"small",labelStyle:{fontWeight:"bold"},children:[e.jsx(t.Item,{label:"Education Level",children:s.education}),e.jsx(t.Item,{label:"Course/Field",children:s.course})]})})]})]})]}):e.jsx("div",{className:"container mx-auto p-6",children:e.jsx(I,{message:"No Data",description:"No employee information available.",type:"warning",showIcon:!0})})}export{Se as default};

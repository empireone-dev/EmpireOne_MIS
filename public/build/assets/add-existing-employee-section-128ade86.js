var Mi=Object.defineProperty;var Bi=(t,n,e)=>n in t?Mi(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e;var h=(t,n,e)=>(Bi(t,typeof n!="symbol"?n+"":n,e),e);import{r as Q,a as Le,u as $i,e as wt,j as u,p as He}from"./app-7506f624.js";import{r as Ii,p as ji,c as Fi,b as Li}from"./barangay-94589600.js";import{h as zi}from"./moment-a9aaa855.js";import Di from"./upload-resume-section-de2fed80.js";import qi from"./working-experience-section-4fa08db7.js";import{g as Vi}from"./applicant-thunk-b7e726ab.js";import z from"./input-895708cc.js";import bt from"./select-94997c71.js";import{b as Ji}from"./employee-section-thunk-a6246a76.js";import{g as Ui}from"./job-title-thunk-489b2da5.js";import{g as Wi}from"./department-thunk-d838ed42.js";import{M as Gi}from"./index-4cdc0f8a.js";import{m as On}from"./index-4e417ce3.js";import{U as Ki}from"./UserAddOutlined-f33b780a.js";import"./Dragger-0b498b33.js";import"./genStyleUtils-35102329.js";import"./presets-e42779d2.js";import"./AntdIcon-4e44e5b5.js";import"./asyncToGenerator-b732db03.js";import"./pickAttrs-c3aec121.js";import"./useId-c721a959.js";import"./useZIndex-4c1489b8.js";import"./collapse-97de76d4.js";import"./fade-5b942d05.js";import"./LoadingOutlined-1357c41c.js";import"./omit-644b1847.js";import"./useForceUpdate-f5f27bc4.js";import"./Compact-c51e861a.js";import"./useSize-6f600dfe.js";import"./button-58842f40.js";import"./UnstableContext-91211cc2.js";import"./DeleteOutlined-6f86a2a8.js";import"./EyeOutlined-8006c4d5.js";import"./CheckCircleFilled-ba1329c0.js";import"./CheckOutlined-1c78ce65.js";import"./CloseCircleFilled-bd1a107e.js";import"./CloseOutlined-c65d10d5.js";import"./index-5a056570.js";import"./ContextIsolator-1b9f7d94.js";import"./useLocale-d284f53e.js";import"./InboxOutlined-87941953.js";import"./XMarkIcon-5052fda7.js";import"./PlusOutlined-3aaf2469.js";import"./applicant-record-service-22e12d93.js";import"./applicant-final-service-a1d04fab.js";import"./employee-service-bf56d52d.js";import"./erf-record-service-36ef5f04.js";import"./InfoCircleFilled-4fb6911d.js";import"./index-3dac5a49.js";import"./KeyCode-02923e28.js";import"./useClosable-9d0b08c2.js";import"./PurePanel-992b07e9.js";var Zi=typeof global=="object"&&global&&global.Object===Object&&global;const Ts=Zi;var Hi=typeof self=="object"&&self&&self.Object===Object&&self,Yi=Ts||Hi||Function("return this")();const ce=Yi;var Qi=ce.Symbol;const le=Qi;var Es=Object.prototype,Xi=Es.hasOwnProperty,er=Es.toString,Ye=le?le.toStringTag:void 0;function tr(t){var n=Xi.call(t,Ye),e=t[Ye];try{t[Ye]=void 0;var s=!0}catch{}var i=er.call(t);return s&&(n?t[Ye]=e:delete t[Ye]),i}var nr=Object.prototype,sr=nr.toString;function ir(t){return sr.call(t)}var rr="[object Null]",or="[object Undefined]",Rn=le?le.toStringTag:void 0;function Me(t){return t==null?t===void 0?or:rr:Rn&&Rn in Object(t)?tr(t):ir(t)}function ge(t){return t!=null&&typeof t=="object"}var ar="[object Symbol]";function cn(t){return typeof t=="symbol"||ge(t)&&Me(t)==ar}function lr(t,n){for(var e=-1,s=t==null?0:t.length,i=Array(s);++e<s;)i[e]=n(t[e],e,t);return i}var cr=Array.isArray;const Pe=cr;var hr=1/0,Cn=le?le.prototype:void 0,Nn=Cn?Cn.toString:void 0;function Os(t){if(typeof t=="string")return t;if(Pe(t))return lr(t,Os)+"";if(cn(t))return Nn?Nn.call(t):"";var n=t+"";return n=="0"&&1/t==-hr?"-0":n}function ke(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}var ur="[object AsyncFunction]",fr="[object Function]",dr="[object GeneratorFunction]",gr="[object Proxy]";function Rs(t){if(!ke(t))return!1;var n=Me(t);return n==fr||n==dr||n==ur||n==gr}var pr=ce["__core-js_shared__"];const Lt=pr;var Mn=function(){var t=/[^.]+$/.exec(Lt&&Lt.keys&&Lt.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function mr(t){return!!Mn&&Mn in t}var _r=Function.prototype,yr=_r.toString;function Be(t){if(t!=null){try{return yr.call(t)}catch{}try{return t+""}catch{}}return""}var wr=/[\\^$.*+?()[\]{}|]/g,br=/^\[object .+?Constructor\]$/,xr=Function.prototype,vr=Object.prototype,Pr=xr.toString,kr=vr.hasOwnProperty,Sr=RegExp("^"+Pr.call(kr).replace(wr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ar(t){if(!ke(t)||mr(t))return!1;var n=Rs(t)?Sr:br;return n.test(Be(t))}function Tr(t,n){return t==null?void 0:t[n]}function $e(t,n){var e=Tr(t,n);return Ar(e)?e:void 0}var Er=$e(ce,"WeakMap");const Kt=Er;var Bn=Object.create,Or=function(){function t(){}return function(n){if(!ke(n))return{};if(Bn)return Bn(n);t.prototype=n;var e=new t;return t.prototype=void 0,e}}();const Rr=Or;function Cr(t,n){var e=-1,s=t.length;for(n||(n=Array(s));++e<s;)n[e]=t[e];return n}var Nr=function(){try{var t=$e(Object,"defineProperty");return t({},"",{}),t}catch{}}();const $n=Nr;function Mr(t,n){for(var e=-1,s=t==null?0:t.length;++e<s&&n(t[e],e,t)!==!1;);return t}var Br=9007199254740991,$r=/^(?:0|[1-9]\d*)$/;function Ir(t,n){var e=typeof t;return n=n??Br,!!n&&(e=="number"||e!="symbol"&&$r.test(t))&&t>-1&&t%1==0&&t<n}function Cs(t,n,e){n=="__proto__"&&$n?$n(t,n,{configurable:!0,enumerable:!0,value:e,writable:!0}):t[n]=e}function hn(t,n){return t===n||t!==t&&n!==n}var jr=Object.prototype,Fr=jr.hasOwnProperty;function Ns(t,n,e){var s=t[n];(!(Fr.call(t,n)&&hn(s,e))||e===void 0&&!(n in t))&&Cs(t,n,e)}function Nt(t,n,e,s){var i=!e;e||(e={});for(var r=-1,o=n.length;++r<o;){var a=n[r],l=s?s(e[a],t[a],a,e,t):void 0;l===void 0&&(l=t[a]),i?Cs(e,a,l):Ns(e,a,l)}return e}var Lr=9007199254740991;function Ms(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Lr}function Bs(t){return t!=null&&Ms(t.length)&&!Rs(t)}var zr=Object.prototype;function un(t){var n=t&&t.constructor,e=typeof n=="function"&&n.prototype||zr;return t===e}function Dr(t,n){for(var e=-1,s=Array(t);++e<t;)s[e]=n(e);return s}var qr="[object Arguments]";function In(t){return ge(t)&&Me(t)==qr}var $s=Object.prototype,Vr=$s.hasOwnProperty,Jr=$s.propertyIsEnumerable,Ur=In(function(){return arguments}())?In:function(t){return ge(t)&&Vr.call(t,"callee")&&!Jr.call(t,"callee")};const Wr=Ur;function Gr(){return!1}var Is=typeof exports=="object"&&exports&&!exports.nodeType&&exports,jn=Is&&typeof module=="object"&&module&&!module.nodeType&&module,Kr=jn&&jn.exports===Is,Fn=Kr?ce.Buffer:void 0,Zr=Fn?Fn.isBuffer:void 0,Hr=Zr||Gr;const Tt=Hr;var Yr="[object Arguments]",Qr="[object Array]",Xr="[object Boolean]",eo="[object Date]",to="[object Error]",no="[object Function]",so="[object Map]",io="[object Number]",ro="[object Object]",oo="[object RegExp]",ao="[object Set]",lo="[object String]",co="[object WeakMap]",ho="[object ArrayBuffer]",uo="[object DataView]",fo="[object Float32Array]",go="[object Float64Array]",po="[object Int8Array]",mo="[object Int16Array]",_o="[object Int32Array]",yo="[object Uint8Array]",wo="[object Uint8ClampedArray]",bo="[object Uint16Array]",xo="[object Uint32Array]",j={};j[fo]=j[go]=j[po]=j[mo]=j[_o]=j[yo]=j[wo]=j[bo]=j[xo]=!0;j[Yr]=j[Qr]=j[ho]=j[Xr]=j[uo]=j[eo]=j[to]=j[no]=j[so]=j[io]=j[ro]=j[oo]=j[ao]=j[lo]=j[co]=!1;function vo(t){return ge(t)&&Ms(t.length)&&!!j[Me(t)]}function fn(t){return function(n){return t(n)}}var js=typeof exports=="object"&&exports&&!exports.nodeType&&exports,nt=js&&typeof module=="object"&&module&&!module.nodeType&&module,Po=nt&&nt.exports===js,zt=Po&&Ts.process,ko=function(){try{var t=nt&&nt.require&&nt.require("util").types;return t||zt&&zt.binding&&zt.binding("util")}catch{}}();const Je=ko;var Ln=Je&&Je.isTypedArray,So=Ln?fn(Ln):vo;const Fs=So;var Ao=Object.prototype,To=Ao.hasOwnProperty;function Ls(t,n){var e=Pe(t),s=!e&&Wr(t),i=!e&&!s&&Tt(t),r=!e&&!s&&!i&&Fs(t),o=e||s||i||r,a=o?Dr(t.length,String):[],l=a.length;for(var c in t)(n||To.call(t,c))&&!(o&&(c=="length"||i&&(c=="offset"||c=="parent")||r&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||Ir(c,l)))&&a.push(c);return a}function zs(t,n){return function(e){return t(n(e))}}var Eo=zs(Object.keys,Object);const Oo=Eo;var Ro=Object.prototype,Co=Ro.hasOwnProperty;function No(t){if(!un(t))return Oo(t);var n=[];for(var e in Object(t))Co.call(t,e)&&e!="constructor"&&n.push(e);return n}function dn(t){return Bs(t)?Ls(t):No(t)}function Mo(t){var n=[];if(t!=null)for(var e in Object(t))n.push(e);return n}var Bo=Object.prototype,$o=Bo.hasOwnProperty;function Io(t){if(!ke(t))return Mo(t);var n=un(t),e=[];for(var s in t)s=="constructor"&&(n||!$o.call(t,s))||e.push(s);return e}function gn(t){return Bs(t)?Ls(t,!0):Io(t)}var jo=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Fo=/^\w*$/;function Lo(t,n){if(Pe(t))return!1;var e=typeof t;return e=="number"||e=="symbol"||e=="boolean"||t==null||cn(t)?!0:Fo.test(t)||!jo.test(t)||n!=null&&t in Object(n)}var zo=$e(Object,"create");const lt=zo;function Do(){this.__data__=lt?lt(null):{},this.size=0}function qo(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}var Vo="__lodash_hash_undefined__",Jo=Object.prototype,Uo=Jo.hasOwnProperty;function Wo(t){var n=this.__data__;if(lt){var e=n[t];return e===Vo?void 0:e}return Uo.call(n,t)?n[t]:void 0}var Go=Object.prototype,Ko=Go.hasOwnProperty;function Zo(t){var n=this.__data__;return lt?n[t]!==void 0:Ko.call(n,t)}var Ho="__lodash_hash_undefined__";function Yo(t,n){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=lt&&n===void 0?Ho:n,this}function Ce(t){var n=-1,e=t==null?0:t.length;for(this.clear();++n<e;){var s=t[n];this.set(s[0],s[1])}}Ce.prototype.clear=Do;Ce.prototype.delete=qo;Ce.prototype.get=Wo;Ce.prototype.has=Zo;Ce.prototype.set=Yo;function Qo(){this.__data__=[],this.size=0}function Mt(t,n){for(var e=t.length;e--;)if(hn(t[e][0],n))return e;return-1}var Xo=Array.prototype,ea=Xo.splice;function ta(t){var n=this.__data__,e=Mt(n,t);if(e<0)return!1;var s=n.length-1;return e==s?n.pop():ea.call(n,e,1),--this.size,!0}function na(t){var n=this.__data__,e=Mt(n,t);return e<0?void 0:n[e][1]}function sa(t){return Mt(this.__data__,t)>-1}function ia(t,n){var e=this.__data__,s=Mt(e,t);return s<0?(++this.size,e.push([t,n])):e[s][1]=n,this}function _e(t){var n=-1,e=t==null?0:t.length;for(this.clear();++n<e;){var s=t[n];this.set(s[0],s[1])}}_e.prototype.clear=Qo;_e.prototype.delete=ta;_e.prototype.get=na;_e.prototype.has=sa;_e.prototype.set=ia;var ra=$e(ce,"Map");const ct=ra;function oa(){this.size=0,this.__data__={hash:new Ce,map:new(ct||_e),string:new Ce}}function aa(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}function Bt(t,n){var e=t.__data__;return aa(n)?e[typeof n=="string"?"string":"hash"]:e.map}function la(t){var n=Bt(this,t).delete(t);return this.size-=n?1:0,n}function ca(t){return Bt(this,t).get(t)}function ha(t){return Bt(this,t).has(t)}function ua(t,n){var e=Bt(this,t),s=e.size;return e.set(t,n),this.size+=e.size==s?0:1,this}function ye(t){var n=-1,e=t==null?0:t.length;for(this.clear();++n<e;){var s=t[n];this.set(s[0],s[1])}}ye.prototype.clear=oa;ye.prototype.delete=la;ye.prototype.get=ca;ye.prototype.has=ha;ye.prototype.set=ua;var fa="Expected a function";function pn(t,n){if(typeof t!="function"||n!=null&&typeof n!="function")throw new TypeError(fa);var e=function(){var s=arguments,i=n?n.apply(this,s):s[0],r=e.cache;if(r.has(i))return r.get(i);var o=t.apply(this,s);return e.cache=r.set(i,o)||r,o};return e.cache=new(pn.Cache||ye),e}pn.Cache=ye;var da=500;function ga(t){var n=pn(t,function(s){return e.size===da&&e.clear(),s}),e=n.cache;return n}var pa=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ma=/\\(\\)?/g,_a=ga(function(t){var n=[];return t.charCodeAt(0)===46&&n.push(""),t.replace(pa,function(e,s,i,r){n.push(i?r.replace(ma,"$1"):s||e)}),n});const ya=_a;function wa(t){return t==null?"":Os(t)}function Ds(t,n){return Pe(t)?t:Lo(t,n)?[t]:ya(wa(t))}var ba=1/0;function qs(t){if(typeof t=="string"||cn(t))return t;var n=t+"";return n=="0"&&1/t==-ba?"-0":n}function Vs(t,n){n=Ds(n,t);for(var e=0,s=n.length;t!=null&&e<s;)t=t[qs(n[e++])];return e&&e==s?t:void 0}function xa(t,n,e){var s=t==null?void 0:Vs(t,n);return s===void 0?e:s}function Js(t,n){for(var e=-1,s=n.length,i=t.length;++e<s;)t[i+e]=n[e];return t}var va=zs(Object.getPrototypeOf,Object);const mn=va;var Pa="[object Object]",ka=Function.prototype,Sa=Object.prototype,Us=ka.toString,Aa=Sa.hasOwnProperty,Ta=Us.call(Object);function Zt(t){if(!ge(t)||Me(t)!=Pa)return!1;var n=mn(t);if(n===null)return!0;var e=Aa.call(n,"constructor")&&n.constructor;return typeof e=="function"&&e instanceof e&&Us.call(e)==Ta}function Ea(t,n,e){var s=-1,i=t.length;n<0&&(n=-n>i?0:i+n),e=e>i?i:e,e<0&&(e+=i),i=n>e?0:e-n>>>0,n>>>=0;for(var r=Array(i);++s<i;)r[s]=t[s+n];return r}function Oa(){this.__data__=new _e,this.size=0}function Ra(t){var n=this.__data__,e=n.delete(t);return this.size=n.size,e}function Ca(t){return this.__data__.get(t)}function Na(t){return this.__data__.has(t)}var Ma=200;function Ba(t,n){var e=this.__data__;if(e instanceof _e){var s=e.__data__;if(!ct||s.length<Ma-1)return s.push([t,n]),this.size=++e.size,this;e=this.__data__=new ye(s)}return e.set(t,n),this.size=e.size,this}function de(t){var n=this.__data__=new _e(t);this.size=n.size}de.prototype.clear=Oa;de.prototype.delete=Ra;de.prototype.get=Ca;de.prototype.has=Na;de.prototype.set=Ba;function $a(t,n){return t&&Nt(n,dn(n),t)}function Ia(t,n){return t&&Nt(n,gn(n),t)}var Ws=typeof exports=="object"&&exports&&!exports.nodeType&&exports,zn=Ws&&typeof module=="object"&&module&&!module.nodeType&&module,ja=zn&&zn.exports===Ws,Dn=ja?ce.Buffer:void 0,qn=Dn?Dn.allocUnsafe:void 0;function Fa(t,n){if(n)return t.slice();var e=t.length,s=qn?qn(e):new t.constructor(e);return t.copy(s),s}function La(t,n){for(var e=-1,s=t==null?0:t.length,i=0,r=[];++e<s;){var o=t[e];n(o,e,t)&&(r[i++]=o)}return r}function Gs(){return[]}var za=Object.prototype,Da=za.propertyIsEnumerable,Vn=Object.getOwnPropertySymbols,qa=Vn?function(t){return t==null?[]:(t=Object(t),La(Vn(t),function(n){return Da.call(t,n)}))}:Gs;const _n=qa;function Va(t,n){return Nt(t,_n(t),n)}var Ja=Object.getOwnPropertySymbols,Ua=Ja?function(t){for(var n=[];t;)Js(n,_n(t)),t=mn(t);return n}:Gs;const Ks=Ua;function Wa(t,n){return Nt(t,Ks(t),n)}function Zs(t,n,e){var s=n(t);return Pe(t)?s:Js(s,e(t))}function Ht(t){return Zs(t,dn,_n)}function Ga(t){return Zs(t,gn,Ks)}var Ka=$e(ce,"DataView");const Yt=Ka;var Za=$e(ce,"Promise");const Qt=Za;var Ha=$e(ce,"Set");const Xt=Ha;var Jn="[object Map]",Ya="[object Object]",Un="[object Promise]",Wn="[object Set]",Gn="[object WeakMap]",Kn="[object DataView]",Qa=Be(Yt),Xa=Be(ct),el=Be(Qt),tl=Be(Xt),nl=Be(Kt),Re=Me;(Yt&&Re(new Yt(new ArrayBuffer(1)))!=Kn||ct&&Re(new ct)!=Jn||Qt&&Re(Qt.resolve())!=Un||Xt&&Re(new Xt)!=Wn||Kt&&Re(new Kt)!=Gn)&&(Re=function(t){var n=Me(t),e=n==Ya?t.constructor:void 0,s=e?Be(e):"";if(s)switch(s){case Qa:return Kn;case Xa:return Jn;case el:return Un;case tl:return Wn;case nl:return Gn}return n});const ht=Re;var sl=Object.prototype,il=sl.hasOwnProperty;function rl(t){var n=t.length,e=new t.constructor(n);return n&&typeof t[0]=="string"&&il.call(t,"index")&&(e.index=t.index,e.input=t.input),e}var ol=ce.Uint8Array;const Et=ol;function yn(t){var n=new t.constructor(t.byteLength);return new Et(n).set(new Et(t)),n}function al(t,n){var e=n?yn(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.byteLength)}var ll=/\w*$/;function cl(t){var n=new t.constructor(t.source,ll.exec(t));return n.lastIndex=t.lastIndex,n}var Zn=le?le.prototype:void 0,Hn=Zn?Zn.valueOf:void 0;function hl(t){return Hn?Object(Hn.call(t)):{}}function ul(t,n){var e=n?yn(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)}var fl="[object Boolean]",dl="[object Date]",gl="[object Map]",pl="[object Number]",ml="[object RegExp]",_l="[object Set]",yl="[object String]",wl="[object Symbol]",bl="[object ArrayBuffer]",xl="[object DataView]",vl="[object Float32Array]",Pl="[object Float64Array]",kl="[object Int8Array]",Sl="[object Int16Array]",Al="[object Int32Array]",Tl="[object Uint8Array]",El="[object Uint8ClampedArray]",Ol="[object Uint16Array]",Rl="[object Uint32Array]";function Cl(t,n,e){var s=t.constructor;switch(n){case bl:return yn(t);case fl:case dl:return new s(+t);case xl:return al(t,e);case vl:case Pl:case kl:case Sl:case Al:case Tl:case El:case Ol:case Rl:return ul(t,e);case gl:return new s;case pl:case yl:return new s(t);case ml:return cl(t);case _l:return new s;case wl:return hl(t)}}function Nl(t){return typeof t.constructor=="function"&&!un(t)?Rr(mn(t)):{}}var Ml="[object Map]";function Bl(t){return ge(t)&&ht(t)==Ml}var Yn=Je&&Je.isMap,$l=Yn?fn(Yn):Bl;const Il=$l;var jl="[object Set]";function Fl(t){return ge(t)&&ht(t)==jl}var Qn=Je&&Je.isSet,Ll=Qn?fn(Qn):Fl;const zl=Ll;var Dl=1,ql=2,Vl=4,Hs="[object Arguments]",Jl="[object Array]",Ul="[object Boolean]",Wl="[object Date]",Gl="[object Error]",Ys="[object Function]",Kl="[object GeneratorFunction]",Zl="[object Map]",Hl="[object Number]",Qs="[object Object]",Yl="[object RegExp]",Ql="[object Set]",Xl="[object String]",ec="[object Symbol]",tc="[object WeakMap]",nc="[object ArrayBuffer]",sc="[object DataView]",ic="[object Float32Array]",rc="[object Float64Array]",oc="[object Int8Array]",ac="[object Int16Array]",lc="[object Int32Array]",cc="[object Uint8Array]",hc="[object Uint8ClampedArray]",uc="[object Uint16Array]",fc="[object Uint32Array]",$={};$[Hs]=$[Jl]=$[nc]=$[sc]=$[Ul]=$[Wl]=$[ic]=$[rc]=$[oc]=$[ac]=$[lc]=$[Zl]=$[Hl]=$[Qs]=$[Yl]=$[Ql]=$[Xl]=$[ec]=$[cc]=$[hc]=$[uc]=$[fc]=!0;$[Gl]=$[Ys]=$[tc]=!1;function kt(t,n,e,s,i,r){var o,a=n&Dl,l=n&ql,c=n&Vl;if(e&&(o=i?e(t,s,i,r):e(t)),o!==void 0)return o;if(!ke(t))return t;var d=Pe(t);if(d){if(o=rl(t),!a)return Cr(t,o)}else{var g=ht(t),_=g==Ys||g==Kl;if(Tt(t))return Fa(t,a);if(g==Qs||g==Hs||_&&!i){if(o=l||_?{}:Nl(t),!a)return l?Wa(t,Ia(o,t)):Va(t,$a(o,t))}else{if(!$[g])return i?t:{};o=Cl(t,g,a)}}r||(r=new de);var m=r.get(t);if(m)return m;r.set(t,o),zl(t)?t.forEach(function(C){o.add(kt(C,n,e,C,t,r))}):Il(t)&&t.forEach(function(C,T){o.set(T,kt(C,n,e,T,t,r))});var E=c?l?Ga:Ht:l?gn:dn,P=d?void 0:E(t);return Mr(P||t,function(C,T){P&&(T=C,C=t[T]),Ns(o,T,kt(C,n,e,T,t,r))}),o}var dc=4;function gc(t){return kt(t,dc)}var pc="__lodash_hash_undefined__";function mc(t){return this.__data__.set(t,pc),this}function _c(t){return this.__data__.has(t)}function Ot(t){var n=-1,e=t==null?0:t.length;for(this.__data__=new ye;++n<e;)this.add(t[n])}Ot.prototype.add=Ot.prototype.push=mc;Ot.prototype.has=_c;function yc(t,n){for(var e=-1,s=t==null?0:t.length;++e<s;)if(n(t[e],e,t))return!0;return!1}function wc(t,n){return t.has(n)}var bc=1,xc=2;function Xs(t,n,e,s,i,r){var o=e&bc,a=t.length,l=n.length;if(a!=l&&!(o&&l>a))return!1;var c=r.get(t),d=r.get(n);if(c&&d)return c==n&&d==t;var g=-1,_=!0,m=e&xc?new Ot:void 0;for(r.set(t,n),r.set(n,t);++g<a;){var E=t[g],P=n[g];if(s)var C=o?s(P,E,g,n,t,r):s(E,P,g,t,n,r);if(C!==void 0){if(C)continue;_=!1;break}if(m){if(!yc(n,function(T,N){if(!wc(m,N)&&(E===T||i(E,T,e,s,r)))return m.push(N)})){_=!1;break}}else if(!(E===P||i(E,P,e,s,r))){_=!1;break}}return r.delete(t),r.delete(n),_}function vc(t){var n=-1,e=Array(t.size);return t.forEach(function(s,i){e[++n]=[i,s]}),e}function Pc(t){var n=-1,e=Array(t.size);return t.forEach(function(s){e[++n]=s}),e}var kc=1,Sc=2,Ac="[object Boolean]",Tc="[object Date]",Ec="[object Error]",Oc="[object Map]",Rc="[object Number]",Cc="[object RegExp]",Nc="[object Set]",Mc="[object String]",Bc="[object Symbol]",$c="[object ArrayBuffer]",Ic="[object DataView]",Xn=le?le.prototype:void 0,Dt=Xn?Xn.valueOf:void 0;function jc(t,n,e,s,i,r,o){switch(e){case Ic:if(t.byteLength!=n.byteLength||t.byteOffset!=n.byteOffset)return!1;t=t.buffer,n=n.buffer;case $c:return!(t.byteLength!=n.byteLength||!r(new Et(t),new Et(n)));case Ac:case Tc:case Rc:return hn(+t,+n);case Ec:return t.name==n.name&&t.message==n.message;case Cc:case Mc:return t==n+"";case Oc:var a=vc;case Nc:var l=s&kc;if(a||(a=Pc),t.size!=n.size&&!l)return!1;var c=o.get(t);if(c)return c==n;s|=Sc,o.set(t,n);var d=Xs(a(t),a(n),s,i,r,o);return o.delete(t),d;case Bc:if(Dt)return Dt.call(t)==Dt.call(n)}return!1}var Fc=1,Lc=Object.prototype,zc=Lc.hasOwnProperty;function Dc(t,n,e,s,i,r){var o=e&Fc,a=Ht(t),l=a.length,c=Ht(n),d=c.length;if(l!=d&&!o)return!1;for(var g=l;g--;){var _=a[g];if(!(o?_ in n:zc.call(n,_)))return!1}var m=r.get(t),E=r.get(n);if(m&&E)return m==n&&E==t;var P=!0;r.set(t,n),r.set(n,t);for(var C=o;++g<l;){_=a[g];var T=t[_],N=n[_];if(s)var y=o?s(N,T,_,n,t,r):s(T,N,_,t,n,r);if(!(y===void 0?T===N||i(T,N,e,s,r):y)){P=!1;break}C||(C=_=="constructor")}if(P&&!C){var Z=t.constructor,H=n.constructor;Z!=H&&"constructor"in t&&"constructor"in n&&!(typeof Z=="function"&&Z instanceof Z&&typeof H=="function"&&H instanceof H)&&(P=!1)}return r.delete(t),r.delete(n),P}var qc=1,es="[object Arguments]",ts="[object Array]",xt="[object Object]",Vc=Object.prototype,ns=Vc.hasOwnProperty;function Jc(t,n,e,s,i,r){var o=Pe(t),a=Pe(n),l=o?ts:ht(t),c=a?ts:ht(n);l=l==es?xt:l,c=c==es?xt:c;var d=l==xt,g=c==xt,_=l==c;if(_&&Tt(t)){if(!Tt(n))return!1;o=!0,d=!1}if(_&&!d)return r||(r=new de),o||Fs(t)?Xs(t,n,e,s,i,r):jc(t,n,l,e,s,i,r);if(!(e&qc)){var m=d&&ns.call(t,"__wrapped__"),E=g&&ns.call(n,"__wrapped__");if(m||E){var P=m?t.value():t,C=E?n.value():n;return r||(r=new de),i(P,C,e,s,r)}}return _?(r||(r=new de),Dc(t,n,e,s,i,r)):!1}function ei(t,n,e,s,i){return t===n?!0:t==null||n==null||!ge(t)&&!ge(n)?t!==t&&n!==n:Jc(t,n,e,s,ei,i)}function Uc(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}function Wc(t,n){return n.length<2?t:Vs(t,Ea(n,0,-1))}function ss(t,n){return ei(t,n)}function Gc(t,n){return n=Ds(n,t),t=Wc(t,n),t==null||delete t[qs(Uc(n))]}function Kc(t,n){return t==null?!0:Gc(t,n)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 *//**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let en;try{en={window,document}}catch{/* istanbul ignore next -- @preserve */en={window:{},document:{}}}var ut=en;/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function is(){return function t(){t.called=!0}}class Ue{constructor(n,e){h(this,"source");h(this,"name");h(this,"path");h(this,"stop");h(this,"off");h(this,"return");this.source=n,this.name=e,this.path=[],this.stop=is(),this.off=is()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const W=new Array(256).fill("").map((t,n)=>("0"+n.toString(16)).slice(-2));function $t(){const[t,n,e,s]=crypto.getRandomValues(new Uint32Array(4));return"e"+W[t>>0&255]+W[t>>8&255]+W[t>>16&255]+W[t>>24&255]+W[n>>0&255]+W[n>>8&255]+W[n>>16&255]+W[n>>24&255]+W[e>>0&255]+W[e>>8&255]+W[e>>16&255]+W[e>>24&255]+W[s>>0&255]+W[s>>8&255]+W[s>>16&255]+W[s>>24&255]}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const tn={get(t="normal"){return typeof t!="number"?this[t]||this.normal:t},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5};function Zc(t,n){const e=tn.get(n.priority);for(let s=0;s<t.length;s++)if(tn.get(t[s].priority)<e){t.splice(s,0,n);return}t.push(n)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Hc="https://ckeditor.com/docs/ckeditor5/latest/support/error-codes.html";class p extends Error{constructor(e,s,i){super(Yc(e,i));h(this,"context");h(this,"data");this.name="CKEditorError",this.context=s,this.data=i}is(e){return e==="CKEditorError"}static rethrowUnexpectedError(e,s){if(e.is&&e.is("CKEditorError"))throw e;const i=new p(e.message,s);throw i.stack=e.stack,i}}function nn(t,n){console.warn(...Qc(t,n))}function ti(t){return`
Read more: ${Hc}#error-${t}`}function Yc(t,n){const e=new WeakSet,i=n?` ${JSON.stringify(n,(o,a)=>{if(typeof a=="object"&&a!==null){if(e.has(a))return`[object ${a.constructor.name}]`;e.add(a)}return a})}`:"",r=ti(t);return t+i+r}function Qc(t,n){const e=ti(t);return n?[t,n,e]:[t,e]}const Xc="43.3.1";/* istanbul ignore next -- @preserve */if(globalThis.CKEDITOR_VERSION)throw new p("ckeditor-duplicated-modules",null);globalThis.CKEDITOR_VERSION=Xc;const De=Symbol("listeningTo"),sn=Symbol("emitterId"),ue=Symbol("delegations"),ni=V(Object);function V(t){if(!t)return ni;class n extends t{on(s,i,r){this.listenTo(this,s,i,r)}once(s,i,r){let o=!1;const a=(l,...c)=>{o||(o=!0,l.off(),i.call(this,l,...c))};this.listenTo(this,s,a,r)}off(s,i){this.stopListening(this,s,i)}listenTo(s,i,r,o={}){let a,l;this[De]||(this[De]={});const c=this[De];qt(s)||si(s);const d=qt(s);(a=c[d])||(a=c[d]={emitter:s,callbacks:{}}),(l=a.callbacks[i])||(l=a.callbacks[i]=[]),l.push(r),sh(this,s,i,r,o)}stopListening(s,i,r){const o=this[De];let a=s&&qt(s);const l=o&&a?o[a]:void 0,c=l&&i?l.callbacks[i]:void 0;if(!(!o||s&&!l||i&&!c))if(r)Vt(this,s,i,r),c.indexOf(r)!==-1&&(c.length===1?delete l.callbacks[i]:Vt(this,s,i,r));else if(c){for(;r=c.pop();)Vt(this,s,i,r);delete l.callbacks[i]}else if(l){for(i in l.callbacks)this.stopListening(s,i);delete o[a]}else{for(a in o)this.stopListening(o[a].emitter);delete this[De]}}fire(s,...i){try{const r=s instanceof Ue?s:new Ue(this,s),o=r.name;let a=ri(this,o);if(r.path.push(this),a){const c=[r,...i];a=Array.from(a);for(let d=0;d<a.length&&(a[d].callback.apply(this,c),r.off.called&&(delete r.off.called,this._removeEventListener(o,a[d].callback)),!r.stop.called);d++);}const l=this[ue];if(l){const c=l.get(o),d=l.get("*");c&&rs(c,r,i),d&&rs(d,r,i)}return r.return}catch(r){/* istanbul ignore next -- @preserve */p.rethrowUnexpectedError(r,this)}}delegate(...s){return{to:(i,r)=>{this[ue]||(this[ue]=new Map),s.forEach(o=>{const a=this[ue].get(o);a?a.set(i,r):this[ue].set(o,new Map([[i,r]]))})}}}stopDelegating(s,i){if(this[ue])if(!s)this[ue].clear();else if(!i)this[ue].delete(s);else{const r=this[ue].get(s);r&&r.delete(i)}}_addEventListener(s,i,r){nh(this,s);const o=rn(this,s),a=tn.get(r.priority),l={callback:i,priority:a};for(const c of o)Zc(c,l)}_removeEventListener(s,i){const r=rn(this,s);for(const o of r)for(let a=0;a<o.length;a++)o[a].callback==i&&(o.splice(a,1),a--)}}return n}["on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(t=>{V[t]=ni.prototype[t]});function eh(t,n){const e=t[De];return e&&e[n]?e[n].emitter:null}function si(t,n){t[sn]||(t[sn]=n||$t())}function qt(t){return t[sn]}function ii(t){return t._events||Object.defineProperty(t,"_events",{value:{}}),t._events}function th(){return{callbacks:[],childEvents:[]}}function nh(t,n){const e=ii(t);if(e[n])return;let s=n,i=null;const r=[];for(;s!==""&&!e[s];)e[s]=th(),r.push(e[s]),i&&e[s].childEvents.push(i),i=s,s=s.substr(0,s.lastIndexOf(":"));if(s!==""){for(const o of r)o.callbacks=e[s].callbacks.slice();e[s].childEvents.push(i)}}function rn(t,n){const e=ii(t)[n];if(!e)return[];let s=[e.callbacks];for(let i=0;i<e.childEvents.length;i++){const r=rn(t,e.childEvents[i]);s=s.concat(r)}return s}function ri(t,n){let e;return!t._events||!(e=t._events[n])||!e.callbacks.length?n.indexOf(":")>-1?ri(t,n.substr(0,n.lastIndexOf(":"))):null:e.callbacks}function rs(t,n,e){for(let[s,i]of t){i?typeof i=="function"&&(i=i(n.name)):i=n.name;const r=new Ue(n.source,i);r.path=[...n.path],s.fire(r,...e)}}function sh(t,n,e,s,i){n._addEventListener?n._addEventListener(e,s,i):t._addEventListener.call(n,e,s,i)}function Vt(t,n,e,s){n._removeEventListener?n._removeEventListener(e,s):t._removeEventListener.call(n,e,s)}const st=Symbol("observableProperties"),ft=Symbol("boundObservables"),it=Symbol("boundProperties"),Ee=Symbol("decoratedMethods"),os=Symbol("decoratedOriginal"),oi=wn(V());function wn(t){var e,s,i,r;if(!t)return oi;class n extends t{constructor(){super(...arguments);h(this,e);h(this,s);h(this,i);h(this,r)}set(l,c){if(ke(l)){Object.keys(l).forEach(g=>{this.set(g,l[g])},this);return}Jt(this);const d=this[st];if(l in this&&!d.has(l))throw new p("observable-set-cannot-override",this);Object.defineProperty(this,l,{enumerable:!0,configurable:!0,get(){return d.get(l)},set(g){const _=d.get(l);let m=this.fire(`set:${l}`,l,g,_);m===void 0&&(m=g),(_!==m||!d.has(l))&&(d.set(l,m),this.fire(`change:${l}`,l,m,_))}}),this[l]=c}bind(...l){if(!l.length||!as(l))throw new p("observable-bind-wrong-properties",this);if(new Set(l).size!==l.length)throw new p("observable-bind-duplicate-properties",this);Jt(this);const c=this[it];l.forEach(g=>{if(c.has(g))throw new p("observable-bind-rebind",this)});const d=new Map;return l.forEach(g=>{const _={property:g,to:[]};c.set(g,_),d.set(g,_)}),{to:ih,toMany:rh,_observable:this,_bindProperties:l,_to:[],_bindings:d}}unbind(...l){if(!this[st])return;const c=this[it],d=this[ft];if(l.length){if(!as(l))throw new p("observable-unbind-wrong-properties",this);l.forEach(g=>{const _=c.get(g);_&&(_.to.forEach(([m,E])=>{const P=d.get(m),C=P[E];C.delete(_),C.size||delete P[E],Object.keys(P).length||(d.delete(m),this.stopListening(m,"change"))}),c.delete(g))})}else d.forEach((g,_)=>{this.stopListening(_,"change")}),d.clear(),c.clear()}decorate(l){Jt(this);const c=this[l];if(!c)throw new p("observablemixin-cannot-decorate-undefined",this,{object:this,methodName:l});this.on(l,(d,g)=>{d.return=c.apply(this,g)}),this[l]=function(...d){return this.fire(l,d)},this[l][os]=c,this[Ee]||(this[Ee]=[]),this[Ee].push(l)}stopListening(l,c,d){if(!l&&this[Ee]){for(const g of this[Ee])this[g]=this[g][os];delete this[Ee]}super.stopListening(l,c,d)}}return e=st,s=Ee,i=it,r=ft,n}["set","bind","unbind","decorate","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(t=>{wn[t]=oi.prototype[t]});function Jt(t){t[st]||(Object.defineProperty(t,st,{value:new Map}),Object.defineProperty(t,ft,{value:new Map}),Object.defineProperty(t,it,{value:new Map}))}function ih(...t){const n=ah(...t),e=Array.from(this._bindings.keys()),s=e.length;if(!n.callback&&n.to.length>1)throw new p("observable-bind-to-no-callback",this);if(s>1&&n.callback)throw new p("observable-bind-to-extra-callback",this);n.to.forEach(i=>{if(i.properties.length&&i.properties.length!==s)throw new p("observable-bind-to-properties-length",this);i.properties.length||(i.properties=this._bindProperties)}),this._to=n.to,n.callback&&(this._bindings.get(e[0]).callback=n.callback),hh(this._observable,this._to),ch(this),this._bindProperties.forEach(i=>{ai(this._observable,i)})}function rh(t,n,e){if(this._bindings.size>1)throw new p("observable-bind-to-many-not-one-binding",this);this.to(...oh(t,n),e)}function oh(t,n){const e=t.map(s=>[s,n]);return Array.prototype.concat.apply([],e)}function as(t){return t.every(n=>typeof n=="string")}function ah(...t){if(!t.length)throw new p("observable-bind-to-parse-error",null);const n={to:[]};let e;return typeof t[t.length-1]=="function"&&(n.callback=t.pop()),t.forEach(s=>{if(typeof s=="string")e.properties.push(s);else if(typeof s=="object")e={observable:s,properties:[]},n.to.push(e);else throw new p("observable-bind-to-parse-error",null)}),n}function lh(t,n,e,s){const i=t[ft],r=i.get(e),o=r||{};o[s]||(o[s]=new Set),o[s].add(n),r||i.set(e,o)}function ch(t){let n;t._bindings.forEach((e,s)=>{t._to.forEach(i=>{n=i.properties[e.callback?0:t._bindProperties.indexOf(s)],e.to.push([i.observable,n]),lh(t._observable,e,i.observable,n)})})}function ai(t,n){const s=t[it].get(n);let i;s.callback?i=s.callback.apply(t,s.to.map(r=>r[0][r[1]])):(i=s.to[0],i=i[0][i[1]]),Object.prototype.hasOwnProperty.call(t,n)?t[n]=i:t.set(n,i)}function hh(t,n){n.forEach(e=>{const s=t[ft];let i;s.get(e.observable)||t.listenTo(e.observable,"change",(r,o)=>{i=s.get(e.observable)[o],i&&i.forEach(a=>{ai(t,a.property)})})})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function ls(t){let n=0;for(const e of t)n++;return n}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function K(t,n){const e=Math.min(t.length,n.length);for(let s=0;s<e;s++)if(t[s]!=n[s])return s;return t.length==n.length?"same":t.length<n.length?"prefix":"extension"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function we(t){return!!(t&&t[Symbol.iterator])}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function cs(t){if(t){if(t.defaultView)return t instanceof t.defaultView.Document;if(t.ownerDocument&&t.ownerDocument.defaultView)return t instanceof t.ownerDocument.defaultView.Node}return!1}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function hs(t){const n=Object.prototype.toString.apply(t);return n=="[object Window]"||n=="[object global]"}const li=ci(V());function ci(t){if(!t)return li;class n extends t{listenTo(s,i,r,o={}){if(cs(s)||hs(s)){const a={capture:!!o.useCapture,passive:!!o.usePassive},l=this._getProxyEmitter(s,a)||new uh(s,a);this.listenTo(l,i,r,o)}else super.listenTo(s,i,r,o)}stopListening(s,i,r){if(cs(s)||hs(s)){const o=this._getAllProxyEmitters(s);for(const a of o)this.stopListening(a,i,r)}else super.stopListening(s,i,r)}_getProxyEmitter(s,i){return eh(this,hi(s,i))}_getAllProxyEmitters(s){return[{capture:!1,passive:!1},{capture:!1,passive:!0},{capture:!0,passive:!1},{capture:!0,passive:!0}].map(i=>this._getProxyEmitter(s,i)).filter(i=>!!i)}}return n}["_getProxyEmitter","_getAllProxyEmitters","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(t=>{ci[t]=li.prototype[t]});class uh extends V(){constructor(e,s){super();h(this,"_domNode");h(this,"_options");h(this,"_domListeners");si(this,hi(e,s)),this._domNode=e,this._options=s}attach(e){if(this._domListeners&&this._domListeners[e])return;const s=this._createDomListener(e);this._domNode.addEventListener(e,s,this._options),this._domListeners||(this._domListeners={}),this._domListeners[e]=s}detach(e){let s;this._domListeners[e]&&(!(s=this._events[e])||!s.callbacks.length)&&this._domListeners[e].removeListener()}_addEventListener(e,s,i){this.attach(e),V().prototype._addEventListener.call(this,e,s,i)}_removeEventListener(e,s){V().prototype._removeEventListener.call(this,e,s),this.detach(e)}_createDomListener(e){const s=i=>{this.fire(e,i)};return s.removeListener=()=>{this._domNode.removeEventListener(e,s,this._options),delete this._domListeners[e]},s}}function fh(t){return t["data-ck-expando"]||(t["data-ck-expando"]=$t())}function hi(t,n){let e=fh(t);for(const s of Object.keys(n).sort())n[s]&&(e+="-"+s);return e}const rt=dh();function dh(){const t={pageup:33,pagedown:34,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,backspace:8,delete:46,enter:13,space:32,esc:27,tab:9,ctrl:1114112,shift:2228224,alt:4456448,cmd:8912896};for(let n=65;n<=90;n++){const e=String.fromCharCode(n);t[e.toLowerCase()]=n}for(let n=48;n<=57;n++)t[n-48]=n;for(let n=112;n<=123;n++)t["f"+(n-111)]=n;return Object.assign(t,{"'":222,",":108,"-":109,".":110,"/":111,";":186,"=":187,"[":219,"\\":220,"]":221,"`":223}),t}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function St(t){return Array.isArray(t)?t:[t]}/* istanbul ignore else -- @preserve */ut.window.CKEDITOR_TRANSLATIONS||(ut.window.CKEDITOR_TRANSLATIONS={});class gh extends V(){constructor(e={},s={}){super();h(this,"_items");h(this,"_itemMap");h(this,"_idProperty");h(this,"_bindToCollection");h(this,"_bindToExternalToInternalMap");h(this,"_bindToInternalToExternalMap");h(this,"_skippedIndexesFromExternal");const i=we(e);if(i||(s=e),this._items=[],this._itemMap=new Map,this._idProperty=s.idProperty||"id",this._bindToExternalToInternalMap=new WeakMap,this._bindToInternalToExternalMap=new WeakMap,this._skippedIndexesFromExternal=[],i)for(const r of e)this._items.push(r),this._itemMap.set(this._getItemIdBeforeAdding(r),r)}get length(){return this._items.length}get first(){return this._items[0]||null}get last(){return this._items[this.length-1]||null}add(e,s){return this.addMany([e],s)}addMany(e,s){if(s===void 0)s=this._items.length;else if(s>this._items.length||s<0)throw new p("collection-add-item-invalid-index",this);let i=0;for(const r of e){const o=this._getItemIdBeforeAdding(r),a=s+i;this._items.splice(a,0,r),this._itemMap.set(o,r),this.fire("add",r,a),i++}return this.fire("change",{added:e,removed:[],index:s}),this}get(e){let s;if(typeof e=="string")s=this._itemMap.get(e);else if(typeof e=="number")s=this._items[e];else throw new p("collection-get-invalid-arg",this);return s||null}has(e){if(typeof e=="string")return this._itemMap.has(e);{const s=this._idProperty,i=e[s];return i&&this._itemMap.has(i)}}getIndex(e){let s;return typeof e=="string"?s=this._itemMap.get(e):s=e,s?this._items.indexOf(s):-1}remove(e){const[s,i]=this._remove(e);return this.fire("change",{added:[],removed:[s],index:i}),s}map(e,s){return this._items.map(e,s)}forEach(e,s){this._items.forEach(e,s)}find(e,s){return this._items.find(e,s)}filter(e,s){return this._items.filter(e,s)}clear(){this._bindToCollection&&(this.stopListening(this._bindToCollection),this._bindToCollection=null);const e=Array.from(this._items);for(;this.length;)this._remove(0);this.fire("change",{added:[],removed:e,index:0})}bindTo(e){if(this._bindToCollection)throw new p("collection-bind-to-rebind",this);return this._bindToCollection=e,{as:s=>{this._setUpBindToBinding(i=>new s(i))},using:s=>{typeof s=="function"?this._setUpBindToBinding(s):this._setUpBindToBinding(i=>i[s])}}}_setUpBindToBinding(e){const s=this._bindToCollection,i=(r,o,a)=>{const l=s._bindToCollection==this,c=s._bindToInternalToExternalMap.get(o);if(l&&c)this._bindToExternalToInternalMap.set(o,c),this._bindToInternalToExternalMap.set(c,o);else{const d=e(o);if(!d){this._skippedIndexesFromExternal.push(a);return}let g=a;for(const _ of this._skippedIndexesFromExternal)a>_&&g--;for(const _ of s._skippedIndexesFromExternal)g>=_&&g++;this._bindToExternalToInternalMap.set(o,d),this._bindToInternalToExternalMap.set(d,o),this.add(d,g);for(let _=0;_<s._skippedIndexesFromExternal.length;_++)g<=s._skippedIndexesFromExternal[_]&&s._skippedIndexesFromExternal[_]++}};for(const r of s)i(null,r,s.getIndex(r));this.listenTo(s,"add",i),this.listenTo(s,"remove",(r,o,a)=>{const l=this._bindToExternalToInternalMap.get(o);l&&this.remove(l),this._skippedIndexesFromExternal=this._skippedIndexesFromExternal.reduce((c,d)=>(a<d&&c.push(d-1),a>d&&c.push(d),c),[])})}_getItemIdBeforeAdding(e){const s=this._idProperty;let i;if(s in e){if(i=e[s],typeof i!="string")throw new p("collection-add-invalid-id",this);if(this.get(i))throw new p("collection-add-item-already-exists",this)}else e[s]=i=$t();return i}_remove(e){let s,i,r,o=!1;const a=this._idProperty;if(typeof e=="string"?(i=e,r=this._itemMap.get(i),o=!r,r&&(s=this._items.indexOf(r))):typeof e=="number"?(s=e,r=this._items[s],o=!r,r&&(i=r[a])):(r=e,i=r[a],s=this._items.indexOf(r),o=s==-1||!this._itemMap.get(i)),o)throw new p("collection-remove-404",this);this._items.splice(s,1),this._itemMap.delete(i);const l=this._bindToInternalToExternalMap.get(r);return this._bindToInternalToExternalMap.delete(r),this._bindToExternalToInternalMap.delete(l),this.fire("remove",r,s),[r,s]}[Symbol.iterator](){return this._items[Symbol.iterator]()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function ph(t){const n=new Map;for(const e in t)n.set(e,t[e]);return n}function dt(t){return we(t)?new Map(t):ph(t)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const mh=1e4;function us(t,n,e,s){if(Math.max(n.length,t.length)>mh)return t.slice(0,e).concat(n).concat(t.slice(e+s,t.length));{const i=Array.from(t);return i.splice(e,s,...n),i}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 *//**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let Ie=class{is(){throw new Error("is() method is abstract")}},je=class extends V(Ie){constructor(e){super();h(this,"document");h(this,"parent");this.document=e,this.parent=null}get index(){let e;if(!this.parent)return null;if((e=this.parent.getChildIndex(this))==-1)throw new p("view-node-not-found-in-parent",this);return e}get nextSibling(){const e=this.index;return e!==null&&this.parent.getChild(e+1)||null}get previousSibling(){const e=this.index;return e!==null&&this.parent.getChild(e-1)||null}get root(){let e=this;for(;e.parent;)e=e.parent;return e}isAttached(){return this.root.is("rootElement")}getPath(){const e=[];let s=this;for(;s.parent;)e.unshift(s.index),s=s.parent;return e}getAncestors(e={}){const s=[];let i=e.includeSelf?this:this.parent;for(;i;)s[e.parentFirst?"push":"unshift"](i),i=i.parent;return s}getCommonAncestor(e,s={}){const i=this.getAncestors(s),r=e.getAncestors(s);let o=0;for(;i[o]==r[o]&&i[o];)o++;return o===0?null:i[o-1]}isBefore(e){if(this==e||this.root!==e.root)return!1;const s=this.getPath(),i=e.getPath(),r=K(s,i);switch(r){case"prefix":return!0;case"extension":return!1;default:return s[r]<i[r]}}isAfter(e){return this==e||this.root!==e.root?!1:!this.isBefore(e)}_remove(){this.parent._removeChildren(this.index)}_fireChange(e,s){this.fire(`change:${e}`,s),this.parent&&this.parent._fireChange(e,s)}toJSON(){const e=gc(this);return delete e.parent,e}};je.prototype.is=function(t){return t==="node"||t==="view:node"};let ne=class on extends je{constructor(e,s){super(e);h(this,"_textData");this._textData=s}get data(){return this._textData}get _data(){return this.data}set _data(e){this._fireChange("text",this),this._textData=e}isSimilar(e){return e instanceof on?this===e||this.data===e.data:!1}_clone(){return new on(this.document,this.data)}};ne.prototype.is=function(t){return t==="$text"||t==="view:$text"||t==="text"||t==="view:text"||t==="node"||t==="view:node"};let ae=class extends Ie{constructor(e,s,i){super();h(this,"textNode");h(this,"data");h(this,"offsetInText");if(this.textNode=e,s<0||s>e.data.length)throw new p("view-textproxy-wrong-offsetintext",this);if(i<0||s+i>e.data.length)throw new p("view-textproxy-wrong-length",this);this.data=e.data.substring(s,s+i),this.offsetInText=s}get offsetSize(){return this.data.length}get isPartial(){return this.data.length!==this.textNode.data.length}get parent(){return this.textNode.parent}get root(){return this.textNode.root}get document(){return this.textNode.document}getAncestors(e={}){const s=[];let i=e.includeSelf?this.textNode:this.parent;for(;i!==null;)s[e.parentFirst?"push":"unshift"](i),i=i.parent;return s}};ae.prototype.is=function(t){return t==="$textProxy"||t==="view:$textProxy"||t==="textProxy"||t==="view:textProxy"};class _h{constructor(...n){h(this,"_patterns",[]);this.add(...n)}add(...n){for(let e of n)(typeof e=="string"||e instanceof RegExp)&&(e={name:e}),this._patterns.push(e)}match(...n){for(const e of n)for(const s of this._patterns){const i=fs(e,s);if(i)return{element:e,pattern:s,match:i}}return null}matchAll(...n){const e=[];for(const s of n)for(const i of this._patterns){const r=fs(s,i);r&&e.push({element:s,pattern:i,match:r})}return e.length>0?e:null}getElementName(){if(this._patterns.length!==1)return null;const n=this._patterns[0],e=n.name;return typeof n!="function"&&e&&!(e instanceof RegExp)?e:null}}function fs(t,n){if(typeof n=="function")return n(t);const e={};return n.name&&(e.name=yh(n.name,t.name),!e.name)||n.attributes&&(e.attributes=vh(n.attributes,t),!e.attributes)||n.classes&&(e.classes=Ph(n.classes,t),!e.classes)||n.styles&&(e.styles=kh(n.styles,t),!e.styles)?null:e}function yh(t,n){return t instanceof RegExp?!!n.match(t):t===n}function bn(t,n,e){const s=wh(t),i=Array.from(n),r=[];if(s.forEach(([o,a])=>{i.forEach(l=>{bh(o,l)&&xh(a,l,e)&&r.push(l)})}),!(!s.length||r.length<s.length))return r}function wh(t){return Array.isArray(t)?t.map(n=>Zt(n)?((n.key===void 0||n.value===void 0)&&nn("matcher-pattern-missing-key-or-value",n),[n.key,n.value]):[n,!0]):Zt(t)?Object.entries(t):[[t,!0]]}function bh(t,n){return t===!0||t===n||t instanceof RegExp&&n.match(t)}function xh(t,n,e){if(t===!0)return!0;const s=e(n);return t===s||t instanceof RegExp&&!!String(s).match(t)}function vh(t,n){const e=new Set(n.getAttributeKeys());return Zt(t)?(t.style!==void 0&&nn("matcher-pattern-deprecated-attributes-style-key",t),t.class!==void 0&&nn("matcher-pattern-deprecated-attributes-class-key",t)):(e.delete("style"),e.delete("class")),bn(t,e,s=>n.getAttribute(s))}function Ph(t,n){return bn(t,n.getClassNames(),()=>{})}function kh(t,n){return bn(t,n.getStyleNames(!0),e=>n.getStyle(e))}class Sh{constructor(n){h(this,"_styles");h(this,"_styleProcessor");this._styles={},this._styleProcessor=n}get isEmpty(){return!Object.entries(this._styles).length}get size(){return this.isEmpty?0:this.getStyleNames().length}setTo(n){this.clear();const e=Ah(n);for(const[s,i]of e)this._styleProcessor.toNormalizedForm(s,i,this._styles)}has(n){if(this.isEmpty)return!1;const s=this._styleProcessor.getReducedForm(n,this._styles).find(([i])=>i===n);return Array.isArray(s)}set(n,e){if(ke(n))for(const[s,i]of Object.entries(n))this._styleProcessor.toNormalizedForm(s,i,this._styles);else this._styleProcessor.toNormalizedForm(n,e,this._styles)}remove(n){const e=Th(n);Kc(this._styles,e),delete this._styles[n],this._cleanEmptyObjectsOnPath(e)}getNormalized(n){return this._styleProcessor.getNormalized(n,this._styles)}toString(){return this.isEmpty?"":this.getStylesEntries().map(n=>n.join(":")).sort().join(";")+";"}getAsString(n){if(this.isEmpty)return;if(this._styles[n]&&!ke(this._styles[n]))return this._styles[n];const s=this._styleProcessor.getReducedForm(n,this._styles).find(([i])=>i===n);if(Array.isArray(s))return s[1]}getStyleNames(n=!1){return this.isEmpty?[]:n?this._styleProcessor.getStyleNames(this._styles):this.getStylesEntries().map(([s])=>s)}clear(){this._styles={}}getStylesEntries(){const n=[],e=Object.keys(this._styles);for(const s of e)n.push(...this._styleProcessor.getReducedForm(s,this._styles));return n}_cleanEmptyObjectsOnPath(n){const e=n.split(".");if(!(e.length>1))return;const i=e.splice(0,e.length-1).join("."),r=xa(this._styles,i);if(!r)return;!Object.keys(r).length&&this.remove(i)}}function Ah(t){let n=null,e=0,s=0,i=null;const r=new Map;if(t==="")return r;t.charAt(t.length-1)!=";"&&(t=t+";");for(let o=0;o<t.length;o++){const a=t.charAt(o);if(n===null)switch(a){case":":i||(i=t.substr(e,o-e),s=o+1);break;case'"':case"'":n=a;break;case";":{const l=t.substr(s,o-s);i&&r.set(i.trim(),l.trim()),i=null,e=o+1;break}}else a===n&&(n=null)}return r}function Th(t){return t.replace("-",".")}let Se=class ui extends je{constructor(e,s,i,r){super(e);h(this,"name");h(this,"_unsafeAttributesToRender",[]);h(this,"_attrs");h(this,"_children");h(this,"_classes");h(this,"_styles");h(this,"_customProperties",new Map);if(this.name=s,this._attrs=Eh(i),this._children=[],r&&this._insertChild(0,r),this._classes=new Set,this._attrs.has("class")){const o=this._attrs.get("class");ds(this._classes,o),this._attrs.delete("class")}this._styles=new Sh(this.document.stylesProcessor),this._attrs.has("style")&&(this._styles.setTo(this._attrs.get("style")),this._attrs.delete("style"))}get childCount(){return this._children.length}get isEmpty(){return this._children.length===0}getChild(e){return this._children[e]}getChildIndex(e){return this._children.indexOf(e)}getChildren(){return this._children[Symbol.iterator]()}*getAttributeKeys(){this._classes.size>0&&(yield"class"),this._styles.isEmpty||(yield"style"),yield*this._attrs.keys()}*getAttributes(){yield*this._attrs.entries(),this._classes.size>0&&(yield["class",this.getAttribute("class")]),this._styles.isEmpty||(yield["style",this.getAttribute("style")])}getAttribute(e){if(e=="class")return this._classes.size>0?[...this._classes].join(" "):void 0;if(e=="style"){const s=this._styles.toString();return s==""?void 0:s}return this._attrs.get(e)}hasAttribute(e){return e=="class"?this._classes.size>0:e=="style"?!this._styles.isEmpty:this._attrs.has(e)}isSimilar(e){if(!(e instanceof ui))return!1;if(this===e)return!0;if(this.name!=e.name||this._attrs.size!==e._attrs.size||this._classes.size!==e._classes.size||this._styles.size!==e._styles.size)return!1;for(const[s,i]of this._attrs)if(!e._attrs.has(s)||e._attrs.get(s)!==i)return!1;for(const s of this._classes)if(!e._classes.has(s))return!1;for(const s of this._styles.getStyleNames())if(!e._styles.has(s)||e._styles.getAsString(s)!==this._styles.getAsString(s))return!1;return!0}hasClass(...e){for(const s of e)if(!this._classes.has(s))return!1;return!0}getClassNames(){return this._classes.keys()}getStyle(e){return this._styles.getAsString(e)}getNormalizedStyle(e){return this._styles.getNormalized(e)}getStyleNames(e){return this._styles.getStyleNames(e)}hasStyle(...e){for(const s of e)if(!this._styles.has(s))return!1;return!0}findAncestor(...e){const s=new _h(...e);let i=this.parent;for(;i&&!i.is("documentFragment");){if(s.match(i))return i;i=i.parent}return null}getCustomProperty(e){return this._customProperties.get(e)}*getCustomProperties(){yield*this._customProperties.entries()}getIdentity(){const e=Array.from(this._classes).sort().join(","),s=this._styles.toString(),i=Array.from(this._attrs).map(r=>`${r[0]}="${r[1]}"`).sort().join(" ");return this.name+(e==""?"":` class="${e}"`)+(s?` style="${s}"`:"")+(i==""?"":` ${i}`)}shouldRenderUnsafeAttribute(e){return this._unsafeAttributesToRender.includes(e)}_clone(e=!1){const s=[];if(e)for(const r of this.getChildren())s.push(r._clone(e));const i=new this.constructor(this.document,this.name,this._attrs,s);return i._classes=new Set(this._classes),i._styles.set(this._styles.getNormalized()),i._customProperties=new Map(this._customProperties),i.getFillerOffset=this.getFillerOffset,i._unsafeAttributesToRender=this._unsafeAttributesToRender,i}_appendChild(e){return this._insertChild(this.childCount,e)}_insertChild(e,s){this._fireChange("children",this);let i=0;const r=Oh(this.document,s);for(const o of r)o.parent!==null&&o._remove(),o.parent=this,o.document=this.document,this._children.splice(e,0,o),e++,i++;return i}_removeChildren(e,s=1){this._fireChange("children",this);for(let i=e;i<e+s;i++)this._children[i].parent=null;return this._children.splice(e,s)}_setAttribute(e,s){const i=String(s);this._fireChange("attributes",this),e=="class"?ds(this._classes,i):e=="style"?this._styles.setTo(i):this._attrs.set(e,i)}_removeAttribute(e){return this._fireChange("attributes",this),e=="class"?this._classes.size>0?(this._classes.clear(),!0):!1:e=="style"?this._styles.isEmpty?!1:(this._styles.clear(),!0):this._attrs.delete(e)}_addClass(e){this._fireChange("attributes",this);for(const s of St(e))this._classes.add(s)}_removeClass(e){this._fireChange("attributes",this);for(const s of St(e))this._classes.delete(s)}_setStyle(e,s){this._fireChange("attributes",this),typeof e!="string"?this._styles.set(e):this._styles.set(e,s)}_removeStyle(e){this._fireChange("attributes",this);for(const s of St(e))this._styles.remove(s)}_setCustomProperty(e,s){this._customProperties.set(e,s)}_removeCustomProperty(e){return this._customProperties.delete(e)}};Se.prototype.is=function(t,n){return n?n===this.name&&(t==="element"||t==="view:element"):t==="element"||t==="view:element"||t==="node"||t==="view:node"};function Eh(t){const n=dt(t);for(const[e,s]of n)s===null?n.delete(e):typeof s!="string"&&n.set(e,String(s));return n}function ds(t,n){const e=n.split(/\s+/);t.clear(),e.forEach(s=>t.add(s))}function Oh(t,n){return typeof n=="string"?[new ne(t,n)]:(we(n)||(n=[n]),Array.from(n).map(e=>typeof e=="string"?new ne(t,e):e instanceof ae?new ne(t,e.data):e))}class fi extends Se{constructor(n,e,s,i){super(n,e,s,i),this.getFillerOffset=Rh}}fi.prototype.is=function(t,n){return n?n===this.name&&(t==="containerElement"||t==="view:containerElement"||t==="element"||t==="view:element"):t==="containerElement"||t==="view:containerElement"||t==="element"||t==="view:element"||t==="node"||t==="view:node"};function Rh(){const t=[...this.getChildren()],n=t[this.childCount-1];if(n&&n.is("element","br"))return this.childCount;for(const e of t)if(!e.is("uiElement"))return null;return this.childCount}class xn extends wn(fi){constructor(n,e,s,i){super(n,e,s,i),this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("placeholder",void 0),this.bind("isReadOnly").to(n),this.bind("isFocused").to(n,"isFocused",r=>r&&n.selection.editableElement==this),this.listenTo(n.selection,"change",()=>{this.isFocused=n.isFocused&&n.selection.editableElement==this})}destroy(){this.stopListening()}}xn.prototype.is=function(t,n){return n?n===this.name&&(t==="editableElement"||t==="view:editableElement"||t==="containerElement"||t==="view:containerElement"||t==="element"||t==="view:element"):t==="editableElement"||t==="view:editableElement"||t==="containerElement"||t==="view:containerElement"||t==="element"||t==="view:element"||t==="node"||t==="view:node"};const gs=Symbol("rootName");class Ch extends xn{constructor(n,e){super(n,e),this.rootName="main"}get rootName(){return this.getCustomProperty(gs)}set rootName(n){this._setCustomProperty(gs,n)}set _name(n){this.name=n}}Ch.prototype.is=function(t,n){return n?n===this.name&&(t==="rootElement"||t==="view:rootElement"||t==="editableElement"||t==="view:editableElement"||t==="containerElement"||t==="view:containerElement"||t==="element"||t==="view:element"):t==="rootElement"||t==="view:rootElement"||t==="editableElement"||t==="view:editableElement"||t==="containerElement"||t==="view:containerElement"||t==="element"||t==="view:element"||t==="node"||t==="view:node"};let qe=class{constructor(n={}){h(this,"direction");h(this,"boundaries");h(this,"singleCharacters");h(this,"shallow");h(this,"ignoreElementEnd");h(this,"_position");h(this,"_boundaryStartParent");h(this,"_boundaryEndParent");if(!n.boundaries&&!n.startPosition)throw new p("view-tree-walker-no-start-position",null);if(n.direction&&n.direction!="forward"&&n.direction!="backward")throw new p("view-tree-walker-unknown-direction",n.startPosition,{direction:n.direction});this.boundaries=n.boundaries||null,n.startPosition?this._position=M._createAt(n.startPosition):this._position=M._createAt(n.boundaries[n.direction=="backward"?"end":"start"]),this.direction=n.direction||"forward",this.singleCharacters=!!n.singleCharacters,this.shallow=!!n.shallow,this.ignoreElementEnd=!!n.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null}[Symbol.iterator](){return this}get position(){return this._position}skip(n){let e,s;do s=this.position,e=this.next();while(!e.done&&n(e.value));e.done||(this._position=s)}next(){return this.direction=="forward"?this._next():this._previous()}_next(){let n=this.position.clone();const e=this.position,s=n.parent;if(s.parent===null&&n.offset===s.childCount)return{done:!0,value:void 0};if(s===this._boundaryEndParent&&n.offset==this.boundaries.end.offset)return{done:!0,value:void 0};let i;if(s instanceof ne){if(n.isAtEnd)return this._position=M._createAfter(s),this._next();i=s.data[n.offset]}else i=s.getChild(n.offset);if(i instanceof Se){if(!this.shallow)n=new M(i,0);else{if(this.boundaries&&this.boundaries.end.isBefore(n))return{done:!0,value:void 0};n.offset++}return this._position=n,this._formatReturnValue("elementStart",i,e,n,1)}if(i instanceof ne){if(this.singleCharacters)return n=new M(i,0),this._position=n,this._next();let r=i.data.length,o;return i==this._boundaryEndParent?(r=this.boundaries.end.offset,o=new ae(i,0,r),n=M._createAfter(o)):(o=new ae(i,0,i.data.length),n.offset++),this._position=n,this._formatReturnValue("text",o,e,n,r)}if(typeof i=="string"){let r;this.singleCharacters?r=1:r=(s===this._boundaryEndParent?this.boundaries.end.offset:s.data.length)-n.offset;const o=new ae(s,n.offset,r);return n.offset+=r,this._position=n,this._formatReturnValue("text",o,e,n,r)}return n=M._createAfter(s),this._position=n,this.ignoreElementEnd?this._next():this._formatReturnValue("elementEnd",s,e,n)}_previous(){let n=this.position.clone();const e=this.position,s=n.parent;if(s.parent===null&&n.offset===0)return{done:!0,value:void 0};if(s==this._boundaryStartParent&&n.offset==this.boundaries.start.offset)return{done:!0,value:void 0};let i;if(s instanceof ne){if(n.isAtStart)return this._position=M._createBefore(s),this._previous();i=s.data[n.offset-1]}else i=s.getChild(n.offset-1);if(i instanceof Se)return this.shallow?(n.offset--,this._position=n,this._formatReturnValue("elementStart",i,e,n,1)):(n=new M(i,i.childCount),this._position=n,this.ignoreElementEnd?this._previous():this._formatReturnValue("elementEnd",i,e,n));if(i instanceof ne){if(this.singleCharacters)return n=new M(i,i.data.length),this._position=n,this._previous();let r=i.data.length,o;if(i==this._boundaryStartParent){const a=this.boundaries.start.offset;o=new ae(i,a,i.data.length-a),r=o.data.length,n=M._createBefore(o)}else o=new ae(i,0,i.data.length),n.offset--;return this._position=n,this._formatReturnValue("text",o,e,n,r)}if(typeof i=="string"){let r;if(this.singleCharacters)r=1;else{const a=s===this._boundaryStartParent?this.boundaries.start.offset:0;r=n.offset-a}n.offset-=r;const o=new ae(s,n.offset,r);return this._position=n,this._formatReturnValue("text",o,e,n,r)}return n=M._createBefore(s),this._position=n,this._formatReturnValue("elementStart",s,e,n,1)}_formatReturnValue(n,e,s,i,r){return e instanceof ae&&(e.offsetInText+e.data.length==e.textNode.data.length&&(this.direction=="forward"&&!(this.boundaries&&this.boundaries.end.isEqual(this.position))?(i=M._createAfter(e.textNode),this._position=i):s=M._createAfter(e.textNode)),e.offsetInText===0&&(this.direction=="backward"&&!(this.boundaries&&this.boundaries.start.isEqual(this.position))?(i=M._createBefore(e.textNode),this._position=i):s=M._createBefore(e.textNode))),{done:!1,value:{type:n,item:e,previousPosition:s,nextPosition:i,length:r}}}},M=class fe extends Ie{constructor(e,s){super();h(this,"parent");h(this,"offset");this.parent=e,this.offset=s}get nodeAfter(){return this.parent.is("$text")?null:this.parent.getChild(this.offset)||null}get nodeBefore(){return this.parent.is("$text")?null:this.parent.getChild(this.offset-1)||null}get isAtStart(){return this.offset===0}get isAtEnd(){const e=this.parent.is("$text")?this.parent.data.length:this.parent.childCount;return this.offset===e}get root(){return this.parent.root}get editableElement(){let e=this.parent;for(;!(e instanceof xn);)if(e.parent)e=e.parent;else return null;return e}getShiftedBy(e){const s=fe._createAt(this),i=s.offset+e;return s.offset=i<0?0:i,s}getLastMatchingPosition(e,s={}){s.startPosition=this;const i=new qe(s);return i.skip(e),i.position}getAncestors(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeSelf:!0})}getCommonAncestor(e){const s=this.getAncestors(),i=e.getAncestors();let r=0;for(;s[r]==i[r]&&s[r];)r++;return r===0?null:s[r-1]}isEqual(e){return this.parent==e.parent&&this.offset==e.offset}isBefore(e){return this.compareWith(e)=="before"}isAfter(e){return this.compareWith(e)=="after"}compareWith(e){if(this.root!==e.root)return"different";if(this.isEqual(e))return"same";const s=this.parent.is("node")?this.parent.getPath():[],i=e.parent.is("node")?e.parent.getPath():[];s.push(this.offset),i.push(e.offset);const r=K(s,i);switch(r){case"prefix":return"before";case"extension":return"after";default:return s[r]<i[r]?"before":"after"}}getWalker(e={}){return e.startPosition=this,new qe(e)}clone(){return new fe(this.parent,this.offset)}static _createAt(e,s){if(e instanceof fe)return new this(e.parent,e.offset);{const i=e;if(s=="end")s=i.is("$text")?i.data.length:i.childCount;else{if(s=="before")return this._createBefore(i);if(s=="after")return this._createAfter(i);if(s!==0&&!s)throw new p("view-createpositionat-offset-required",i)}return new fe(i,s)}}static _createAfter(e){if(e.is("$textProxy"))return new fe(e.textNode,e.offsetInText+e.data.length);if(!e.parent)throw new p("view-position-after-root",e,{root:e});return new fe(e.parent,e.index+1)}static _createBefore(e){if(e.is("$textProxy"))return new fe(e.textNode,e.offsetInText);if(!e.parent)throw new p("view-position-before-root",e,{root:e});return new fe(e.parent,e.index)}};M.prototype.is=function(t){return t==="position"||t==="view:position"};let oe=class be extends Ie{constructor(e,s=null){super();h(this,"start");h(this,"end");this.start=e.clone(),this.end=s?s.clone():e.clone()}*[Symbol.iterator](){yield*new qe({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return this.start.parent===this.end.parent}get root(){return this.start.root}getEnlarged(){let e=this.start.getLastMatchingPosition(vt,{direction:"backward"}),s=this.end.getLastMatchingPosition(vt);return e.parent.is("$text")&&e.isAtStart&&(e=M._createBefore(e.parent)),s.parent.is("$text")&&s.isAtEnd&&(s=M._createAfter(s.parent)),new be(e,s)}getTrimmed(){let e=this.start.getLastMatchingPosition(vt);if(e.isAfter(this.end)||e.isEqual(this.end))return new be(e,e);let s=this.end.getLastMatchingPosition(vt,{direction:"backward"});const i=e.nodeAfter,r=s.nodeBefore;return i&&i.is("$text")&&(e=new M(i,0)),r&&r.is("$text")&&(s=new M(r,r.data.length)),new be(e,s)}isEqual(e){return this==e||this.start.isEqual(e.start)&&this.end.isEqual(e.end)}containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end)}containsRange(e,s=!1){e.isCollapsed&&(s=!1);const i=this.containsPosition(e.start)||s&&this.start.isEqual(e.start),r=this.containsPosition(e.end)||s&&this.end.isEqual(e.end);return i&&r}getDifference(e){const s=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&s.push(new be(this.start,e.start)),this.containsPosition(e.end)&&s.push(new be(e.end,this.end))):s.push(this.clone()),s}getIntersection(e){if(this.isIntersecting(e)){let s=this.start,i=this.end;return this.containsPosition(e.start)&&(s=e.start),this.containsPosition(e.end)&&(i=e.end),new be(s,i)}return null}getWalker(e={}){return e.boundaries=this,new qe(e)}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;let e=this.start.nodeAfter,s=this.end.nodeBefore;return this.start.parent.is("$text")&&this.start.isAtEnd&&this.start.parent.nextSibling&&(e=this.start.parent.nextSibling),this.end.parent.is("$text")&&this.end.isAtStart&&this.end.parent.previousSibling&&(s=this.end.parent.previousSibling),e&&e.is("element")&&e===s?e:null}clone(){return new be(this.start,this.end)}*getItems(e={}){e.boundaries=this,e.ignoreElementEnd=!0;const s=new qe(e);for(const i of s)yield i.item}*getPositions(e={}){e.boundaries=this;const s=new qe(e);yield s.position;for(const i of s)yield i.nextPosition}isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}static _createFromParentsAndOffsets(e,s,i,r){return new this(new M(e,s),new M(i,r))}static _createFromPositionAndShift(e,s){const i=e,r=e.getShiftedBy(s);return s>0?new this(i,r):new this(r,i)}static _createIn(e){return this._createFromParentsAndOffsets(e,0,e,e.childCount)}static _createOn(e){const s=e.is("$textProxy")?e.offsetSize:1;return this._createFromPositionAndShift(M._createBefore(e),s)}};oe.prototype.is=function(t){return t==="range"||t==="view:range"};function vt(t){return!!(t.item.is("attributeElement")||t.item.is("uiElement"))}let di=class gi extends V(Ie){constructor(...e){super();h(this,"_ranges");h(this,"_lastRangeBackward");h(this,"_isFake");h(this,"_fakeSelectionLabel");this._ranges=[],this._lastRangeBackward=!1,this._isFake=!1,this._fakeSelectionLabel="",e.length&&this.setTo(...e)}get isFake(){return this._isFake}get fakeSelectionLabel(){return this._fakeSelectionLabel}get anchor(){if(!this._ranges.length)return null;const e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.end:e.start).clone()}get focus(){if(!this._ranges.length)return null;const e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.start:e.end).clone()}get isCollapsed(){return this.rangeCount===1&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}get editableElement(){return this.anchor?this.anchor.editableElement:null}*getRanges(){for(const e of this._ranges)yield e.clone()}getFirstRange(){let e=null;for(const s of this._ranges)(!e||s.start.isBefore(e.start))&&(e=s);return e?e.clone():null}getLastRange(){let e=null;for(const s of this._ranges)(!e||s.end.isAfter(e.end))&&(e=s);return e?e.clone():null}getFirstPosition(){const e=this.getFirstRange();return e?e.start.clone():null}getLastPosition(){const e=this.getLastRange();return e?e.end.clone():null}isEqual(e){if(this.isFake!=e.isFake||this.isFake&&this.fakeSelectionLabel!=e.fakeSelectionLabel||this.rangeCount!=e.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;for(const s of this._ranges){let i=!1;for(const r of e._ranges)if(s.isEqual(r)){i=!0;break}if(!i)return!1}return!0}isSimilar(e){if(this.isBackward!=e.isBackward)return!1;const s=ls(this.getRanges()),i=ls(e.getRanges());if(s!=i)return!1;if(s==0)return!0;for(let r of this.getRanges()){r=r.getTrimmed();let o=!1;for(let a of e.getRanges())if(a=a.getTrimmed(),r.start.isEqual(a.start)&&r.end.isEqual(a.end)){o=!0;break}if(!o)return!1}return!0}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}setTo(...e){let[s,i,r]=e;if(typeof i=="object"&&(r=i,i=void 0),s===null)this._setRanges([]),this._setFakeOptions(r);else if(s instanceof gi||s instanceof pi)this._setRanges(s.getRanges(),s.isBackward),this._setFakeOptions({fake:s.isFake,label:s.fakeSelectionLabel});else if(s instanceof oe)this._setRanges([s],r&&r.backward),this._setFakeOptions(r);else if(s instanceof M)this._setRanges([new oe(s)]),this._setFakeOptions(r);else if(s instanceof je){const o=!!r&&!!r.backward;let a;if(i===void 0)throw new p("view-selection-setto-required-second-parameter",this);i=="in"?a=oe._createIn(s):i=="on"?a=oe._createOn(s):a=new oe(M._createAt(s,i)),this._setRanges([a],o),this._setFakeOptions(r)}else if(we(s))this._setRanges(s,r&&r.backward),this._setFakeOptions(r);else throw new p("view-selection-setto-not-selectable",this);this.fire("change")}setFocus(e,s){if(this.anchor===null)throw new p("view-selection-setfocus-no-ranges",this);const i=M._createAt(e,s);if(i.compareWith(this.focus)=="same")return;const r=this.anchor;this._ranges.pop(),i.compareWith(r)=="before"?this._addRange(new oe(i,r),!0):this._addRange(new oe(r,i)),this.fire("change")}_setRanges(e,s=!1){e=Array.from(e),this._ranges=[];for(const i of e)this._addRange(i);this._lastRangeBackward=!!s}_setFakeOptions(e={}){this._isFake=!!e.fake,this._fakeSelectionLabel=e.fake&&e.label||""}_addRange(e,s=!1){if(!(e instanceof oe))throw new p("view-selection-add-range-not-range",this);this._pushRange(e),this._lastRangeBackward=!!s}_pushRange(e){for(const s of this._ranges)if(e.isIntersecting(s))throw new p("view-selection-range-intersects",this,{addedRange:e,intersectingRange:s});this._ranges.push(new oe(e.start,e.end))}};di.prototype.is=function(t){return t==="selection"||t==="view:selection"};let pi=class extends V(Ie){constructor(...e){super();h(this,"_selection");this._selection=new di,this._selection.delegate("change").to(this),e.length&&this._selection.setTo(...e)}get isFake(){return this._selection.isFake}get fakeSelectionLabel(){return this._selection.fakeSelectionLabel}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get isCollapsed(){return this._selection.isCollapsed}get rangeCount(){return this._selection.rangeCount}get isBackward(){return this._selection.isBackward}get editableElement(){return this._selection.editableElement}get _ranges(){return this._selection._ranges}*getRanges(){yield*this._selection.getRanges()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getSelectedElement(){return this._selection.getSelectedElement()}isEqual(e){return this._selection.isEqual(e)}isSimilar(e){return this._selection.isSimilar(e)}_setTo(...e){this._selection.setTo(...e)}_setFocus(e,s){this._selection.setFocus(e,s)}};pi.prototype.is=function(t){return t==="selection"||t=="documentSelection"||t=="view:selection"||t=="view:documentSelection"};class Nh extends Ue{constructor(e,s,i){super(e,s);h(this,"startRange");h(this,"_eventPhase");h(this,"_currentTarget");this.startRange=i,this._eventPhase="none",this._currentTarget=null}get eventPhase(){return this._eventPhase}get currentTarget(){return this._currentTarget}}const Ut=Symbol("bubbling contexts");function ps(t){class n extends t{fire(s,...i){try{const r=s instanceof Ue?s:new Ue(this,s),o=Wt(this);if(!o.size)return;if(Qe(r,"capturing",this),ze(o,"$capture",r,...i))return r.return;const a=r.startRange||this.selection.getFirstRange(),l=a?a.getContainedElement():null,c=l?!!mi(o,l):!1;let d=l||Mh(a);if(Qe(r,"atTarget",d),!c){if(ze(o,"$text",r,...i))return r.return;Qe(r,"bubbling",d)}for(;d;){if(d.is("rootElement")){if(ze(o,"$root",r,...i))return r.return}else if(d.is("element")&&ze(o,d.name,r,...i))return r.return;if(ze(o,d,r,...i))return r.return;d=d.parent,Qe(r,"bubbling",d)}return Qe(r,"bubbling",this),ze(o,"$document",r,...i),r.return}catch(r){/* istanbul ignore next -- @preserve */p.rethrowUnexpectedError(r,this)}}_addEventListener(s,i,r){const o=St(r.context||"$document"),a=Wt(this);for(const l of o){let c=a.get(l);c||(c=new(V()),a.set(l,c)),this.listenTo(c,s,i,r)}}_removeEventListener(s,i){const r=Wt(this);for(const o of r.values())this.stopListening(o,s,i)}}return n}{const t=ps(Object);["fire","_addEventListener","_removeEventListener"].forEach(n=>{ps[n]=t.prototype[n]})}function Qe(t,n,e){t instanceof Nh&&(t._eventPhase=n,t._currentTarget=e)}function ze(t,n,e,...s){const i=typeof n=="string"?t.get(n):mi(t,n);return i?(i.fire(e,...s),e.stop.called):!1}function mi(t,n){for(const[e,s]of t)if(typeof e=="function"&&e(n))return s;return null}function Wt(t){return t[Ut]||(t[Ut]=new Map),t[Ut]}function Mh(t){if(!t)return null;const n=t.start.parent,e=t.end.parent,s=n.getPath(),i=e.getPath();return s.length>i.length?n:e}const ms=10;class _i extends Se{constructor(e,s,i,r){super(e,s,i,r);h(this,"_priority",ms);h(this,"_id",null);h(this,"_clonesGroup",null);this.getFillerOffset=Bh}get priority(){return this._priority}get id(){return this._id}getElementsWithSameId(){if(this.id===null)throw new p("attribute-element-get-elements-with-same-id-no-id",this);return new Set(this._clonesGroup)}isSimilar(e){return this.id!==null||e.id!==null?this.id===e.id:super.isSimilar(e)&&this.priority==e.priority}_clone(e=!1){const s=super._clone(e);return s._priority=this._priority,s._id=this._id,s}}h(_i,"DEFAULT_PRIORITY",ms);_i.prototype.is=function(t,n){return n?n===this.name&&(t==="attributeElement"||t==="view:attributeElement"||t==="element"||t==="view:element"):t==="attributeElement"||t==="view:attributeElement"||t==="element"||t==="view:element"||t==="node"||t==="view:node"};function Bh(){if(Gt(this))return null;let t=this.parent;for(;t&&t.is("attributeElement");){if(Gt(t)>1)return null;t=t.parent}return!t||Gt(t)>1?null:this.childCount}function Gt(t){return Array.from(t.getChildren()).filter(n=>!n.is("uiElement")).length}class $h extends Se{constructor(n,e,s,i){super(n,e,s,i),this.getFillerOffset=Ih}_insertChild(n,e){if(e&&(e instanceof je||Array.from(e).length>0))throw new p("view-emptyelement-cannot-add",[this,e]);return 0}}$h.prototype.is=function(t,n){return n?n===this.name&&(t==="emptyElement"||t==="view:emptyElement"||t==="element"||t==="view:element"):t==="emptyElement"||t==="view:emptyElement"||t==="element"||t==="view:element"||t==="node"||t==="view:node"};function Ih(){return null}class jh extends Se{constructor(n,e,s,i){super(n,e,s,i),this.getFillerOffset=Fh}_insertChild(n,e){if(e&&(e instanceof je||Array.from(e).length>0))throw new p("view-uielement-cannot-add",[this,e]);return 0}render(n,e){return this.toDomElement(n)}toDomElement(n){const e=n.createElement(this.name);for(const s of this.getAttributeKeys())e.setAttribute(s,this.getAttribute(s));return e}}jh.prototype.is=function(t,n){return n?n===this.name&&(t==="uiElement"||t==="view:uiElement"||t==="element"||t==="view:element"):t==="uiElement"||t==="view:uiElement"||t==="element"||t==="view:element"||t==="node"||t==="view:node"};function Fh(){return null}class Lh extends Se{constructor(n,e,s,i){super(n,e,s,i),this.getFillerOffset=zh}_insertChild(n,e){if(e&&(e instanceof je||Array.from(e).length>0))throw new p("view-rawelement-cannot-add",[this,e]);return 0}render(n,e){}}Lh.prototype.is=function(t,n){return n?n===this.name&&(t==="rawElement"||t==="view:rawElement"||t==="element"||t==="view:element"):t==="rawElement"||t==="view:rawElement"||t===this.name||t==="view:"+this.name||t==="element"||t==="view:element"||t==="node"||t==="view:node"};function zh(){return null}let Dh=class extends V(Ie){constructor(e,s){super();h(this,"document");h(this,"_children",[]);h(this,"_customProperties",new Map);this.document=e,s&&this._insertChild(0,s)}[Symbol.iterator](){return this._children[Symbol.iterator]()}get childCount(){return this._children.length}get isEmpty(){return this.childCount===0}get root(){return this}get parent(){return null}get name(){}get getFillerOffset(){}getCustomProperty(e){return this._customProperties.get(e)}*getCustomProperties(){yield*this._customProperties.entries()}_appendChild(e){return this._insertChild(this.childCount,e)}getChild(e){return this._children[e]}getChildIndex(e){return this._children.indexOf(e)}getChildren(){return this._children[Symbol.iterator]()}_insertChild(e,s){this._fireChange("children",this);let i=0;const r=qh(this.document,s);for(const o of r)o.parent!==null&&o._remove(),o.parent=this,this._children.splice(e,0,o),e++,i++;return i}_removeChildren(e,s=1){this._fireChange("children",this);for(let i=e;i<e+s;i++)this._children[i].parent=null;return this._children.splice(e,s)}_fireChange(e,s){this.fire("change:"+e,s)}_setCustomProperty(e,s){this._customProperties.set(e,s)}_removeCustomProperty(e){return this._customProperties.delete(e)}};Dh.prototype.is=function(t){return t==="documentFragment"||t==="view:documentFragment"};function qh(t,n){return typeof n=="string"?[new ne(t,n)]:(we(n)||(n=[n]),Array.from(n).map(e=>typeof e=="string"?new ne(t,e):e instanceof ae?new ne(t,e.data):e))}const Vh=t=>t.createTextNode(" "),Jh=t=>{const n=t.createElement("span");return n.dataset.ckeFiller="true",n.innerText=" ",n},Uh=t=>{const n=t.createElement("br");return n.dataset.ckeFiller="true",n};Uh(ut.document);Vh(ut.document);Jh(ut.document);/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ae{is(){throw new Error("is() method is abstract")}}let We=class extends Ae{constructor(e){super();h(this,"parent",null);h(this,"_attrs");h(this,"_index",null);h(this,"_startOffset",null);this._attrs=dt(e)}get document(){return null}get index(){return this._index}get startOffset(){return this._startOffset}get offsetSize(){return 1}get endOffset(){return this.startOffset===null?null:this.startOffset+this.offsetSize}get nextSibling(){const e=this.index;return e!==null&&this.parent.getChild(e+1)||null}get previousSibling(){const e=this.index;return e!==null&&this.parent.getChild(e-1)||null}get root(){let e=this;for(;e.parent;)e=e.parent;return e}isAttached(){return this.parent===null?!1:this.root.isAttached()}getPath(){const e=[];let s=this;for(;s.parent;)e.unshift(s.startOffset),s=s.parent;return e}getAncestors(e={}){const s=[];let i=e.includeSelf?this:this.parent;for(;i;)s[e.parentFirst?"push":"unshift"](i),i=i.parent;return s}getCommonAncestor(e,s={}){const i=this.getAncestors(s),r=e.getAncestors(s);let o=0;for(;i[o]==r[o]&&i[o];)o++;return o===0?null:i[o-1]}isBefore(e){if(this==e||this.root!==e.root)return!1;const s=this.getPath(),i=e.getPath(),r=K(s,i);switch(r){case"prefix":return!0;case"extension":return!1;default:return s[r]<i[r]}}isAfter(e){return this==e||this.root!==e.root?!1:!this.isBefore(e)}hasAttribute(e){return this._attrs.has(e)}getAttribute(e){return this._attrs.get(e)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}toJSON(){const e={};return this._attrs.size&&(e.attributes=Array.from(this._attrs).reduce((s,i)=>(s[i[0]]=i[1],s),{})),e}_clone(e){return new this.constructor(this._attrs)}_remove(){this.parent._removeChildren(this.index)}_setAttribute(e,s){this._attrs.set(e,s)}_setAttributesTo(e){this._attrs=dt(e)}_removeAttribute(e){return this._attrs.delete(e)}_clearAttributes(){this._attrs.clear()}};We.prototype.is=function(t){return t==="node"||t==="model:node"};class ot{constructor(n){h(this,"_nodes",[]);h(this,"_offsetToNode",[]);n&&this._insertNodes(0,n)}[Symbol.iterator](){return this._nodes[Symbol.iterator]()}get length(){return this._nodes.length}get maxOffset(){return this._offsetToNode.length}getNode(n){return this._nodes[n]||null}getNodeAtOffset(n){return this._offsetToNode[n]||null}getNodeIndex(n){return n.index}getNodeStartOffset(n){return n.startOffset}indexToOffset(n){if(n==this._nodes.length)return this.maxOffset;const e=this._nodes[n];if(!e)throw new p("model-nodelist-index-out-of-bounds",this);return this.getNodeStartOffset(e)}offsetToIndex(n){if(n==this._offsetToNode.length)return this._nodes.length;const e=this._offsetToNode[n];if(!e)throw new p("model-nodelist-offset-out-of-bounds",this,{offset:n,nodeList:this});return this.getNodeIndex(e)}_insertNodes(n,e){for(const o of e)if(!(o instanceof We))throw new p("model-nodelist-insertnodes-not-node",this);const s=Array.from(e),i=Wh(s);let r=this.indexToOffset(n);this._nodes=us(this._nodes,s,n,0),this._offsetToNode=us(this._offsetToNode,i,r,0);for(let o=n;o<this._nodes.length;o++)this._nodes[o]._index=o,this._nodes[o]._startOffset=r,r+=this._nodes[o].offsetSize}_removeNodes(n,e=1){if(e==0)return[];let s=this.indexToOffset(n);const i=this._nodes.splice(n,e),r=i[i.length-1],o=r.startOffset+r.offsetSize-s;this._offsetToNode.splice(s,o);for(const a of i)a._index=null,a._startOffset=null;for(let a=n;a<this._nodes.length;a++)this._nodes[a]._index=a,this._nodes[a]._startOffset=s,s+=this._nodes[a].offsetSize;return i}toJSON(){return this._nodes.map(n=>n.toJSON())}}function Wh(t){const n=[];for(const e of t){const s=n.length;n.length+=e.offsetSize,n.fill(e,s)}return n}class F extends We{constructor(e,s){super(s);h(this,"_data");this._data=e||""}get offsetSize(){return this.data.length}get data(){return this._data}toJSON(){const e=super.toJSON();return e.data=this.data,e}_clone(){return new F(this.data,this.getAttributes())}static fromJSON(e){return new F(e.data,e.attributes)}}F.prototype.is=function(t){return t==="$text"||t==="model:$text"||t==="text"||t==="model:text"||t==="node"||t==="model:node"};class Ne extends Ae{constructor(e,s,i){super();h(this,"textNode");h(this,"data");h(this,"offsetInText");if(this.textNode=e,s<0||s>e.offsetSize)throw new p("model-textproxy-wrong-offsetintext",this);if(i<0||s+i>e.offsetSize)throw new p("model-textproxy-wrong-length",this);this.data=e.data.substring(s,s+i),this.offsetInText=s}get startOffset(){return this.textNode.startOffset!==null?this.textNode.startOffset+this.offsetInText:null}get offsetSize(){return this.data.length}get endOffset(){return this.startOffset!==null?this.startOffset+this.offsetSize:null}get isPartial(){return this.offsetSize!==this.textNode.offsetSize}get parent(){return this.textNode.parent}get root(){return this.textNode.root}getPath(){const e=this.textNode.getPath();return e.length>0&&(e[e.length-1]+=this.offsetInText),e}getAncestors(e={}){const s=[];let i=e.includeSelf?this:this.parent;for(;i;)s[e.parentFirst?"push":"unshift"](i),i=i.parent;return s}hasAttribute(e){return this.textNode.hasAttribute(e)}getAttribute(e){return this.textNode.getAttribute(e)}getAttributes(){return this.textNode.getAttributes()}getAttributeKeys(){return this.textNode.getAttributeKeys()}}Ne.prototype.is=function(t){return t==="$textProxy"||t==="model:$textProxy"||t==="textProxy"||t==="model:textProxy"};class se extends We{constructor(e,s,i){super(s);h(this,"name");h(this,"_children",new ot);this.name=e,i&&this._insertChild(0,i)}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}getChild(e){return this._children.getNode(e)}getChildAtOffset(e){return this._children.getNodeAtOffset(e)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(e){return this._children.getNodeIndex(e)}getChildStartOffset(e){return this._children.getNodeStartOffset(e)}offsetToIndex(e){return this._children.offsetToIndex(e)}getNodeByPath(e){let s=this;for(const i of e)s=s.getChildAtOffset(i);return s}findAncestor(e,s={}){let i=s.includeSelf?this:this.parent;for(;i;){if(i.name===e)return i;i=i.parent}return null}toJSON(){const e=super.toJSON();if(e.name=this.name,this._children.length>0){e.children=[];for(const s of this._children)e.children.push(s.toJSON())}return e}_clone(e=!1){const s=e?Array.from(this._children).map(i=>i._clone(!0)):void 0;return new se(this.name,this.getAttributes(),s)}_appendChild(e){this._insertChild(this.childCount,e)}_insertChild(e,s){const i=Gh(s);for(const r of i)r.parent!==null&&r._remove(),r.parent=this;this._children._insertNodes(e,i)}_removeChildren(e,s=1){const i=this._children._removeNodes(e,s);for(const r of i)r.parent=null;return i}static fromJSON(e){let s;if(e.children){s=[];for(const i of e.children)i.name?s.push(se.fromJSON(i)):s.push(F.fromJSON(i))}return new se(e.name,e.attributes,s)}}se.prototype.is=function(t,n){return n?n===this.name&&(t==="element"||t==="model:element"):t==="element"||t==="model:element"||t==="node"||t==="model:node"};function Gh(t){return typeof t=="string"?[new F(t)]:(we(t)||(t=[t]),Array.from(t).map(n=>typeof n=="string"?new F(n):n instanceof Ne?new F(n.data,n.getAttributes()):n))}class tt{constructor(n){h(this,"direction");h(this,"boundaries");h(this,"singleCharacters");h(this,"shallow");h(this,"ignoreElementEnd");h(this,"_position");h(this,"_boundaryStartParent");h(this,"_boundaryEndParent");h(this,"_visitedParent");if(!n||!n.boundaries&&!n.startPosition)throw new p("model-tree-walker-no-start-position",null);const e=n.direction||"forward";if(e!="forward"&&e!="backward")throw new p("model-tree-walker-unknown-direction",n,{direction:e});this.direction=e,this.boundaries=n.boundaries||null,n.startPosition?this._position=n.startPosition.clone():this._position=x._createAt(this.boundaries[this.direction=="backward"?"end":"start"]),this.position.stickiness="toNone",this.singleCharacters=!!n.singleCharacters,this.shallow=!!n.shallow,this.ignoreElementEnd=!!n.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null,this._visitedParent=this.position.parent}[Symbol.iterator](){return this}get position(){return this._position}skip(n){let e,s,i,r;do i=this.position,r=this._visitedParent,{done:e,value:s}=this.next();while(!e&&n(s));e||(this._position=i,this._visitedParent=r)}next(){return this.direction=="forward"?this._next():this._previous()}_next(){const n=this.position,e=this.position.clone(),s=this._visitedParent;if(s.parent===null&&e.offset===s.maxOffset)return{done:!0,value:void 0};if(s===this._boundaryEndParent&&e.offset==this.boundaries.end.offset)return{done:!0,value:void 0};const i=at(e,s),r=i||yi(e,s,i);if(r instanceof se){if(!this.shallow)e.path.push(0),this._visitedParent=r;else{if(this.boundaries&&this.boundaries.end.isBefore(e))return{done:!0,value:void 0};e.offset++}return this._position=e,Oe("elementStart",r,n,e,1)}if(r instanceof F){let o;if(this.singleCharacters)o=1;else{let c=r.endOffset;this._boundaryEndParent==s&&this.boundaries.end.offset<c&&(c=this.boundaries.end.offset),o=c-e.offset}const a=e.offset-r.startOffset,l=new Ne(r,a,o);return e.offset+=o,this._position=e,Oe("text",l,n,e,o)}return e.path.pop(),e.offset++,this._position=e,this._visitedParent=s.parent,this.ignoreElementEnd?this._next():Oe("elementEnd",s,n,e)}_previous(){const n=this.position,e=this.position.clone(),s=this._visitedParent;if(s.parent===null&&e.offset===0)return{done:!0,value:void 0};if(s==this._boundaryStartParent&&e.offset==this.boundaries.start.offset)return{done:!0,value:void 0};const i=e.parent,r=at(e,i),o=r||wi(e,i,r);if(o instanceof se)return e.offset--,this.shallow?(this._position=e,Oe("elementStart",o,n,e,1)):(e.path.push(o.maxOffset),this._position=e,this._visitedParent=o,this.ignoreElementEnd?this._previous():Oe("elementEnd",o,n,e));if(o instanceof F){let a;if(this.singleCharacters)a=1;else{let d=o.startOffset;this._boundaryStartParent==s&&this.boundaries.start.offset>d&&(d=this.boundaries.start.offset),a=e.offset-d}const l=e.offset-o.startOffset,c=new Ne(o,l-a,a);return e.offset-=a,this._position=e,Oe("text",c,n,e,a)}return e.path.pop(),this._position=e,this._visitedParent=s.parent,Oe("elementStart",s,n,e,1)}}function Oe(t,n,e,s,i){return{done:!1,value:{type:t,item:n,previousPosition:e,nextPosition:s,length:i}}}class x extends Ae{constructor(e,s,i="toNone"){super();h(this,"root");h(this,"path");h(this,"stickiness");if(!e.is("element")&&!e.is("documentFragment"))throw new p("model-position-root-invalid",e);if(!(s instanceof Array)||s.length===0)throw new p("model-position-path-incorrect-format",e,{path:s});e.is("rootElement")?s=s.slice():(s=[...e.getPath(),...s],e=e.root),this.root=e,this.path=s,this.stickiness=i}get offset(){return this.path[this.path.length-1]}set offset(e){this.path[this.path.length-1]=e}get parent(){let e=this.root;for(let s=0;s<this.path.length-1;s++)if(e=e.getChildAtOffset(this.path[s]),!e)throw new p("model-position-path-incorrect",this,{position:this});if(e.is("$text"))throw new p("model-position-path-incorrect",this,{position:this});return e}get index(){return this.parent.offsetToIndex(this.offset)}get textNode(){return at(this,this.parent)}get nodeAfter(){const e=this.parent;return yi(this,e,at(this,e))}get nodeBefore(){const e=this.parent;return wi(this,e,at(this,e))}get isAtStart(){return this.offset===0}get isAtEnd(){return this.offset==this.parent.maxOffset}isValid(){if(this.offset<0)return!1;let e=this.root;for(let s=0;s<this.path.length-1;s++)if(e=e.getChildAtOffset(this.path[s]),!e)return!1;return this.offset<=e.maxOffset}compareWith(e){if(this.root!=e.root)return"different";const s=K(this.path,e.path);switch(s){case"same":return"same";case"prefix":return"before";case"extension":return"after";default:return this.path[s]<e.path[s]?"before":"after"}}getLastMatchingPosition(e,s={}){s.startPosition=this;const i=new tt(s);return i.skip(e),i.position}getParentPath(){return this.path.slice(0,-1)}getAncestors(){const e=this.parent;return e.is("documentFragment")?[e]:e.getAncestors({includeSelf:!0})}findAncestor(e){const s=this.parent;return s.is("element")?s.findAncestor(e,{includeSelf:!0}):null}getCommonPath(e){if(this.root!=e.root)return[];const s=K(this.path,e.path),i=typeof s=="string"?Math.min(this.path.length,e.path.length):s;return this.path.slice(0,i)}getCommonAncestor(e){const s=this.getAncestors(),i=e.getAncestors();let r=0;for(;s[r]==i[r]&&s[r];)r++;return r===0?null:s[r-1]}getShiftedBy(e){const s=this.clone(),i=s.offset+e;return s.offset=i<0?0:i,s}isAfter(e){return this.compareWith(e)=="after"}isBefore(e){return this.compareWith(e)=="before"}isEqual(e){return this.compareWith(e)=="same"}isTouching(e){if(this.root!==e.root)return!1;const s=Math.min(this.path.length,e.path.length);for(let i=0;i<s;i++){const r=this.path[i]-e.path[i];if(r<-1||r>1)return!1;if(r===1)return _s(e,this,i);if(r===-1)return _s(this,e,i)}return this.path.length===e.path.length?!0:this.path.length>e.path.length?an(this.path,s):an(e.path,s)}hasSameParentAs(e){if(this.root!==e.root)return!1;const s=this.getParentPath(),i=e.getParentPath();return K(s,i)=="same"}getTransformedByOperation(e){let s;switch(e.type){case"insert":s=this._getTransformedByInsertOperation(e);break;case"move":case"remove":case"reinsert":s=this._getTransformedByMoveOperation(e);break;case"split":s=this._getTransformedBySplitOperation(e);break;case"merge":s=this._getTransformedByMergeOperation(e);break;default:s=x._createAt(this);break}return s}_getTransformedByInsertOperation(e){return this._getTransformedByInsertion(e.position,e.howMany)}_getTransformedByMoveOperation(e){return this._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany)}_getTransformedBySplitOperation(e){const s=e.movedRange;return s.containsPosition(this)||s.start.isEqual(this)&&this.stickiness=="toNext"?this._getCombined(e.splitPosition,e.moveTargetPosition):e.graveyardPosition?this._getTransformedByMove(e.graveyardPosition,e.insertionPosition,1):this._getTransformedByInsertion(e.insertionPosition,1)}_getTransformedByMergeOperation(e){const s=e.movedRange,i=s.containsPosition(this)||s.start.isEqual(this);let r;return i?(r=this._getCombined(e.sourcePosition,e.targetPosition),e.sourcePosition.isBefore(e.targetPosition)&&(r=r._getTransformedByDeletion(e.deletionPosition,1))):this.isEqual(e.deletionPosition)?r=x._createAt(e.deletionPosition):r=this._getTransformedByMove(e.deletionPosition,e.graveyardPosition,1),r}_getTransformedByDeletion(e,s){const i=x._createAt(this);if(this.root!=e.root)return i;if(K(e.getParentPath(),this.getParentPath())=="same"){if(e.offset<this.offset){if(e.offset+s>this.offset)return null;i.offset-=s}}else if(K(e.getParentPath(),this.getParentPath())=="prefix"){const r=e.path.length-1;if(e.offset<=this.path[r]){if(e.offset+s>this.path[r])return null;i.path[r]-=s}}return i}_getTransformedByInsertion(e,s){const i=x._createAt(this);if(this.root!=e.root)return i;if(K(e.getParentPath(),this.getParentPath())=="same")(e.offset<this.offset||e.offset==this.offset&&this.stickiness!="toPrevious")&&(i.offset+=s);else if(K(e.getParentPath(),this.getParentPath())=="prefix"){const r=e.path.length-1;e.offset<=this.path[r]&&(i.path[r]+=s)}return i}_getTransformedByMove(e,s,i){if(s=s._getTransformedByDeletion(e,i),e.isEqual(s))return x._createAt(this);const r=this._getTransformedByDeletion(e,i);return r===null||e.isEqual(this)&&this.stickiness=="toNext"||e.getShiftedBy(i).isEqual(this)&&this.stickiness=="toPrevious"?this._getCombined(e,s):r._getTransformedByInsertion(s,i)}_getCombined(e,s){const i=e.path.length-1,r=x._createAt(s);return r.stickiness=this.stickiness,r.offset=r.offset+this.path[i]-e.offset,r.path=[...r.path,...this.path.slice(i+1)],r}toJSON(){return{root:this.root.toJSON(),path:Array.from(this.path),stickiness:this.stickiness}}clone(){return new this.constructor(this.root,this.path,this.stickiness)}static _createAt(e,s,i="toNone"){if(e instanceof x)return new x(e.root,e.path,e.stickiness);{const r=e;if(s=="end")s=r.maxOffset;else{if(s=="before")return this._createBefore(r,i);if(s=="after")return this._createAfter(r,i);if(s!==0&&!s)throw new p("model-createpositionat-offset-required",[this,e])}if(!r.is("element")&&!r.is("documentFragment"))throw new p("model-position-parent-incorrect",[this,e]);const o=r.getPath();return o.push(s),new this(r.root,o,i)}}static _createAfter(e,s){if(!e.parent)throw new p("model-position-after-root",[this,e],{root:e});return this._createAt(e.parent,e.endOffset,s)}static _createBefore(e,s){if(!e.parent)throw new p("model-position-before-root",e,{root:e});return this._createAt(e.parent,e.startOffset,s)}static fromJSON(e,s){if(e.root==="$graveyard"){const i=new x(s.graveyard,e.path);return i.stickiness=e.stickiness,i}if(!s.getRoot(e.root))throw new p("model-position-fromjson-no-root",s,{rootName:e.root});return new x(s.getRoot(e.root),e.path,e.stickiness)}}x.prototype.is=function(t){return t==="position"||t==="model:position"};function at(t,n){const e=n.getChildAtOffset(t.offset);return e&&e.is("$text")&&e.startOffset<t.offset?e:null}function yi(t,n,e){return e!==null?null:n.getChildAtOffset(t.offset)}function wi(t,n,e){return e!==null?null:n.getChild(n.offsetToIndex(t.offset)-1)}function _s(t,n,e){return!(e+1===t.path.length||!an(n.path,e+1)||!Kh(t,e+1))}function an(t,n){for(;n<t.length;){if(t[n]!==0)return!1;n++}return!0}function Kh(t,n){let e=t.parent,s=t.path.length-1,i=0;for(;s>=n;){if(t.path[s]+i!==e.maxOffset)return!1;i=1,s--,e=e.parent}return!0}class w extends Ae{constructor(e,s){super();h(this,"start");h(this,"end");this.start=x._createAt(e),this.end=s?x._createAt(s):x._createAt(e),this.start.stickiness=this.isCollapsed?"toNone":"toNext",this.end.stickiness=this.isCollapsed?"toNone":"toPrevious"}*[Symbol.iterator](){yield*new tt({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){const e=this.start.getParentPath(),s=this.end.getParentPath();return K(e,s)=="same"}get root(){return this.start.root}containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end)}containsRange(e,s=!1){e.isCollapsed&&(s=!1);const i=this.containsPosition(e.start)||s&&this.start.isEqual(e.start),r=this.containsPosition(e.end)||s&&this.end.isEqual(e.end);return i&&r}containsItem(e){const s=x._createBefore(e);return this.containsPosition(s)||this.start.isEqual(s)}isEqual(e){return this.start.isEqual(e.start)&&this.end.isEqual(e.end)}isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}getDifference(e){const s=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&s.push(new w(this.start,e.start)),this.containsPosition(e.end)&&s.push(new w(e.end,this.end))):s.push(new w(this.start,this.end)),s}getIntersection(e){if(this.isIntersecting(e)){let s=this.start,i=this.end;return this.containsPosition(e.start)&&(s=e.start),this.containsPosition(e.end)&&(i=e.end),new w(s,i)}return null}getJoined(e,s=!1){let i=this.isIntersecting(e);if(i||(this.start.isBefore(e.start)?i=s?this.end.isTouching(e.start):this.end.isEqual(e.start):i=s?e.end.isTouching(this.start):e.end.isEqual(this.start)),!i)return null;let r=this.start,o=this.end;return e.start.isBefore(r)&&(r=e.start),e.end.isAfter(o)&&(o=e.end),new w(r,o)}getMinimalFlatRanges(){const e=[],s=this.start.getCommonPath(this.end).length,i=x._createAt(this.start);let r=i.parent;for(;i.path.length>s+1;){const o=r.maxOffset-i.offset;o!==0&&e.push(new w(i,i.getShiftedBy(o))),i.path=i.path.slice(0,-1),i.offset++,r=r.parent}for(;i.path.length<=this.end.path.length;){const o=this.end.path[i.path.length-1],a=o-i.offset;a!==0&&e.push(new w(i,i.getShiftedBy(a))),i.offset=o,i.path.push(0)}return e}getWalker(e={}){return e.boundaries=this,new tt(e)}*getItems(e={}){e.boundaries=this,e.ignoreElementEnd=!0;const s=new tt(e);for(const i of s)yield i.item}*getPositions(e={}){e.boundaries=this;const s=new tt(e);yield s.position;for(const i of s)yield i.nextPosition}getTransformedByOperation(e){switch(e.type){case"insert":return this._getTransformedByInsertOperation(e);case"move":case"remove":case"reinsert":return this._getTransformedByMoveOperation(e);case"split":return[this._getTransformedBySplitOperation(e)];case"merge":return[this._getTransformedByMergeOperation(e)]}return[new w(this.start,this.end)]}getTransformedByOperations(e){const s=[new w(this.start,this.end)];for(const i of e)for(let r=0;r<s.length;r++){const o=s[r].getTransformedByOperation(i);s.splice(r,1,...o),r+=o.length-1}for(let i=0;i<s.length;i++){const r=s[i];for(let o=i+1;o<s.length;o++){const a=s[o];(r.containsRange(a)||a.containsRange(r)||r.isEqual(a))&&s.splice(o,1)}}return s}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;const e=this.start.nodeAfter,s=this.end.nodeBefore;return e&&e.is("element")&&e===s?e:null}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}clone(){return new this.constructor(this.start,this.end)}_getTransformedByInsertOperation(e,s=!1){return this._getTransformedByInsertion(e.position,e.howMany,s)}_getTransformedByMoveOperation(e,s=!1){const i=e.sourcePosition,r=e.howMany,o=e.targetPosition;return this._getTransformedByMove(i,o,r,s)}_getTransformedBySplitOperation(e){const s=this.start._getTransformedBySplitOperation(e);let i=this.end._getTransformedBySplitOperation(e);return this.end.isEqual(e.insertionPosition)&&(i=this.end.getShiftedBy(1)),s.root!=i.root&&(i=this.end.getShiftedBy(-1)),new w(s,i)}_getTransformedByMergeOperation(e){if(this.start.isEqual(e.targetPosition)&&this.end.isEqual(e.deletionPosition))return new w(this.start);let s=this.start._getTransformedByMergeOperation(e),i=this.end._getTransformedByMergeOperation(e);return s.root!=i.root&&(i=this.end.getShiftedBy(-1)),s.isAfter(i)?(e.sourcePosition.isBefore(e.targetPosition)?(s=x._createAt(i),s.offset=0):(e.deletionPosition.isEqual(s)||(i=e.deletionPosition),s=e.targetPosition),new w(s,i)):new w(s,i)}_getTransformedByInsertion(e,s,i=!1){if(i&&this.containsPosition(e))return[new w(this.start,e),new w(e.getShiftedBy(s),this.end._getTransformedByInsertion(e,s))];{const r=new w(this.start,this.end);return r.start=r.start._getTransformedByInsertion(e,s),r.end=r.end._getTransformedByInsertion(e,s),[r]}}_getTransformedByMove(e,s,i,r=!1){if(this.isCollapsed){const _=this.start._getTransformedByMove(e,s,i);return[new w(_)]}const o=w._createFromPositionAndShift(e,i),a=s._getTransformedByDeletion(e,i);if(this.containsPosition(s)&&!r&&(o.containsPosition(this.start)||o.containsPosition(this.end))){const _=this.start._getTransformedByMove(e,s,i),m=this.end._getTransformedByMove(e,s,i);return[new w(_,m)]}let l;const c=this.getDifference(o);let d=null;const g=this.getIntersection(o);if(c.length==1?d=new w(c[0].start._getTransformedByDeletion(e,i),c[0].end._getTransformedByDeletion(e,i)):c.length==2&&(d=new w(this.start,this.end._getTransformedByDeletion(e,i))),d?l=d._getTransformedByInsertion(a,i,g!==null||r):l=[],g){const _=new w(g.start._getCombined(o.start,a),g.end._getCombined(o.start,a));l.length==2?l.splice(1,0,_):l.push(_)}return l}_getTransformedByDeletion(e,s){let i=this.start._getTransformedByDeletion(e,s),r=this.end._getTransformedByDeletion(e,s);return i==null&&r==null?null:(i==null&&(i=e),r==null&&(r=e),new w(i,r))}static _createFromPositionAndShift(e,s){const i=e,r=e.getShiftedBy(s);return s>0?new this(i,r):new this(r,i)}static _createIn(e){return new this(x._createAt(e,0),x._createAt(e,e.maxOffset))}static _createOn(e){return this._createFromPositionAndShift(x._createBefore(e),e.offsetSize)}static _createFromRanges(e){if(e.length===0)throw new p("range-create-from-ranges-empty-array",null);if(e.length==1)return e[0].clone();const s=e[0];e.sort((o,a)=>o.start.isAfter(a.start)?1:-1);const i=e.indexOf(s),r=new this(s.start,s.end);for(let o=i-1;o>=0&&e[o].end.isEqual(r.start);o--)r.start=x._createAt(e[o].start);for(let o=i+1;o<e.length&&e[o].start.isEqual(r.end);o++)r.end=x._createAt(e[o].end);return r}static fromJSON(e,s){return new this(x.fromJSON(e.start,s),x.fromJSON(e.end,s))}}w.prototype.is=function(t){return t==="range"||t==="model:range"};class It extends V(Ae){constructor(...e){super();h(this,"_lastRangeBackward",!1);h(this,"_attrs",new Map);h(this,"_ranges",[]);e.length&&this.setTo(...e)}get anchor(){if(this._ranges.length>0){const e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.end:e.start}return null}get focus(){if(this._ranges.length>0){const e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.start:e.end}return null}get isCollapsed(){return this._ranges.length===1?this._ranges[0].isCollapsed:!1}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}isEqual(e){if(this.rangeCount!=e.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;for(const s of this._ranges){let i=!1;for(const r of e._ranges)if(s.isEqual(r)){i=!0;break}if(!i)return!1}return!0}*getRanges(){for(const e of this._ranges)yield new w(e.start,e.end)}getFirstRange(){let e=null;for(const s of this._ranges)(!e||s.start.isBefore(e.start))&&(e=s);return e?new w(e.start,e.end):null}getLastRange(){let e=null;for(const s of this._ranges)(!e||s.end.isAfter(e.end))&&(e=s);return e?new w(e.start,e.end):null}getFirstPosition(){const e=this.getFirstRange();return e?e.start.clone():null}getLastPosition(){const e=this.getLastRange();return e?e.end.clone():null}setTo(...e){let[s,i,r]=e;if(typeof i=="object"&&(r=i,i=void 0),s===null)this._setRanges([]);else if(s instanceof It)this._setRanges(s.getRanges(),s.isBackward);else if(s&&typeof s.getRanges=="function")this._setRanges(s.getRanges(),s.isBackward);else if(s instanceof w)this._setRanges([s],!!r&&!!r.backward);else if(s instanceof x)this._setRanges([new w(s)]);else if(s instanceof We){const o=!!r&&!!r.backward;let a;if(i=="in")a=w._createIn(s);else if(i=="on")a=w._createOn(s);else if(i!==void 0)a=new w(x._createAt(s,i));else throw new p("model-selection-setto-required-second-parameter",[this,s]);this._setRanges([a],o)}else if(we(s))this._setRanges(s,r&&!!r.backward);else throw new p("model-selection-setto-not-selectable",[this,s])}_setRanges(e,s=!1){const i=Array.from(e),r=i.some(o=>{if(!(o instanceof w))throw new p("model-selection-set-ranges-not-range",[this,e]);return this._ranges.every(a=>!a.isEqual(o))});i.length===this._ranges.length&&!r||(this._replaceAllRanges(i),this._lastRangeBackward=!!s,this.fire("change:range",{directChange:!0}))}setFocus(e,s){if(this.anchor===null)throw new p("model-selection-setfocus-no-ranges",[this,e]);const i=x._createAt(e,s);if(i.compareWith(this.focus)=="same")return;const r=this.anchor;this._ranges.length&&this._popRange(),i.compareWith(r)=="before"?(this._pushRange(new w(i,r)),this._lastRangeBackward=!0):(this._pushRange(new w(r,i)),this._lastRangeBackward=!1),this.fire("change:range",{directChange:!0})}getAttribute(e){return this._attrs.get(e)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}hasAttribute(e){return this._attrs.has(e)}removeAttribute(e){this.hasAttribute(e)&&(this._attrs.delete(e),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}setAttribute(e,s){this.getAttribute(e)!==s&&(this._attrs.set(e,s),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}*getSelectedBlocks(){const e=new WeakSet;for(const s of this.getRanges()){const i=ys(s.start,e);Hh(i,s)&&(yield i);for(const o of s.getWalker()){const a=o.item;o.type=="elementEnd"&&Zh(a,e,s)&&(yield a)}const r=ys(s.end,e);Yh(r,s)&&(yield r)}}containsEntireContent(e=this.anchor.root){const s=x._createAt(e,0),i=x._createAt(e,"end");return s.isTouching(this.getFirstPosition())&&i.isTouching(this.getLastPosition())}_pushRange(e){this._checkRange(e),this._ranges.push(new w(e.start,e.end))}_checkRange(e){for(let s=0;s<this._ranges.length;s++)if(e.isIntersecting(this._ranges[s]))throw new p("model-selection-range-intersects",[this,e],{addedRange:e,intersectingRange:this._ranges[s]})}_replaceAllRanges(e){this._removeAllRanges();for(const s of e)this._pushRange(s)}_removeAllRanges(){for(;this._ranges.length>0;)this._popRange()}_popRange(){this._ranges.pop()}}It.prototype.is=function(t){return t==="selection"||t==="model:selection"};function bi(t,n){return n.has(t)?!1:(n.add(t),t.root.document.model.schema.isBlock(t)&&!!t.parent)}function Zh(t,n,e){return bi(t,n)&&vn(t,e)}function ys(t,n){const s=t.parent.root.document.model.schema,i=t.parent.getAncestors({parentFirst:!0,includeSelf:!0});let r=!1;const o=i.find(a=>r?!1:(r=s.isLimit(a),!r&&bi(a,n)));return i.forEach(a=>n.add(a)),o}function vn(t,n){const e=Qh(t);return e?!n.containsRange(w._createOn(e),!0):!0}function Hh(t,n){return t?n.isCollapsed||t.isEmpty?!0:n.start.isTouching(x._createAt(t,t.maxOffset))?!1:vn(t,n):!1}function Yh(t,n){return t?n.isCollapsed||t.isEmpty?!0:n.end.isTouching(x._createAt(t,0))?!1:vn(t,n):!1}function Qh(t){const n=t.root.document.model.schema;let e=t.parent;for(;e;){if(n.isBlock(e))return e;e=e.parent}}class jt extends V(w){constructor(n,e){super(n,e),Xh.call(this)}detach(){this.stopListening()}toRange(){return new w(this.start,this.end)}static fromRange(n){return new jt(n.start,n.end)}}jt.prototype.is=function(t){return t==="liveRange"||t==="model:liveRange"||t=="range"||t==="model:range"};function Xh(){this.listenTo(this.root.document.model,"applyOperation",(t,n)=>{const e=n[0];e.isDocumentOperation&&eu.call(this,e)},{priority:"low"})}function eu(t){const n=this.getTransformedByOperation(t),e=w._createFromRanges(n),s=!e.isEqual(this),i=tu(this,t);let r=null;if(s){e.root.rootName=="$graveyard"&&(t.type=="remove"?r=t.sourcePosition:r=t.deletionPosition);const o=this.toRange();this.start=e.start,this.end=e.end,this.fire("change:range",o,{deletionPosition:r})}else i&&this.fire("change:content",this.toRange(),{deletionPosition:r})}function tu(t,n){switch(n.type){case"insert":return t.containsPosition(n.position);case"move":case"remove":case"reinsert":case"merge":return t.containsPosition(n.sourcePosition)||t.start.isEqual(n.sourcePosition)||t.containsPosition(n.targetPosition);case"split":return t.containsPosition(n.splitPosition)||t.containsPosition(n.insertionPosition)}return!1}const gt="selection:";class nu extends V(Ae){constructor(e){super();h(this,"_selection");this._selection=new su(e),this._selection.delegate("change:range").to(this),this._selection.delegate("change:attribute").to(this),this._selection.delegate("change:marker").to(this)}get isCollapsed(){return this._selection.isCollapsed}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get rangeCount(){return this._selection.rangeCount}get hasOwnRange(){return this._selection.hasOwnRange}get isBackward(){return this._selection.isBackward}get isGravityOverridden(){return this._selection.isGravityOverridden}get markers(){return this._selection.markers}get _ranges(){return this._selection._ranges}getRanges(){return this._selection.getRanges()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getSelectedBlocks(){return this._selection.getSelectedBlocks()}getSelectedElement(){return this._selection.getSelectedElement()}containsEntireContent(e){return this._selection.containsEntireContent(e)}destroy(){this._selection.destroy()}getAttributeKeys(){return this._selection.getAttributeKeys()}getAttributes(){return this._selection.getAttributes()}getAttribute(e){return this._selection.getAttribute(e)}hasAttribute(e){return this._selection.hasAttribute(e)}refresh(){this._selection.updateMarkers(),this._selection._updateAttributes(!1)}observeMarkers(e){this._selection.observeMarkers(e)}_setFocus(e,s){this._selection.setFocus(e,s)}_setTo(...e){this._selection.setTo(...e)}_setAttribute(e,s){this._selection.setAttribute(e,s)}_removeAttribute(e){this._selection.removeAttribute(e)}_getStoredAttributes(){return this._selection.getStoredAttributes()}_overrideGravity(){return this._selection.overrideGravity()}_restoreGravity(e){this._selection.restoreGravity(e)}static _getStoreAttributeKey(e){return gt+e}static _isStoreAttributeKey(e){return e.startsWith(gt)}}nu.prototype.is=function(t){return t==="selection"||t=="model:selection"||t=="documentSelection"||t=="model:documentSelection"};class su extends It{constructor(e){super();h(this,"markers",new gh({idProperty:"name"}));h(this,"_model");h(this,"_document");h(this,"_attributePriority",new Map);h(this,"_selectionRestorePosition",null);h(this,"_hasChangedRange",!1);h(this,"_overriddenGravityRegister",new Set);h(this,"_observedMarkers",new Set);this._model=e.model,this._document=e,this.listenTo(this._model,"applyOperation",(s,i)=>{const r=i[0];!r.isDocumentOperation||r.type=="marker"||r.type=="rename"||r.type=="noop"||(this._ranges.length==0&&this._selectionRestorePosition&&this._fixGraveyardSelection(this._selectionRestorePosition),this._selectionRestorePosition=null,this._hasChangedRange&&(this._hasChangedRange=!1,this.fire("change:range",{directChange:!1})))},{priority:"lowest"}),this.on("change:range",()=>{this._validateSelectionRanges(this.getRanges())}),this.listenTo(this._model.markers,"update",(s,i,r,o)=>{this._updateMarker(i,o)}),this.listenTo(this._document,"change",(s,i)=>{iu(this._model,i)})}get isCollapsed(){return this._ranges.length===0?this._document._getDefaultRange().isCollapsed:super.isCollapsed}get anchor(){return super.anchor||this._document._getDefaultRange().start}get focus(){return super.focus||this._document._getDefaultRange().end}get rangeCount(){return this._ranges.length?this._ranges.length:1}get hasOwnRange(){return this._ranges.length>0}get isGravityOverridden(){return!!this._overriddenGravityRegister.size}destroy(){for(let e=0;e<this._ranges.length;e++)this._ranges[e].detach();this.stopListening()}*getRanges(){this._ranges.length?yield*super.getRanges():yield this._document._getDefaultRange()}getFirstRange(){return super.getFirstRange()||this._document._getDefaultRange()}getLastRange(){return super.getLastRange()||this._document._getDefaultRange()}setTo(...e){super.setTo(...e),this._updateAttributes(!0),this.updateMarkers()}setFocus(e,s){super.setFocus(e,s),this._updateAttributes(!0),this.updateMarkers()}setAttribute(e,s){if(this._setAttribute(e,s)){const i=[e];this.fire("change:attribute",{attributeKeys:i,directChange:!0})}}removeAttribute(e){if(this._removeAttribute(e)){const s=[e];this.fire("change:attribute",{attributeKeys:s,directChange:!0})}}overrideGravity(){const e=$t();return this._overriddenGravityRegister.add(e),this._overriddenGravityRegister.size===1&&this._updateAttributes(!0),e}restoreGravity(e){if(!this._overriddenGravityRegister.has(e))throw new p("document-selection-gravity-wrong-restore",this,{uid:e});this._overriddenGravityRegister.delete(e),this.isGravityOverridden||this._updateAttributes(!0)}observeMarkers(e){this._observedMarkers.add(e),this.updateMarkers()}_replaceAllRanges(e){this._validateSelectionRanges(e),super._replaceAllRanges(e)}_popRange(){this._ranges.pop().detach()}_pushRange(e){const s=this._prepareRange(e);s&&this._ranges.push(s)}_validateSelectionRanges(e){for(const s of e)if(!this._document._validateSelectionRange(s))throw new p("document-selection-wrong-position",this,{range:s})}_prepareRange(e){if(this._checkRange(e),e.root==this._document.graveyard)return;const s=jt.fromRange(e);return s.on("change:range",(i,r,o)=>{if(this._hasChangedRange=!0,s.root==this._document.graveyard){this._selectionRestorePosition=o.deletionPosition;const a=this._ranges.indexOf(s);this._ranges.splice(a,1),s.detach()}}),s}updateMarkers(){if(!this._observedMarkers.size)return;const e=[];let s=!1;for(const r of this._model.markers){const o=r.name.split(":",1)[0];if(!this._observedMarkers.has(o))continue;const a=r.getRange();for(const l of this.getRanges())a.containsRange(l,!l.isCollapsed)&&e.push(r)}const i=Array.from(this.markers);for(const r of e)this.markers.has(r)||(this.markers.add(r),s=!0);for(const r of Array.from(this.markers))e.includes(r)||(this.markers.remove(r),s=!0);s&&this.fire("change:marker",{oldMarkers:i,directChange:!1})}_updateMarker(e,s){const i=e.name.split(":",1)[0];if(!this._observedMarkers.has(i))return;let r=!1;const o=Array.from(this.markers),a=this.markers.has(e);if(!s)a&&(this.markers.remove(e),r=!0);else{let l=!1;for(const c of this.getRanges())if(s.containsRange(c,!c.isCollapsed)){l=!0;break}l&&!a?(this.markers.add(e),r=!0):!l&&a&&(this.markers.remove(e),r=!0)}r&&this.fire("change:marker",{oldMarkers:o,directChange:!1})}_updateAttributes(e){const s=dt(this._getSurroundingAttributes()),i=dt(this.getAttributes());if(e)this._attributePriority=new Map,this._attrs=new Map;else for(const[o,a]of this._attributePriority)a=="low"&&(this._attrs.delete(o),this._attributePriority.delete(o));this._setAttributesTo(s);const r=[];for(const[o,a]of this.getAttributes())(!i.has(o)||i.get(o)!==a)&&r.push(o);for(const[o]of i)this.hasAttribute(o)||r.push(o);r.length>0&&this.fire("change:attribute",{attributeKeys:r,directChange:!1})}_setAttribute(e,s,i=!0){const r=i?"normal":"low";return r=="low"&&this._attributePriority.get(e)=="normal"||super.getAttribute(e)===s?!1:(this._attrs.set(e,s),this._attributePriority.set(e,r),!0)}_removeAttribute(e,s=!0){const i=s?"normal":"low";return i=="low"&&this._attributePriority.get(e)=="normal"||(this._attributePriority.set(e,i),!super.hasAttribute(e))?!1:(this._attrs.delete(e),!0)}_setAttributesTo(e){const s=new Set;for(const[i,r]of this.getAttributes())e.get(i)!==r&&this._removeAttribute(i,!1);for(const[i,r]of e)this._setAttribute(i,r,!1)&&s.add(i);return s}*getStoredAttributes(){const e=this.getFirstPosition().parent;if(this.isCollapsed&&e.isEmpty)for(const s of e.getAttributeKeys())s.startsWith(gt)&&(yield[s.substr(gt.length),e.getAttribute(s)])}_getSurroundingAttributes(){const e=this.getFirstPosition(),s=this._model.schema;if(e.root.rootName=="$graveyard")return null;let i=null;if(this.isCollapsed){const r=e.textNode?e.textNode:e.nodeBefore,o=e.textNode?e.textNode:e.nodeAfter;if(this.isGravityOverridden||(i=Xe(r,s)),i||(i=Xe(o,s)),!this.isGravityOverridden&&!i){let a=r;for(;a&&!i;)a=a.previousSibling,i=Xe(a,s)}if(!i){let a=o;for(;a&&!i;)a=a.nextSibling,i=Xe(a,s)}i||(i=this.getStoredAttributes())}else{const r=this.getFirstRange();for(const o of r){if(o.item.is("element")&&s.isObject(o.item)){i=Xe(o.item,s);break}if(o.type=="text"){i=o.item.getAttributes();break}}}return i}_fixGraveyardSelection(e){const s=this._model.schema.getNearestSelectionRange(e);s&&this._pushRange(s)}}function Xe(t,n){if(!t)return null;if(t instanceof Ne||t instanceof F)return t.getAttributes();if(!n.isInline(t))return null;if(!n.isObject(t))return[];const e=[];for(const[s,i]of t.getAttributes())n.checkAttribute("$text",s)&&n.getAttributeProperties(s).copyFromObject!==!1&&e.push([s,i]);return e}function iu(t,n){const e=t.document.differ;for(const s of e.getChanges()){if(s.type!="insert")continue;const i=s.position.parent;s.length===i.maxOffset&&t.enqueueChange(n,o=>{const a=Array.from(i.getAttributeKeys()).filter(l=>l.startsWith(gt));for(const l of a)o.removeAttribute(l,i)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ee{constructor(n){h(this,"baseVersion");h(this,"isDocumentOperation");h(this,"batch");this.baseVersion=n,this.isDocumentOperation=this.baseVersion!==null,this.batch=null}_validate(){}toJSON(){const n=Object.assign({},this);return n.__className=this.constructor.className,delete n.batch,delete n.isDocumentOperation,n}static get className(){return"Operation"}static fromJSON(n,e){return new this(n.baseVersion)}}function Pn(t,n){const e=xi(n),s=e.reduce((o,a)=>o+a.offsetSize,0),i=t.parent;_t(t);const r=t.index;return i._insertChild(r,e),mt(i,r+e.length),mt(i,r),new w(t,t.getShiftedBy(s))}function ru(t){if(!t.isFlat)throw new p("operation-utils-remove-range-not-flat",this);const n=t.start.parent;_t(t.start),_t(t.end);const e=n._removeChildren(t.start.index,t.end.index-t.start.index);return mt(n,t.start.index),e}function pt(t,n){if(!t.isFlat)throw new p("operation-utils-move-range-not-flat",this);const e=ru(t);return n=n._getTransformedByDeletion(t.start,t.end.offset-t.start.offset),Pn(n,e)}function ou(t,n,e){_t(t.start),_t(t.end);for(const s of t.getItems({shallow:!0})){const i=s.is("$textProxy")?s.textNode:s;e!==null?i._setAttribute(n,e):i._removeAttribute(n),mt(i.parent,i.index)}mt(t.end.parent,t.end.index)}function xi(t){const n=[];function e(s){if(typeof s=="string")n.push(new F(s));else if(s instanceof Ne)n.push(new F(s.data,s.getAttributes()));else if(s instanceof We)n.push(s);else if(we(s))for(const i of s)e(i)}e(t);for(let s=1;s<n.length;s++){const i=n[s],r=n[s-1];i instanceof F&&r instanceof F&&vi(i,r)&&(n.splice(s-1,2,new F(r.data+i.data,r.getAttributes())),s--)}return n}function mt(t,n){const e=t.getChild(n-1),s=t.getChild(n);if(e&&s&&e.is("$text")&&s.is("$text")&&vi(e,s)){const i=new F(e.data+s.data,e.getAttributes());t._removeChildren(n-1,2),t._insertChild(n-1,i)}}function _t(t){const n=t.textNode,e=t.parent;if(n){const s=t.offset-n.startOffset,i=n.index;e._removeChildren(i,1);const r=new F(n.data.substr(0,s),n.getAttributes()),o=new F(n.data.substr(s),n.getAttributes());e._insertChild(i,[r,o])}}function vi(t,n){const e=t.getAttributes(),s=n.getAttributes();for(const i of e){if(i[1]!==n.getAttribute(i[0]))return!1;s.next()}return s.next().done}class I extends ee{constructor(e,s,i,r){super(r);h(this,"sourcePosition");h(this,"howMany");h(this,"targetPosition");this.sourcePosition=e.clone(),this.sourcePosition.stickiness="toNext",this.howMany=s,this.targetPosition=i.clone(),this.targetPosition.stickiness="toNone"}get type(){return this.targetPosition.root.rootName=="$graveyard"?"remove":this.sourcePosition.root.rootName=="$graveyard"?"reinsert":"move"}get affectedSelectable(){return[w._createFromPositionAndShift(this.sourcePosition,this.howMany),w._createFromPositionAndShift(this.targetPosition,0)]}clone(){return new I(this.sourcePosition,this.howMany,this.targetPosition,this.baseVersion)}getMovedRangeStart(){return this.targetPosition._getTransformedByDeletion(this.sourcePosition,this.howMany)}getReversed(){const e=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new I(this.getMovedRangeStart(),this.howMany,e,this.baseVersion+1)}_validate(){const e=this.sourcePosition.parent,s=this.targetPosition.parent,i=this.sourcePosition.offset,r=this.targetPosition.offset;if(i+this.howMany>e.maxOffset)throw new p("move-operation-nodes-do-not-exist",this);if(e===s&&i<r&&r<i+this.howMany)throw new p("move-operation-range-into-itself",this);if(this.sourcePosition.root==this.targetPosition.root&&K(this.sourcePosition.getParentPath(),this.targetPosition.getParentPath())=="prefix"){const o=this.sourcePosition.path.length-1;if(this.targetPosition.path[o]>=i&&this.targetPosition.path[o]<i+this.howMany)throw new p("move-operation-node-into-itself",this)}}_execute(){pt(w._createFromPositionAndShift(this.sourcePosition,this.howMany),this.targetPosition)}toJSON(){const e=super.toJSON();return e.sourcePosition=this.sourcePosition.toJSON(),e.targetPosition=this.targetPosition.toJSON(),e}static get className(){return"MoveOperation"}static fromJSON(e,s){const i=x.fromJSON(e.sourcePosition,s),r=x.fromJSON(e.targetPosition,s);return new this(i,e.howMany,r,e.baseVersion)}}class U extends ee{constructor(e,s,i){super(i);h(this,"position");h(this,"nodes");h(this,"shouldReceiveAttributes");this.position=e.clone(),this.position.stickiness="toNone",this.nodes=new ot(xi(s)),this.shouldReceiveAttributes=!1}get type(){return"insert"}get howMany(){return this.nodes.maxOffset}get affectedSelectable(){return this.position.clone()}clone(){const e=new ot([...this.nodes].map(i=>i._clone(!0))),s=new U(this.position,e,this.baseVersion);return s.shouldReceiveAttributes=this.shouldReceiveAttributes,s}getReversed(){const e=this.position.root.document.graveyard,s=new x(e,[0]);return new I(this.position,this.nodes.maxOffset,s,this.baseVersion+1)}_validate(){const e=this.position.parent;if(!e||e.maxOffset<this.position.offset)throw new p("insert-operation-position-invalid",this)}_execute(){const e=this.nodes;this.nodes=new ot([...e].map(s=>s._clone(!0))),Pn(this.position,e)}toJSON(){const e=super.toJSON();return e.position=this.position.toJSON(),e.nodes=this.nodes.toJSON(),e}static get className(){return"InsertOperation"}static fromJSON(e,s){const i=[];for(const o of e.nodes)o.name?i.push(se.fromJSON(o)):i.push(F.fromJSON(o));const r=new U(x.fromJSON(e.position,s),i,e.baseVersion);return r.shouldReceiveAttributes=e.shouldReceiveAttributes,r}}class L extends ee{constructor(e,s,i,r,o){super(o);h(this,"splitPosition");h(this,"howMany");h(this,"insertionPosition");h(this,"graveyardPosition");this.splitPosition=e.clone(),this.splitPosition.stickiness="toNext",this.howMany=s,this.insertionPosition=i,this.graveyardPosition=r?r.clone():null,this.graveyardPosition&&(this.graveyardPosition.stickiness="toNext")}get type(){return"split"}get moveTargetPosition(){const e=this.insertionPosition.path.slice();return e.push(0),new x(this.insertionPosition.root,e)}get movedRange(){const e=this.splitPosition.getShiftedBy(Number.POSITIVE_INFINITY);return new w(this.splitPosition,e)}get affectedSelectable(){const e=[w._createFromPositionAndShift(this.splitPosition,0),w._createFromPositionAndShift(this.insertionPosition,0)];return this.graveyardPosition&&e.push(w._createFromPositionAndShift(this.graveyardPosition,0)),e}clone(){return new L(this.splitPosition,this.howMany,this.insertionPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const e=this.splitPosition.root.document.graveyard,s=new x(e,[0]);return new G(this.moveTargetPosition,this.howMany,this.splitPosition,s,this.baseVersion+1)}_validate(){const e=this.splitPosition.parent,s=this.splitPosition.offset;if(!e||e.maxOffset<s)throw new p("split-operation-position-invalid",this);if(e.parent){if(this.howMany!=e.maxOffset-this.splitPosition.offset)throw new p("split-operation-how-many-invalid",this);if(this.graveyardPosition&&!this.graveyardPosition.nodeAfter)throw new p("split-operation-graveyard-position-invalid",this)}else throw new p("split-operation-split-in-root",this)}_execute(){const e=this.splitPosition.parent;if(this.graveyardPosition)pt(w._createFromPositionAndShift(this.graveyardPosition,1),this.insertionPosition);else{const i=e._clone();Pn(this.insertionPosition,i)}const s=new w(x._createAt(e,this.splitPosition.offset),x._createAt(e,e.maxOffset));pt(s,this.moveTargetPosition)}toJSON(){const e=super.toJSON();return e.splitPosition=this.splitPosition.toJSON(),e.insertionPosition=this.insertionPosition.toJSON(),this.graveyardPosition&&(e.graveyardPosition=this.graveyardPosition.toJSON()),e}static get className(){return"SplitOperation"}static getInsertionPosition(e){const s=e.path.slice(0,-1);return s[s.length-1]++,new x(e.root,s,"toPrevious")}static fromJSON(e,s){const i=x.fromJSON(e.splitPosition,s),r=x.fromJSON(e.insertionPosition,s),o=e.graveyardPosition?x.fromJSON(e.graveyardPosition,s):null;return new this(i,e.howMany,r,o,e.baseVersion)}}class G extends ee{constructor(e,s,i,r,o){super(o);h(this,"sourcePosition");h(this,"howMany");h(this,"targetPosition");h(this,"graveyardPosition");this.sourcePosition=e.clone(),this.sourcePosition.stickiness="toPrevious",this.howMany=s,this.targetPosition=i.clone(),this.targetPosition.stickiness="toNext",this.graveyardPosition=r.clone()}get type(){return"merge"}get deletionPosition(){return new x(this.sourcePosition.root,this.sourcePosition.path.slice(0,-1))}get movedRange(){const e=this.sourcePosition.getShiftedBy(Number.POSITIVE_INFINITY);return new w(this.sourcePosition,e)}get affectedSelectable(){const e=this.sourcePosition.parent;return[w._createOn(e),w._createFromPositionAndShift(this.targetPosition,0),w._createFromPositionAndShift(this.graveyardPosition,0)]}clone(){return new G(this.sourcePosition,this.howMany,this.targetPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const e=this.targetPosition._getTransformedByMergeOperation(this),s=this.sourcePosition.path.slice(0,-1),i=new x(this.sourcePosition.root,s)._getTransformedByMergeOperation(this);return new L(e,this.howMany,i,this.graveyardPosition,this.baseVersion+1)}_validate(){const e=this.sourcePosition.parent,s=this.targetPosition.parent;if(e.parent)if(s.parent){if(this.howMany!=e.maxOffset)throw new p("merge-operation-how-many-invalid",this)}else throw new p("merge-operation-target-position-invalid",this);else throw new p("merge-operation-source-position-invalid",this)}_execute(){const e=this.sourcePosition.parent,s=w._createIn(e);pt(s,this.targetPosition),pt(w._createOn(e),this.graveyardPosition)}toJSON(){const e=super.toJSON();return e.sourcePosition=e.sourcePosition.toJSON(),e.targetPosition=e.targetPosition.toJSON(),e.graveyardPosition=e.graveyardPosition.toJSON(),e}static get className(){return"MergeOperation"}static fromJSON(e,s){const i=x.fromJSON(e.sourcePosition,s),r=x.fromJSON(e.targetPosition,s),o=x.fromJSON(e.graveyardPosition,s);return new this(i,e.howMany,r,o,e.baseVersion)}}class X extends ee{constructor(e,s,i,r,o,a){super(a);h(this,"name");h(this,"oldRange");h(this,"newRange");h(this,"affectsData");h(this,"_markers");this.name=e,this.oldRange=s?s.clone():null,this.newRange=i?i.clone():null,this.affectsData=o,this._markers=r}get type(){return"marker"}get affectedSelectable(){const e=[];return this.oldRange&&e.push(this.oldRange.clone()),this.newRange&&(this.oldRange?e.push(...this.newRange.getDifference(this.oldRange)):e.push(this.newRange.clone())),e}clone(){return new X(this.name,this.oldRange,this.newRange,this._markers,this.affectsData,this.baseVersion)}getReversed(){return new X(this.name,this.newRange,this.oldRange,this._markers,this.affectsData,this.baseVersion+1)}_execute(){this.newRange?this._markers._set(this.name,this.newRange,!0,this.affectsData):this._markers._remove(this.name)}toJSON(){const e=super.toJSON();return this.oldRange&&(e.oldRange=this.oldRange.toJSON()),this.newRange&&(e.newRange=this.newRange.toJSON()),delete e._markers,e}static get className(){return"MarkerOperation"}static fromJSON(e,s){return new X(e.name,e.oldRange?w.fromJSON(e.oldRange,s):null,e.newRange?w.fromJSON(e.newRange,s):null,s.model.markers,e.affectsData,e.baseVersion)}}class D extends ee{constructor(e,s,i,r,o){super(o);h(this,"range");h(this,"key");h(this,"oldValue");h(this,"newValue");this.range=e.clone(),this.key=s,this.oldValue=i===void 0?null:i,this.newValue=r===void 0?null:r}get type(){return this.oldValue===null?"addAttribute":this.newValue===null?"removeAttribute":"changeAttribute"}get affectedSelectable(){return this.range.clone()}clone(){return new D(this.range,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new D(this.range,this.key,this.newValue,this.oldValue,this.baseVersion+1)}toJSON(){const e=super.toJSON();return e.range=this.range.toJSON(),e}_validate(){if(!this.range.isFlat)throw new p("attribute-operation-range-not-flat",this);for(const e of this.range.getItems({shallow:!0})){if(this.oldValue!==null&&!ss(e.getAttribute(this.key),this.oldValue))throw new p("attribute-operation-wrong-old-value",this,{item:e,key:this.key,value:this.oldValue});if(this.oldValue===null&&this.newValue!==null&&e.hasAttribute(this.key))throw new p("attribute-operation-attribute-exists",this,{node:e,key:this.key})}}_execute(){ss(this.oldValue,this.newValue)||ou(this.range,this.key,this.newValue)}static get className(){return"AttributeOperation"}static fromJSON(e,s){return new D(w.fromJSON(e.range,s),e.key,e.oldValue,e.newValue,e.baseVersion)}}class J extends ee{get type(){return"noop"}get affectedSelectable(){return null}clone(){return new J(this.baseVersion)}getReversed(){return new J(this.baseVersion+1)}_execute(){}static get className(){return"NoOperation"}}class Y extends ee{constructor(e,s,i,r){super(r);h(this,"position");h(this,"oldName");h(this,"newName");this.position=e,this.position.stickiness="toNext",this.oldName=s,this.newName=i}get type(){return"rename"}get affectedSelectable(){return this.position.nodeAfter}clone(){return new Y(this.position.clone(),this.oldName,this.newName,this.baseVersion)}getReversed(){return new Y(this.position.clone(),this.newName,this.oldName,this.baseVersion+1)}_validate(){const e=this.position.nodeAfter;if(e instanceof se){if(e.name!==this.oldName)throw new p("rename-operation-wrong-name",this)}else throw new p("rename-operation-wrong-position",this)}_execute(){const e=this.position.nodeAfter;e.name=this.newName}toJSON(){const e=super.toJSON();return e.position=this.position.toJSON(),e}static get className(){return"RenameOperation"}static fromJSON(e,s){return new Y(x.fromJSON(e.position,s),e.oldName,e.newName,e.baseVersion)}}class xe extends ee{constructor(e,s,i,r,o){super(o);h(this,"root");h(this,"key");h(this,"oldValue");h(this,"newValue");this.root=e,this.key=s,this.oldValue=i===void 0?null:i,this.newValue=r===void 0?null:r}get type(){return this.oldValue===null?"addRootAttribute":this.newValue===null?"removeRootAttribute":"changeRootAttribute"}get affectedSelectable(){return this.root}clone(){return new xe(this.root,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new xe(this.root,this.key,this.newValue,this.oldValue,this.baseVersion+1)}_validate(){if(this.root!=this.root.root||this.root.is("documentFragment"))throw new p("rootattribute-operation-not-a-root",this,{root:this.root,key:this.key});if(this.oldValue!==null&&this.root.getAttribute(this.key)!==this.oldValue)throw new p("rootattribute-operation-wrong-old-value",this,{root:this.root,key:this.key});if(this.oldValue===null&&this.newValue!==null&&this.root.hasAttribute(this.key))throw new p("rootattribute-operation-attribute-exists",this,{root:this.root,key:this.key})}_execute(){this.newValue!==null?this.root._setAttribute(this.key,this.newValue):this.root._removeAttribute(this.key)}toJSON(){const e=super.toJSON();return e.root=this.root.toJSON(),e}static get className(){return"RootAttributeOperation"}static fromJSON(e,s){if(!s.getRoot(e.root))throw new p("rootattribute-operation-fromjson-no-root",this,{rootName:e.root});return new xe(s.getRoot(e.root),e.key,e.oldValue,e.newValue,e.baseVersion)}}class ve extends ee{constructor(e,s,i,r,o){super(o);h(this,"rootName");h(this,"elementName");h(this,"isAdd");h(this,"_document");if(this.rootName=e,this.elementName=s,this.isAdd=i,this._document=r,!this._document.getRoot(this.rootName)){const a=this._document.createRoot(this.elementName,this.rootName);a._isAttached=!1}}get type(){return this.isAdd?"addRoot":"detachRoot"}get affectedSelectable(){return this._document.getRoot(this.rootName)}clone(){return new ve(this.rootName,this.elementName,this.isAdd,this._document,this.baseVersion)}getReversed(){return new ve(this.rootName,this.elementName,!this.isAdd,this._document,this.baseVersion+1)}_execute(){this._document.getRoot(this.rootName)._isAttached=this.isAdd}toJSON(){const e=super.toJSON();return delete e._document,e}static get className(){return"RootOperation"}static fromJSON(e,s){return new ve(e.rootName,e.elementName,e.isAdd,s,e.baseVersion)}}const ie={};ie[D.className]=D;ie[U.className]=U;ie[X.className]=X;ie[I.className]=I;ie[J.className]=J;ie[ee.className]=ee;ie[Y.className]=Y;ie[xe.className]=xe;ie[ve.className]=ve;ie[L.className]=L;ie[G.className]=G;const ws=new Map;function R(t,n,e){let s=ws.get(t);s||(s=new Map,ws.set(t,s)),s.set(n,e)}R(D,D,(t,n,e)=>{if(t.key===n.key&&t.range.start.hasSameParentAs(n.range.start)){const s=t.range.getDifference(n.range).map(r=>new D(r,t.key,t.oldValue,t.newValue,0)),i=t.range.getIntersection(n.range);return i&&e.aIsStrong&&s.push(new D(i,n.key,n.newValue,t.newValue,0)),s.length==0?[new J(0)]:s}else return[t]});R(D,U,(t,n)=>{if(t.range.start.hasSameParentAs(n.position)&&t.range.containsPosition(n.position)){const s=t.range._getTransformedByInsertion(n.position,n.howMany,!n.shouldReceiveAttributes).map(i=>new D(i,t.key,t.oldValue,t.newValue,t.baseVersion));if(n.shouldReceiveAttributes){const i=Pi(n,t.key,t.oldValue);i&&s.unshift(i)}return s}return t.range=t.range._getTransformedByInsertion(n.position,n.howMany,!1)[0],[t]});function Pi(t,n,e){const i=t.nodes.getNode(0).getAttribute(n);if(i==e)return null;const r=new w(t.position,t.position.getShiftedBy(t.howMany));return new D(r,n,i,e,0)}R(D,G,(t,n)=>{const e=[];t.range.start.hasSameParentAs(n.deletionPosition)&&(t.range.containsPosition(n.deletionPosition)||t.range.start.isEqual(n.deletionPosition))&&e.push(w._createFromPositionAndShift(n.graveyardPosition,1));const s=t.range._getTransformedByMergeOperation(n);return s.isCollapsed||e.push(s),e.map(i=>new D(i,t.key,t.oldValue,t.newValue,t.baseVersion))});R(D,I,(t,n)=>au(t.range,n).map(s=>new D(s,t.key,t.oldValue,t.newValue,t.baseVersion)));function au(t,n){const e=w._createFromPositionAndShift(n.sourcePosition,n.howMany);let s=null,i=[];e.containsRange(t,!0)?s=t:t.start.hasSameParentAs(e.start)?(i=t.getDifference(e),s=t.getIntersection(e)):i=[t];const r=[];for(let o of i){o=o._getTransformedByDeletion(n.sourcePosition,n.howMany);const a=n.getMovedRangeStart(),l=o.start.hasSameParentAs(a),c=o._getTransformedByInsertion(a,n.howMany,l);r.push(...c)}return s&&r.push(s._getTransformedByMove(n.sourcePosition,n.targetPosition,n.howMany,!1)[0]),r}R(D,L,(t,n)=>{if(t.range.end.isEqual(n.insertionPosition))return n.graveyardPosition||t.range.end.offset++,[t];if(t.range.start.hasSameParentAs(n.splitPosition)&&t.range.containsPosition(n.splitPosition)){const e=t.clone();return e.range=new w(n.moveTargetPosition.clone(),t.range.end._getCombined(n.splitPosition,n.moveTargetPosition)),t.range.end=n.splitPosition.clone(),t.range.end.stickiness="toPrevious",[t,e]}return t.range=t.range._getTransformedBySplitOperation(n),[t]});R(U,D,(t,n)=>{const e=[t];if(t.shouldReceiveAttributes&&t.position.hasSameParentAs(n.range.start)&&n.range.containsPosition(t.position)){const s=Pi(t,n.key,n.newValue);s&&e.push(s)}return e});R(U,U,(t,n,e)=>t.position.isEqual(n.position)&&e.aIsStrong?[t]:(t.position=t.position._getTransformedByInsertOperation(n),[t]));R(U,I,(t,n)=>(t.position=t.position._getTransformedByMoveOperation(n),[t]));R(U,L,(t,n)=>(t.position=t.position._getTransformedBySplitOperation(n),[t]));R(U,G,(t,n)=>(t.position=t.position._getTransformedByMergeOperation(n),[t]));R(X,U,(t,n)=>(t.oldRange&&(t.oldRange=t.oldRange._getTransformedByInsertOperation(n)[0]),t.newRange&&(t.newRange=t.newRange._getTransformedByInsertOperation(n)[0]),[t]));R(X,X,(t,n,e)=>{if(t.name==n.name)if(e.aIsStrong)t.oldRange=n.newRange?n.newRange.clone():null;else return[new J(0)];return[t]});R(X,G,(t,n)=>(t.oldRange&&(t.oldRange=t.oldRange._getTransformedByMergeOperation(n)),t.newRange&&(t.newRange=t.newRange._getTransformedByMergeOperation(n)),[t]));R(X,I,(t,n)=>{const e=[t];if(t.oldRange&&(t.oldRange=w._createFromRanges(t.oldRange._getTransformedByMoveOperation(n))),t.newRange){const s=t.newRange._getTransformedByMoveOperation(n);t.newRange=s[0];for(let i=1;i<s.length;i++){const r=t.clone();r.oldRange=null,r.newRange=s[i],r.baseVersion=-1,e.push(r)}}return e});R(X,L,(t,n,e)=>{if(t.oldRange&&(t.oldRange=t.oldRange._getTransformedBySplitOperation(n)),t.newRange){if(e.abRelation){const s=t.newRange._getTransformedBySplitOperation(n);return t.newRange.start.isEqual(n.splitPosition)&&e.abRelation.wasStartBeforeMergedElement?t.newRange.start=x._createAt(n.insertionPosition):t.newRange.start.isEqual(n.splitPosition)&&!e.abRelation.wasInLeftElement?t.newRange.start=x._createAt(n.moveTargetPosition):t.newRange.start=s.start,t.newRange.end.isEqual(n.splitPosition)&&e.abRelation.wasInRightElement?t.newRange.end=x._createAt(n.moveTargetPosition):t.newRange.end.isEqual(n.splitPosition)&&e.abRelation.wasEndBeforeMergedElement?t.newRange.end=x._createAt(n.insertionPosition):t.newRange.end=s.end,[t]}t.newRange=t.newRange._getTransformedBySplitOperation(n)}return[t]});R(G,U,(t,n)=>(t.sourcePosition.hasSameParentAs(n.position)&&(t.howMany+=n.howMany),t.sourcePosition=t.sourcePosition._getTransformedByInsertOperation(n),t.targetPosition=t.targetPosition._getTransformedByInsertOperation(n),[t]));R(G,G,(t,n,e)=>{if(t.sourcePosition.isEqual(n.sourcePosition)&&t.targetPosition.isEqual(n.targetPosition))if(e.bWasUndone){const s=n.graveyardPosition.path.slice();return s.push(0),t.sourcePosition=new x(n.graveyardPosition.root,s),t.howMany=0,[t]}else return[new J(0)];if(t.sourcePosition.isEqual(n.sourcePosition)&&!t.targetPosition.isEqual(n.targetPosition)&&!e.bWasUndone&&e.abRelation!="splitAtSource"){const s=t.targetPosition.root.rootName=="$graveyard",i=n.targetPosition.root.rootName=="$graveyard";if(i&&!s||!(s&&!i)&&e.aIsStrong){const l=n.targetPosition._getTransformedByMergeOperation(n),c=t.targetPosition._getTransformedByMergeOperation(n);return[new I(l,t.howMany,c,0)]}else return[new J(0)]}return t.sourcePosition.hasSameParentAs(n.targetPosition)&&(t.howMany+=n.howMany),t.sourcePosition=t.sourcePosition._getTransformedByMergeOperation(n),t.targetPosition=t.targetPosition._getTransformedByMergeOperation(n),(!t.graveyardPosition.isEqual(n.graveyardPosition)||!e.aIsStrong)&&(t.graveyardPosition=t.graveyardPosition._getTransformedByMergeOperation(n)),[t]});R(G,I,(t,n,e)=>{const s=w._createFromPositionAndShift(n.sourcePosition,n.howMany);return n.type=="remove"&&!e.bWasUndone&&t.deletionPosition.hasSameParentAs(n.sourcePosition)&&s.containsPosition(t.sourcePosition)?[new J(0)]:(n.sourcePosition.getShiftedBy(n.howMany).isEqual(t.sourcePosition)?t.sourcePosition.stickiness="toNone":n.targetPosition.isEqual(t.sourcePosition)&&e.abRelation=="mergeSourceAffected"?t.sourcePosition.stickiness="toNext":n.sourcePosition.isEqual(t.targetPosition)?(t.targetPosition.stickiness="toNone",t.howMany-=n.howMany):n.targetPosition.isEqual(t.targetPosition)&&e.abRelation=="mergeTargetWasBefore"?(t.targetPosition.stickiness="toPrevious",t.howMany+=n.howMany):(t.sourcePosition.hasSameParentAs(n.targetPosition)&&(t.howMany+=n.howMany),t.sourcePosition.hasSameParentAs(n.sourcePosition)&&(t.howMany-=n.howMany)),t.sourcePosition=t.sourcePosition._getTransformedByMoveOperation(n),t.targetPosition=t.targetPosition._getTransformedByMoveOperation(n),t.sourcePosition.stickiness="toPrevious",t.targetPosition.stickiness="toNext",t.graveyardPosition.isEqual(n.targetPosition)||(t.graveyardPosition=t.graveyardPosition._getTransformedByMoveOperation(n)),[t])});R(G,L,(t,n,e)=>{if(n.graveyardPosition&&(t.graveyardPosition=t.graveyardPosition._getTransformedByDeletion(n.graveyardPosition,1),t.deletionPosition.isEqual(n.graveyardPosition)&&(t.howMany=n.howMany)),t.targetPosition.isEqual(n.splitPosition)&&(n.graveyardPosition&&t.deletionPosition.isEqual(n.graveyardPosition)||e.abRelation=="mergeTargetNotMoved"))return t.sourcePosition=t.sourcePosition._getTransformedBySplitOperation(n),[t];if(t.sourcePosition.isEqual(n.splitPosition)){if(e.abRelation=="mergeSourceNotMoved")return t.howMany=0,t.targetPosition=t.targetPosition._getTransformedBySplitOperation(n),[t];if(e.abRelation=="mergeSameElement"||t.sourcePosition.offset>0)return t.sourcePosition=n.moveTargetPosition.clone(),t.targetPosition=t.targetPosition._getTransformedBySplitOperation(n),[t]}return t.sourcePosition.hasSameParentAs(n.splitPosition)&&(t.howMany=n.splitPosition.offset),t.sourcePosition=t.sourcePosition._getTransformedBySplitOperation(n),t.targetPosition=t.targetPosition._getTransformedBySplitOperation(n),[t]});R(I,U,(t,n)=>{const s=w._createFromPositionAndShift(t.sourcePosition,t.howMany)._getTransformedByInsertOperation(n,!1)[0];return t.sourcePosition=s.start,t.howMany=s.end.offset-s.start.offset,t.targetPosition.isEqual(n.position)||(t.targetPosition=t.targetPosition._getTransformedByInsertOperation(n)),[t]});R(I,I,(t,n,e)=>{const s=w._createFromPositionAndShift(t.sourcePosition,t.howMany),i=w._createFromPositionAndShift(n.sourcePosition,n.howMany);let r=e.aIsStrong,o=!e.aIsStrong;e.abRelation=="insertBefore"||e.baRelation=="insertAfter"?o=!0:(e.abRelation=="insertAfter"||e.baRelation=="insertBefore")&&(o=!1);let a;if(t.targetPosition.isEqual(n.targetPosition)&&o?a=t.targetPosition._getTransformedByDeletion(n.sourcePosition,n.howMany):a=t.targetPosition._getTransformedByMove(n.sourcePosition,n.targetPosition,n.howMany),bs(t,n)&&bs(n,t))return[n.getReversed()];if(s.containsPosition(n.targetPosition)&&s.containsRange(i,!0))return s.start=s.start._getTransformedByMove(n.sourcePosition,n.targetPosition,n.howMany),s.end=s.end._getTransformedByMove(n.sourcePosition,n.targetPosition,n.howMany),Ve([s],a);if(i.containsPosition(t.targetPosition)&&i.containsRange(s,!0))return s.start=s.start._getCombined(n.sourcePosition,n.getMovedRangeStart()),s.end=s.end._getCombined(n.sourcePosition,n.getMovedRangeStart()),Ve([s],a);const d=K(t.sourcePosition.getParentPath(),n.sourcePosition.getParentPath());if(d=="prefix"||d=="extension")return s.start=s.start._getTransformedByMove(n.sourcePosition,n.targetPosition,n.howMany),s.end=s.end._getTransformedByMove(n.sourcePosition,n.targetPosition,n.howMany),Ve([s],a);t.type=="remove"&&n.type!="remove"&&!e.aWasUndone&&!e.forceWeakRemove?r=!0:t.type!="remove"&&n.type=="remove"&&!e.bWasUndone&&!e.forceWeakRemove&&(r=!1);const g=[],_=s.getDifference(i);for(const E of _){E.start=E.start._getTransformedByDeletion(n.sourcePosition,n.howMany),E.end=E.end._getTransformedByDeletion(n.sourcePosition,n.howMany);const P=K(E.start.getParentPath(),n.getMovedRangeStart().getParentPath())=="same",C=E._getTransformedByInsertion(n.getMovedRangeStart(),n.howMany,P);g.push(...C)}const m=s.getIntersection(i);return m!==null&&r&&(m.start=m.start._getCombined(n.sourcePosition,n.getMovedRangeStart()),m.end=m.end._getCombined(n.sourcePosition,n.getMovedRangeStart()),g.length===0?g.push(m):g.length==1?i.start.isBefore(s.start)||i.start.isEqual(s.start)?g.unshift(m):g.push(m):g.splice(1,0,m)),g.length===0?[new J(t.baseVersion)]:Ve(g,a)});R(I,L,(t,n,e)=>{let s=t.targetPosition.clone();(!t.targetPosition.isEqual(n.insertionPosition)||!n.graveyardPosition||e.abRelation=="moveTargetAfter")&&(s=t.targetPosition._getTransformedBySplitOperation(n));const i=w._createFromPositionAndShift(t.sourcePosition,t.howMany);if(i.end.isEqual(n.insertionPosition))return n.graveyardPosition||t.howMany++,t.targetPosition=s,[t];if(i.start.hasSameParentAs(n.splitPosition)&&i.containsPosition(n.splitPosition)){let a=new w(n.splitPosition,i.end);a=a._getTransformedBySplitOperation(n);const l=[new w(i.start,n.splitPosition),a];return Ve(l,s)}t.targetPosition.isEqual(n.splitPosition)&&e.abRelation=="insertAtSource"&&(s=n.moveTargetPosition),t.targetPosition.isEqual(n.insertionPosition)&&e.abRelation=="insertBetween"&&(s=t.targetPosition);const o=[i._getTransformedBySplitOperation(n)];if(n.graveyardPosition){const a=i.start.isEqual(n.graveyardPosition)||i.containsPosition(n.graveyardPosition);t.howMany>1&&a&&!e.aWasUndone&&o.push(w._createFromPositionAndShift(n.insertionPosition,1))}return Ve(o,s)});R(I,G,(t,n,e)=>{const s=w._createFromPositionAndShift(t.sourcePosition,t.howMany);if(n.deletionPosition.hasSameParentAs(t.sourcePosition)&&s.containsPosition(n.sourcePosition)){if(t.type=="remove"&&!e.forceWeakRemove){if(!e.aWasUndone){const o=[];let a=n.graveyardPosition.clone(),l=n.targetPosition._getTransformedByMergeOperation(n);const c=t.targetPosition.getTransformedByOperation(n);t.howMany>1&&(o.push(new I(t.sourcePosition,t.howMany-1,c,0)),a=a._getTransformedByMove(t.sourcePosition,c,t.howMany-1),l=l._getTransformedByMove(t.sourcePosition,c,t.howMany-1));const d=n.deletionPosition._getCombined(t.sourcePosition,c),g=new I(a,1,d,0),_=g.getMovedRangeStart().path.slice();_.push(0);const m=new x(g.targetPosition.root,_);l=l._getTransformedByMove(a,d,1);const E=new I(l,n.howMany,m,0);return o.push(g),o.push(E),o}}else if(t.howMany==1)return e.bWasUndone?(t.sourcePosition=n.graveyardPosition.clone(),t.targetPosition=t.targetPosition._getTransformedByMergeOperation(n),[t]):[new J(0)]}const r=w._createFromPositionAndShift(t.sourcePosition,t.howMany)._getTransformedByMergeOperation(n);return t.sourcePosition=r.start,t.howMany=r.end.offset-r.start.offset,t.targetPosition=t.targetPosition._getTransformedByMergeOperation(n),[t]});R(Y,U,(t,n)=>(t.position=t.position._getTransformedByInsertOperation(n),[t]));R(Y,G,(t,n)=>t.position.isEqual(n.deletionPosition)?(t.position=n.graveyardPosition.clone(),t.position.stickiness="toNext",[t]):(t.position=t.position._getTransformedByMergeOperation(n),[t]));R(Y,I,(t,n)=>(t.position=t.position._getTransformedByMoveOperation(n),[t]));R(Y,Y,(t,n,e)=>{if(t.position.isEqual(n.position))if(e.aIsStrong)t.oldName=n.newName;else return[new J(0)];return[t]});R(Y,L,(t,n)=>{const e=t.position.path,s=n.splitPosition.getParentPath();if(K(e,s)=="same"&&!n.graveyardPosition){const i=new Y(t.position.getShiftedBy(1),t.oldName,t.newName,0);return[t,i]}return t.position=t.position._getTransformedBySplitOperation(n),[t]});R(xe,xe,(t,n,e)=>{if(t.root===n.root&&t.key===n.key){if(!e.aIsStrong||t.newValue===n.newValue)return[new J(0)];t.oldValue=n.newValue}return[t]});R(ve,ve,(t,n)=>t.rootName===n.rootName&&t.isAdd===n.isAdd?[new J(0)]:[t]);R(L,U,(t,n)=>(t.splitPosition.hasSameParentAs(n.position)&&t.splitPosition.offset<n.position.offset&&(t.howMany+=n.howMany),t.splitPosition=t.splitPosition._getTransformedByInsertOperation(n),t.insertionPosition=t.insertionPosition._getTransformedByInsertOperation(n),[t]));R(L,G,(t,n,e)=>{if(!t.graveyardPosition&&!e.bWasUndone&&t.splitPosition.hasSameParentAs(n.sourcePosition)){const s=n.graveyardPosition.path.slice();s.push(0);const i=new x(n.graveyardPosition.root,s),r=L.getInsertionPosition(new x(n.graveyardPosition.root,s)),o=new L(i,0,r,null,0);return t.splitPosition=t.splitPosition._getTransformedByMergeOperation(n),t.insertionPosition=L.getInsertionPosition(t.splitPosition),t.graveyardPosition=o.insertionPosition.clone(),t.graveyardPosition.stickiness="toNext",[o,t]}return t.splitPosition.hasSameParentAs(n.deletionPosition)&&!t.splitPosition.isAfter(n.deletionPosition)&&t.howMany--,t.splitPosition.hasSameParentAs(n.targetPosition)&&(t.howMany+=n.howMany),t.splitPosition=t.splitPosition._getTransformedByMergeOperation(n),t.insertionPosition=L.getInsertionPosition(t.splitPosition),t.graveyardPosition&&(t.graveyardPosition=t.graveyardPosition._getTransformedByMergeOperation(n)),[t]});R(L,I,(t,n,e)=>{const s=w._createFromPositionAndShift(n.sourcePosition,n.howMany);if(t.graveyardPosition){const r=s.start.isEqual(t.graveyardPosition)||s.containsPosition(t.graveyardPosition);if(!e.bWasUndone&&r){const o=t.splitPosition._getTransformedByMoveOperation(n),a=t.graveyardPosition._getTransformedByMoveOperation(n),l=a.path.slice();l.push(0);const c=new x(a.root,l);return[new I(o,t.howMany,c,0)]}t.graveyardPosition=t.graveyardPosition._getTransformedByMoveOperation(n)}const i=t.splitPosition.isEqual(n.targetPosition);if(i&&(e.baRelation=="insertAtSource"||e.abRelation=="splitBefore"))return t.howMany+=n.howMany,t.splitPosition=t.splitPosition._getTransformedByDeletion(n.sourcePosition,n.howMany),t.insertionPosition=L.getInsertionPosition(t.splitPosition),[t];if(i&&e.abRelation&&e.abRelation.howMany){const{howMany:r,offset:o}=e.abRelation;return t.howMany+=r,t.splitPosition=t.splitPosition.getShiftedBy(o),[t]}if(t.splitPosition.hasSameParentAs(n.sourcePosition)&&s.containsPosition(t.splitPosition)){const r=n.howMany-(t.splitPosition.offset-n.sourcePosition.offset);return t.howMany-=r,t.splitPosition.hasSameParentAs(n.targetPosition)&&t.splitPosition.offset<n.targetPosition.offset&&(t.howMany+=n.howMany),t.splitPosition=n.sourcePosition.clone(),t.insertionPosition=L.getInsertionPosition(t.splitPosition),[t]}return n.sourcePosition.isEqual(n.targetPosition)||(t.splitPosition.hasSameParentAs(n.sourcePosition)&&t.splitPosition.offset<=n.sourcePosition.offset&&(t.howMany-=n.howMany),t.splitPosition.hasSameParentAs(n.targetPosition)&&t.splitPosition.offset<n.targetPosition.offset&&(t.howMany+=n.howMany)),t.splitPosition.stickiness="toNone",t.splitPosition=t.splitPosition._getTransformedByMoveOperation(n),t.splitPosition.stickiness="toNext",t.graveyardPosition?t.insertionPosition=t.insertionPosition._getTransformedByMoveOperation(n):t.insertionPosition=L.getInsertionPosition(t.splitPosition),[t]});R(L,L,(t,n,e)=>{if(t.splitPosition.isEqual(n.splitPosition)){if(!t.graveyardPosition&&!n.graveyardPosition)return[new J(0)];if(t.graveyardPosition&&n.graveyardPosition&&t.graveyardPosition.isEqual(n.graveyardPosition))return[new J(0)];if(e.abRelation=="splitBefore")return t.howMany=0,t.graveyardPosition=t.graveyardPosition._getTransformedBySplitOperation(n),[t]}if(t.graveyardPosition&&n.graveyardPosition&&t.graveyardPosition.isEqual(n.graveyardPosition)){const s=t.splitPosition.root.rootName=="$graveyard",i=n.splitPosition.root.rootName=="$graveyard";if(i&&!s||!(s&&!i)&&e.aIsStrong){const l=[];return n.howMany&&l.push(new I(n.moveTargetPosition,n.howMany,n.splitPosition,0)),t.howMany&&l.push(new I(t.splitPosition,t.howMany,t.moveTargetPosition,0)),l}else return[new J(0)]}if(t.graveyardPosition&&(t.graveyardPosition=t.graveyardPosition._getTransformedBySplitOperation(n)),t.splitPosition.isEqual(n.insertionPosition)&&e.abRelation=="splitBefore")return t.howMany++,[t];if(n.splitPosition.isEqual(t.insertionPosition)&&e.baRelation=="splitBefore"){const s=n.insertionPosition.path.slice();s.push(0);const i=new x(n.insertionPosition.root,s),r=new I(t.insertionPosition,1,i,0);return[t,r]}return t.splitPosition.hasSameParentAs(n.splitPosition)&&t.splitPosition.offset<n.splitPosition.offset&&(t.howMany-=n.howMany),t.splitPosition=t.splitPosition._getTransformedBySplitOperation(n),t.insertionPosition=L.getInsertionPosition(t.splitPosition),[t]});function bs(t,n){return t.targetPosition._getTransformedByDeletion(n.sourcePosition,n.howMany)===null}function Ve(t,n){const e=[];for(let s=0;s<t.length;s++){const i=t[s],r=new I(i.start,i.end.offset-i.start.offset,n,0);e.push(r);for(let o=s+1;o<t.length;o++)t[o]=t[o]._getTransformedByMove(r.sourcePosition,r.targetPosition,r.howMany)[0];n=n._getTransformedByMove(r.sourcePosition,r.targetPosition,r.howMany)}return e}class lu extends V(x){constructor(n,e,s="toNone"){if(super(n,e,s),!this.root.is("rootElement"))throw new p("model-liveposition-root-not-rootelement",n);cu.call(this)}detach(){this.stopListening()}toPosition(){return new x(this.root,this.path.slice(),this.stickiness)}static fromPosition(n,e){return new this(n.root,n.path.slice(),e||n.stickiness)}}lu.prototype.is=function(t){return t==="livePosition"||t==="model:livePosition"||t=="position"||t==="model:position"};function cu(){this.listenTo(this.root.document.model,"applyOperation",(t,n)=>{const e=n[0];e.isDocumentOperation&&hu.call(this,e)},{priority:"low"})}function hu(t){const n=this.getTransformedByOperation(t);if(!this.isEqual(n)){const e=this.toPosition();this.path=n.path,this.root=n.root,this.fire("change",e)}}class uu extends se{constructor(e,s,i="main"){super(s);h(this,"rootName");h(this,"_document");h(this,"_isAttached",!0);h(this,"_isLoaded",!0);this._document=e,this.rootName=i}get document(){return this._document}isAttached(){return this._isAttached}toJSON(){return this.rootName}}uu.prototype.is=function(t,n){return n?n===this.name&&(t==="rootElement"||t==="model:rootElement"||t==="element"||t==="model:element"):t==="rootElement"||t==="model:rootElement"||t==="element"||t==="model:element"||t==="node"||t==="model:node"};class fu extends V(Ae){constructor(e,s,i,r){super();h(this,"name");h(this,"_managedUsingOperations");h(this,"_affectsData");h(this,"_liveRange");this.name=e,this._liveRange=this._attachLiveRange(s),this._managedUsingOperations=i,this._affectsData=r}get managedUsingOperations(){if(!this._liveRange)throw new p("marker-destroyed",this);return this._managedUsingOperations}get affectsData(){if(!this._liveRange)throw new p("marker-destroyed",this);return this._affectsData}getData(){return{range:this.getRange(),affectsData:this.affectsData,managedUsingOperations:this.managedUsingOperations}}getStart(){if(!this._liveRange)throw new p("marker-destroyed",this);return this._liveRange.start.clone()}getEnd(){if(!this._liveRange)throw new p("marker-destroyed",this);return this._liveRange.end.clone()}getRange(){if(!this._liveRange)throw new p("marker-destroyed",this);return this._liveRange.toRange()}_attachLiveRange(e){return this._liveRange&&this._detachLiveRange(),e.delegate("change:range").to(this),e.delegate("change:content").to(this),this._liveRange=e,e}_detachLiveRange(){this._liveRange.stopDelegating("change:range",this),this._liveRange.stopDelegating("change:content",this),this._liveRange.detach(),this._liveRange=null}}fu.prototype.is=function(t){return t==="marker"||t==="model:marker"};class kn extends Ae{constructor(e){super();h(this,"markers",new Map);h(this,"_children",new ot);e&&this._insertChild(0,e)}[Symbol.iterator](){return this.getChildren()}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}get nextSibling(){return null}get previousSibling(){return null}get root(){return this}get parent(){return null}get document(){return null}isAttached(){return!1}getAncestors(){return[]}getChild(e){return this._children.getNode(e)}getChildAtOffset(e){return this._children.getNodeAtOffset(e)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(e){return this._children.getNodeIndex(e)}getChildStartOffset(e){return this._children.getNodeStartOffset(e)}getPath(){return[]}getNodeByPath(e){let s=this;for(const i of e)s=s.getChildAtOffset(i);return s}offsetToIndex(e){return this._children.offsetToIndex(e)}toJSON(){const e=[];for(const s of this._children)e.push(s.toJSON());return e}static fromJSON(e){const s=[];for(const i of e)i.name?s.push(se.fromJSON(i)):s.push(F.fromJSON(i));return new kn(s)}_appendChild(e){this._insertChild(this.childCount,e)}_insertChild(e,s){const i=du(s);for(const r of i)r.parent!==null&&r._remove(),r.parent=this;this._children._insertNodes(e,i)}_removeChildren(e,s=1){const i=this._children._removeNodes(e,s);for(const r of i)r.parent=null;return i}}kn.prototype.is=function(t){return t==="documentFragment"||t==="model:documentFragment"};function du(t){return typeof t=="string"?[new F(t)]:(we(t)||(t=[t]),Array.from(t).map(n=>typeof n=="string"?new F(n):n instanceof Ne?new F(n.data,n.getAttributes()):n))}var gu={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};const yt=gu,ki={};for(const t of Object.keys(yt))ki[yt[t]]=t;const v={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};var Si=v;for(const t of Object.keys(v)){if(!("channels"in v[t]))throw new Error("missing channels property: "+t);if(!("labels"in v[t]))throw new Error("missing channel labels property: "+t);if(v[t].labels.length!==v[t].channels)throw new Error("channel and label counts mismatch: "+t);const{channels:n,labels:e}=v[t];delete v[t].channels,delete v[t].labels,Object.defineProperty(v[t],"channels",{value:n}),Object.defineProperty(v[t],"labels",{value:e})}v.rgb.hsl=function(t){const n=t[0]/255,e=t[1]/255,s=t[2]/255,i=Math.min(n,e,s),r=Math.max(n,e,s),o=r-i;let a,l;r===i?a=0:n===r?a=(e-s)/o:e===r?a=2+(s-n)/o:s===r&&(a=4+(n-e)/o),a=Math.min(a*60,360),a<0&&(a+=360);const c=(i+r)/2;return r===i?l=0:c<=.5?l=o/(r+i):l=o/(2-r-i),[a,l*100,c*100]};v.rgb.hsv=function(t){let n,e,s,i,r;const o=t[0]/255,a=t[1]/255,l=t[2]/255,c=Math.max(o,a,l),d=c-Math.min(o,a,l),g=function(_){return(c-_)/6/d+1/2};return d===0?(i=0,r=0):(r=d/c,n=g(o),e=g(a),s=g(l),o===c?i=s-e:a===c?i=1/3+n-s:l===c&&(i=2/3+e-n),i<0?i+=1:i>1&&(i-=1)),[i*360,r*100,c*100]};v.rgb.hwb=function(t){const n=t[0],e=t[1];let s=t[2];const i=v.rgb.hsl(t)[0],r=1/255*Math.min(n,Math.min(e,s));return s=1-1/255*Math.max(n,Math.max(e,s)),[i,r*100,s*100]};v.rgb.cmyk=function(t){const n=t[0]/255,e=t[1]/255,s=t[2]/255,i=Math.min(1-n,1-e,1-s),r=(1-n-i)/(1-i)||0,o=(1-e-i)/(1-i)||0,a=(1-s-i)/(1-i)||0;return[r*100,o*100,a*100,i*100]};function pu(t,n){return(t[0]-n[0])**2+(t[1]-n[1])**2+(t[2]-n[2])**2}v.rgb.keyword=function(t){const n=ki[t];if(n)return n;let e=1/0,s;for(const i of Object.keys(yt)){const r=yt[i],o=pu(t,r);o<e&&(e=o,s=i)}return s};v.keyword.rgb=function(t){return yt[t]};v.rgb.xyz=function(t){let n=t[0]/255,e=t[1]/255,s=t[2]/255;n=n>.04045?((n+.055)/1.055)**2.4:n/12.92,e=e>.04045?((e+.055)/1.055)**2.4:e/12.92,s=s>.04045?((s+.055)/1.055)**2.4:s/12.92;const i=n*.4124+e*.3576+s*.1805,r=n*.2126+e*.7152+s*.0722,o=n*.0193+e*.1192+s*.9505;return[i*100,r*100,o*100]};v.rgb.lab=function(t){const n=v.rgb.xyz(t);let e=n[0],s=n[1],i=n[2];e/=95.047,s/=100,i/=108.883,e=e>.008856?e**(1/3):7.787*e+16/116,s=s>.008856?s**(1/3):7.787*s+16/116,i=i>.008856?i**(1/3):7.787*i+16/116;const r=116*s-16,o=500*(e-s),a=200*(s-i);return[r,o,a]};v.hsl.rgb=function(t){const n=t[0]/360,e=t[1]/100,s=t[2]/100;let i,r,o;if(e===0)return o=s*255,[o,o,o];s<.5?i=s*(1+e):i=s+e-s*e;const a=2*s-i,l=[0,0,0];for(let c=0;c<3;c++)r=n+1/3*-(c-1),r<0&&r++,r>1&&r--,6*r<1?o=a+(i-a)*6*r:2*r<1?o=i:3*r<2?o=a+(i-a)*(2/3-r)*6:o=a,l[c]=o*255;return l};v.hsl.hsv=function(t){const n=t[0];let e=t[1]/100,s=t[2]/100,i=e;const r=Math.max(s,.01);s*=2,e*=s<=1?s:2-s,i*=r<=1?r:2-r;const o=(s+e)/2,a=s===0?2*i/(r+i):2*e/(s+e);return[n,a*100,o*100]};v.hsv.rgb=function(t){const n=t[0]/60,e=t[1]/100;let s=t[2]/100;const i=Math.floor(n)%6,r=n-Math.floor(n),o=255*s*(1-e),a=255*s*(1-e*r),l=255*s*(1-e*(1-r));switch(s*=255,i){case 0:return[s,l,o];case 1:return[a,s,o];case 2:return[o,s,l];case 3:return[o,a,s];case 4:return[l,o,s];case 5:return[s,o,a]}};v.hsv.hsl=function(t){const n=t[0],e=t[1]/100,s=t[2]/100,i=Math.max(s,.01);let r,o;o=(2-e)*s;const a=(2-e)*i;return r=e*i,r/=a<=1?a:2-a,r=r||0,o/=2,[n,r*100,o*100]};v.hwb.rgb=function(t){const n=t[0]/360;let e=t[1]/100,s=t[2]/100;const i=e+s;let r;i>1&&(e/=i,s/=i);const o=Math.floor(6*n),a=1-s;r=6*n-o,o&1&&(r=1-r);const l=e+r*(a-e);let c,d,g;switch(o){default:case 6:case 0:c=a,d=l,g=e;break;case 1:c=l,d=a,g=e;break;case 2:c=e,d=a,g=l;break;case 3:c=e,d=l,g=a;break;case 4:c=l,d=e,g=a;break;case 5:c=a,d=e,g=l;break}return[c*255,d*255,g*255]};v.cmyk.rgb=function(t){const n=t[0]/100,e=t[1]/100,s=t[2]/100,i=t[3]/100,r=1-Math.min(1,n*(1-i)+i),o=1-Math.min(1,e*(1-i)+i),a=1-Math.min(1,s*(1-i)+i);return[r*255,o*255,a*255]};v.xyz.rgb=function(t){const n=t[0]/100,e=t[1]/100,s=t[2]/100;let i,r,o;return i=n*3.2406+e*-1.5372+s*-.4986,r=n*-.9689+e*1.8758+s*.0415,o=n*.0557+e*-.204+s*1.057,i=i>.0031308?1.055*i**(1/2.4)-.055:i*12.92,r=r>.0031308?1.055*r**(1/2.4)-.055:r*12.92,o=o>.0031308?1.055*o**(1/2.4)-.055:o*12.92,i=Math.min(Math.max(0,i),1),r=Math.min(Math.max(0,r),1),o=Math.min(Math.max(0,o),1),[i*255,r*255,o*255]};v.xyz.lab=function(t){let n=t[0],e=t[1],s=t[2];n/=95.047,e/=100,s/=108.883,n=n>.008856?n**(1/3):7.787*n+16/116,e=e>.008856?e**(1/3):7.787*e+16/116,s=s>.008856?s**(1/3):7.787*s+16/116;const i=116*e-16,r=500*(n-e),o=200*(e-s);return[i,r,o]};v.lab.xyz=function(t){const n=t[0],e=t[1],s=t[2];let i,r,o;r=(n+16)/116,i=e/500+r,o=r-s/200;const a=r**3,l=i**3,c=o**3;return r=a>.008856?a:(r-16/116)/7.787,i=l>.008856?l:(i-16/116)/7.787,o=c>.008856?c:(o-16/116)/7.787,i*=95.047,r*=100,o*=108.883,[i,r,o]};v.lab.lch=function(t){const n=t[0],e=t[1],s=t[2];let i;i=Math.atan2(s,e)*360/2/Math.PI,i<0&&(i+=360);const o=Math.sqrt(e*e+s*s);return[n,o,i]};v.lch.lab=function(t){const n=t[0],e=t[1],i=t[2]/360*2*Math.PI,r=e*Math.cos(i),o=e*Math.sin(i);return[n,r,o]};v.rgb.ansi16=function(t,n=null){const[e,s,i]=t;let r=n===null?v.rgb.hsv(t)[2]:n;if(r=Math.round(r/50),r===0)return 30;let o=30+(Math.round(i/255)<<2|Math.round(s/255)<<1|Math.round(e/255));return r===2&&(o+=60),o};v.hsv.ansi16=function(t){return v.rgb.ansi16(v.hsv.rgb(t),t[2])};v.rgb.ansi256=function(t){const n=t[0],e=t[1],s=t[2];return n===e&&e===s?n<8?16:n>248?231:Math.round((n-8)/247*24)+232:16+36*Math.round(n/255*5)+6*Math.round(e/255*5)+Math.round(s/255*5)};v.ansi16.rgb=function(t){let n=t%10;if(n===0||n===7)return t>50&&(n+=3.5),n=n/10.5*255,[n,n,n];const e=(~~(t>50)+1)*.5,s=(n&1)*e*255,i=(n>>1&1)*e*255,r=(n>>2&1)*e*255;return[s,i,r]};v.ansi256.rgb=function(t){if(t>=232){const r=(t-232)*10+8;return[r,r,r]}t-=16;let n;const e=Math.floor(t/36)/5*255,s=Math.floor((n=t%36)/6)/5*255,i=n%6/5*255;return[e,s,i]};v.rgb.hex=function(t){const e=(((Math.round(t[0])&255)<<16)+((Math.round(t[1])&255)<<8)+(Math.round(t[2])&255)).toString(16).toUpperCase();return"000000".substring(e.length)+e};v.hex.rgb=function(t){const n=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!n)return[0,0,0];let e=n[0];n[0].length===3&&(e=e.split("").map(a=>a+a).join(""));const s=parseInt(e,16),i=s>>16&255,r=s>>8&255,o=s&255;return[i,r,o]};v.rgb.hcg=function(t){const n=t[0]/255,e=t[1]/255,s=t[2]/255,i=Math.max(Math.max(n,e),s),r=Math.min(Math.min(n,e),s),o=i-r;let a,l;return o<1?a=r/(1-o):a=0,o<=0?l=0:i===n?l=(e-s)/o%6:i===e?l=2+(s-n)/o:l=4+(n-e)/o,l/=6,l%=1,[l*360,o*100,a*100]};v.hsl.hcg=function(t){const n=t[1]/100,e=t[2]/100,s=e<.5?2*n*e:2*n*(1-e);let i=0;return s<1&&(i=(e-.5*s)/(1-s)),[t[0],s*100,i*100]};v.hsv.hcg=function(t){const n=t[1]/100,e=t[2]/100,s=n*e;let i=0;return s<1&&(i=(e-s)/(1-s)),[t[0],s*100,i*100]};v.hcg.rgb=function(t){const n=t[0]/360,e=t[1]/100,s=t[2]/100;if(e===0)return[s*255,s*255,s*255];const i=[0,0,0],r=n%1*6,o=r%1,a=1-o;let l=0;switch(Math.floor(r)){case 0:i[0]=1,i[1]=o,i[2]=0;break;case 1:i[0]=a,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=o;break;case 3:i[0]=0,i[1]=a,i[2]=1;break;case 4:i[0]=o,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=a}return l=(1-e)*s,[(e*i[0]+l)*255,(e*i[1]+l)*255,(e*i[2]+l)*255]};v.hcg.hsv=function(t){const n=t[1]/100,e=t[2]/100,s=n+e*(1-n);let i=0;return s>0&&(i=n/s),[t[0],i*100,s*100]};v.hcg.hsl=function(t){const n=t[1]/100,s=t[2]/100*(1-n)+.5*n;let i=0;return s>0&&s<.5?i=n/(2*s):s>=.5&&s<1&&(i=n/(2*(1-s))),[t[0],i*100,s*100]};v.hcg.hwb=function(t){const n=t[1]/100,e=t[2]/100,s=n+e*(1-n);return[t[0],(s-n)*100,(1-s)*100]};v.hwb.hcg=function(t){const n=t[1]/100,s=1-t[2]/100,i=s-n;let r=0;return i<1&&(r=(s-i)/(1-i)),[t[0],i*100,r*100]};v.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]};v.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]};v.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]};v.gray.hsl=function(t){return[0,0,t[0]]};v.gray.hsv=v.gray.hsl;v.gray.hwb=function(t){return[0,100,t[0]]};v.gray.cmyk=function(t){return[0,0,0,t[0]]};v.gray.lab=function(t){return[t[0],0,0]};v.gray.hex=function(t){const n=Math.round(t[0]/100*255)&255,s=((n<<16)+(n<<8)+n).toString(16).toUpperCase();return"000000".substring(s.length)+s};v.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]};const Rt=Si;function mu(){const t={},n=Object.keys(Rt);for(let e=n.length,s=0;s<e;s++)t[n[s]]={distance:-1,parent:null};return t}function _u(t){const n=mu(),e=[t];for(n[t].distance=0;e.length;){const s=e.pop(),i=Object.keys(Rt[s]);for(let r=i.length,o=0;o<r;o++){const a=i[o],l=n[a];l.distance===-1&&(l.distance=n[s].distance+1,l.parent=s,e.unshift(a))}}return n}function yu(t,n){return function(e){return n(t(e))}}function wu(t,n){const e=[n[t].parent,t];let s=Rt[n[t].parent][t],i=n[t].parent;for(;n[i].parent;)e.unshift(n[i].parent),s=yu(Rt[n[i].parent][i],s),i=n[i].parent;return s.conversion=e,s}var bu=function(t){const n=_u(t),e={},s=Object.keys(n);for(let i=s.length,r=0;r<i;r++){const o=s[r];n[o].parent!==null&&(e[o]=wu(o,n))}return e};const ln=Si,xu=bu,et={},vu=Object.keys(ln);function Pu(t){const n=function(...e){const s=e[0];return s==null?s:(s.length>1&&(e=s),t(e))};return"conversion"in t&&(n.conversion=t.conversion),n}function ku(t){const n=function(...e){const s=e[0];if(s==null)return s;s.length>1&&(e=s);const i=t(e);if(typeof i=="object")for(let r=i.length,o=0;o<r;o++)i[o]=Math.round(i[o]);return i};return"conversion"in t&&(n.conversion=t.conversion),n}vu.forEach(t=>{et[t]={},Object.defineProperty(et[t],"channels",{value:ln[t].channels}),Object.defineProperty(et[t],"labels",{value:ln[t].labels});const n=xu(t);Object.keys(n).forEach(s=>{const i=n[s];et[t][s]=ku(i),et[t][s].raw=Pu(i)})});/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */var Su='<svg viewBox="0 0 10 8" xmlns="http://www.w3.org/2000/svg"><path d="M9.055.263v3.972h-6.77M1 4.216l2-2.038m-2 2 2 2.038"/></svg>';new DOMParser().parseFromString(Su,"image/svg+xml").firstChild;/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Au=[{listStyle:"disc",typeAttribute:"disc",listType:"bulleted"},{listStyle:"circle",typeAttribute:"circle",listType:"bulleted"},{listStyle:"square",typeAttribute:"square",listType:"bulleted"},{listStyle:"decimal",typeAttribute:"1",listType:"numbered"},{listStyle:"decimal-leading-zero",typeAttribute:null,listType:"numbered"},{listStyle:"lower-roman",typeAttribute:"i",listType:"numbered"},{listStyle:"upper-roman",typeAttribute:"I",listType:"numbered"},{listStyle:"lower-alpha",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-alpha",typeAttribute:"A",listType:"numbered"},{listStyle:"lower-latin",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-latin",typeAttribute:"A",listType:"numbered"}];for(const{listStyle:t,typeAttribute:n,listType:e}of Au);function Ai(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}let Ge=Ai();function Tu(t){Ge=t}const Eu=/[&<>"']/,Ou=/[&<>"']/g,Ru=/[<>"']|&(?!#?\w+;)/,Cu=/[<>"']|&(?!#?\w+;)/g,Nu={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},xs=t=>Nu[t];function q(t,n){if(n){if(Eu.test(t))return t.replace(Ou,xs)}else if(Ru.test(t))return t.replace(Cu,xs);return t}const Mu=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function Ti(t){return t.replace(Mu,(n,e)=>(e=e.toLowerCase(),e==="colon"?":":e.charAt(0)==="#"?e.charAt(1)==="x"?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):""))}const Bu=/(^|[^\[])\^/g;function B(t,n){t=t.source||t,n=n||"";const e={replace:(s,i)=>(i=i.source||i,i=i.replace(Bu,"$1"),t=t.replace(s,i),e),getRegex:()=>new RegExp(t,n)};return e}const $u=/[^\w:]/g,Iu=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function vs(t,n,e){if(t){let s;try{s=decodeURIComponent(Ti(e)).replace($u,"").toLowerCase()}catch{return null}if(s.indexOf("javascript:")===0||s.indexOf("vbscript:")===0||s.indexOf("data:")===0)return null}n&&!Iu.test(e)&&(e=zu(n,e));try{e=encodeURI(e).replace(/%25/g,"%")}catch{return null}return e}const Pt={},ju=/^[^:]+:\/*[^/]*$/,Fu=/^([^:]+:)[\s\S]*$/,Lu=/^([^:]+:\/*[^/]*)[\s\S]*$/;function zu(t,n){Pt[" "+t]||(ju.test(t)?Pt[" "+t]=t+"/":Pt[" "+t]=At(t,"/",!0)),t=Pt[" "+t];const e=t.indexOf(":")===-1;return n.substring(0,2)==="//"?e?n:t.replace(Fu,"$1")+n:n.charAt(0)==="/"?e?n:t.replace(Lu,"$1")+n:t+n}const Ct={exec:function(){}};function re(t){let n=1,e,s;for(;n<arguments.length;n++){e=arguments[n];for(s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t}function Ps(t,n){const e=t.replace(/\|/g,(r,o,a)=>{let l=!1,c=o;for(;--c>=0&&a[c]==="\\";)l=!l;return l?"|":" |"}),s=e.split(/ \|/);let i=0;if(s[0].trim()||s.shift(),s.length>0&&!s[s.length-1].trim()&&s.pop(),s.length>n)s.splice(n);else for(;s.length<n;)s.push("");for(;i<s.length;i++)s[i]=s[i].trim().replace(/\\\|/g,"|");return s}function At(t,n,e){const s=t.length;if(s===0)return"";let i=0;for(;i<s;){const r=t.charAt(s-i-1);if(r===n&&!e)i++;else if(r!==n&&e)i++;else break}return t.substr(0,s-i)}function Du(t,n){if(t.indexOf(n[1])===-1)return-1;const e=t.length;let s=0,i=0;for(;i<e;i++)if(t[i]==="\\")i++;else if(t[i]===n[0])s++;else if(t[i]===n[1]&&(s--,s<0))return i;return-1}function Ei(t){t&&t.sanitize&&!t.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function ks(t,n){if(n<1)return"";let e="";for(;n>1;)n&1&&(e+=t),n>>=1,t+=t;return e+t}function Ss(t,n,e,s){const i=n.href,r=n.title?q(n.title):null,o=t[1].replace(/\\([\[\]])/g,"$1");if(t[0].charAt(0)!=="!"){s.state.inLink=!0;const a={type:"link",raw:e,href:i,title:r,text:o,tokens:s.inlineTokens(o,[])};return s.state.inLink=!1,a}else return{type:"image",raw:e,href:i,title:r,text:q(o)}}function qu(t,n){const e=t.match(/^(\s+)(?:```)/);if(e===null)return n;const s=e[1];return n.split(`
`).map(i=>{const r=i.match(/^\s+/);if(r===null)return i;const[o]=r;return o.length>=s.length?i.slice(s.length):i}).join(`
`)}class Sn{constructor(n){this.options=n||Ge}space(n){const e=this.rules.block.newline.exec(n);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(n){const e=this.rules.block.code.exec(n);if(e){const s=e[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?s:At(s,`
`)}}}fences(n){const e=this.rules.block.fences.exec(n);if(e){const s=e[0],i=qu(s,e[3]||"");return{type:"code",raw:s,lang:e[2]?e[2].trim():e[2],text:i}}}heading(n){const e=this.rules.block.heading.exec(n);if(e){let s=e[2].trim();if(/#$/.test(s)){const r=At(s,"#");(this.options.pedantic||!r||/ $/.test(r))&&(s=r.trim())}const i={type:"heading",raw:e[0],depth:e[1].length,text:s,tokens:[]};return this.lexer.inline(i.text,i.tokens),i}}hr(n){const e=this.rules.block.hr.exec(n);if(e)return{type:"hr",raw:e[0]}}blockquote(n){const e=this.rules.block.blockquote.exec(n);if(e){const s=e[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:e[0],tokens:this.lexer.blockTokens(s,[]),text:s}}}list(n){let e=this.rules.block.list.exec(n);if(e){let s,i,r,o,a,l,c,d,g,_,m,E,P=e[1].trim();const C=P.length>1,T={type:"list",raw:"",ordered:C,start:C?+P.slice(0,-1):"",loose:!1,items:[]};P=C?`\\d{1,9}\\${P.slice(-1)}`:`\\${P}`,this.options.pedantic&&(P=C?P:"[*+-]");const N=new RegExp(`^( {0,3}${P})((?: [^\\n]*)?(?:\\n|$))`);for(;n&&(E=!1,!(!(e=N.exec(n))||this.rules.block.hr.test(n)));){if(s=e[0],n=n.substring(s.length),d=e[2].split(`
`,1)[0],g=n.split(`
`,1)[0],this.options.pedantic?(o=2,m=d.trimLeft()):(o=e[2].search(/[^ ]/),o=o>4?1:o,m=d.slice(o),o+=e[1].length),l=!1,!d&&/^ *$/.test(g)&&(s+=g+`
`,n=n.substring(g.length+1),E=!0),!E){const Z=new RegExp(`^ {0,${Math.min(3,o-1)}}(?:[*+-]|\\d{1,9}[.)])`);for(;n&&(_=n.split(`
`,1)[0],d=_,this.options.pedantic&&(d=d.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!Z.test(d));){if(d.search(/[^ ]/)>=o||!d.trim())m+=`
`+d.slice(o);else if(!l)m+=`
`+d;else break;!l&&!d.trim()&&(l=!0),s+=_+`
`,n=n.substring(_.length+1)}}T.loose||(c?T.loose=!0:/\n *\n *$/.test(s)&&(c=!0)),this.options.gfm&&(i=/^\[[ xX]\] /.exec(m),i&&(r=i[0]!=="[ ] ",m=m.replace(/^\[[ xX]\] +/,""))),T.items.push({type:"list_item",raw:s,task:!!i,checked:r,loose:!1,text:m}),T.raw+=s}T.items[T.items.length-1].raw=s.trimRight(),T.items[T.items.length-1].text=m.trimRight(),T.raw=T.raw.trimRight();const y=T.items.length;for(a=0;a<y;a++){this.lexer.state.top=!1,T.items[a].tokens=this.lexer.blockTokens(T.items[a].text,[]);const Z=T.items[a].tokens.filter(he=>he.type==="space"),H=Z.every(he=>{const Fe=he.raw.split("");let Te=0;for(const Ft of Fe)if(Ft===`
`&&(Te+=1),Te>1)return!0;return!1});!T.loose&&Z.length&&H&&(T.loose=!0,T.items[a].loose=!0)}return T}}html(n){const e=this.rules.block.html.exec(n);if(e){const s={type:"html",raw:e[0],pre:!this.options.sanitizer&&(e[1]==="pre"||e[1]==="script"||e[1]==="style"),text:e[0]};return this.options.sanitize&&(s.type="paragraph",s.text=this.options.sanitizer?this.options.sanitizer(e[0]):q(e[0]),s.tokens=[],this.lexer.inline(s.text,s.tokens)),s}}def(n){const e=this.rules.block.def.exec(n);if(e)return e[3]&&(e[3]=e[3].substring(1,e[3].length-1)),{type:"def",tag:e[1].toLowerCase().replace(/\s+/g," "),raw:e[0],href:e[2],title:e[3]}}table(n){const e=this.rules.block.table.exec(n);if(e){const s={type:"table",header:Ps(e[1]).map(i=>({text:i})),align:e[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:e[3]&&e[3].trim()?e[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(s.header.length===s.align.length){s.raw=e[0];let i=s.align.length,r,o,a,l;for(r=0;r<i;r++)/^ *-+: *$/.test(s.align[r])?s.align[r]="right":/^ *:-+: *$/.test(s.align[r])?s.align[r]="center":/^ *:-+ *$/.test(s.align[r])?s.align[r]="left":s.align[r]=null;for(i=s.rows.length,r=0;r<i;r++)s.rows[r]=Ps(s.rows[r],s.header.length).map(c=>({text:c}));for(i=s.header.length,o=0;o<i;o++)s.header[o].tokens=[],this.lexer.inlineTokens(s.header[o].text,s.header[o].tokens);for(i=s.rows.length,o=0;o<i;o++)for(l=s.rows[o],a=0;a<l.length;a++)l[a].tokens=[],this.lexer.inlineTokens(l[a].text,l[a].tokens);return s}}}lheading(n){const e=this.rules.block.lheading.exec(n);if(e){const s={type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:[]};return this.lexer.inline(s.text,s.tokens),s}}paragraph(n){const e=this.rules.block.paragraph.exec(n);if(e){const s={type:"paragraph",raw:e[0],text:e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1],tokens:[]};return this.lexer.inline(s.text,s.tokens),s}}text(n){const e=this.rules.block.text.exec(n);if(e){const s={type:"text",raw:e[0],text:e[0],tokens:[]};return this.lexer.inline(s.text,s.tokens),s}}escape(n){const e=this.rules.inline.escape.exec(n);if(e)return{type:"escape",raw:e[0],text:q(e[1])}}tag(n){const e=this.rules.inline.tag.exec(n);if(e)return!this.lexer.state.inLink&&/^<a /i.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(e[0]):q(e[0]):e[0]}}link(n){const e=this.rules.inline.link.exec(n);if(e){const s=e[2].trim();if(!this.options.pedantic&&/^</.test(s)){if(!/>$/.test(s))return;const o=At(s.slice(0,-1),"\\");if((s.length-o.length)%2===0)return}else{const o=Du(e[2],"()");if(o>-1){const l=(e[0].indexOf("!")===0?5:4)+e[1].length+o;e[2]=e[2].substring(0,o),e[0]=e[0].substring(0,l).trim(),e[3]=""}}let i=e[2],r="";if(this.options.pedantic){const o=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);o&&(i=o[1],r=o[3])}else r=e[3]?e[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(this.options.pedantic&&!/>$/.test(s)?i=i.slice(1):i=i.slice(1,-1)),Ss(e,{href:i&&i.replace(this.rules.inline._escapes,"$1"),title:r&&r.replace(this.rules.inline._escapes,"$1")},e[0],this.lexer)}}reflink(n,e){let s;if((s=this.rules.inline.reflink.exec(n))||(s=this.rules.inline.nolink.exec(n))){let i=(s[2]||s[1]).replace(/\s+/g," ");if(i=e[i.toLowerCase()],!i||!i.href){const r=s[0].charAt(0);return{type:"text",raw:r,text:r}}return Ss(s,i,s[0],this.lexer)}}emStrong(n,e,s=""){let i=this.rules.inline.emStrong.lDelim.exec(n);if(!i||i[3]&&s.match(/[\p{L}\p{N}]/u))return;const r=i[1]||i[2]||"";if(!r||r&&(s===""||this.rules.inline.punctuation.exec(s))){const o=i[0].length-1;let a,l,c=o,d=0;const g=i[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(g.lastIndex=0,e=e.slice(-1*n.length+o);(i=g.exec(e))!=null;){if(a=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!a)continue;if(l=a.length,i[3]||i[4]){c+=l;continue}else if((i[5]||i[6])&&o%3&&!((o+l)%3)){d+=l;continue}if(c-=l,c>0)continue;if(l=Math.min(l,l+c+d),Math.min(o,l)%2){const m=n.slice(1,o+i.index+l);return{type:"em",raw:n.slice(0,o+i.index+l+1),text:m,tokens:this.lexer.inlineTokens(m,[])}}const _=n.slice(2,o+i.index+l-1);return{type:"strong",raw:n.slice(0,o+i.index+l+1),text:_,tokens:this.lexer.inlineTokens(_,[])}}}}codespan(n){const e=this.rules.inline.code.exec(n);if(e){let s=e[2].replace(/\n/g," ");const i=/[^ ]/.test(s),r=/^ /.test(s)&&/ $/.test(s);return i&&r&&(s=s.substring(1,s.length-1)),s=q(s,!0),{type:"codespan",raw:e[0],text:s}}}br(n){const e=this.rules.inline.br.exec(n);if(e)return{type:"br",raw:e[0]}}del(n){const e=this.rules.inline.del.exec(n);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2],[])}}autolink(n,e){const s=this.rules.inline.autolink.exec(n);if(s){let i,r;return s[2]==="@"?(i=q(this.options.mangle?e(s[1]):s[1]),r="mailto:"+i):(i=q(s[1]),r=i),{type:"link",raw:s[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}}}url(n,e){let s;if(s=this.rules.inline.url.exec(n)){let i,r;if(s[2]==="@")i=q(this.options.mangle?e(s[0]):s[0]),r="mailto:"+i;else{let o;do o=s[0],s[0]=this.rules.inline._backpedal.exec(s[0])[0];while(o!==s[0]);i=q(s[0]),s[1]==="www."?r="http://"+i:r=i}return{type:"link",raw:s[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(n,e){const s=this.rules.inline.text.exec(n);if(s){let i;return this.lexer.state.inRawBlock?i=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(s[0]):q(s[0]):s[0]:i=q(this.options.smartypants?e(s[0]):s[0]),{type:"text",raw:s[0],text:i}}}}const S={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)( [^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:Ct,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};S._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;S._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;S.def=B(S.def).replace("label",S._label).replace("title",S._title).getRegex();S.bullet=/(?:[*+-]|\d{1,9}[.)])/;S.listItemStart=B(/^( *)(bull) */).replace("bull",S.bullet).getRegex();S.list=B(S.list).replace(/bull/g,S.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+S.def.source+")").getRegex();S._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";S._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;S.html=B(S.html,"i").replace("comment",S._comment).replace("tag",S._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();S.paragraph=B(S._paragraph).replace("hr",S.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",S._tag).getRegex();S.blockquote=B(S.blockquote).replace("paragraph",S.paragraph).getRegex();S.normal=re({},S);S.gfm=re({},S.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"});S.gfm.table=B(S.gfm.table).replace("hr",S.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",S._tag).getRegex();S.gfm.paragraph=B(S._paragraph).replace("hr",S.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",S.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",S._tag).getRegex();S.pedantic=re({},S.normal,{html:B(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",S._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Ct,paragraph:B(S.normal._paragraph).replace("hr",S.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",S.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const b={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:Ct,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:Ct,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};b._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~";b.punctuation=B(b.punctuation).replace(/punctuation/g,b._punctuation).getRegex();b.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g;b.escapedEmSt=/\\\*|\\_/g;b._comment=B(S._comment).replace("(?:-->|$)","-->").getRegex();b.emStrong.lDelim=B(b.emStrong.lDelim).replace(/punct/g,b._punctuation).getRegex();b.emStrong.rDelimAst=B(b.emStrong.rDelimAst,"g").replace(/punct/g,b._punctuation).getRegex();b.emStrong.rDelimUnd=B(b.emStrong.rDelimUnd,"g").replace(/punct/g,b._punctuation).getRegex();b._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g;b._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;b._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;b.autolink=B(b.autolink).replace("scheme",b._scheme).replace("email",b._email).getRegex();b._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;b.tag=B(b.tag).replace("comment",b._comment).replace("attribute",b._attribute).getRegex();b._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;b._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;b._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;b.link=B(b.link).replace("label",b._label).replace("href",b._href).replace("title",b._title).getRegex();b.reflink=B(b.reflink).replace("label",b._label).replace("ref",S._label).getRegex();b.nolink=B(b.nolink).replace("ref",S._label).getRegex();b.reflinkSearch=B(b.reflinkSearch,"g").replace("reflink",b.reflink).replace("nolink",b.nolink).getRegex();b.normal=re({},b);b.pedantic=re({},b.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:B(/^!?\[(label)\]\((.*?)\)/).replace("label",b._label).getRegex(),reflink:B(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",b._label).getRegex()});b.gfm=re({},b.normal,{escape:B(b.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/});b.gfm.url=B(b.gfm.url,"i").replace("email",b.gfm._extended_email).getRegex();b.breaks=re({},b.gfm,{br:B(b.br).replace("{2,}","*").getRegex(),text:B(b.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});function Vu(t){return t.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function As(t){let n="",e,s;const i=t.length;for(e=0;e<i;e++)s=t.charCodeAt(e),Math.random()>.5&&(s="x"+s.toString(16)),n+="&#"+s+";";return n}class pe{constructor(n){this.tokens=[],this.tokens.links=Object.create(null),this.options=n||Ge,this.options.tokenizer=this.options.tokenizer||new Sn,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const e={block:S.normal,inline:b.normal};this.options.pedantic?(e.block=S.pedantic,e.inline=b.pedantic):this.options.gfm&&(e.block=S.gfm,this.options.breaks?e.inline=b.breaks:e.inline=b.gfm),this.tokenizer.rules=e}static get rules(){return{block:S,inline:b}}static lex(n,e){return new pe(e).lex(n)}static lexInline(n,e){return new pe(e).inlineTokens(n)}lex(n){n=n.replace(/\r\n|\r/g,`
`).replace(/\t/g,"    "),this.blockTokens(n,this.tokens);let e;for(;e=this.inlineQueue.shift();)this.inlineTokens(e.src,e.tokens);return this.tokens}blockTokens(n,e=[]){this.options.pedantic&&(n=n.replace(/^ +$/gm,""));let s,i,r,o;for(;n;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>(s=a.call({lexer:this},n,e))?(n=n.substring(s.raw.length),e.push(s),!0):!1))){if(s=this.tokenizer.space(n)){n=n.substring(s.raw.length),s.raw.length===1&&e.length>0?e[e.length-1].raw+=`
`:e.push(s);continue}if(s=this.tokenizer.code(n)){n=n.substring(s.raw.length),i=e[e.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+s.raw,i.text+=`
`+s.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text):e.push(s);continue}if(s=this.tokenizer.fences(n)){n=n.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.heading(n)){n=n.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.hr(n)){n=n.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.blockquote(n)){n=n.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.list(n)){n=n.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.html(n)){n=n.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.def(n)){n=n.substring(s.raw.length),i=e[e.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+s.raw,i.text+=`
`+s.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text):this.tokens.links[s.tag]||(this.tokens.links[s.tag]={href:s.href,title:s.title});continue}if(s=this.tokenizer.table(n)){n=n.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.lheading(n)){n=n.substring(s.raw.length),e.push(s);continue}if(r=n,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const l=n.slice(1);let c;this.options.extensions.startBlock.forEach(function(d){c=d.call({lexer:this},l),typeof c=="number"&&c>=0&&(a=Math.min(a,c))}),a<1/0&&a>=0&&(r=n.substring(0,a+1))}if(this.state.top&&(s=this.tokenizer.paragraph(r))){i=e[e.length-1],o&&i.type==="paragraph"?(i.raw+=`
`+s.raw,i.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):e.push(s),o=r.length!==n.length,n=n.substring(s.raw.length);continue}if(s=this.tokenizer.text(n)){n=n.substring(s.raw.length),i=e[e.length-1],i&&i.type==="text"?(i.raw+=`
`+s.raw,i.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):e.push(s);continue}if(n){const a="Infinite loop on byte: "+n.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,e}inline(n,e){this.inlineQueue.push({src:n,tokens:e})}inlineTokens(n,e=[]){let s,i,r,o=n,a,l,c;if(this.tokens.links){const d=Object.keys(this.tokens.links);if(d.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(o))!=null;)d.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,a.index)+"["+ks("a",a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.blockSkip.exec(o))!=null;)o=o.slice(0,a.index)+"["+ks("a",a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(a=this.tokenizer.rules.inline.escapedEmSt.exec(o))!=null;)o=o.slice(0,a.index)+"++"+o.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;n;)if(l||(c=""),l=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(d=>(s=d.call({lexer:this},n,e))?(n=n.substring(s.raw.length),e.push(s),!0):!1))){if(s=this.tokenizer.escape(n)){n=n.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.tag(n)){n=n.substring(s.raw.length),i=e[e.length-1],i&&s.type==="text"&&i.type==="text"?(i.raw+=s.raw,i.text+=s.text):e.push(s);continue}if(s=this.tokenizer.link(n)){n=n.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.reflink(n,this.tokens.links)){n=n.substring(s.raw.length),i=e[e.length-1],i&&s.type==="text"&&i.type==="text"?(i.raw+=s.raw,i.text+=s.text):e.push(s);continue}if(s=this.tokenizer.emStrong(n,o,c)){n=n.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.codespan(n)){n=n.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.br(n)){n=n.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.del(n)){n=n.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.autolink(n,As)){n=n.substring(s.raw.length),e.push(s);continue}if(!this.state.inLink&&(s=this.tokenizer.url(n,As))){n=n.substring(s.raw.length),e.push(s);continue}if(r=n,this.options.extensions&&this.options.extensions.startInline){let d=1/0;const g=n.slice(1);let _;this.options.extensions.startInline.forEach(function(m){_=m.call({lexer:this},g),typeof _=="number"&&_>=0&&(d=Math.min(d,_))}),d<1/0&&d>=0&&(r=n.substring(0,d+1))}if(s=this.tokenizer.inlineText(r,Vu)){n=n.substring(s.raw.length),s.raw.slice(-1)!=="_"&&(c=s.raw.slice(-1)),l=!0,i=e[e.length-1],i&&i.type==="text"?(i.raw+=s.raw,i.text+=s.text):e.push(s);continue}if(n){const d="Infinite loop on byte: "+n.charCodeAt(0);if(this.options.silent){console.error(d);break}else throw new Error(d)}}return e}}class An{constructor(n){this.options=n||Ge}code(n,e,s){const i=(e||"").match(/\S*/)[0];if(this.options.highlight){const r=this.options.highlight(n,i);r!=null&&r!==n&&(s=!0,n=r)}return n=n.replace(/\n$/,"")+`
`,i?'<pre><code class="'+this.options.langPrefix+q(i,!0)+'">'+(s?n:q(n,!0))+`</code></pre>
`:"<pre><code>"+(s?n:q(n,!0))+`</code></pre>
`}blockquote(n){return`<blockquote>
`+n+`</blockquote>
`}html(n){return n}heading(n,e,s,i){return this.options.headerIds?"<h"+e+' id="'+this.options.headerPrefix+i.slug(s)+'">'+n+"</h"+e+`>
`:"<h"+e+">"+n+"</h"+e+`>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(n,e,s){const i=e?"ol":"ul",r=e&&s!==1?' start="'+s+'"':"";return"<"+i+r+`>
`+n+"</"+i+`>
`}listitem(n){return"<li>"+n+`</li>
`}checkbox(n){return"<input "+(n?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(n){return"<p>"+n+`</p>
`}table(n,e){return e&&(e="<tbody>"+e+"</tbody>"),`<table>
<thead>
`+n+`</thead>
`+e+`</table>
`}tablerow(n){return`<tr>
`+n+`</tr>
`}tablecell(n,e){const s=e.header?"th":"td";return(e.align?"<"+s+' align="'+e.align+'">':"<"+s+">")+n+"</"+s+`>
`}strong(n){return"<strong>"+n+"</strong>"}em(n){return"<em>"+n+"</em>"}codespan(n){return"<code>"+n+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(n){return"<del>"+n+"</del>"}link(n,e,s){if(n=vs(this.options.sanitize,this.options.baseUrl,n),n===null)return s;let i='<a href="'+q(n)+'"';return e&&(i+=' title="'+e+'"'),i+=">"+s+"</a>",i}image(n,e,s){if(n=vs(this.options.sanitize,this.options.baseUrl,n),n===null)return s;let i='<img src="'+n+'" alt="'+s+'"';return e&&(i+=' title="'+e+'"'),i+=this.options.xhtml?"/>":">",i}text(n){return n}}class Oi{strong(n){return n}em(n){return n}codespan(n){return n}del(n){return n}html(n){return n}text(n){return n}link(n,e,s){return""+s}image(n,e,s){return""+s}br(){return""}}class Ri{constructor(){this.seen={}}serialize(n){return n.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(n,e){let s=n,i=0;if(this.seen.hasOwnProperty(s)){i=this.seen[n];do i++,s=n+"-"+i;while(this.seen.hasOwnProperty(s))}return e||(this.seen[n]=i,this.seen[s]=0),s}slug(n,e={}){const s=this.serialize(n);return this.getNextSafeSlug(s,e.dryrun)}}class me{constructor(n){this.options=n||Ge,this.options.renderer=this.options.renderer||new An,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Oi,this.slugger=new Ri}static parse(n,e){return new me(e).parse(n)}static parseInline(n,e){return new me(e).parseInline(n)}parse(n,e=!0){let s="",i,r,o,a,l,c,d,g,_,m,E,P,C,T,N,y,Z,H,he;const Fe=n.length;for(i=0;i<Fe;i++){if(m=n[i],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[m.type]&&(he=this.options.extensions.renderers[m.type].call({parser:this},m),he!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(m.type))){s+=he||"";continue}switch(m.type){case"space":continue;case"hr":{s+=this.renderer.hr();continue}case"heading":{s+=this.renderer.heading(this.parseInline(m.tokens),m.depth,Ti(this.parseInline(m.tokens,this.textRenderer)),this.slugger);continue}case"code":{s+=this.renderer.code(m.text,m.lang,m.escaped);continue}case"table":{for(g="",d="",a=m.header.length,r=0;r<a;r++)d+=this.renderer.tablecell(this.parseInline(m.header[r].tokens),{header:!0,align:m.align[r]});for(g+=this.renderer.tablerow(d),_="",a=m.rows.length,r=0;r<a;r++){for(c=m.rows[r],d="",l=c.length,o=0;o<l;o++)d+=this.renderer.tablecell(this.parseInline(c[o].tokens),{header:!1,align:m.align[o]});_+=this.renderer.tablerow(d)}s+=this.renderer.table(g,_);continue}case"blockquote":{_=this.parse(m.tokens),s+=this.renderer.blockquote(_);continue}case"list":{for(E=m.ordered,P=m.start,C=m.loose,a=m.items.length,_="",r=0;r<a;r++)N=m.items[r],y=N.checked,Z=N.task,T="",N.task&&(H=this.renderer.checkbox(y),C?N.tokens.length>0&&N.tokens[0].type==="paragraph"?(N.tokens[0].text=H+" "+N.tokens[0].text,N.tokens[0].tokens&&N.tokens[0].tokens.length>0&&N.tokens[0].tokens[0].type==="text"&&(N.tokens[0].tokens[0].text=H+" "+N.tokens[0].tokens[0].text)):N.tokens.unshift({type:"text",text:H}):T+=H),T+=this.parse(N.tokens,C),_+=this.renderer.listitem(T,Z,y);s+=this.renderer.list(_,E,P);continue}case"html":{s+=this.renderer.html(m.text);continue}case"paragraph":{s+=this.renderer.paragraph(this.parseInline(m.tokens));continue}case"text":{for(_=m.tokens?this.parseInline(m.tokens):m.text;i+1<Fe&&n[i+1].type==="text";)m=n[++i],_+=`
`+(m.tokens?this.parseInline(m.tokens):m.text);s+=e?this.renderer.paragraph(_):_;continue}default:{const Te='Token with "'+m.type+'" type was not found.';if(this.options.silent){console.error(Te);return}else throw new Error(Te)}}}return s}parseInline(n,e){e=e||this.renderer;let s="",i,r,o;const a=n.length;for(i=0;i<a;i++){if(r=n[i],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[r.type]&&(o=this.options.extensions.renderers[r.type].call({parser:this},r),o!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(r.type))){s+=o||"";continue}switch(r.type){case"escape":{s+=e.text(r.text);break}case"html":{s+=e.html(r.text);break}case"link":{s+=e.link(r.href,r.title,this.parseInline(r.tokens,e));break}case"image":{s+=e.image(r.href,r.title,r.text);break}case"strong":{s+=e.strong(this.parseInline(r.tokens,e));break}case"em":{s+=e.em(this.parseInline(r.tokens,e));break}case"codespan":{s+=e.codespan(r.text);break}case"br":{s+=e.br();break}case"del":{s+=e.del(this.parseInline(r.tokens,e));break}case"text":{s+=e.text(r.text);break}default:{const l='Token with "'+r.type+'" type was not found.';if(this.options.silent){console.error(l);return}else throw new Error(l)}}}return s}}function A(t,n,e){if(typeof t>"u"||t===null)throw new Error("marked(): input parameter is undefined or null");if(typeof t!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");if(typeof n=="function"&&(e=n,n=null),n=re({},A.defaults,n||{}),Ei(n),e){const s=n.highlight;let i;try{i=pe.lex(t,n)}catch(a){return e(a)}const r=function(a){let l;if(!a)try{n.walkTokens&&A.walkTokens(i,n.walkTokens),l=me.parse(i,n)}catch(c){a=c}return n.highlight=s,a?e(a):e(null,l)};if(!s||s.length<3||(delete n.highlight,!i.length))return r();let o=0;A.walkTokens(i,function(a){a.type==="code"&&(o++,setTimeout(()=>{s(a.text,a.lang,function(l,c){if(l)return r(l);c!=null&&c!==a.text&&(a.text=c,a.escaped=!0),o--,o===0&&r()})},0))}),o===0&&r();return}try{const s=pe.lex(t,n);return n.walkTokens&&A.walkTokens(s,n.walkTokens),me.parse(s,n)}catch(s){if(s.message+=`
Please report this to https://github.com/markedjs/marked.`,n.silent)return"<p>An error occurred:</p><pre>"+q(s.message+"",!0)+"</pre>";throw s}}A.options=A.setOptions=function(t){return re(A.defaults,t),Tu(A.defaults),A};A.getDefaults=Ai;A.defaults=Ge;A.use=function(...t){const n=re({},...t),e=A.defaults.extensions||{renderers:{},childTokens:{}};let s;t.forEach(i=>{if(i.extensions&&(s=!0,i.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if(r.renderer){const o=e.renderers?e.renderers[r.name]:null;o?e.renderers[r.name]=function(...a){let l=r.renderer.apply(this,a);return l===!1&&(l=o.apply(this,a)),l}:e.renderers[r.name]=r.renderer}if(r.tokenizer){if(!r.level||r.level!=="block"&&r.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");e[r.level]?e[r.level].unshift(r.tokenizer):e[r.level]=[r.tokenizer],r.start&&(r.level==="block"?e.startBlock?e.startBlock.push(r.start):e.startBlock=[r.start]:r.level==="inline"&&(e.startInline?e.startInline.push(r.start):e.startInline=[r.start]))}r.childTokens&&(e.childTokens[r.name]=r.childTokens)})),i.renderer){const r=A.defaults.renderer||new An;for(const o in i.renderer){const a=r[o];r[o]=(...l)=>{let c=i.renderer[o].apply(r,l);return c===!1&&(c=a.apply(r,l)),c}}n.renderer=r}if(i.tokenizer){const r=A.defaults.tokenizer||new Sn;for(const o in i.tokenizer){const a=r[o];r[o]=(...l)=>{let c=i.tokenizer[o].apply(r,l);return c===!1&&(c=a.apply(r,l)),c}}n.tokenizer=r}if(i.walkTokens){const r=A.defaults.walkTokens;n.walkTokens=function(o){i.walkTokens.call(this,o),r&&r.call(this,o)}}s&&(n.extensions=e),A.setOptions(n)})};A.walkTokens=function(t,n){for(const e of t)switch(n.call(A,e),e.type){case"table":{for(const s of e.header)A.walkTokens(s.tokens,n);for(const s of e.rows)for(const i of s)A.walkTokens(i.tokens,n);break}case"list":{A.walkTokens(e.items,n);break}default:A.defaults.extensions&&A.defaults.extensions.childTokens&&A.defaults.extensions.childTokens[e.type]?A.defaults.extensions.childTokens[e.type].forEach(function(s){A.walkTokens(e[s],n)}):e.tokens&&A.walkTokens(e.tokens,n)}};A.parseInline=function(t,n){if(typeof t>"u"||t===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof t!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");n=re({},A.defaults,n||{}),Ei(n);try{const e=pe.lexInline(t,n);return n.walkTokens&&A.walkTokens(e,n.walkTokens),me.parseInline(e,n)}catch(e){if(e.message+=`
Please report this to https://github.com/markedjs/marked.`,n.silent)return"<p>An error occurred:</p><pre>"+q(e.message+"",!0)+"</pre>";throw e}};A.Parser=me;A.parser=me.parse;A.Renderer=An;A.TextRenderer=Oi;A.Lexer=pe;A.lexer=pe.lex;A.Tokenizer=Sn;A.Slugger=Ri;A.parse=A;A.options;A.setOptions;A.use;A.walkTokens;A.parseInline;me.parse;pe.lex;var Tn=typeof window<"u"?window:{};function Ju(){var t=Tn.DOMParser,n=!1;try{new t().parseFromString("","text/html")&&(n=!0)}catch{}return n}function Uu(){var t=function(){};return Wu()?t.prototype.parseFromString=function(n){var e=new window.ActiveXObject("htmlfile");return e.designMode="on",e.open(),e.write(n),e.close(),e}:t.prototype.parseFromString=function(n){var e=document.implementation.createHTMLDocument("");return e.open(),e.write(n),e.close(),e},t}function Wu(){var t=!1;try{document.implementation.createHTMLDocument("").open()}catch{Tn.ActiveXObject&&(t=!0)}return t}Ju()?Tn.DOMParser:Uu();/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */rt.arrowup,rt.arrowdown,rt.esc;rt.enter,rt.tab;function ed(){const[t,n]=Q.useState(!1),{job_positions:e}=Le(f=>f.job_positions),{departments:s}=Le(f=>f.departments),{accounts:i}=Le(f=>f.accounts),{users:r}=Le(f=>f.app),{user:o}=Le(f=>f.app),[a,l]=Q.useState(!1),[c,d]=Q.useState(!1),[g,_]=Q.useState(null),[m,E]=Q.useState(null),[P,C]=Q.useState({}),[T,N]=Q.useState(0),{applicantForm:y}=Le(f=>f.applicants),[Z,H]=Q.useState([]),[he,Fe]=Q.useState([]),[Te,Ft]=Q.useState([]),Ke=$i();Q.useEffect(()=>{t&&(wt.dispatch(Ui()),wt.dispatch(Wi()))},[t]),Q.useEffect(()=>{(async()=>{N(0)})(),E(!1)},[]),console.log("query",y);async function En(f){f.preventDefault(),E(!0);const k=new FormData;k.append("files",g),k.append("site",y.site??""),k.append("app_id",y.app_id??""),k.append("fname",y.fname??""),k.append("mname",y.mname??""),k.append("lname",y.lname??""),k.append("suffix",y.suffix??""),k.append("dob",y.dob??""),k.append("religion",y.religion??""),k.append("email",y.email??""),k.append("nationality",y.nationality??""),k.append("phone",y.phone??""),k.append("mmname",y.mmname??""),k.append("ffname",y.ffname??""),k.append("courset",y.courset??""),k.append("hired",y.hired??""),k.append("lot",y.lot??""),k.append("sss",y.sss??""),k.append("pagibig",y.pagibig??""),k.append("tin",y.tin??""),k.append("philh",y.philh??""),k.append("ename",y.ename??""),k.append("eaddress",y.eaddress??""),k.append("relationship",y.relationship??""),k.append("ephone",y.ephone??""),k.append("marital",y.marital??""),k.append("gender",y.gender??""),k.append("account",y.account??""),k.append("region",y.region??""),k.append("city",y.city??""),k.append("brgy",y.brgy??""),k.append("position",y.position??""),k.append("dept",y.dept??""),k.append("account",y.account??""),k.append("sup_id",y.sup_id??""),k.append("province",y.province??""),k.append("status",y.status??"");try{y.work_experience.forEach(te=>{k.append("work_experience[]",JSON.stringify({app_id:y.app_id,company:te.company,position:te.position,started_at:te.started_at,end_at:te.end_at}))}),await Ke(He({...y,submitted:zi().format("YYYY-MM-DD"),app_id:y.app_id})),await wt.dispatch(Ji(k)),await wt.dispatch(Vi()),On.success("Employee Saved successfully"),E(!1),n(!1)}catch{On.error("Employee failed to saved"),E(!1)}}const Ci=f=>{l(f.target.checked),d(!1)},Ni=f=>{d(f.target.checked),l(!1)};function O(f){if(f.target.name=="region"){const k=JSON.parse(f.target.value),te=ji.filter(Ze=>Ze.region_code===k.region_code);H(te),Ke(He({...y,[f.target.name]:k.name}))}else if(f.target.name=="province"){const k=JSON.parse(f.target.value),te=Fi.filter(Ze=>Ze.province_code===k.province_code);Fe(te),Ke(He({...y,[f.target.name]:k.name}))}else if(f.target.name=="city"){const k=JSON.parse(f.target.value),te=Li.filter(Ze=>Ze.city_code===k.city_code);Ft(te),Ke(He({...y,[f.target.name]:k.name}))}else Ke(He({...y,[f.target.name]:f.target.value}))}return console.log("ssssssssss",r),u.jsxs("div",{className:"my-2",children:[u.jsx("div",{class:"inline-flex rounded-md shadow-sm",role:"group",children:u.jsxs("button",{type:"button",onClick:()=>n(!0),class:"inline-flex items-center px-4 py-2 text-sm font-medium text-blue-500 bg-transparent border border-blue-500 rounded-e-lg hover:bg-blue-500 hover:text-white focus:z-10 focus:ring-2 focus:ring-blue-500 focus:bg-blue-500 focus:text-white      gap-1",children:[u.jsx(Ki,{className:"text-xl"}),"Add Existing Employee"]})}),u.jsx(Gi,{title:"Existing Employee",confirmLoading:m,open:t,onOk:En,onCancel:()=>n(!1),width:1200,okText:"Save",cancelText:"Cancel",children:u.jsxs("form",{className:"border rounded-lg p-3.5",onSubmit:En,children:[u.jsx("div",{children:u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:u.jsxs("select",{onChange:f=>O(f),name:"site",className:"border p-2 rounded w-full",children:[u.jsx("option",{disabled:!0,selected:!0,children:"Select Site"}),u.jsx("option",{value:"San Carlos",children:"San Carlos "}),u.jsx("option",{value:"Carcar",children:"Carcar "})]})})}),u.jsx("h1",{className:"text-xl font-semibold mb-3 text-gray-900  mt-6 text-center",children:"Personal Information"}),u.jsx("div",{className:"mb-4",children:u.jsx(z,{onChange:f=>O(f),value:y.app_id??"",required:!!(P!=null&&P.app_id),name:"app_id",label:"Employee No.",type:"text"})}),u.jsx("div",{className:"flex flex-1 gap-4",children:u.jsxs("div",{className:"flex flex-col w-full mb-4",children:[u.jsx("label",{htmlFor:"",children:u.jsx("b",{children:"Full Name"})}),u.jsxs("div",{className:"flex flex-1 gap-3",children:[u.jsx(z,{onChange:f=>O(f),value:y.fname??"",required:!!(P!=null&&P.fname),name:"fname",label:"First Name",type:"text"}),u.jsx(z,{onChange:f=>O(f),value:y.mname??"",name:"mname",label:"Middle Name",type:"text"}),u.jsx(z,{onChange:f=>O(f),value:y.lname??"",required:!!(P!=null&&P.lname),name:"lname",label:"Last Name",type:"text"}),u.jsxs("select",{onChange:f=>O(f),name:"suffix",className:"border p-2 rounded  w-1/5",children:[u.jsx("option",{disabled:!0,selected:!0,children:"Suffix"}),u.jsx("option",{children:" Sr."}),u.jsx("option",{children:" Jr."}),u.jsx("option",{children:" II"}),u.jsx("option",{children:" III"}),u.jsx("option",{children:" IV"}),u.jsx("option",{children:" V"})]})]})]})}),u.jsxs("div",{className:"flex flex-1 gap-4",children:[u.jsx("div",{className:"flex w-full",children:u.jsxs("div",{className:"flex flex-col gap-4 mb-4 w-full",children:[u.jsx("div",{className:"flex flex-col w-full",children:u.jsxs("select",{onChange:f=>O(f),name:"gender",className:"border p-2 rounded w-full",children:[u.jsx("option",{disabled:!0,selected:!0,children:"Gender"}),u.jsx("option",{children:" Male"}),u.jsx("option",{children:" Female"})]})}),u.jsx("div",{className:"flex flex-col w-full",children:u.jsx(z,{onChange:f=>O(f),value:y.dob??"",required:!!(P!=null&&P.dob),name:"dob",label:"Date of Birth",type:"date"})}),u.jsx("div",{className:" w-full",children:u.jsx(z,{onChange:f=>O(f),value:y.email??"",required:!!(P!=null&&P.email),name:"email",label:"Email",type:"email"})}),u.jsx("div",{className:"w-full",children:u.jsx(z,{onChange:f=>O(f),value:y.phone??"",required:!!(P!=null&&P.phone),name:"phone",label:"Phone Number",type:"number"})})]})}),u.jsx("div",{className:"flex w-full",children:u.jsxs("div",{className:"flex flex-col gap-4 mb-4 w-full",children:[u.jsx("div",{className:"flex flex-col w-full",children:u.jsxs("select",{onChange:f=>O(f),name:"marital",className:"border p-2 rounded w-full",children:[u.jsx("option",{disabled:!0,selected:!0,children:"Marital Status"}),u.jsx("option",{children:" Single"}),u.jsx("option",{children:" Married"}),u.jsx("option",{children:" Widowed"}),u.jsx("option",{children:" Divorced"})]})}),u.jsx("div",{className:"flex flex-col w-full",children:u.jsx(z,{onChange:f=>O(f),value:y.religion??"",required:!!(P!=null&&P.religion),name:"religion",label:"Religion",type:"text"})}),u.jsx("div",{className:"flex flex-col w-full",children:u.jsx(z,{onChange:f=>O(f),value:y.nationality??"",required:!!(P!=null&&P.nationality),name:"nationality",label:"Nationality",type:"text"})})]})})]}),u.jsx("div",{className:"mb-4",children:u.jsx(z,{onChange:f=>O(f),value:y.mmname??"",name:"mmname",label:"Mothers maiden name",type:"text"})}),u.jsx("div",{className:"mb-4",children:u.jsx(z,{onChange:f=>O(f),value:y.ffname??"",name:"ffname",label:"Fathers fullname",type:"text"})}),u.jsxs("div",{className:"flex flex-1 gap-4 mb-4",children:[u.jsx("div",{className:"w-full",children:u.jsxs("select",{onChange:f=>O(f),name:"educ",className:"border p-2 rounded w-full",children:[u.jsx("option",{disabled:!0,selected:!0,children:"Select Educational Attainment"}),u.jsx("option",{children:" Elementary Undergraduate"}),u.jsx("option",{children:" Elementary Graduate"}),u.jsx("option",{children:" Highschool/K-12 Undergraduate"}),u.jsx("option",{children:" Highschool/K-12 Graduate"}),u.jsx("option",{children:" College Level"}),u.jsx("option",{children:" College Graduate"}),u.jsx("option",{children:" Vocational Graduate"}),u.jsx("option",{children:" Masteral Degree"}),u.jsx("option",{children:" Doctoral Degree"})]})}),u.jsx("div",{className:"w-full",children:u.jsx(z,{onChange:f=>O(f),value:y.courset??"",name:"courset",label:"Course taken",type:"text"})})]}),u.jsx("div",{className:"flex flex-1 gap-4",children:u.jsx("div",{className:"flex flex-col w-full mb-4",children:u.jsxs("div",{className:"flex flex-1 gap-3",children:[u.jsxs("select",{onChange:f=>O(f),name:"position",className:"border p-2 rounded  w-full",children:[u.jsx("option",{disabled:!0,selected:!0,children:"Job Position"}),e.filter(f=>f.site==="San Carlos").map((f,k)=>u.jsx("option",{value:f.jPosition,children:f.jPosition},k))]}),u.jsxs("select",{onChange:f=>O(f),name:"dept",className:"border p-2 rounded  w-full",children:[u.jsx("option",{disabled:!0,selected:!0,children:"Department"}),s.filter(f=>f.site==="San Carlos").map((f,k)=>u.jsx("option",{value:f.dept,children:f.dept},k))]}),u.jsxs("select",{onChange:f=>O(f),name:"account",className:"border p-2 rounded  w-full",children:[u.jsx("option",{disabled:!0,selected:!0,children:"Account (If Applicable)"}),i.map((f,k)=>u.jsx("option",{value:f.acc,children:f.acc},k))]})]})})}),u.jsx("div",{className:"flex flex-1 gap-4",children:u.jsx("div",{className:"flex flex-col w-full mb-4",children:u.jsxs("div",{className:"flex flex-1 gap-3",children:[u.jsxs("select",{onChange:f=>O(f),name:"sup_id",value:y.sup_id,className:"border p-2 rounded  w-full",children:[u.jsx("option",{disabled:!0,selected:!0,children:"Supervisor"}),r.filter(f=>(!(o!=null&&o.site)||f.site===o.site||!f.site)&&["Manager","Account Manager","Supervisor","Team Leader","Director","CEO","HR Lead","Compliance Officer","Site Admin"].includes(f.position)).map(f=>u.jsxs("option",{value:f.id,children:[f.employee_fname," ",f.employee_lname]},f.id))]}),u.jsx(z,{onChange:f=>O(f),value:y.hired??"",name:"hired",label:"Hired Date",type:"date"}),u.jsxs("select",{onChange:f=>O(f),name:"status",className:"border p-2 rounded  w-full",required:!0,children:[u.jsx("option",{disabled:!0,selected:!0,children:"Status"}),u.jsx("option",{children:" Probationary"}),u.jsx("option",{children:" Regular"}),u.jsx("option",{children:" Contractual"}),u.jsx("option",{children:" Trainee Fallout"})]})]})})}),u.jsx("h1",{className:"text-xl font-semibold mb-3 text-gray-900  mt-9",children:"Address Information"}),u.jsxs("div",{className:"flex flex-1 gap-4 mb-4 w-full",children:[u.jsx("div",{className:"flex flex-col w-full",children:u.jsx(bt,{onChange:f=>O(f),options:Ii.map(f=>({label:f.region_name,value:JSON.stringify({name:f.region_name,region_code:f.region_code})})),required:"true",name:"region",label:"Region"})}),u.jsx("div",{className:"flex flex-col w-full",children:u.jsx(bt,{onChange:f=>O(f),options:Z.map(f=>({label:f.province_name,value:JSON.stringify({name:f.province_name,province_code:f.province_code})})),required:"true",name:"province",label:"Province"})}),u.jsx("div",{className:"flex flex-col w-full",children:u.jsx(bt,{onChange:f=>O(f),options:he.map(f=>({label:f.city_name,value:JSON.stringify({name:f.city_name,city_code:f.city_code})})),required:"true",name:"city",label:"City/Municipality"})})]}),u.jsxs("div",{className:"flex flex-1 gap-4 mb-4",children:[u.jsx("div",{className:"flex flex-col  w-1/2",children:u.jsx(bt,{onChange:f=>O(f),options:Te.map(f=>({label:f.brgy_name,value:f.brgy_name})),name:"brgy",label:"Barangay"})}),u.jsx("div",{className:"flex flex-col w-full",children:u.jsx(z,{onChange:f=>O(f),value:y.lot??"",name:"lot",label:"House/Lot No., Street, Purok/Sitio",type:"text"})})]}),u.jsx("h1",{className:"text-xl font-semibold mb-3 text-gray-900  mt-9",children:"Government ID Information"}),u.jsxs("div",{className:"flex flex-1 gap-4 mb-4",children:[u.jsx("div",{className:"w-full",children:u.jsx(z,{onChange:f=>O(f),value:y.sss??"",name:"sss",label:"SSS No.",type:"text"})}),u.jsx("div",{className:"w-full",children:u.jsx(z,{onChange:f=>O(f),value:y.pagibig??"",name:"pagibig",label:"Pag-IBIG No.",type:"text"})})]}),u.jsxs("div",{className:"flex flex-1 gap-4 mb-4",children:[u.jsx("div",{className:"w-full",children:u.jsx(z,{onChange:f=>O(f),value:y.tin??"",name:"tin",label:"Tin No.",type:"text"})}),u.jsx("div",{className:"w-full",children:u.jsx(z,{onChange:f=>O(f),value:y.philh??"",name:"philh",label:"Philhealth No.",type:"text"})})]}),u.jsxs("div",{className:"flex items-center mb-4",children:[u.jsx("input",{id:"with-working-experience-checkbox",type:"checkbox",value:"",checked:a,onChange:Ci,className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500  -gray-800 focus:ring-2  "}),u.jsx("label",{htmlFor:"with-working-experience-checkbox",className:"ms-2 text-md font-medium text-gray-900 ",children:u.jsx("b",{children:"with Working Experience"})})]}),u.jsxs("div",{className:"flex items-center mb-4",children:[u.jsx("input",{id:"first-time-jobseeker-checkbox",type:"checkbox",value:"",checked:c,onChange:Ni,className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500  -gray-800 focus:ring-2  ",disabled:a}),u.jsx("label",{htmlFor:"first-time-jobseeker-checkbox",className:"ms-2 text-md font-medium text-gray-900 ",children:u.jsx("b",{children:"First Time Jobseeker"})})]}),a&&u.jsx(qi,{}),u.jsx("h1",{className:"text-xl font-semibold mb-3 text-gray-900  mt-9",children:"Emergency Contact Information"}),u.jsx("div",{className:"mb-4 w-full",children:u.jsx(z,{onChange:f=>O(f),value:y.ename??"",name:"ename",label:"Emergency Contact Fullname",type:"text"})}),u.jsx("div",{className:"mb-4 w-full",children:u.jsx(z,{onChange:f=>O(f),value:y.eaddress??"",name:"eaddress",label:"Address",type:"text"})}),u.jsxs("div",{className:"flex flex-1 gap-4 mb-4",children:[u.jsx("div",{className:"w-full",children:u.jsx(z,{onChange:f=>O(f),value:y.relationship??"",name:"relationship",label:"Relationship",type:"text"})}),u.jsx("div",{className:"w-full",children:u.jsx(z,{onChange:f=>O(f),value:y.ephone??"",name:"ephone",label:"Contact No.",type:"number"})})]}),u.jsx(Di,{files:g,setFiles:_})]})})]})}export{ed as default};

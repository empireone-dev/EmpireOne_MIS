import{r as n,j as e,s as T,A as _}from"./store-9c50da1b.js";import{r as o}from"./index-cef407cd.js";import"./quill.snow-43814bd1.js";import"./purify.es-3fb4e735.js";import P from"./summernote-editor-5bbed232.js";import k from"./summernote-editor2-cbf5672f.js";import{c as O}from"./erf-record-thunk-4fbf4ad3.js";import{u as d}from"./app-d3aeba3e.js";import{h as R}from"./moment-a9aaa855.js";import{B as c}from"./button-b7787aae.js";import{m as B}from"./index-03f56006.js";import{A as I}from"./ArrowLeftOutlined-1453618a.js";import"./index-6e543dc0.js";import"./floating-ui.dom-dbc86a7b.js";import"./ja-blank-b4db7193.js";import"./UnorderedListOutlined-9364387b.js";import"./warning-8a11f3af.js";import"./defineProperty-83f36300.js";import"./toPropertyKey-d8419463.js";import"./typeof-7fd5df1e.js";import"./AntdIcon-936c2873.js";import"./shadow-371a5539.js";import"./OrderedListOutlined-c4501af6.js";import"./jd-blank-2a426789.js";import"./erf-record-service-b3950ea2.js";import"./erf-record-slice-c796a5be.js";import"./omit-644b1847.js";import"./genStyleUtils-00917081.js";import"./createSuper-f29e89b0.js";import"./Compact-901f24f2.js";import"./useSize-0508f9de.js";import"./index-6bfa84b1.js";import"./UnstableContext-61068371.js";import"./regeneratorRuntime-92fa3873.js";import"./asyncToGenerator-8c72b493.js";import"./CheckCircleFilled-0bc9ae28.js";import"./CloseCircleFilled-8016b598.js";import"./InfoCircleFilled-754e7ccb.js";import"./KeyCode-548a7212.js";import"./pickAttrs-120b0d1f.js";import"./useZIndex-485d43a8.js";import"./CloseOutlined-4e952bfd.js";function Se(){const[i,m]=n.useState(0);d(t=>t.job_positions);const{departments:f,erfCount:u}=d(t=>t.departments),{accounts:b}=d(t=>t.accounts),{user:s}=d(t=>t.app),[j,x]=n.useState(!1),[l,a]=n.useState({positionStatus:"New Position",site:(s==null?void 0:s.site)||"",user_id:(s==null?void 0:s.id)||"",department:"",account:""}),h=()=>{i===0?m(1):i===1&&m(2)},g=()=>{const t=new Date,r=t.getFullYear(),S=(t.getMonth()+1).toString().padStart(2,"0"),F=t.getDate().toString().padStart(2,"0"),A=`${S}${F}${r}`,E=(w+u).toString().padStart(2,"0");return`${A}${E}`};n.useEffect(()=>{a({...l,ref_id:g()})},[u]),n.useEffect(()=>{s!=null&&s.id&&a(t=>({...t,user_id:s.id,site:s.site||""}))},[s]);const p=()=>{i>0&&m(i-1)},v=()=>{window.history.back()};async function N(t){x(!0);try{await T.dispatch(O({submitted:R().format("YYYY-MM-DD"),user_id:s==null?void 0:s.id,site:(s==null?void 0:s.site)||"",...l})),B.success("Successfully Added!"),setTimeout(()=>{x(!1),_.visit("/employee/erf_record")},2e3)}catch{x(!1)}}const[w,y]=n.useState(0);n.useEffect(()=>{(async()=>{try{const r=await axios.get("/api/applications/today");y(r.data.count)}catch(r){console.error("Error fetching application count:",r)}})()},[]);const C=()=>{switch(i){case 0:return e.jsxs("form",{children:[e.jsx("h1",{className:"text-xl font-semibold mb-3 text-gray-900  mt-6 text-center",children:"EMPLOYEE REQUISITION FORM"}),e.jsx("h1",{className:"text-lg",children:e.jsx("b",{children:"Instructions/Hiring Information"})}),e.jsxs("p",{children:["  Use this form to initiate the recruitment process for all new and existing staff. Please complete all applicable sections of this form."," ",e.jsx("b",{children:"NO OFFERS should be made, either verbally or in written form, before all approvals on the form are completed"}),"."]}),e.jsx("input",{onChange:t=>a({...l,site:t.target.value}),value:(l==null?void 0:l.site)??"",type:"hidden",className:"border p-2 rounded w-full"}),e.jsxs("div",{className:"flex flex-1 w-full gap-4 mb-4 mt-4",children:[e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsx("label",{htmlFor:"",children:e.jsx("b",{children:"Reference No."})}),e.jsx("input",{type:"text",value:(l==null?void 0:l.ref_id)??"",className:"border p-2 rounded w-full",readOnly:!0})]}),e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsx("label",{htmlFor:"",children:e.jsx("b",{children:"Job Title"})}),e.jsx("input",{onChange:t=>a({...l,jobTitle:t.target.value}),type:"text",placeholder:"",className:"border p-2 rounded w-full"})]})]}),e.jsxs("div",{className:"flex flex-1 w-full gap-4 mb-4",children:[e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsx("label",{htmlFor:"",children:e.jsx("b",{children:"Job Type"})}),e.jsxs("select",{onChange:t=>a({...l,jobType:t.target.value}),className:"border p-2 rounded w-full",name:"",id:"",children:[e.jsx("option",{selected:!0,disabled:!0}),e.jsx("option",{value:"Full Time",children:"Full Time"}),e.jsx("option",{value:"Partime",children:"Partime"}),e.jsx("option",{value:"Temporary",children:"Temporary"}),e.jsx("option",{value:"Others",children:"Others"})]})]}),e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsx("label",{htmlFor:"",children:e.jsx("b",{children:"No. of Required Personnel"})}),e.jsx("input",{onChange:t=>a({...l,personnel:t.target.value}),type:"number",placeholder:"",className:"border p-2 rounded w-full"})]}),e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsx("label",{htmlFor:"",children:e.jsx("b",{children:"Target Onboarding Date"})}),e.jsx("input",{onChange:t=>a({...l,dateNeed:t.target.value}),type:"date",placeholder:"",className:"border p-2 rounded w-full"})]})]}),e.jsxs("div",{className:"flex flex-1 w-full gap-4 mb-4",children:[e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsx("label",{htmlFor:"",children:e.jsx("b",{children:"Position Status"})}),e.jsx("input",{onChange:t=>a({...l,positionStatus:t.target.value}),type:"text",value:l.positionStatus,className:"border p-2 rounded w-full",readOnly:!0})]}),e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsx("label",{htmlFor:"",children:e.jsx("b",{children:"Department"})}),e.jsxs("select",{onChange:t=>a({...l,department:t.target.value}),value:l.department||"",className:"border p-2 rounded w-full",name:"department",id:"department",children:[e.jsx("option",{value:"",disabled:!0,children:"Select a department"}),f.map((t,r)=>e.jsxs("option",{value:t.dept,children:[e.jsx("b",{children:t.dept})," (",t.site,")"]},r))]})]}),e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsx("label",{htmlFor:"",children:e.jsx("b",{children:"Account"})}),e.jsxs("select",{onChange:t=>a({...l,account:t.target.value}),value:l.account||"",className:"border p-2 rounded w-full",name:"account",id:"account",children:[e.jsx("option",{value:"",disabled:!0,children:"Select an account"}),b.map((t,r)=>e.jsx("option",{value:t.acc,children:t.acc},r))]})]}),e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsx("label",{htmlFor:"",children:e.jsx("b",{children:"Sourcing Method"})}),e.jsxs("select",{onChange:t=>a({...l,sourcingMethod:t.target.value}),className:"border p-2 rounded w-full",name:"",id:"",children:[e.jsx("option",{value:"",selected:!0,disabled:!0}),e.jsx("option",{value:"Internal Candidates",children:"Internal Candidates"}),e.jsx("option",{value:"External Candidates",children:"External Candidates"}),e.jsx("option",{value:"Both",children:"Both"})]})]})]}),e.jsxs("div",{className:"w-full flex flex-col mb-4",children:[e.jsx("label",{htmlFor:"",children:e.jsx("b",{children:"Reason or Justification of the Request"})}),e.jsx("textarea",{onChange:t=>a({...l,justification:t.target.value}),type:"text",placeholder:"",className:"border h-40 p-2 rounded w-full"})]}),e.jsxs("div",{className:"flex flex-1 w-full gap-4 mb-4",children:[e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsx("label",{htmlFor:"",children:e.jsx("b",{children:"Manager Submitting Request"})}),e.jsx("input",{onChange:t=>a({...l,submitted:t.target.value}),type:"text",value:`${(s==null?void 0:s.employee_fname)||""} ${(s==null?void 0:s.employee_lname)||""}`,className:"border p-2 rounded w-full",readOnly:!0})]}),e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsx("label",{htmlFor:"",children:e.jsx("b",{children:"Budget/Cost per head:"})}),e.jsx("input",{onChange:t=>a({...l,budgetCost:t.target.value}),type:"text",placeholder:"",className:"border p-2 rounded w-full"})]})]}),e.jsxs("div",{className:"mt-218 flex justify-between",children:[e.jsx(c,{onClick:p,disabled:i===0,className:"bg-blue-400 text-white w-32",children:"Prev"}),e.jsx(c,{onClick:h,className:"bg-blue-600 hover:bg-blue-700 text-white w-32",children:"Next"})]})]});case 1:return e.jsxs("form",{children:[e.jsx("div",{children:e.jsx(P,{form:l,setForm:a})}),e.jsxs("div",{className:"mt-20 flex justify-between",children:[e.jsx(c,{onClick:p,className:"bg-blue-600 hover:bg-blue-500 text-white w-32",children:"Prev"}),e.jsx(c,{onClick:h,className:"bg-blue-600 hover:bg-blue-700 text-white w-32",children:"Next"})]})]});case 2:return e.jsxs("form",{children:[e.jsx("div",{children:e.jsx(k,{form:l,setForm:a})}),e.jsxs("div",{className:"mt-20 flex justify-between",children:[e.jsx(c,{onClick:p,className:"bg-blue-600 hover:bg-blue-500 text-white w-32",children:"Prev"}),e.jsx(c,{loading:j,onClick:N,className:"bg-blue-600 hover:bg-blue-700 text-white w-32",children:"Submit"})]})]});default:return null}};return e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"pt-4 pb-2",children:e.jsx(c,{onClick:v,icon:e.jsx(I,{}),className:"mb-4 flex items-center gap-2 bg-gray-100 border-gray-300 hover:bg-gray-200",children:"Back"})}),e.jsxs("div",{className:"px-8 w-full pt-4 pb-12",children:[e.jsx("div",{className:"relative px-4",children:e.jsxs(o.Stepper,{activeStep:i,lineClassName:"bg-gray-300",activeLineClassName:"bg-blue-600",children:[e.jsx(o.Step,{className:"h-6 w-6 !bg-gray-300 relative",activeClassName:"ring-0 !bg-blue-600 text-white",completedClassName:"!bg-blue-600 text-white",children:e.jsx("div",{className:"absolute -bottom-10 left-1/2 transform -translate-x-1/2 w-max text-center",children:e.jsx(o.Typography,{variant:"small",className:"font-medium text-gray-600",children:"Employee Requisition"})})}),e.jsx(o.Step,{className:"h-6 w-6 !bg-gray-300 relative",activeClassName:"ring-0 !bg-blue-600 text-white",completedClassName:"!bg-blue-600 text-white",children:e.jsx("div",{className:"absolute -bottom-10 left-1/2 transform -translate-x-1/2 w-max text-center",children:e.jsx(o.Typography,{variant:"small",className:"font-medium text-gray-600",children:"Job Analysis"})})}),e.jsx(o.Step,{className:"h-6 w-6 !bg-gray-300 relative",activeClassName:"ring-0 !bg-blue-600 text-white",completedClassName:"!bg-blue-600 text-white",children:e.jsx("div",{className:"absolute -bottom-10 left-1/2 transform -translate-x-1/2 w-max text-center",children:e.jsx(o.Typography,{variant:"small",className:"font-medium text-gray-600",children:"Job Description"})})})]})}),e.jsx("div",{className:"mt-20",children:C()})]})]})}export{Se as default};

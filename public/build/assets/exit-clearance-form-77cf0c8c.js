import{f as $,a as v,r as E,e as S,j as e}from"./app-220fb3ff.js";import t from"./upload-signature-section-8c130cc3.js";import{g as R}from"./user-service-794e6d8c.js";import{g as I}from"./app-thunk-13641bd9.js";import{m as C}from"./index-79962a41.js";import{L as A}from"./UnstableContext-599b94dd.js";import"./index-fe794bf0.js";import"./presets-7bff4acd.js";import"./AntdIcon-9913e4f6.js";import"./useId-9b21714b.js";import"./useZIndex-9fdc5668.js";import"./genStyleUtils-f4e31a09.js";import"./useSize-254cadc9.js";import"./Compact-23f56252.js";import"./ContextIsolator-fb1a8dd9.js";import"./asyncToGenerator-f52ac301.js";import"./index-e6d312cb.js";import"./CheckCircleFilled-76ccd37b.js";import"./CloseCircleFilled-e576ba37.js";import"./InfoCircleFilled-22064e26.js";import"./button-2b4d01f0.js";import"./CloseOutlined-339e4863.js";import"./index-b41ffe93.js";import"./KeyCode-3e897ad6.js";import"./pickAttrs-cbfc5e6d.js";import"./fade-3a920e20.js";import"./useClosable-41dc2fed.js";import"./useLocale-3b055dc7.js";import"./PurePanel-f0402d95.js";import"./SignatureOutlined-cca5d1ae.js";function H(r){return async function(s,d){const a=await R();s($.actions.setUser(a))}}function xe(){var i,c,o,x,p,u,m,b,h,f,j,N,g;const{employee:r}=v(l=>l.employees),{user:s}=v(l=>l.app),[d,a]=E.useState();E.useEffect(()=>{S.dispatch(I()),console.log("waaaa",s),S.dispatch(H())},[s.id]);const F=(s==null?void 0:s.department)==="Human Resource",_=async()=>{var l,y,w;a(!0);try{const n={employee_name:`${((l=r==null?void 0:r.applicant)==null?void 0:l.fname)||""} ${((y=r==null?void 0:r.applicant)==null?void 0:y.mname)||""} ${((w=r==null?void 0:r.applicant)==null?void 0:w.lname)||""}`,departments:["Immediate Supervisor","Employee Dept. Head","HR/Admin","IT (Biometrics, Laptop)"],clearance_date:new Date().toISOString().split("T")[0]},D=await axios.post("/api/send-clearance-email",n);C.success("Exit Clearance sent successfully"),console.log(D.data.message),a(!1)}catch(n){console.error("Error sending email:",n),C.error("Failed to send Exit Clearance"),a(!1)}};return console.log("usersss",s),e.jsx("div",{className:"h-screen overflow-hidden ",children:e.jsx("div",{className:"bg-cover bg-[url('/images/SCemp.jpg')] transition-colors duration-300 h-full overflow-y-scroll",children:e.jsx("div",{className:"container mx-auto flex justify-center",children:e.jsxs("div",{className:"bg-white shadow-2xl shadow-black rounded-lg p-6 mt-12 w-full",children:[e.jsx("div",{className:"flex items-center justify-center p-3",children:e.jsx("img",{className:"w-60",src:"/images/newlogo.png",alt:"logo"})}),e.jsx("div",{className:"flex text-2xl items-center justify-center",children:e.jsx("h1",{children:e.jsx("b",{children:"EXIT CLEARANCE"})})}),e.jsxs("form",{className:"border rounded-lg p-3.5",children:[e.jsxs("div",{className:"flex flex-1 gap-4 border-4 border-gray-400 p-4 mb-3",children:[e.jsx("div",{className:"flex w-full",children:e.jsxs("div",{className:"flex flex-col gap-4 mb-4 w-full",children:[e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsx("label",{htmlFor:"",children:e.jsx("b",{children:"Full Name:"})}),e.jsx("input",{type:"text",value:`${((i=r==null?void 0:r.applicant)==null?void 0:i.fname)||""} ${((c=r==null?void 0:r.applicant)==null?void 0:c.mname)||""} ${((o=r==null?void 0:r.applicant)==null?void 0:o.lname)||""}`,className:"border p-2 rounded w-full"})]}),e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsx("label",{htmlFor:"",children:e.jsx("b",{children:"Account / Department:"})}),e.jsx("input",{type:"text",value:r!=null&&r.account?r==null?void 0:r.account:(x=r==null?void 0:r.dept)==null?void 0:x.dept,className:"border p-2 rounded w-full"})]}),e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsx("label",{htmlFor:"",children:e.jsx("b",{children:"Date Hired:"})}),e.jsx("input",{type:"date",value:(r==null?void 0:r.hired)||"",className:"border p-2 rounded w-full"})]}),e.jsxs("div",{className:" w-full",children:[e.jsx("label",{htmlFor:"",children:e.jsx("b",{children:"Immediate Supervisor:"})}),e.jsx("input",{type:"text",value:`${((p=r==null?void 0:r.user)==null?void 0:p.employee_fname)||""} ${((u=r==null?void 0:r.user)==null?void 0:u.employee_mname)||""} ${((m=r==null?void 0:r.user)==null?void 0:m.employee_lname)||""}`,className:"border p-2 rounded w-full "})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{htmlFor:"",children:e.jsx("b",{children:"Employment Status:"})}),e.jsx("input",{type:"text",value:(r==null?void 0:r.status)||"",className:"border p-2 rounded w-full "})]})]})}),e.jsx("div",{className:"flex w-full",children:e.jsxs("div",{className:"flex flex-col gap-4 mb-4 w-full",children:[e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsx("label",{htmlFor:"",children:e.jsx("b",{children:"ID Number:"})}),e.jsx("input",{type:"text",value:(r==null?void 0:r.app_id)||"",className:"border p-2 rounded w-full"})]}),e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsx("label",{htmlFor:"",children:e.jsx("b",{children:"Position Title:"})}),e.jsx("input",{type:"text",value:(r==null?void 0:r.position)||"",className:"border p-2 rounded w-full"})]}),e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsx("label",{htmlFor:"",children:e.jsx("b",{children:"Date Separated:"})}),e.jsx("input",{type:"date",value:((b=r==null?void 0:r.attrition)==null?void 0:b.separation)||"",className:"border p-2 rounded w-full"})]}),e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsx("label",{htmlFor:"",children:e.jsx("b",{children:"Department Manager:"})}),e.jsx("input",{type:"text",value:`${((f=(h=r==null?void 0:r.dept)==null?void 0:h.user)==null?void 0:f.employee_fname)||""} ${((N=(j=r==null?void 0:r.dept)==null?void 0:j.user)==null?void 0:N.employee_lname)||""}`,className:"border p-2 rounded w-full"})]}),e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsx("label",{htmlFor:"",children:e.jsx("b",{children:"Reason for Separation::"})}),e.jsx("input",{type:"text",value:((g=r==null?void 0:r.attrition)==null?void 0:g.reas)||"",className:"border p-2 rounded w-full"})]})]})})]}),e.jsx("p",{className:"mt-5 mb-1",children:"We are here to certify that the above employee is cleared with any accountability or financial obligation to the following:"}),e.jsx("div",{className:"flex flex-1 gap-4 border-4 border-gray-400 mb-3",children:e.jsxs("table",{class:"table table-bordered text-center w-full",children:[e.jsx("thead",{className:"border-b-2 border-gray-300 w-full",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-gray-300 py-2",children:"Department"}),e.jsx("th",{className:"border border-gray-300 py-2",children:"Signature"}),e.jsx("th",{className:"border border-gray-300 py-2",children:"Date Signed"}),e.jsx("th",{className:"border border-gray-300 py-2",children:"Payables"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{class:"border border-gray-300 py-2",children:[e.jsx("td",{className:"border border-gray-300 py-2",children:"Immediate Supervisor"}),e.jsxs("td",{className:"flex gap-2 border border-gray-300 py-2 p-4",children:[e.jsx("div",{className:"border p-2 rounded w-full",children:e.jsx("canvas",{id:"signatureCanvas",className:"w-24 h-8"})}),e.jsx(t,{})]}),e.jsx("td",{className:"border border-gray-300 py-2 p-4",children:e.jsx("input",{type:"date",className:"border p-2 rounded w-full"})}),e.jsx("td",{className:"border border-gray-300 py-2 p-4",children:e.jsx("input",{type:"text",className:"border p-2 rounded w-full"})})]}),e.jsxs("tr",{class:"border border-gray-300 py-2",children:[e.jsx("td",{className:"border border-gray-300 py-2",children:"Employee Dept. Head"}),e.jsxs("td",{className:"flex gap-2 border border-gray-300 py-2 p-4",children:[e.jsx("div",{className:"border p-2 rounded w-full",children:e.jsx("canvas",{id:"signatureCanvas",className:"w-24 h-8"})}),e.jsx(t,{})]}),e.jsx("td",{className:"border border-gray-300 py-2 p-4",children:e.jsx("input",{type:"date",className:"border p-2 rounded w-full"})}),e.jsx("td",{className:"border border-gray-300 py-2 p-4",children:e.jsx("input",{type:"text",className:"border p-2 rounded w-full"})})]}),e.jsxs("tr",{class:"border border-gray-300 py-2",children:[e.jsx("td",{className:"border border-gray-300 py-2",children:"HR/Admin"}),e.jsxs("td",{className:"flex gap-2 border border-gray-300 py-2 p-4",children:[e.jsx("div",{className:"border p-2 rounded w-full",children:e.jsx("canvas",{id:"signatureCanvas",className:"w-full h-8"})}),e.jsx(t,{})]}),e.jsx("td",{className:"border border-gray-300 py-2 p-4",children:e.jsx("input",{type:"date",className:"border p-2 rounded w-full"})}),e.jsx("td",{className:"border border-gray-300 py-2 p-4",children:e.jsx("input",{type:"text",className:"border p-2 rounded w-full"})})]}),e.jsxs("tr",{class:"border border-gray-300 py-2",children:[e.jsx("td",{className:"border border-gray-300 py-2",children:"IT (Biometrics, Laptop)"}),e.jsxs("td",{className:"flex gap-2 border border-gray-300 py-2 p-4",children:[e.jsx("div",{className:"border p-2 rounded w-full",children:e.jsx("canvas",{id:"signatureCanvas",className:"w-full h-8"})}),e.jsx(t,{})]}),e.jsx("td",{className:"border border-gray-300 py-2 p-4",children:e.jsx("input",{type:"date",className:"border p-2 rounded w-full"})}),e.jsx("td",{className:"border border-gray-300 py-2 p-4",children:e.jsx("input",{type:"text",className:"border p-2 rounded w-full"})})]})]})]})}),e.jsxs("div",{className:"flex flex-1 gap-4 mb-3 mt-8",children:[e.jsx("div",{className:"flex w-full",children:e.jsx("div",{className:"flex flex-col gap-4 mb-4 w-full",children:e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsx("label",{htmlFor:"",children:e.jsx("b",{children:"Exit Clearance Conducted By:"})}),e.jsx("input",{type:"text",value:`${(s==null?void 0:s.employee_fname)||""} ${(s==null?void 0:s.employee_lname)||""}`,className:"border p-2 rounded w-full"})]})})}),e.jsx("div",{className:"flex w-full",children:e.jsx("div",{className:"flex flex-col gap-4 mb-4 w-full",children:e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsx("label",{htmlFor:"",children:e.jsx("b",{children:"Conforme:"})}),e.jsx("input",{type:"text",value:"Human Resource",className:"border p-2 rounded w-full",readOnly:!0})]})})})]}),F?e.jsxs("div",{className:"flex gap-2 justify-end mt-2.5",children:[e.jsx("button",{onClick:_,type:"button",className:`px-4 py-2 rounded-md bg-blue-500 text-white hover:bg-blue-600 focus:outline-none transition-colors ${d?"cursor-not-allowed opacity-75":""}`,disabled:d,children:d?e.jsxs(e.Fragment,{children:[e.jsx(A,{spin:!0})," SENDING..."]}):e.jsx(e.Fragment,{children:"FORWARD CLEARANCE"})}),e.jsx("button",{type:"button",className:"px-4 py-2 rounded-md bg-blue-500 text-white hover:bg-blue-600 focus:outline-none transition-colors",children:"SUBMIT EXIT CLEARANCE"})]}):e.jsx("div",{className:"flex gap-2 justify-end mt-2.5",children:e.jsx("button",{type:"button",className:"px-4 py-2 rounded-md bg-blue-500 text-white hover:bg-blue-600 focus:outline-none transition-colors",children:"DONE"})})]})]})})})})}export{xe as default};

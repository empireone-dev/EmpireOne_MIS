var Ni=Object.defineProperty;var Mi=(t,n,e)=>n in t?Ni(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e;var h=(t,n,e)=>(Mi(t,typeof n!="symbol"?n+"":n,e),e);import{r as Y,a as Ze,u as Bi,e as wt,j as u,p as He}from"./app-7a0508cb.js";import{r as $i,p as Ii,c as ji,b as Fi}from"./barangay-94589600.js";import{h as Li}from"./moment-a9aaa855.js";import zi from"./upload-resume-section-fb9124f9.js";import Di from"./working-experience-section-12f20897.js";import{g as qi}from"./applicant-thunk-1d219c0c.js";import L from"./input2-fd70b2e7.js";import bt from"./select-5256e858.js";import{b as Vi}from"./employee-section-thunk-75c129b0.js";import{g as Ji}from"./job-title-thunk-48b87334.js";import{g as Ui}from"./department-thunk-a118d1f2.js";import{M as Wi}from"./index-0b2ca483.js";import{m as En}from"./index-a2174ddc.js";import{U as Gi}from"./UserAddOutlined-f47e82c1.js";import"./FilePdfOutlined-f190f44f.js";import"./presets-e3b9f238.js";import"./AntdIcon-39562514.js";import"./XMarkIcon-c9df1a03.js";import"./input-f30f0547.js";import"./CloseOutlined-a0bd125f.js";import"./PlusOutlined-7d276f02.js";import"./applicant-record-service-2250b5a2.js";import"./applicant-final-service-783dc1ef.js";import"./employee-service-8695f94e.js";import"./erf-record-service-d3096dbb.js";import"./genStyleUtils-f399dd36.js";import"./useZIndex-b7dafba5.js";import"./UnstableContext-68d1d01f.js";import"./asyncToGenerator-9ebc1360.js";import"./CheckCircleFilled-7842e08d.js";import"./CloseCircleFilled-15237ae2.js";import"./InfoCircleFilled-c47de411.js";import"./useId-4601ea8b.js";import"./button-fe328f65.js";import"./Compact-5b67f8f2.js";import"./useSize-044980e7.js";import"./index-da389748.js";import"./KeyCode-2a94283a.js";import"./pickAttrs-274e690b.js";import"./fade-44de9d49.js";import"./ContextIsolator-a6586eb3.js";import"./useClosable-5a14ba82.js";import"./useLocale-8c375cfa.js";import"./PurePanel-1c0168fb.js";var Ki=typeof global=="object"&&global&&global.Object===Object&&global;const As=Ki;var Zi=typeof self=="object"&&self&&self.Object===Object&&self,Hi=As||Zi||Function("return this")();const ce=Hi;var Yi=ce.Symbol;const le=Yi;var Ts=Object.prototype,Qi=Ts.hasOwnProperty,Xi=Ts.toString,Ye=le?le.toStringTag:void 0;function er(t){var n=Qi.call(t,Ye),e=t[Ye];try{t[Ye]=void 0;var s=!0}catch{}var i=Xi.call(t);return s&&(n?t[Ye]=e:delete t[Ye]),i}var tr=Object.prototype,nr=tr.toString;function sr(t){return nr.call(t)}var ir="[object Null]",rr="[object Undefined]",On=le?le.toStringTag:void 0;function Be(t){return t==null?t===void 0?rr:ir:On&&On in Object(t)?er(t):sr(t)}function ge(t){return t!=null&&typeof t=="object"}var or="[object Symbol]";function ln(t){return typeof t=="symbol"||ge(t)&&Be(t)==or}function ar(t,n){for(var e=-1,s=t==null?0:t.length,i=Array(s);++e<s;)i[e]=n(t[e],e,t);return i}var lr=Array.isArray;const Pe=lr;var cr=1/0,Rn=le?le.prototype:void 0,Cn=Rn?Rn.toString:void 0;function Es(t){if(typeof t=="string")return t;if(Pe(t))return ar(t,Es)+"";if(ln(t))return Cn?Cn.call(t):"";var n=t+"";return n=="0"&&1/t==-cr?"-0":n}function ke(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}var hr="[object AsyncFunction]",ur="[object Function]",fr="[object GeneratorFunction]",dr="[object Proxy]";function Os(t){if(!ke(t))return!1;var n=Be(t);return n==ur||n==fr||n==hr||n==dr}var gr=ce["__core-js_shared__"];const Ft=gr;var Nn=function(){var t=/[^.]+$/.exec(Ft&&Ft.keys&&Ft.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function pr(t){return!!Nn&&Nn in t}var mr=Function.prototype,_r=mr.toString;function $e(t){if(t!=null){try{return _r.call(t)}catch{}try{return t+""}catch{}}return""}var yr=/[\\^$.*+?()[\]{}|]/g,wr=/^\[object .+?Constructor\]$/,br=Function.prototype,xr=Object.prototype,vr=br.toString,Pr=xr.hasOwnProperty,kr=RegExp("^"+vr.call(Pr).replace(yr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Sr(t){if(!ke(t)||pr(t))return!1;var n=Os(t)?kr:wr;return n.test($e(t))}function Ar(t,n){return t==null?void 0:t[n]}function Ie(t,n){var e=Ar(t,n);return Sr(e)?e:void 0}var Tr=Ie(ce,"WeakMap");const Gt=Tr;var Mn=Object.create,Er=function(){function t(){}return function(n){if(!ke(n))return{};if(Mn)return Mn(n);t.prototype=n;var e=new t;return t.prototype=void 0,e}}();const Or=Er;function Rr(t,n){var e=-1,s=t.length;for(n||(n=Array(s));++e<s;)n[e]=t[e];return n}var Cr=function(){try{var t=Ie(Object,"defineProperty");return t({},"",{}),t}catch{}}();const Bn=Cr;function Nr(t,n){for(var e=-1,s=t==null?0:t.length;++e<s&&n(t[e],e,t)!==!1;);return t}var Mr=9007199254740991,Br=/^(?:0|[1-9]\d*)$/;function $r(t,n){var e=typeof t;return n=n??Mr,!!n&&(e=="number"||e!="symbol"&&Br.test(t))&&t>-1&&t%1==0&&t<n}function Rs(t,n,e){n=="__proto__"&&Bn?Bn(t,n,{configurable:!0,enumerable:!0,value:e,writable:!0}):t[n]=e}function cn(t,n){return t===n||t!==t&&n!==n}var Ir=Object.prototype,jr=Ir.hasOwnProperty;function Cs(t,n,e){var s=t[n];(!(jr.call(t,n)&&cn(s,e))||e===void 0&&!(n in t))&&Rs(t,n,e)}function Nt(t,n,e,s){var i=!e;e||(e={});for(var r=-1,o=n.length;++r<o;){var a=n[r],l=s?s(e[a],t[a],a,e,t):void 0;l===void 0&&(l=t[a]),i?Rs(e,a,l):Cs(e,a,l)}return e}var Fr=9007199254740991;function Ns(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Fr}function Ms(t){return t!=null&&Ns(t.length)&&!Os(t)}var Lr=Object.prototype;function hn(t){var n=t&&t.constructor,e=typeof n=="function"&&n.prototype||Lr;return t===e}function zr(t,n){for(var e=-1,s=Array(t);++e<t;)s[e]=n(e);return s}var Dr="[object Arguments]";function $n(t){return ge(t)&&Be(t)==Dr}var Bs=Object.prototype,qr=Bs.hasOwnProperty,Vr=Bs.propertyIsEnumerable,Jr=$n(function(){return arguments}())?$n:function(t){return ge(t)&&qr.call(t,"callee")&&!Vr.call(t,"callee")};const Ur=Jr;function Wr(){return!1}var $s=typeof exports=="object"&&exports&&!exports.nodeType&&exports,In=$s&&typeof module=="object"&&module&&!module.nodeType&&module,Gr=In&&In.exports===$s,jn=Gr?ce.Buffer:void 0,Kr=jn?jn.isBuffer:void 0,Zr=Kr||Wr;const Tt=Zr;var Hr="[object Arguments]",Yr="[object Array]",Qr="[object Boolean]",Xr="[object Date]",eo="[object Error]",to="[object Function]",no="[object Map]",so="[object Number]",io="[object Object]",ro="[object RegExp]",oo="[object Set]",ao="[object String]",lo="[object WeakMap]",co="[object ArrayBuffer]",ho="[object DataView]",uo="[object Float32Array]",fo="[object Float64Array]",go="[object Int8Array]",po="[object Int16Array]",mo="[object Int32Array]",_o="[object Uint8Array]",yo="[object Uint8ClampedArray]",wo="[object Uint16Array]",bo="[object Uint32Array]",I={};I[uo]=I[fo]=I[go]=I[po]=I[mo]=I[_o]=I[yo]=I[wo]=I[bo]=!0;I[Hr]=I[Yr]=I[co]=I[Qr]=I[ho]=I[Xr]=I[eo]=I[to]=I[no]=I[so]=I[io]=I[ro]=I[oo]=I[ao]=I[lo]=!1;function xo(t){return ge(t)&&Ns(t.length)&&!!I[Be(t)]}function un(t){return function(n){return t(n)}}var Is=typeof exports=="object"&&exports&&!exports.nodeType&&exports,nt=Is&&typeof module=="object"&&module&&!module.nodeType&&module,vo=nt&&nt.exports===Is,Lt=vo&&As.process,Po=function(){try{var t=nt&&nt.require&&nt.require("util").types;return t||Lt&&Lt.binding&&Lt.binding("util")}catch{}}();const Je=Po;var Fn=Je&&Je.isTypedArray,ko=Fn?un(Fn):xo;const js=ko;var So=Object.prototype,Ao=So.hasOwnProperty;function Fs(t,n){var e=Pe(t),s=!e&&Ur(t),i=!e&&!s&&Tt(t),r=!e&&!s&&!i&&js(t),o=e||s||i||r,a=o?zr(t.length,String):[],l=a.length;for(var c in t)(n||Ao.call(t,c))&&!(o&&(c=="length"||i&&(c=="offset"||c=="parent")||r&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||$r(c,l)))&&a.push(c);return a}function Ls(t,n){return function(e){return t(n(e))}}var To=Ls(Object.keys,Object);const Eo=To;var Oo=Object.prototype,Ro=Oo.hasOwnProperty;function Co(t){if(!hn(t))return Eo(t);var n=[];for(var e in Object(t))Ro.call(t,e)&&e!="constructor"&&n.push(e);return n}function fn(t){return Ms(t)?Fs(t):Co(t)}function No(t){var n=[];if(t!=null)for(var e in Object(t))n.push(e);return n}var Mo=Object.prototype,Bo=Mo.hasOwnProperty;function $o(t){if(!ke(t))return No(t);var n=hn(t),e=[];for(var s in t)s=="constructor"&&(n||!Bo.call(t,s))||e.push(s);return e}function dn(t){return Ms(t)?Fs(t,!0):$o(t)}var Io=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,jo=/^\w*$/;function Fo(t,n){if(Pe(t))return!1;var e=typeof t;return e=="number"||e=="symbol"||e=="boolean"||t==null||ln(t)?!0:jo.test(t)||!Io.test(t)||n!=null&&t in Object(n)}var Lo=Ie(Object,"create");const lt=Lo;function zo(){this.__data__=lt?lt(null):{},this.size=0}function Do(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}var qo="__lodash_hash_undefined__",Vo=Object.prototype,Jo=Vo.hasOwnProperty;function Uo(t){var n=this.__data__;if(lt){var e=n[t];return e===qo?void 0:e}return Jo.call(n,t)?n[t]:void 0}var Wo=Object.prototype,Go=Wo.hasOwnProperty;function Ko(t){var n=this.__data__;return lt?n[t]!==void 0:Go.call(n,t)}var Zo="__lodash_hash_undefined__";function Ho(t,n){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=lt&&n===void 0?Zo:n,this}function Ne(t){var n=-1,e=t==null?0:t.length;for(this.clear();++n<e;){var s=t[n];this.set(s[0],s[1])}}Ne.prototype.clear=zo;Ne.prototype.delete=Do;Ne.prototype.get=Uo;Ne.prototype.has=Ko;Ne.prototype.set=Ho;function Yo(){this.__data__=[],this.size=0}function Mt(t,n){for(var e=t.length;e--;)if(cn(t[e][0],n))return e;return-1}var Qo=Array.prototype,Xo=Qo.splice;function ea(t){var n=this.__data__,e=Mt(n,t);if(e<0)return!1;var s=n.length-1;return e==s?n.pop():Xo.call(n,e,1),--this.size,!0}function ta(t){var n=this.__data__,e=Mt(n,t);return e<0?void 0:n[e][1]}function na(t){return Mt(this.__data__,t)>-1}function sa(t,n){var e=this.__data__,s=Mt(e,t);return s<0?(++this.size,e.push([t,n])):e[s][1]=n,this}function _e(t){var n=-1,e=t==null?0:t.length;for(this.clear();++n<e;){var s=t[n];this.set(s[0],s[1])}}_e.prototype.clear=Yo;_e.prototype.delete=ea;_e.prototype.get=ta;_e.prototype.has=na;_e.prototype.set=sa;var ia=Ie(ce,"Map");const ct=ia;function ra(){this.size=0,this.__data__={hash:new Ne,map:new(ct||_e),string:new Ne}}function oa(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}function Bt(t,n){var e=t.__data__;return oa(n)?e[typeof n=="string"?"string":"hash"]:e.map}function aa(t){var n=Bt(this,t).delete(t);return this.size-=n?1:0,n}function la(t){return Bt(this,t).get(t)}function ca(t){return Bt(this,t).has(t)}function ha(t,n){var e=Bt(this,t),s=e.size;return e.set(t,n),this.size+=e.size==s?0:1,this}function ye(t){var n=-1,e=t==null?0:t.length;for(this.clear();++n<e;){var s=t[n];this.set(s[0],s[1])}}ye.prototype.clear=ra;ye.prototype.delete=aa;ye.prototype.get=la;ye.prototype.has=ca;ye.prototype.set=ha;var ua="Expected a function";function gn(t,n){if(typeof t!="function"||n!=null&&typeof n!="function")throw new TypeError(ua);var e=function(){var s=arguments,i=n?n.apply(this,s):s[0],r=e.cache;if(r.has(i))return r.get(i);var o=t.apply(this,s);return e.cache=r.set(i,o)||r,o};return e.cache=new(gn.Cache||ye),e}gn.Cache=ye;var fa=500;function da(t){var n=gn(t,function(s){return e.size===fa&&e.clear(),s}),e=n.cache;return n}var ga=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,pa=/\\(\\)?/g,ma=da(function(t){var n=[];return t.charCodeAt(0)===46&&n.push(""),t.replace(ga,function(e,s,i,r){n.push(i?r.replace(pa,"$1"):s||e)}),n});const _a=ma;function ya(t){return t==null?"":Es(t)}function zs(t,n){return Pe(t)?t:Fo(t,n)?[t]:_a(ya(t))}var wa=1/0;function Ds(t){if(typeof t=="string"||ln(t))return t;var n=t+"";return n=="0"&&1/t==-wa?"-0":n}function qs(t,n){n=zs(n,t);for(var e=0,s=n.length;t!=null&&e<s;)t=t[Ds(n[e++])];return e&&e==s?t:void 0}function ba(t,n,e){var s=t==null?void 0:qs(t,n);return s===void 0?e:s}function Vs(t,n){for(var e=-1,s=n.length,i=t.length;++e<s;)t[i+e]=n[e];return t}var xa=Ls(Object.getPrototypeOf,Object);const pn=xa;var va="[object Object]",Pa=Function.prototype,ka=Object.prototype,Js=Pa.toString,Sa=ka.hasOwnProperty,Aa=Js.call(Object);function Kt(t){if(!ge(t)||Be(t)!=va)return!1;var n=pn(t);if(n===null)return!0;var e=Sa.call(n,"constructor")&&n.constructor;return typeof e=="function"&&e instanceof e&&Js.call(e)==Aa}function Ta(t,n,e){var s=-1,i=t.length;n<0&&(n=-n>i?0:i+n),e=e>i?i:e,e<0&&(e+=i),i=n>e?0:e-n>>>0,n>>>=0;for(var r=Array(i);++s<i;)r[s]=t[s+n];return r}function Ea(){this.__data__=new _e,this.size=0}function Oa(t){var n=this.__data__,e=n.delete(t);return this.size=n.size,e}function Ra(t){return this.__data__.get(t)}function Ca(t){return this.__data__.has(t)}var Na=200;function Ma(t,n){var e=this.__data__;if(e instanceof _e){var s=e.__data__;if(!ct||s.length<Na-1)return s.push([t,n]),this.size=++e.size,this;e=this.__data__=new ye(s)}return e.set(t,n),this.size=e.size,this}function de(t){var n=this.__data__=new _e(t);this.size=n.size}de.prototype.clear=Ea;de.prototype.delete=Oa;de.prototype.get=Ra;de.prototype.has=Ca;de.prototype.set=Ma;function Ba(t,n){return t&&Nt(n,fn(n),t)}function $a(t,n){return t&&Nt(n,dn(n),t)}var Us=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ln=Us&&typeof module=="object"&&module&&!module.nodeType&&module,Ia=Ln&&Ln.exports===Us,zn=Ia?ce.Buffer:void 0,Dn=zn?zn.allocUnsafe:void 0;function ja(t,n){if(n)return t.slice();var e=t.length,s=Dn?Dn(e):new t.constructor(e);return t.copy(s),s}function Fa(t,n){for(var e=-1,s=t==null?0:t.length,i=0,r=[];++e<s;){var o=t[e];n(o,e,t)&&(r[i++]=o)}return r}function Ws(){return[]}var La=Object.prototype,za=La.propertyIsEnumerable,qn=Object.getOwnPropertySymbols,Da=qn?function(t){return t==null?[]:(t=Object(t),Fa(qn(t),function(n){return za.call(t,n)}))}:Ws;const mn=Da;function qa(t,n){return Nt(t,mn(t),n)}var Va=Object.getOwnPropertySymbols,Ja=Va?function(t){for(var n=[];t;)Vs(n,mn(t)),t=pn(t);return n}:Ws;const Gs=Ja;function Ua(t,n){return Nt(t,Gs(t),n)}function Ks(t,n,e){var s=n(t);return Pe(t)?s:Vs(s,e(t))}function Zt(t){return Ks(t,fn,mn)}function Wa(t){return Ks(t,dn,Gs)}var Ga=Ie(ce,"DataView");const Ht=Ga;var Ka=Ie(ce,"Promise");const Yt=Ka;var Za=Ie(ce,"Set");const Qt=Za;var Vn="[object Map]",Ha="[object Object]",Jn="[object Promise]",Un="[object Set]",Wn="[object WeakMap]",Gn="[object DataView]",Ya=$e(Ht),Qa=$e(ct),Xa=$e(Yt),el=$e(Qt),tl=$e(Gt),Ce=Be;(Ht&&Ce(new Ht(new ArrayBuffer(1)))!=Gn||ct&&Ce(new ct)!=Vn||Yt&&Ce(Yt.resolve())!=Jn||Qt&&Ce(new Qt)!=Un||Gt&&Ce(new Gt)!=Wn)&&(Ce=function(t){var n=Be(t),e=n==Ha?t.constructor:void 0,s=e?$e(e):"";if(s)switch(s){case Ya:return Gn;case Qa:return Vn;case Xa:return Jn;case el:return Un;case tl:return Wn}return n});const ht=Ce;var nl=Object.prototype,sl=nl.hasOwnProperty;function il(t){var n=t.length,e=new t.constructor(n);return n&&typeof t[0]=="string"&&sl.call(t,"index")&&(e.index=t.index,e.input=t.input),e}var rl=ce.Uint8Array;const Et=rl;function _n(t){var n=new t.constructor(t.byteLength);return new Et(n).set(new Et(t)),n}function ol(t,n){var e=n?_n(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.byteLength)}var al=/\w*$/;function ll(t){var n=new t.constructor(t.source,al.exec(t));return n.lastIndex=t.lastIndex,n}var Kn=le?le.prototype:void 0,Zn=Kn?Kn.valueOf:void 0;function cl(t){return Zn?Object(Zn.call(t)):{}}function hl(t,n){var e=n?_n(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)}var ul="[object Boolean]",fl="[object Date]",dl="[object Map]",gl="[object Number]",pl="[object RegExp]",ml="[object Set]",_l="[object String]",yl="[object Symbol]",wl="[object ArrayBuffer]",bl="[object DataView]",xl="[object Float32Array]",vl="[object Float64Array]",Pl="[object Int8Array]",kl="[object Int16Array]",Sl="[object Int32Array]",Al="[object Uint8Array]",Tl="[object Uint8ClampedArray]",El="[object Uint16Array]",Ol="[object Uint32Array]";function Rl(t,n,e){var s=t.constructor;switch(n){case wl:return _n(t);case ul:case fl:return new s(+t);case bl:return ol(t,e);case xl:case vl:case Pl:case kl:case Sl:case Al:case Tl:case El:case Ol:return hl(t,e);case dl:return new s;case gl:case _l:return new s(t);case pl:return ll(t);case ml:return new s;case yl:return cl(t)}}function Cl(t){return typeof t.constructor=="function"&&!hn(t)?Or(pn(t)):{}}var Nl="[object Map]";function Ml(t){return ge(t)&&ht(t)==Nl}var Hn=Je&&Je.isMap,Bl=Hn?un(Hn):Ml;const $l=Bl;var Il="[object Set]";function jl(t){return ge(t)&&ht(t)==Il}var Yn=Je&&Je.isSet,Fl=Yn?un(Yn):jl;const Ll=Fl;var zl=1,Dl=2,ql=4,Zs="[object Arguments]",Vl="[object Array]",Jl="[object Boolean]",Ul="[object Date]",Wl="[object Error]",Hs="[object Function]",Gl="[object GeneratorFunction]",Kl="[object Map]",Zl="[object Number]",Ys="[object Object]",Hl="[object RegExp]",Yl="[object Set]",Ql="[object String]",Xl="[object Symbol]",ec="[object WeakMap]",tc="[object ArrayBuffer]",nc="[object DataView]",sc="[object Float32Array]",ic="[object Float64Array]",rc="[object Int8Array]",oc="[object Int16Array]",ac="[object Int32Array]",lc="[object Uint8Array]",cc="[object Uint8ClampedArray]",hc="[object Uint16Array]",uc="[object Uint32Array]",B={};B[Zs]=B[Vl]=B[tc]=B[nc]=B[Jl]=B[Ul]=B[sc]=B[ic]=B[rc]=B[oc]=B[ac]=B[Kl]=B[Zl]=B[Ys]=B[Hl]=B[Yl]=B[Ql]=B[Xl]=B[lc]=B[cc]=B[hc]=B[uc]=!0;B[Wl]=B[Hs]=B[ec]=!1;function kt(t,n,e,s,i,r){var o,a=n&zl,l=n&Dl,c=n&ql;if(e&&(o=i?e(t,s,i,r):e(t)),o!==void 0)return o;if(!ke(t))return t;var f=Pe(t);if(f){if(o=il(t),!a)return Rr(t,o)}else{var p=ht(t),y=p==Hs||p==Gl;if(Tt(t))return ja(t,a);if(p==Ys||p==Zs||y&&!i){if(o=l||y?{}:Cl(t),!a)return l?Ua(t,$a(o,t)):qa(t,Ba(o,t))}else{if(!B[p])return i?t:{};o=Rl(t,p,a)}}r||(r=new de);var _=r.get(t);if(_)return _;r.set(t,o),Ll(t)?t.forEach(function(C){o.add(kt(C,n,e,C,t,r))}):$l(t)&&t.forEach(function(C,T){o.set(T,kt(C,n,e,T,t,r))});var P=c?l?Wa:Zt:l?dn:fn,R=f?void 0:P(t);return Nr(R||t,function(C,T){R&&(T=C,C=t[T]),Cs(o,T,kt(C,n,e,T,t,r))}),o}var fc=4;function dc(t){return kt(t,fc)}var gc="__lodash_hash_undefined__";function pc(t){return this.__data__.set(t,gc),this}function mc(t){return this.__data__.has(t)}function Ot(t){var n=-1,e=t==null?0:t.length;for(this.__data__=new ye;++n<e;)this.add(t[n])}Ot.prototype.add=Ot.prototype.push=pc;Ot.prototype.has=mc;function _c(t,n){for(var e=-1,s=t==null?0:t.length;++e<s;)if(n(t[e],e,t))return!0;return!1}function yc(t,n){return t.has(n)}var wc=1,bc=2;function Qs(t,n,e,s,i,r){var o=e&wc,a=t.length,l=n.length;if(a!=l&&!(o&&l>a))return!1;var c=r.get(t),f=r.get(n);if(c&&f)return c==n&&f==t;var p=-1,y=!0,_=e&bc?new Ot:void 0;for(r.set(t,n),r.set(n,t);++p<a;){var P=t[p],R=n[p];if(s)var C=o?s(R,P,p,n,t,r):s(P,R,p,t,n,r);if(C!==void 0){if(C)continue;y=!1;break}if(_){if(!_c(n,function(T,g){if(!yc(_,g)&&(P===T||i(P,T,e,s,r)))return _.push(g)})){y=!1;break}}else if(!(P===R||i(P,R,e,s,r))){y=!1;break}}return r.delete(t),r.delete(n),y}function xc(t){var n=-1,e=Array(t.size);return t.forEach(function(s,i){e[++n]=[i,s]}),e}function vc(t){var n=-1,e=Array(t.size);return t.forEach(function(s){e[++n]=s}),e}var Pc=1,kc=2,Sc="[object Boolean]",Ac="[object Date]",Tc="[object Error]",Ec="[object Map]",Oc="[object Number]",Rc="[object RegExp]",Cc="[object Set]",Nc="[object String]",Mc="[object Symbol]",Bc="[object ArrayBuffer]",$c="[object DataView]",Qn=le?le.prototype:void 0,zt=Qn?Qn.valueOf:void 0;function Ic(t,n,e,s,i,r,o){switch(e){case $c:if(t.byteLength!=n.byteLength||t.byteOffset!=n.byteOffset)return!1;t=t.buffer,n=n.buffer;case Bc:return!(t.byteLength!=n.byteLength||!r(new Et(t),new Et(n)));case Sc:case Ac:case Oc:return cn(+t,+n);case Tc:return t.name==n.name&&t.message==n.message;case Rc:case Nc:return t==n+"";case Ec:var a=xc;case Cc:var l=s&Pc;if(a||(a=vc),t.size!=n.size&&!l)return!1;var c=o.get(t);if(c)return c==n;s|=kc,o.set(t,n);var f=Qs(a(t),a(n),s,i,r,o);return o.delete(t),f;case Mc:if(zt)return zt.call(t)==zt.call(n)}return!1}var jc=1,Fc=Object.prototype,Lc=Fc.hasOwnProperty;function zc(t,n,e,s,i,r){var o=e&jc,a=Zt(t),l=a.length,c=Zt(n),f=c.length;if(l!=f&&!o)return!1;for(var p=l;p--;){var y=a[p];if(!(o?y in n:Lc.call(n,y)))return!1}var _=r.get(t),P=r.get(n);if(_&&P)return _==n&&P==t;var R=!0;r.set(t,n),r.set(n,t);for(var C=o;++p<l;){y=a[p];var T=t[y],g=n[y];if(s)var re=o?s(g,T,y,n,t,r):s(T,g,y,t,n,r);if(!(re===void 0?T===g||i(T,g,e,s,r):re)){R=!1;break}C||(C=y=="constructor")}if(R&&!C){var K=t.constructor,Z=n.constructor;K!=Z&&"constructor"in t&&"constructor"in n&&!(typeof K=="function"&&K instanceof K&&typeof Z=="function"&&Z instanceof Z)&&(R=!1)}return r.delete(t),r.delete(n),R}var Dc=1,Xn="[object Arguments]",es="[object Array]",xt="[object Object]",qc=Object.prototype,ts=qc.hasOwnProperty;function Vc(t,n,e,s,i,r){var o=Pe(t),a=Pe(n),l=o?es:ht(t),c=a?es:ht(n);l=l==Xn?xt:l,c=c==Xn?xt:c;var f=l==xt,p=c==xt,y=l==c;if(y&&Tt(t)){if(!Tt(n))return!1;o=!0,f=!1}if(y&&!f)return r||(r=new de),o||js(t)?Qs(t,n,e,s,i,r):Ic(t,n,l,e,s,i,r);if(!(e&Dc)){var _=f&&ts.call(t,"__wrapped__"),P=p&&ts.call(n,"__wrapped__");if(_||P){var R=_?t.value():t,C=P?n.value():n;return r||(r=new de),i(R,C,e,s,r)}}return y?(r||(r=new de),zc(t,n,e,s,i,r)):!1}function Xs(t,n,e,s,i){return t===n?!0:t==null||n==null||!ge(t)&&!ge(n)?t!==t&&n!==n:Vc(t,n,e,s,Xs,i)}function Jc(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}function Uc(t,n){return n.length<2?t:qs(t,Ta(n,0,-1))}function ns(t,n){return Xs(t,n)}function Wc(t,n){return n=zs(n,t),t=Uc(t,n),t==null||delete t[Ds(Jc(n))]}function Gc(t,n){return t==null?!0:Wc(t,n)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 *//**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let Xt;try{Xt={window,document}}catch{/* istanbul ignore next -- @preserve */Xt={window:{},document:{}}}var ut=Xt;/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function ss(){return function t(){t.called=!0}}class Ue{constructor(n,e){h(this,"source");h(this,"name");h(this,"path");h(this,"stop");h(this,"off");h(this,"return");this.source=n,this.name=e,this.path=[],this.stop=ss(),this.off=ss()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const U=new Array(256).fill("").map((t,n)=>("0"+n.toString(16)).slice(-2));function $t(){const[t,n,e,s]=crypto.getRandomValues(new Uint32Array(4));return"e"+U[t>>0&255]+U[t>>8&255]+U[t>>16&255]+U[t>>24&255]+U[n>>0&255]+U[n>>8&255]+U[n>>16&255]+U[n>>24&255]+U[e>>0&255]+U[e>>8&255]+U[e>>16&255]+U[e>>24&255]+U[s>>0&255]+U[s>>8&255]+U[s>>16&255]+U[s>>24&255]}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const en={get(t="normal"){return typeof t!="number"?this[t]||this.normal:t},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5};function Kc(t,n){const e=en.get(n.priority);for(let s=0;s<t.length;s++)if(en.get(t[s].priority)<e){t.splice(s,0,n);return}t.push(n)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Zc="https://ckeditor.com/docs/ckeditor5/latest/support/error-codes.html";class m extends Error{constructor(e,s,i){super(Hc(e,i));h(this,"context");h(this,"data");this.name="CKEditorError",this.context=s,this.data=i}is(e){return e==="CKEditorError"}static rethrowUnexpectedError(e,s){if(e.is&&e.is("CKEditorError"))throw e;const i=new m(e.message,s);throw i.stack=e.stack,i}}function tn(t,n){console.warn(...Yc(t,n))}function ei(t){return`
Read more: ${Zc}#error-${t}`}function Hc(t,n){const e=new WeakSet,i=n?` ${JSON.stringify(n,(o,a)=>{if(typeof a=="object"&&a!==null){if(e.has(a))return`[object ${a.constructor.name}]`;e.add(a)}return a})}`:"",r=ei(t);return t+i+r}function Yc(t,n){const e=ei(t);return n?[t,n,e]:[t,e]}const Qc="43.3.1";/* istanbul ignore next -- @preserve */if(globalThis.CKEDITOR_VERSION)throw new m("ckeditor-duplicated-modules",null);globalThis.CKEDITOR_VERSION=Qc;const De=Symbol("listeningTo"),nn=Symbol("emitterId"),ue=Symbol("delegations"),ti=q(Object);function q(t){if(!t)return ti;class n extends t{on(s,i,r){this.listenTo(this,s,i,r)}once(s,i,r){let o=!1;const a=(l,...c)=>{o||(o=!0,l.off(),i.call(this,l,...c))};this.listenTo(this,s,a,r)}off(s,i){this.stopListening(this,s,i)}listenTo(s,i,r,o={}){let a,l;this[De]||(this[De]={});const c=this[De];Dt(s)||ni(s);const f=Dt(s);(a=c[f])||(a=c[f]={emitter:s,callbacks:{}}),(l=a.callbacks[i])||(l=a.callbacks[i]=[]),l.push(r),nh(this,s,i,r,o)}stopListening(s,i,r){const o=this[De];let a=s&&Dt(s);const l=o&&a?o[a]:void 0,c=l&&i?l.callbacks[i]:void 0;if(!(!o||s&&!l||i&&!c))if(r)qt(this,s,i,r),c.indexOf(r)!==-1&&(c.length===1?delete l.callbacks[i]:qt(this,s,i,r));else if(c){for(;r=c.pop();)qt(this,s,i,r);delete l.callbacks[i]}else if(l){for(i in l.callbacks)this.stopListening(s,i);delete o[a]}else{for(a in o)this.stopListening(o[a].emitter);delete this[De]}}fire(s,...i){try{const r=s instanceof Ue?s:new Ue(this,s),o=r.name;let a=ii(this,o);if(r.path.push(this),a){const c=[r,...i];a=Array.from(a);for(let f=0;f<a.length&&(a[f].callback.apply(this,c),r.off.called&&(delete r.off.called,this._removeEventListener(o,a[f].callback)),!r.stop.called);f++);}const l=this[ue];if(l){const c=l.get(o),f=l.get("*");c&&is(c,r,i),f&&is(f,r,i)}return r.return}catch(r){/* istanbul ignore next -- @preserve */m.rethrowUnexpectedError(r,this)}}delegate(...s){return{to:(i,r)=>{this[ue]||(this[ue]=new Map),s.forEach(o=>{const a=this[ue].get(o);a?a.set(i,r):this[ue].set(o,new Map([[i,r]]))})}}}stopDelegating(s,i){if(this[ue])if(!s)this[ue].clear();else if(!i)this[ue].delete(s);else{const r=this[ue].get(s);r&&r.delete(i)}}_addEventListener(s,i,r){th(this,s);const o=sn(this,s),a=en.get(r.priority),l={callback:i,priority:a};for(const c of o)Kc(c,l)}_removeEventListener(s,i){const r=sn(this,s);for(const o of r)for(let a=0;a<o.length;a++)o[a].callback==i&&(o.splice(a,1),a--)}}return n}["on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(t=>{q[t]=ti.prototype[t]});function Xc(t,n){const e=t[De];return e&&e[n]?e[n].emitter:null}function ni(t,n){t[nn]||(t[nn]=n||$t())}function Dt(t){return t[nn]}function si(t){return t._events||Object.defineProperty(t,"_events",{value:{}}),t._events}function eh(){return{callbacks:[],childEvents:[]}}function th(t,n){const e=si(t);if(e[n])return;let s=n,i=null;const r=[];for(;s!==""&&!e[s];)e[s]=eh(),r.push(e[s]),i&&e[s].childEvents.push(i),i=s,s=s.substr(0,s.lastIndexOf(":"));if(s!==""){for(const o of r)o.callbacks=e[s].callbacks.slice();e[s].childEvents.push(i)}}function sn(t,n){const e=si(t)[n];if(!e)return[];let s=[e.callbacks];for(let i=0;i<e.childEvents.length;i++){const r=sn(t,e.childEvents[i]);s=s.concat(r)}return s}function ii(t,n){let e;return!t._events||!(e=t._events[n])||!e.callbacks.length?n.indexOf(":")>-1?ii(t,n.substr(0,n.lastIndexOf(":"))):null:e.callbacks}function is(t,n,e){for(let[s,i]of t){i?typeof i=="function"&&(i=i(n.name)):i=n.name;const r=new Ue(n.source,i);r.path=[...n.path],s.fire(r,...e)}}function nh(t,n,e,s,i){n._addEventListener?n._addEventListener(e,s,i):t._addEventListener.call(n,e,s,i)}function qt(t,n,e,s){n._removeEventListener?n._removeEventListener(e,s):t._removeEventListener.call(n,e,s)}const st=Symbol("observableProperties"),ft=Symbol("boundObservables"),it=Symbol("boundProperties"),Oe=Symbol("decoratedMethods"),rs=Symbol("decoratedOriginal"),ri=yn(q());function yn(t){var e,s,i,r;if(!t)return ri;class n extends t{constructor(){super(...arguments);h(this,e);h(this,s);h(this,i);h(this,r)}set(l,c){if(ke(l)){Object.keys(l).forEach(p=>{this.set(p,l[p])},this);return}Vt(this);const f=this[st];if(l in this&&!f.has(l))throw new m("observable-set-cannot-override",this);Object.defineProperty(this,l,{enumerable:!0,configurable:!0,get(){return f.get(l)},set(p){const y=f.get(l);let _=this.fire(`set:${l}`,l,p,y);_===void 0&&(_=p),(y!==_||!f.has(l))&&(f.set(l,_),this.fire(`change:${l}`,l,_,y))}}),this[l]=c}bind(...l){if(!l.length||!os(l))throw new m("observable-bind-wrong-properties",this);if(new Set(l).size!==l.length)throw new m("observable-bind-duplicate-properties",this);Vt(this);const c=this[it];l.forEach(p=>{if(c.has(p))throw new m("observable-bind-rebind",this)});const f=new Map;return l.forEach(p=>{const y={property:p,to:[]};c.set(p,y),f.set(p,y)}),{to:sh,toMany:ih,_observable:this,_bindProperties:l,_to:[],_bindings:f}}unbind(...l){if(!this[st])return;const c=this[it],f=this[ft];if(l.length){if(!os(l))throw new m("observable-unbind-wrong-properties",this);l.forEach(p=>{const y=c.get(p);y&&(y.to.forEach(([_,P])=>{const R=f.get(_),C=R[P];C.delete(y),C.size||delete R[P],Object.keys(R).length||(f.delete(_),this.stopListening(_,"change"))}),c.delete(p))})}else f.forEach((p,y)=>{this.stopListening(y,"change")}),f.clear(),c.clear()}decorate(l){Vt(this);const c=this[l];if(!c)throw new m("observablemixin-cannot-decorate-undefined",this,{object:this,methodName:l});this.on(l,(f,p)=>{f.return=c.apply(this,p)}),this[l]=function(...f){return this.fire(l,f)},this[l][rs]=c,this[Oe]||(this[Oe]=[]),this[Oe].push(l)}stopListening(l,c,f){if(!l&&this[Oe]){for(const p of this[Oe])this[p]=this[p][rs];delete this[Oe]}super.stopListening(l,c,f)}}return e=st,s=Oe,i=it,r=ft,n}["set","bind","unbind","decorate","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(t=>{yn[t]=ri.prototype[t]});function Vt(t){t[st]||(Object.defineProperty(t,st,{value:new Map}),Object.defineProperty(t,ft,{value:new Map}),Object.defineProperty(t,it,{value:new Map}))}function sh(...t){const n=oh(...t),e=Array.from(this._bindings.keys()),s=e.length;if(!n.callback&&n.to.length>1)throw new m("observable-bind-to-no-callback",this);if(s>1&&n.callback)throw new m("observable-bind-to-extra-callback",this);n.to.forEach(i=>{if(i.properties.length&&i.properties.length!==s)throw new m("observable-bind-to-properties-length",this);i.properties.length||(i.properties=this._bindProperties)}),this._to=n.to,n.callback&&(this._bindings.get(e[0]).callback=n.callback),ch(this._observable,this._to),lh(this),this._bindProperties.forEach(i=>{oi(this._observable,i)})}function ih(t,n,e){if(this._bindings.size>1)throw new m("observable-bind-to-many-not-one-binding",this);this.to(...rh(t,n),e)}function rh(t,n){const e=t.map(s=>[s,n]);return Array.prototype.concat.apply([],e)}function os(t){return t.every(n=>typeof n=="string")}function oh(...t){if(!t.length)throw new m("observable-bind-to-parse-error",null);const n={to:[]};let e;return typeof t[t.length-1]=="function"&&(n.callback=t.pop()),t.forEach(s=>{if(typeof s=="string")e.properties.push(s);else if(typeof s=="object")e={observable:s,properties:[]},n.to.push(e);else throw new m("observable-bind-to-parse-error",null)}),n}function ah(t,n,e,s){const i=t[ft],r=i.get(e),o=r||{};o[s]||(o[s]=new Set),o[s].add(n),r||i.set(e,o)}function lh(t){let n;t._bindings.forEach((e,s)=>{t._to.forEach(i=>{n=i.properties[e.callback?0:t._bindProperties.indexOf(s)],e.to.push([i.observable,n]),ah(t._observable,e,i.observable,n)})})}function oi(t,n){const s=t[it].get(n);let i;s.callback?i=s.callback.apply(t,s.to.map(r=>r[0][r[1]])):(i=s.to[0],i=i[0][i[1]]),Object.prototype.hasOwnProperty.call(t,n)?t[n]=i:t.set(n,i)}function ch(t,n){n.forEach(e=>{const s=t[ft];let i;s.get(e.observable)||t.listenTo(e.observable,"change",(r,o)=>{i=s.get(e.observable)[o],i&&i.forEach(a=>{oi(t,a.property)})})})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function as(t){let n=0;for(const e of t)n++;return n}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function G(t,n){const e=Math.min(t.length,n.length);for(let s=0;s<e;s++)if(t[s]!=n[s])return s;return t.length==n.length?"same":t.length<n.length?"prefix":"extension"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function we(t){return!!(t&&t[Symbol.iterator])}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function ls(t){if(t){if(t.defaultView)return t instanceof t.defaultView.Document;if(t.ownerDocument&&t.ownerDocument.defaultView)return t instanceof t.ownerDocument.defaultView.Node}return!1}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function cs(t){const n=Object.prototype.toString.apply(t);return n=="[object Window]"||n=="[object global]"}const ai=li(q());function li(t){if(!t)return ai;class n extends t{listenTo(s,i,r,o={}){if(ls(s)||cs(s)){const a={capture:!!o.useCapture,passive:!!o.usePassive},l=this._getProxyEmitter(s,a)||new hh(s,a);this.listenTo(l,i,r,o)}else super.listenTo(s,i,r,o)}stopListening(s,i,r){if(ls(s)||cs(s)){const o=this._getAllProxyEmitters(s);for(const a of o)this.stopListening(a,i,r)}else super.stopListening(s,i,r)}_getProxyEmitter(s,i){return Xc(this,ci(s,i))}_getAllProxyEmitters(s){return[{capture:!1,passive:!1},{capture:!1,passive:!0},{capture:!0,passive:!1},{capture:!0,passive:!0}].map(i=>this._getProxyEmitter(s,i)).filter(i=>!!i)}}return n}["_getProxyEmitter","_getAllProxyEmitters","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(t=>{li[t]=ai.prototype[t]});class hh extends q(){constructor(e,s){super();h(this,"_domNode");h(this,"_options");h(this,"_domListeners");ni(this,ci(e,s)),this._domNode=e,this._options=s}attach(e){if(this._domListeners&&this._domListeners[e])return;const s=this._createDomListener(e);this._domNode.addEventListener(e,s,this._options),this._domListeners||(this._domListeners={}),this._domListeners[e]=s}detach(e){let s;this._domListeners[e]&&(!(s=this._events[e])||!s.callbacks.length)&&this._domListeners[e].removeListener()}_addEventListener(e,s,i){this.attach(e),q().prototype._addEventListener.call(this,e,s,i)}_removeEventListener(e,s){q().prototype._removeEventListener.call(this,e,s),this.detach(e)}_createDomListener(e){const s=i=>{this.fire(e,i)};return s.removeListener=()=>{this._domNode.removeEventListener(e,s,this._options),delete this._domListeners[e]},s}}function uh(t){return t["data-ck-expando"]||(t["data-ck-expando"]=$t())}function ci(t,n){let e=uh(t);for(const s of Object.keys(n).sort())n[s]&&(e+="-"+s);return e}const rt=fh();function fh(){const t={pageup:33,pagedown:34,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,backspace:8,delete:46,enter:13,space:32,esc:27,tab:9,ctrl:1114112,shift:2228224,alt:4456448,cmd:8912896};for(let n=65;n<=90;n++){const e=String.fromCharCode(n);t[e.toLowerCase()]=n}for(let n=48;n<=57;n++)t[n-48]=n;for(let n=112;n<=123;n++)t["f"+(n-111)]=n;return Object.assign(t,{"'":222,",":108,"-":109,".":110,"/":111,";":186,"=":187,"[":219,"\\":220,"]":221,"`":223}),t}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function St(t){return Array.isArray(t)?t:[t]}/* istanbul ignore else -- @preserve */ut.window.CKEDITOR_TRANSLATIONS||(ut.window.CKEDITOR_TRANSLATIONS={});class dh extends q(){constructor(e={},s={}){super();h(this,"_items");h(this,"_itemMap");h(this,"_idProperty");h(this,"_bindToCollection");h(this,"_bindToExternalToInternalMap");h(this,"_bindToInternalToExternalMap");h(this,"_skippedIndexesFromExternal");const i=we(e);if(i||(s=e),this._items=[],this._itemMap=new Map,this._idProperty=s.idProperty||"id",this._bindToExternalToInternalMap=new WeakMap,this._bindToInternalToExternalMap=new WeakMap,this._skippedIndexesFromExternal=[],i)for(const r of e)this._items.push(r),this._itemMap.set(this._getItemIdBeforeAdding(r),r)}get length(){return this._items.length}get first(){return this._items[0]||null}get last(){return this._items[this.length-1]||null}add(e,s){return this.addMany([e],s)}addMany(e,s){if(s===void 0)s=this._items.length;else if(s>this._items.length||s<0)throw new m("collection-add-item-invalid-index",this);let i=0;for(const r of e){const o=this._getItemIdBeforeAdding(r),a=s+i;this._items.splice(a,0,r),this._itemMap.set(o,r),this.fire("add",r,a),i++}return this.fire("change",{added:e,removed:[],index:s}),this}get(e){let s;if(typeof e=="string")s=this._itemMap.get(e);else if(typeof e=="number")s=this._items[e];else throw new m("collection-get-invalid-arg",this);return s||null}has(e){if(typeof e=="string")return this._itemMap.has(e);{const s=this._idProperty,i=e[s];return i&&this._itemMap.has(i)}}getIndex(e){let s;return typeof e=="string"?s=this._itemMap.get(e):s=e,s?this._items.indexOf(s):-1}remove(e){const[s,i]=this._remove(e);return this.fire("change",{added:[],removed:[s],index:i}),s}map(e,s){return this._items.map(e,s)}forEach(e,s){this._items.forEach(e,s)}find(e,s){return this._items.find(e,s)}filter(e,s){return this._items.filter(e,s)}clear(){this._bindToCollection&&(this.stopListening(this._bindToCollection),this._bindToCollection=null);const e=Array.from(this._items);for(;this.length;)this._remove(0);this.fire("change",{added:[],removed:e,index:0})}bindTo(e){if(this._bindToCollection)throw new m("collection-bind-to-rebind",this);return this._bindToCollection=e,{as:s=>{this._setUpBindToBinding(i=>new s(i))},using:s=>{typeof s=="function"?this._setUpBindToBinding(s):this._setUpBindToBinding(i=>i[s])}}}_setUpBindToBinding(e){const s=this._bindToCollection,i=(r,o,a)=>{const l=s._bindToCollection==this,c=s._bindToInternalToExternalMap.get(o);if(l&&c)this._bindToExternalToInternalMap.set(o,c),this._bindToInternalToExternalMap.set(c,o);else{const f=e(o);if(!f){this._skippedIndexesFromExternal.push(a);return}let p=a;for(const y of this._skippedIndexesFromExternal)a>y&&p--;for(const y of s._skippedIndexesFromExternal)p>=y&&p++;this._bindToExternalToInternalMap.set(o,f),this._bindToInternalToExternalMap.set(f,o),this.add(f,p);for(let y=0;y<s._skippedIndexesFromExternal.length;y++)p<=s._skippedIndexesFromExternal[y]&&s._skippedIndexesFromExternal[y]++}};for(const r of s)i(null,r,s.getIndex(r));this.listenTo(s,"add",i),this.listenTo(s,"remove",(r,o,a)=>{const l=this._bindToExternalToInternalMap.get(o);l&&this.remove(l),this._skippedIndexesFromExternal=this._skippedIndexesFromExternal.reduce((c,f)=>(a<f&&c.push(f-1),a>f&&c.push(f),c),[])})}_getItemIdBeforeAdding(e){const s=this._idProperty;let i;if(s in e){if(i=e[s],typeof i!="string")throw new m("collection-add-invalid-id",this);if(this.get(i))throw new m("collection-add-item-already-exists",this)}else e[s]=i=$t();return i}_remove(e){let s,i,r,o=!1;const a=this._idProperty;if(typeof e=="string"?(i=e,r=this._itemMap.get(i),o=!r,r&&(s=this._items.indexOf(r))):typeof e=="number"?(s=e,r=this._items[s],o=!r,r&&(i=r[a])):(r=e,i=r[a],s=this._items.indexOf(r),o=s==-1||!this._itemMap.get(i)),o)throw new m("collection-remove-404",this);this._items.splice(s,1),this._itemMap.delete(i);const l=this._bindToInternalToExternalMap.get(r);return this._bindToInternalToExternalMap.delete(r),this._bindToExternalToInternalMap.delete(l),this.fire("remove",r,s),[r,s]}[Symbol.iterator](){return this._items[Symbol.iterator]()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function gh(t){const n=new Map;for(const e in t)n.set(e,t[e]);return n}function dt(t){return we(t)?new Map(t):gh(t)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const ph=1e4;function hs(t,n,e,s){if(Math.max(n.length,t.length)>ph)return t.slice(0,e).concat(n).concat(t.slice(e+s,t.length));{const i=Array.from(t);return i.splice(e,s,...n),i}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 *//**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let je=class{is(){throw new Error("is() method is abstract")}},Fe=class extends q(je){constructor(e){super();h(this,"document");h(this,"parent");this.document=e,this.parent=null}get index(){let e;if(!this.parent)return null;if((e=this.parent.getChildIndex(this))==-1)throw new m("view-node-not-found-in-parent",this);return e}get nextSibling(){const e=this.index;return e!==null&&this.parent.getChild(e+1)||null}get previousSibling(){const e=this.index;return e!==null&&this.parent.getChild(e-1)||null}get root(){let e=this;for(;e.parent;)e=e.parent;return e}isAttached(){return this.root.is("rootElement")}getPath(){const e=[];let s=this;for(;s.parent;)e.unshift(s.index),s=s.parent;return e}getAncestors(e={}){const s=[];let i=e.includeSelf?this:this.parent;for(;i;)s[e.parentFirst?"push":"unshift"](i),i=i.parent;return s}getCommonAncestor(e,s={}){const i=this.getAncestors(s),r=e.getAncestors(s);let o=0;for(;i[o]==r[o]&&i[o];)o++;return o===0?null:i[o-1]}isBefore(e){if(this==e||this.root!==e.root)return!1;const s=this.getPath(),i=e.getPath(),r=G(s,i);switch(r){case"prefix":return!0;case"extension":return!1;default:return s[r]<i[r]}}isAfter(e){return this==e||this.root!==e.root?!1:!this.isBefore(e)}_remove(){this.parent._removeChildren(this.index)}_fireChange(e,s){this.fire(`change:${e}`,s),this.parent&&this.parent._fireChange(e,s)}toJSON(){const e=dc(this);return delete e.parent,e}};Fe.prototype.is=function(t){return t==="node"||t==="view:node"};let te=class rn extends Fe{constructor(e,s){super(e);h(this,"_textData");this._textData=s}get data(){return this._textData}get _data(){return this.data}set _data(e){this._fireChange("text",this),this._textData=e}isSimilar(e){return e instanceof rn?this===e||this.data===e.data:!1}_clone(){return new rn(this.document,this.data)}};te.prototype.is=function(t){return t==="$text"||t==="view:$text"||t==="text"||t==="view:text"||t==="node"||t==="view:node"};let ae=class extends je{constructor(e,s,i){super();h(this,"textNode");h(this,"data");h(this,"offsetInText");if(this.textNode=e,s<0||s>e.data.length)throw new m("view-textproxy-wrong-offsetintext",this);if(i<0||s+i>e.data.length)throw new m("view-textproxy-wrong-length",this);this.data=e.data.substring(s,s+i),this.offsetInText=s}get offsetSize(){return this.data.length}get isPartial(){return this.data.length!==this.textNode.data.length}get parent(){return this.textNode.parent}get root(){return this.textNode.root}get document(){return this.textNode.document}getAncestors(e={}){const s=[];let i=e.includeSelf?this.textNode:this.parent;for(;i!==null;)s[e.parentFirst?"push":"unshift"](i),i=i.parent;return s}};ae.prototype.is=function(t){return t==="$textProxy"||t==="view:$textProxy"||t==="textProxy"||t==="view:textProxy"};class mh{constructor(...n){h(this,"_patterns",[]);this.add(...n)}add(...n){for(let e of n)(typeof e=="string"||e instanceof RegExp)&&(e={name:e}),this._patterns.push(e)}match(...n){for(const e of n)for(const s of this._patterns){const i=us(e,s);if(i)return{element:e,pattern:s,match:i}}return null}matchAll(...n){const e=[];for(const s of n)for(const i of this._patterns){const r=us(s,i);r&&e.push({element:s,pattern:i,match:r})}return e.length>0?e:null}getElementName(){if(this._patterns.length!==1)return null;const n=this._patterns[0],e=n.name;return typeof n!="function"&&e&&!(e instanceof RegExp)?e:null}}function us(t,n){if(typeof n=="function")return n(t);const e={};return n.name&&(e.name=_h(n.name,t.name),!e.name)||n.attributes&&(e.attributes=xh(n.attributes,t),!e.attributes)||n.classes&&(e.classes=vh(n.classes,t),!e.classes)||n.styles&&(e.styles=Ph(n.styles,t),!e.styles)?null:e}function _h(t,n){return t instanceof RegExp?!!n.match(t):t===n}function wn(t,n,e){const s=yh(t),i=Array.from(n),r=[];if(s.forEach(([o,a])=>{i.forEach(l=>{wh(o,l)&&bh(a,l,e)&&r.push(l)})}),!(!s.length||r.length<s.length))return r}function yh(t){return Array.isArray(t)?t.map(n=>Kt(n)?((n.key===void 0||n.value===void 0)&&tn("matcher-pattern-missing-key-or-value",n),[n.key,n.value]):[n,!0]):Kt(t)?Object.entries(t):[[t,!0]]}function wh(t,n){return t===!0||t===n||t instanceof RegExp&&n.match(t)}function bh(t,n,e){if(t===!0)return!0;const s=e(n);return t===s||t instanceof RegExp&&!!String(s).match(t)}function xh(t,n){const e=new Set(n.getAttributeKeys());return Kt(t)?(t.style!==void 0&&tn("matcher-pattern-deprecated-attributes-style-key",t),t.class!==void 0&&tn("matcher-pattern-deprecated-attributes-class-key",t)):(e.delete("style"),e.delete("class")),wn(t,e,s=>n.getAttribute(s))}function vh(t,n){return wn(t,n.getClassNames(),()=>{})}function Ph(t,n){return wn(t,n.getStyleNames(!0),e=>n.getStyle(e))}class kh{constructor(n){h(this,"_styles");h(this,"_styleProcessor");this._styles={},this._styleProcessor=n}get isEmpty(){return!Object.entries(this._styles).length}get size(){return this.isEmpty?0:this.getStyleNames().length}setTo(n){this.clear();const e=Sh(n);for(const[s,i]of e)this._styleProcessor.toNormalizedForm(s,i,this._styles)}has(n){if(this.isEmpty)return!1;const s=this._styleProcessor.getReducedForm(n,this._styles).find(([i])=>i===n);return Array.isArray(s)}set(n,e){if(ke(n))for(const[s,i]of Object.entries(n))this._styleProcessor.toNormalizedForm(s,i,this._styles);else this._styleProcessor.toNormalizedForm(n,e,this._styles)}remove(n){const e=Ah(n);Gc(this._styles,e),delete this._styles[n],this._cleanEmptyObjectsOnPath(e)}getNormalized(n){return this._styleProcessor.getNormalized(n,this._styles)}toString(){return this.isEmpty?"":this.getStylesEntries().map(n=>n.join(":")).sort().join(";")+";"}getAsString(n){if(this.isEmpty)return;if(this._styles[n]&&!ke(this._styles[n]))return this._styles[n];const s=this._styleProcessor.getReducedForm(n,this._styles).find(([i])=>i===n);if(Array.isArray(s))return s[1]}getStyleNames(n=!1){return this.isEmpty?[]:n?this._styleProcessor.getStyleNames(this._styles):this.getStylesEntries().map(([s])=>s)}clear(){this._styles={}}getStylesEntries(){const n=[],e=Object.keys(this._styles);for(const s of e)n.push(...this._styleProcessor.getReducedForm(s,this._styles));return n}_cleanEmptyObjectsOnPath(n){const e=n.split(".");if(!(e.length>1))return;const i=e.splice(0,e.length-1).join("."),r=ba(this._styles,i);if(!r)return;!Object.keys(r).length&&this.remove(i)}}function Sh(t){let n=null,e=0,s=0,i=null;const r=new Map;if(t==="")return r;t.charAt(t.length-1)!=";"&&(t=t+";");for(let o=0;o<t.length;o++){const a=t.charAt(o);if(n===null)switch(a){case":":i||(i=t.substr(e,o-e),s=o+1);break;case'"':case"'":n=a;break;case";":{const l=t.substr(s,o-s);i&&r.set(i.trim(),l.trim()),i=null,e=o+1;break}}else a===n&&(n=null)}return r}function Ah(t){return t.replace("-",".")}let Se=class hi extends Fe{constructor(e,s,i,r){super(e);h(this,"name");h(this,"_unsafeAttributesToRender",[]);h(this,"_attrs");h(this,"_children");h(this,"_classes");h(this,"_styles");h(this,"_customProperties",new Map);if(this.name=s,this._attrs=Th(i),this._children=[],r&&this._insertChild(0,r),this._classes=new Set,this._attrs.has("class")){const o=this._attrs.get("class");fs(this._classes,o),this._attrs.delete("class")}this._styles=new kh(this.document.stylesProcessor),this._attrs.has("style")&&(this._styles.setTo(this._attrs.get("style")),this._attrs.delete("style"))}get childCount(){return this._children.length}get isEmpty(){return this._children.length===0}getChild(e){return this._children[e]}getChildIndex(e){return this._children.indexOf(e)}getChildren(){return this._children[Symbol.iterator]()}*getAttributeKeys(){this._classes.size>0&&(yield"class"),this._styles.isEmpty||(yield"style"),yield*this._attrs.keys()}*getAttributes(){yield*this._attrs.entries(),this._classes.size>0&&(yield["class",this.getAttribute("class")]),this._styles.isEmpty||(yield["style",this.getAttribute("style")])}getAttribute(e){if(e=="class")return this._classes.size>0?[...this._classes].join(" "):void 0;if(e=="style"){const s=this._styles.toString();return s==""?void 0:s}return this._attrs.get(e)}hasAttribute(e){return e=="class"?this._classes.size>0:e=="style"?!this._styles.isEmpty:this._attrs.has(e)}isSimilar(e){if(!(e instanceof hi))return!1;if(this===e)return!0;if(this.name!=e.name||this._attrs.size!==e._attrs.size||this._classes.size!==e._classes.size||this._styles.size!==e._styles.size)return!1;for(const[s,i]of this._attrs)if(!e._attrs.has(s)||e._attrs.get(s)!==i)return!1;for(const s of this._classes)if(!e._classes.has(s))return!1;for(const s of this._styles.getStyleNames())if(!e._styles.has(s)||e._styles.getAsString(s)!==this._styles.getAsString(s))return!1;return!0}hasClass(...e){for(const s of e)if(!this._classes.has(s))return!1;return!0}getClassNames(){return this._classes.keys()}getStyle(e){return this._styles.getAsString(e)}getNormalizedStyle(e){return this._styles.getNormalized(e)}getStyleNames(e){return this._styles.getStyleNames(e)}hasStyle(...e){for(const s of e)if(!this._styles.has(s))return!1;return!0}findAncestor(...e){const s=new mh(...e);let i=this.parent;for(;i&&!i.is("documentFragment");){if(s.match(i))return i;i=i.parent}return null}getCustomProperty(e){return this._customProperties.get(e)}*getCustomProperties(){yield*this._customProperties.entries()}getIdentity(){const e=Array.from(this._classes).sort().join(","),s=this._styles.toString(),i=Array.from(this._attrs).map(r=>`${r[0]}="${r[1]}"`).sort().join(" ");return this.name+(e==""?"":` class="${e}"`)+(s?` style="${s}"`:"")+(i==""?"":` ${i}`)}shouldRenderUnsafeAttribute(e){return this._unsafeAttributesToRender.includes(e)}_clone(e=!1){const s=[];if(e)for(const r of this.getChildren())s.push(r._clone(e));const i=new this.constructor(this.document,this.name,this._attrs,s);return i._classes=new Set(this._classes),i._styles.set(this._styles.getNormalized()),i._customProperties=new Map(this._customProperties),i.getFillerOffset=this.getFillerOffset,i._unsafeAttributesToRender=this._unsafeAttributesToRender,i}_appendChild(e){return this._insertChild(this.childCount,e)}_insertChild(e,s){this._fireChange("children",this);let i=0;const r=Eh(this.document,s);for(const o of r)o.parent!==null&&o._remove(),o.parent=this,o.document=this.document,this._children.splice(e,0,o),e++,i++;return i}_removeChildren(e,s=1){this._fireChange("children",this);for(let i=e;i<e+s;i++)this._children[i].parent=null;return this._children.splice(e,s)}_setAttribute(e,s){const i=String(s);this._fireChange("attributes",this),e=="class"?fs(this._classes,i):e=="style"?this._styles.setTo(i):this._attrs.set(e,i)}_removeAttribute(e){return this._fireChange("attributes",this),e=="class"?this._classes.size>0?(this._classes.clear(),!0):!1:e=="style"?this._styles.isEmpty?!1:(this._styles.clear(),!0):this._attrs.delete(e)}_addClass(e){this._fireChange("attributes",this);for(const s of St(e))this._classes.add(s)}_removeClass(e){this._fireChange("attributes",this);for(const s of St(e))this._classes.delete(s)}_setStyle(e,s){this._fireChange("attributes",this),typeof e!="string"?this._styles.set(e):this._styles.set(e,s)}_removeStyle(e){this._fireChange("attributes",this);for(const s of St(e))this._styles.remove(s)}_setCustomProperty(e,s){this._customProperties.set(e,s)}_removeCustomProperty(e){return this._customProperties.delete(e)}};Se.prototype.is=function(t,n){return n?n===this.name&&(t==="element"||t==="view:element"):t==="element"||t==="view:element"||t==="node"||t==="view:node"};function Th(t){const n=dt(t);for(const[e,s]of n)s===null?n.delete(e):typeof s!="string"&&n.set(e,String(s));return n}function fs(t,n){const e=n.split(/\s+/);t.clear(),e.forEach(s=>t.add(s))}function Eh(t,n){return typeof n=="string"?[new te(t,n)]:(we(n)||(n=[n]),Array.from(n).map(e=>typeof e=="string"?new te(t,e):e instanceof ae?new te(t,e.data):e))}class ui extends Se{constructor(n,e,s,i){super(n,e,s,i),this.getFillerOffset=Oh}}ui.prototype.is=function(t,n){return n?n===this.name&&(t==="containerElement"||t==="view:containerElement"||t==="element"||t==="view:element"):t==="containerElement"||t==="view:containerElement"||t==="element"||t==="view:element"||t==="node"||t==="view:node"};function Oh(){const t=[...this.getChildren()],n=t[this.childCount-1];if(n&&n.is("element","br"))return this.childCount;for(const e of t)if(!e.is("uiElement"))return null;return this.childCount}class bn extends yn(ui){constructor(n,e,s,i){super(n,e,s,i),this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("placeholder",void 0),this.bind("isReadOnly").to(n),this.bind("isFocused").to(n,"isFocused",r=>r&&n.selection.editableElement==this),this.listenTo(n.selection,"change",()=>{this.isFocused=n.isFocused&&n.selection.editableElement==this})}destroy(){this.stopListening()}}bn.prototype.is=function(t,n){return n?n===this.name&&(t==="editableElement"||t==="view:editableElement"||t==="containerElement"||t==="view:containerElement"||t==="element"||t==="view:element"):t==="editableElement"||t==="view:editableElement"||t==="containerElement"||t==="view:containerElement"||t==="element"||t==="view:element"||t==="node"||t==="view:node"};const ds=Symbol("rootName");class Rh extends bn{constructor(n,e){super(n,e),this.rootName="main"}get rootName(){return this.getCustomProperty(ds)}set rootName(n){this._setCustomProperty(ds,n)}set _name(n){this.name=n}}Rh.prototype.is=function(t,n){return n?n===this.name&&(t==="rootElement"||t==="view:rootElement"||t==="editableElement"||t==="view:editableElement"||t==="containerElement"||t==="view:containerElement"||t==="element"||t==="view:element"):t==="rootElement"||t==="view:rootElement"||t==="editableElement"||t==="view:editableElement"||t==="containerElement"||t==="view:containerElement"||t==="element"||t==="view:element"||t==="node"||t==="view:node"};let qe=class{constructor(n={}){h(this,"direction");h(this,"boundaries");h(this,"singleCharacters");h(this,"shallow");h(this,"ignoreElementEnd");h(this,"_position");h(this,"_boundaryStartParent");h(this,"_boundaryEndParent");if(!n.boundaries&&!n.startPosition)throw new m("view-tree-walker-no-start-position",null);if(n.direction&&n.direction!="forward"&&n.direction!="backward")throw new m("view-tree-walker-unknown-direction",n.startPosition,{direction:n.direction});this.boundaries=n.boundaries||null,n.startPosition?this._position=N._createAt(n.startPosition):this._position=N._createAt(n.boundaries[n.direction=="backward"?"end":"start"]),this.direction=n.direction||"forward",this.singleCharacters=!!n.singleCharacters,this.shallow=!!n.shallow,this.ignoreElementEnd=!!n.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null}[Symbol.iterator](){return this}get position(){return this._position}skip(n){let e,s;do s=this.position,e=this.next();while(!e.done&&n(e.value));e.done||(this._position=s)}next(){return this.direction=="forward"?this._next():this._previous()}_next(){let n=this.position.clone();const e=this.position,s=n.parent;if(s.parent===null&&n.offset===s.childCount)return{done:!0,value:void 0};if(s===this._boundaryEndParent&&n.offset==this.boundaries.end.offset)return{done:!0,value:void 0};let i;if(s instanceof te){if(n.isAtEnd)return this._position=N._createAfter(s),this._next();i=s.data[n.offset]}else i=s.getChild(n.offset);if(i instanceof Se){if(!this.shallow)n=new N(i,0);else{if(this.boundaries&&this.boundaries.end.isBefore(n))return{done:!0,value:void 0};n.offset++}return this._position=n,this._formatReturnValue("elementStart",i,e,n,1)}if(i instanceof te){if(this.singleCharacters)return n=new N(i,0),this._position=n,this._next();let r=i.data.length,o;return i==this._boundaryEndParent?(r=this.boundaries.end.offset,o=new ae(i,0,r),n=N._createAfter(o)):(o=new ae(i,0,i.data.length),n.offset++),this._position=n,this._formatReturnValue("text",o,e,n,r)}if(typeof i=="string"){let r;this.singleCharacters?r=1:r=(s===this._boundaryEndParent?this.boundaries.end.offset:s.data.length)-n.offset;const o=new ae(s,n.offset,r);return n.offset+=r,this._position=n,this._formatReturnValue("text",o,e,n,r)}return n=N._createAfter(s),this._position=n,this.ignoreElementEnd?this._next():this._formatReturnValue("elementEnd",s,e,n)}_previous(){let n=this.position.clone();const e=this.position,s=n.parent;if(s.parent===null&&n.offset===0)return{done:!0,value:void 0};if(s==this._boundaryStartParent&&n.offset==this.boundaries.start.offset)return{done:!0,value:void 0};let i;if(s instanceof te){if(n.isAtStart)return this._position=N._createBefore(s),this._previous();i=s.data[n.offset-1]}else i=s.getChild(n.offset-1);if(i instanceof Se)return this.shallow?(n.offset--,this._position=n,this._formatReturnValue("elementStart",i,e,n,1)):(n=new N(i,i.childCount),this._position=n,this.ignoreElementEnd?this._previous():this._formatReturnValue("elementEnd",i,e,n));if(i instanceof te){if(this.singleCharacters)return n=new N(i,i.data.length),this._position=n,this._previous();let r=i.data.length,o;if(i==this._boundaryStartParent){const a=this.boundaries.start.offset;o=new ae(i,a,i.data.length-a),r=o.data.length,n=N._createBefore(o)}else o=new ae(i,0,i.data.length),n.offset--;return this._position=n,this._formatReturnValue("text",o,e,n,r)}if(typeof i=="string"){let r;if(this.singleCharacters)r=1;else{const a=s===this._boundaryStartParent?this.boundaries.start.offset:0;r=n.offset-a}n.offset-=r;const o=new ae(s,n.offset,r);return this._position=n,this._formatReturnValue("text",o,e,n,r)}return n=N._createBefore(s),this._position=n,this._formatReturnValue("elementStart",s,e,n,1)}_formatReturnValue(n,e,s,i,r){return e instanceof ae&&(e.offsetInText+e.data.length==e.textNode.data.length&&(this.direction=="forward"&&!(this.boundaries&&this.boundaries.end.isEqual(this.position))?(i=N._createAfter(e.textNode),this._position=i):s=N._createAfter(e.textNode)),e.offsetInText===0&&(this.direction=="backward"&&!(this.boundaries&&this.boundaries.start.isEqual(this.position))?(i=N._createBefore(e.textNode),this._position=i):s=N._createBefore(e.textNode))),{done:!1,value:{type:n,item:e,previousPosition:s,nextPosition:i,length:r}}}},N=class fe extends je{constructor(e,s){super();h(this,"parent");h(this,"offset");this.parent=e,this.offset=s}get nodeAfter(){return this.parent.is("$text")?null:this.parent.getChild(this.offset)||null}get nodeBefore(){return this.parent.is("$text")?null:this.parent.getChild(this.offset-1)||null}get isAtStart(){return this.offset===0}get isAtEnd(){const e=this.parent.is("$text")?this.parent.data.length:this.parent.childCount;return this.offset===e}get root(){return this.parent.root}get editableElement(){let e=this.parent;for(;!(e instanceof bn);)if(e.parent)e=e.parent;else return null;return e}getShiftedBy(e){const s=fe._createAt(this),i=s.offset+e;return s.offset=i<0?0:i,s}getLastMatchingPosition(e,s={}){s.startPosition=this;const i=new qe(s);return i.skip(e),i.position}getAncestors(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeSelf:!0})}getCommonAncestor(e){const s=this.getAncestors(),i=e.getAncestors();let r=0;for(;s[r]==i[r]&&s[r];)r++;return r===0?null:s[r-1]}isEqual(e){return this.parent==e.parent&&this.offset==e.offset}isBefore(e){return this.compareWith(e)=="before"}isAfter(e){return this.compareWith(e)=="after"}compareWith(e){if(this.root!==e.root)return"different";if(this.isEqual(e))return"same";const s=this.parent.is("node")?this.parent.getPath():[],i=e.parent.is("node")?e.parent.getPath():[];s.push(this.offset),i.push(e.offset);const r=G(s,i);switch(r){case"prefix":return"before";case"extension":return"after";default:return s[r]<i[r]?"before":"after"}}getWalker(e={}){return e.startPosition=this,new qe(e)}clone(){return new fe(this.parent,this.offset)}static _createAt(e,s){if(e instanceof fe)return new this(e.parent,e.offset);{const i=e;if(s=="end")s=i.is("$text")?i.data.length:i.childCount;else{if(s=="before")return this._createBefore(i);if(s=="after")return this._createAfter(i);if(s!==0&&!s)throw new m("view-createpositionat-offset-required",i)}return new fe(i,s)}}static _createAfter(e){if(e.is("$textProxy"))return new fe(e.textNode,e.offsetInText+e.data.length);if(!e.parent)throw new m("view-position-after-root",e,{root:e});return new fe(e.parent,e.index+1)}static _createBefore(e){if(e.is("$textProxy"))return new fe(e.textNode,e.offsetInText);if(!e.parent)throw new m("view-position-before-root",e,{root:e});return new fe(e.parent,e.index)}};N.prototype.is=function(t){return t==="position"||t==="view:position"};let oe=class be extends je{constructor(e,s=null){super();h(this,"start");h(this,"end");this.start=e.clone(),this.end=s?s.clone():e.clone()}*[Symbol.iterator](){yield*new qe({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return this.start.parent===this.end.parent}get root(){return this.start.root}getEnlarged(){let e=this.start.getLastMatchingPosition(vt,{direction:"backward"}),s=this.end.getLastMatchingPosition(vt);return e.parent.is("$text")&&e.isAtStart&&(e=N._createBefore(e.parent)),s.parent.is("$text")&&s.isAtEnd&&(s=N._createAfter(s.parent)),new be(e,s)}getTrimmed(){let e=this.start.getLastMatchingPosition(vt);if(e.isAfter(this.end)||e.isEqual(this.end))return new be(e,e);let s=this.end.getLastMatchingPosition(vt,{direction:"backward"});const i=e.nodeAfter,r=s.nodeBefore;return i&&i.is("$text")&&(e=new N(i,0)),r&&r.is("$text")&&(s=new N(r,r.data.length)),new be(e,s)}isEqual(e){return this==e||this.start.isEqual(e.start)&&this.end.isEqual(e.end)}containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end)}containsRange(e,s=!1){e.isCollapsed&&(s=!1);const i=this.containsPosition(e.start)||s&&this.start.isEqual(e.start),r=this.containsPosition(e.end)||s&&this.end.isEqual(e.end);return i&&r}getDifference(e){const s=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&s.push(new be(this.start,e.start)),this.containsPosition(e.end)&&s.push(new be(e.end,this.end))):s.push(this.clone()),s}getIntersection(e){if(this.isIntersecting(e)){let s=this.start,i=this.end;return this.containsPosition(e.start)&&(s=e.start),this.containsPosition(e.end)&&(i=e.end),new be(s,i)}return null}getWalker(e={}){return e.boundaries=this,new qe(e)}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;let e=this.start.nodeAfter,s=this.end.nodeBefore;return this.start.parent.is("$text")&&this.start.isAtEnd&&this.start.parent.nextSibling&&(e=this.start.parent.nextSibling),this.end.parent.is("$text")&&this.end.isAtStart&&this.end.parent.previousSibling&&(s=this.end.parent.previousSibling),e&&e.is("element")&&e===s?e:null}clone(){return new be(this.start,this.end)}*getItems(e={}){e.boundaries=this,e.ignoreElementEnd=!0;const s=new qe(e);for(const i of s)yield i.item}*getPositions(e={}){e.boundaries=this;const s=new qe(e);yield s.position;for(const i of s)yield i.nextPosition}isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}static _createFromParentsAndOffsets(e,s,i,r){return new this(new N(e,s),new N(i,r))}static _createFromPositionAndShift(e,s){const i=e,r=e.getShiftedBy(s);return s>0?new this(i,r):new this(r,i)}static _createIn(e){return this._createFromParentsAndOffsets(e,0,e,e.childCount)}static _createOn(e){const s=e.is("$textProxy")?e.offsetSize:1;return this._createFromPositionAndShift(N._createBefore(e),s)}};oe.prototype.is=function(t){return t==="range"||t==="view:range"};function vt(t){return!!(t.item.is("attributeElement")||t.item.is("uiElement"))}let fi=class di extends q(je){constructor(...e){super();h(this,"_ranges");h(this,"_lastRangeBackward");h(this,"_isFake");h(this,"_fakeSelectionLabel");this._ranges=[],this._lastRangeBackward=!1,this._isFake=!1,this._fakeSelectionLabel="",e.length&&this.setTo(...e)}get isFake(){return this._isFake}get fakeSelectionLabel(){return this._fakeSelectionLabel}get anchor(){if(!this._ranges.length)return null;const e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.end:e.start).clone()}get focus(){if(!this._ranges.length)return null;const e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.start:e.end).clone()}get isCollapsed(){return this.rangeCount===1&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}get editableElement(){return this.anchor?this.anchor.editableElement:null}*getRanges(){for(const e of this._ranges)yield e.clone()}getFirstRange(){let e=null;for(const s of this._ranges)(!e||s.start.isBefore(e.start))&&(e=s);return e?e.clone():null}getLastRange(){let e=null;for(const s of this._ranges)(!e||s.end.isAfter(e.end))&&(e=s);return e?e.clone():null}getFirstPosition(){const e=this.getFirstRange();return e?e.start.clone():null}getLastPosition(){const e=this.getLastRange();return e?e.end.clone():null}isEqual(e){if(this.isFake!=e.isFake||this.isFake&&this.fakeSelectionLabel!=e.fakeSelectionLabel||this.rangeCount!=e.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;for(const s of this._ranges){let i=!1;for(const r of e._ranges)if(s.isEqual(r)){i=!0;break}if(!i)return!1}return!0}isSimilar(e){if(this.isBackward!=e.isBackward)return!1;const s=as(this.getRanges()),i=as(e.getRanges());if(s!=i)return!1;if(s==0)return!0;for(let r of this.getRanges()){r=r.getTrimmed();let o=!1;for(let a of e.getRanges())if(a=a.getTrimmed(),r.start.isEqual(a.start)&&r.end.isEqual(a.end)){o=!0;break}if(!o)return!1}return!0}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}setTo(...e){let[s,i,r]=e;if(typeof i=="object"&&(r=i,i=void 0),s===null)this._setRanges([]),this._setFakeOptions(r);else if(s instanceof di||s instanceof gi)this._setRanges(s.getRanges(),s.isBackward),this._setFakeOptions({fake:s.isFake,label:s.fakeSelectionLabel});else if(s instanceof oe)this._setRanges([s],r&&r.backward),this._setFakeOptions(r);else if(s instanceof N)this._setRanges([new oe(s)]),this._setFakeOptions(r);else if(s instanceof Fe){const o=!!r&&!!r.backward;let a;if(i===void 0)throw new m("view-selection-setto-required-second-parameter",this);i=="in"?a=oe._createIn(s):i=="on"?a=oe._createOn(s):a=new oe(N._createAt(s,i)),this._setRanges([a],o),this._setFakeOptions(r)}else if(we(s))this._setRanges(s,r&&r.backward),this._setFakeOptions(r);else throw new m("view-selection-setto-not-selectable",this);this.fire("change")}setFocus(e,s){if(this.anchor===null)throw new m("view-selection-setfocus-no-ranges",this);const i=N._createAt(e,s);if(i.compareWith(this.focus)=="same")return;const r=this.anchor;this._ranges.pop(),i.compareWith(r)=="before"?this._addRange(new oe(i,r),!0):this._addRange(new oe(r,i)),this.fire("change")}_setRanges(e,s=!1){e=Array.from(e),this._ranges=[];for(const i of e)this._addRange(i);this._lastRangeBackward=!!s}_setFakeOptions(e={}){this._isFake=!!e.fake,this._fakeSelectionLabel=e.fake&&e.label||""}_addRange(e,s=!1){if(!(e instanceof oe))throw new m("view-selection-add-range-not-range",this);this._pushRange(e),this._lastRangeBackward=!!s}_pushRange(e){for(const s of this._ranges)if(e.isIntersecting(s))throw new m("view-selection-range-intersects",this,{addedRange:e,intersectingRange:s});this._ranges.push(new oe(e.start,e.end))}};fi.prototype.is=function(t){return t==="selection"||t==="view:selection"};let gi=class extends q(je){constructor(...e){super();h(this,"_selection");this._selection=new fi,this._selection.delegate("change").to(this),e.length&&this._selection.setTo(...e)}get isFake(){return this._selection.isFake}get fakeSelectionLabel(){return this._selection.fakeSelectionLabel}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get isCollapsed(){return this._selection.isCollapsed}get rangeCount(){return this._selection.rangeCount}get isBackward(){return this._selection.isBackward}get editableElement(){return this._selection.editableElement}get _ranges(){return this._selection._ranges}*getRanges(){yield*this._selection.getRanges()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getSelectedElement(){return this._selection.getSelectedElement()}isEqual(e){return this._selection.isEqual(e)}isSimilar(e){return this._selection.isSimilar(e)}_setTo(...e){this._selection.setTo(...e)}_setFocus(e,s){this._selection.setFocus(e,s)}};gi.prototype.is=function(t){return t==="selection"||t=="documentSelection"||t=="view:selection"||t=="view:documentSelection"};class Ch extends Ue{constructor(e,s,i){super(e,s);h(this,"startRange");h(this,"_eventPhase");h(this,"_currentTarget");this.startRange=i,this._eventPhase="none",this._currentTarget=null}get eventPhase(){return this._eventPhase}get currentTarget(){return this._currentTarget}}const Jt=Symbol("bubbling contexts");function gs(t){class n extends t{fire(s,...i){try{const r=s instanceof Ue?s:new Ue(this,s),o=Ut(this);if(!o.size)return;if(Qe(r,"capturing",this),ze(o,"$capture",r,...i))return r.return;const a=r.startRange||this.selection.getFirstRange(),l=a?a.getContainedElement():null,c=l?!!pi(o,l):!1;let f=l||Nh(a);if(Qe(r,"atTarget",f),!c){if(ze(o,"$text",r,...i))return r.return;Qe(r,"bubbling",f)}for(;f;){if(f.is("rootElement")){if(ze(o,"$root",r,...i))return r.return}else if(f.is("element")&&ze(o,f.name,r,...i))return r.return;if(ze(o,f,r,...i))return r.return;f=f.parent,Qe(r,"bubbling",f)}return Qe(r,"bubbling",this),ze(o,"$document",r,...i),r.return}catch(r){/* istanbul ignore next -- @preserve */m.rethrowUnexpectedError(r,this)}}_addEventListener(s,i,r){const o=St(r.context||"$document"),a=Ut(this);for(const l of o){let c=a.get(l);c||(c=new(q()),a.set(l,c)),this.listenTo(c,s,i,r)}}_removeEventListener(s,i){const r=Ut(this);for(const o of r.values())this.stopListening(o,s,i)}}return n}{const t=gs(Object);["fire","_addEventListener","_removeEventListener"].forEach(n=>{gs[n]=t.prototype[n]})}function Qe(t,n,e){t instanceof Ch&&(t._eventPhase=n,t._currentTarget=e)}function ze(t,n,e,...s){const i=typeof n=="string"?t.get(n):pi(t,n);return i?(i.fire(e,...s),e.stop.called):!1}function pi(t,n){for(const[e,s]of t)if(typeof e=="function"&&e(n))return s;return null}function Ut(t){return t[Jt]||(t[Jt]=new Map),t[Jt]}function Nh(t){if(!t)return null;const n=t.start.parent,e=t.end.parent,s=n.getPath(),i=e.getPath();return s.length>i.length?n:e}const ps=10;class mi extends Se{constructor(e,s,i,r){super(e,s,i,r);h(this,"_priority",ps);h(this,"_id",null);h(this,"_clonesGroup",null);this.getFillerOffset=Mh}get priority(){return this._priority}get id(){return this._id}getElementsWithSameId(){if(this.id===null)throw new m("attribute-element-get-elements-with-same-id-no-id",this);return new Set(this._clonesGroup)}isSimilar(e){return this.id!==null||e.id!==null?this.id===e.id:super.isSimilar(e)&&this.priority==e.priority}_clone(e=!1){const s=super._clone(e);return s._priority=this._priority,s._id=this._id,s}}h(mi,"DEFAULT_PRIORITY",ps);mi.prototype.is=function(t,n){return n?n===this.name&&(t==="attributeElement"||t==="view:attributeElement"||t==="element"||t==="view:element"):t==="attributeElement"||t==="view:attributeElement"||t==="element"||t==="view:element"||t==="node"||t==="view:node"};function Mh(){if(Wt(this))return null;let t=this.parent;for(;t&&t.is("attributeElement");){if(Wt(t)>1)return null;t=t.parent}return!t||Wt(t)>1?null:this.childCount}function Wt(t){return Array.from(t.getChildren()).filter(n=>!n.is("uiElement")).length}class Bh extends Se{constructor(n,e,s,i){super(n,e,s,i),this.getFillerOffset=$h}_insertChild(n,e){if(e&&(e instanceof Fe||Array.from(e).length>0))throw new m("view-emptyelement-cannot-add",[this,e]);return 0}}Bh.prototype.is=function(t,n){return n?n===this.name&&(t==="emptyElement"||t==="view:emptyElement"||t==="element"||t==="view:element"):t==="emptyElement"||t==="view:emptyElement"||t==="element"||t==="view:element"||t==="node"||t==="view:node"};function $h(){return null}class Ih extends Se{constructor(n,e,s,i){super(n,e,s,i),this.getFillerOffset=jh}_insertChild(n,e){if(e&&(e instanceof Fe||Array.from(e).length>0))throw new m("view-uielement-cannot-add",[this,e]);return 0}render(n,e){return this.toDomElement(n)}toDomElement(n){const e=n.createElement(this.name);for(const s of this.getAttributeKeys())e.setAttribute(s,this.getAttribute(s));return e}}Ih.prototype.is=function(t,n){return n?n===this.name&&(t==="uiElement"||t==="view:uiElement"||t==="element"||t==="view:element"):t==="uiElement"||t==="view:uiElement"||t==="element"||t==="view:element"||t==="node"||t==="view:node"};function jh(){return null}class Fh extends Se{constructor(n,e,s,i){super(n,e,s,i),this.getFillerOffset=Lh}_insertChild(n,e){if(e&&(e instanceof Fe||Array.from(e).length>0))throw new m("view-rawelement-cannot-add",[this,e]);return 0}render(n,e){}}Fh.prototype.is=function(t,n){return n?n===this.name&&(t==="rawElement"||t==="view:rawElement"||t==="element"||t==="view:element"):t==="rawElement"||t==="view:rawElement"||t===this.name||t==="view:"+this.name||t==="element"||t==="view:element"||t==="node"||t==="view:node"};function Lh(){return null}let zh=class extends q(je){constructor(e,s){super();h(this,"document");h(this,"_children",[]);h(this,"_customProperties",new Map);this.document=e,s&&this._insertChild(0,s)}[Symbol.iterator](){return this._children[Symbol.iterator]()}get childCount(){return this._children.length}get isEmpty(){return this.childCount===0}get root(){return this}get parent(){return null}get name(){}get getFillerOffset(){}getCustomProperty(e){return this._customProperties.get(e)}*getCustomProperties(){yield*this._customProperties.entries()}_appendChild(e){return this._insertChild(this.childCount,e)}getChild(e){return this._children[e]}getChildIndex(e){return this._children.indexOf(e)}getChildren(){return this._children[Symbol.iterator]()}_insertChild(e,s){this._fireChange("children",this);let i=0;const r=Dh(this.document,s);for(const o of r)o.parent!==null&&o._remove(),o.parent=this,this._children.splice(e,0,o),e++,i++;return i}_removeChildren(e,s=1){this._fireChange("children",this);for(let i=e;i<e+s;i++)this._children[i].parent=null;return this._children.splice(e,s)}_fireChange(e,s){this.fire("change:"+e,s)}_setCustomProperty(e,s){this._customProperties.set(e,s)}_removeCustomProperty(e){return this._customProperties.delete(e)}};zh.prototype.is=function(t){return t==="documentFragment"||t==="view:documentFragment"};function Dh(t,n){return typeof n=="string"?[new te(t,n)]:(we(n)||(n=[n]),Array.from(n).map(e=>typeof e=="string"?new te(t,e):e instanceof ae?new te(t,e.data):e))}const qh=t=>t.createTextNode(" "),Vh=t=>{const n=t.createElement("span");return n.dataset.ckeFiller="true",n.innerText=" ",n},Jh=t=>{const n=t.createElement("br");return n.dataset.ckeFiller="true",n};Jh(ut.document);qh(ut.document);Vh(ut.document);/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ae{is(){throw new Error("is() method is abstract")}}let We=class extends Ae{constructor(e){super();h(this,"parent",null);h(this,"_attrs");h(this,"_index",null);h(this,"_startOffset",null);this._attrs=dt(e)}get document(){return null}get index(){return this._index}get startOffset(){return this._startOffset}get offsetSize(){return 1}get endOffset(){return this.startOffset===null?null:this.startOffset+this.offsetSize}get nextSibling(){const e=this.index;return e!==null&&this.parent.getChild(e+1)||null}get previousSibling(){const e=this.index;return e!==null&&this.parent.getChild(e-1)||null}get root(){let e=this;for(;e.parent;)e=e.parent;return e}isAttached(){return this.parent===null?!1:this.root.isAttached()}getPath(){const e=[];let s=this;for(;s.parent;)e.unshift(s.startOffset),s=s.parent;return e}getAncestors(e={}){const s=[];let i=e.includeSelf?this:this.parent;for(;i;)s[e.parentFirst?"push":"unshift"](i),i=i.parent;return s}getCommonAncestor(e,s={}){const i=this.getAncestors(s),r=e.getAncestors(s);let o=0;for(;i[o]==r[o]&&i[o];)o++;return o===0?null:i[o-1]}isBefore(e){if(this==e||this.root!==e.root)return!1;const s=this.getPath(),i=e.getPath(),r=G(s,i);switch(r){case"prefix":return!0;case"extension":return!1;default:return s[r]<i[r]}}isAfter(e){return this==e||this.root!==e.root?!1:!this.isBefore(e)}hasAttribute(e){return this._attrs.has(e)}getAttribute(e){return this._attrs.get(e)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}toJSON(){const e={};return this._attrs.size&&(e.attributes=Array.from(this._attrs).reduce((s,i)=>(s[i[0]]=i[1],s),{})),e}_clone(e){return new this.constructor(this._attrs)}_remove(){this.parent._removeChildren(this.index)}_setAttribute(e,s){this._attrs.set(e,s)}_setAttributesTo(e){this._attrs=dt(e)}_removeAttribute(e){return this._attrs.delete(e)}_clearAttributes(){this._attrs.clear()}};We.prototype.is=function(t){return t==="node"||t==="model:node"};class ot{constructor(n){h(this,"_nodes",[]);h(this,"_offsetToNode",[]);n&&this._insertNodes(0,n)}[Symbol.iterator](){return this._nodes[Symbol.iterator]()}get length(){return this._nodes.length}get maxOffset(){return this._offsetToNode.length}getNode(n){return this._nodes[n]||null}getNodeAtOffset(n){return this._offsetToNode[n]||null}getNodeIndex(n){return n.index}getNodeStartOffset(n){return n.startOffset}indexToOffset(n){if(n==this._nodes.length)return this.maxOffset;const e=this._nodes[n];if(!e)throw new m("model-nodelist-index-out-of-bounds",this);return this.getNodeStartOffset(e)}offsetToIndex(n){if(n==this._offsetToNode.length)return this._nodes.length;const e=this._offsetToNode[n];if(!e)throw new m("model-nodelist-offset-out-of-bounds",this,{offset:n,nodeList:this});return this.getNodeIndex(e)}_insertNodes(n,e){for(const o of e)if(!(o instanceof We))throw new m("model-nodelist-insertnodes-not-node",this);const s=Array.from(e),i=Uh(s);let r=this.indexToOffset(n);this._nodes=hs(this._nodes,s,n,0),this._offsetToNode=hs(this._offsetToNode,i,r,0);for(let o=n;o<this._nodes.length;o++)this._nodes[o]._index=o,this._nodes[o]._startOffset=r,r+=this._nodes[o].offsetSize}_removeNodes(n,e=1){if(e==0)return[];let s=this.indexToOffset(n);const i=this._nodes.splice(n,e),r=i[i.length-1],o=r.startOffset+r.offsetSize-s;this._offsetToNode.splice(s,o);for(const a of i)a._index=null,a._startOffset=null;for(let a=n;a<this._nodes.length;a++)this._nodes[a]._index=a,this._nodes[a]._startOffset=s,s+=this._nodes[a].offsetSize;return i}toJSON(){return this._nodes.map(n=>n.toJSON())}}function Uh(t){const n=[];for(const e of t){const s=n.length;n.length+=e.offsetSize,n.fill(e,s)}return n}class j extends We{constructor(e,s){super(s);h(this,"_data");this._data=e||""}get offsetSize(){return this.data.length}get data(){return this._data}toJSON(){const e=super.toJSON();return e.data=this.data,e}_clone(){return new j(this.data,this.getAttributes())}static fromJSON(e){return new j(e.data,e.attributes)}}j.prototype.is=function(t){return t==="$text"||t==="model:$text"||t==="text"||t==="model:text"||t==="node"||t==="model:node"};class Me extends Ae{constructor(e,s,i){super();h(this,"textNode");h(this,"data");h(this,"offsetInText");if(this.textNode=e,s<0||s>e.offsetSize)throw new m("model-textproxy-wrong-offsetintext",this);if(i<0||s+i>e.offsetSize)throw new m("model-textproxy-wrong-length",this);this.data=e.data.substring(s,s+i),this.offsetInText=s}get startOffset(){return this.textNode.startOffset!==null?this.textNode.startOffset+this.offsetInText:null}get offsetSize(){return this.data.length}get endOffset(){return this.startOffset!==null?this.startOffset+this.offsetSize:null}get isPartial(){return this.offsetSize!==this.textNode.offsetSize}get parent(){return this.textNode.parent}get root(){return this.textNode.root}getPath(){const e=this.textNode.getPath();return e.length>0&&(e[e.length-1]+=this.offsetInText),e}getAncestors(e={}){const s=[];let i=e.includeSelf?this:this.parent;for(;i;)s[e.parentFirst?"push":"unshift"](i),i=i.parent;return s}hasAttribute(e){return this.textNode.hasAttribute(e)}getAttribute(e){return this.textNode.getAttribute(e)}getAttributes(){return this.textNode.getAttributes()}getAttributeKeys(){return this.textNode.getAttributeKeys()}}Me.prototype.is=function(t){return t==="$textProxy"||t==="model:$textProxy"||t==="textProxy"||t==="model:textProxy"};class ne extends We{constructor(e,s,i){super(s);h(this,"name");h(this,"_children",new ot);this.name=e,i&&this._insertChild(0,i)}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}getChild(e){return this._children.getNode(e)}getChildAtOffset(e){return this._children.getNodeAtOffset(e)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(e){return this._children.getNodeIndex(e)}getChildStartOffset(e){return this._children.getNodeStartOffset(e)}offsetToIndex(e){return this._children.offsetToIndex(e)}getNodeByPath(e){let s=this;for(const i of e)s=s.getChildAtOffset(i);return s}findAncestor(e,s={}){let i=s.includeSelf?this:this.parent;for(;i;){if(i.name===e)return i;i=i.parent}return null}toJSON(){const e=super.toJSON();if(e.name=this.name,this._children.length>0){e.children=[];for(const s of this._children)e.children.push(s.toJSON())}return e}_clone(e=!1){const s=e?Array.from(this._children).map(i=>i._clone(!0)):void 0;return new ne(this.name,this.getAttributes(),s)}_appendChild(e){this._insertChild(this.childCount,e)}_insertChild(e,s){const i=Wh(s);for(const r of i)r.parent!==null&&r._remove(),r.parent=this;this._children._insertNodes(e,i)}_removeChildren(e,s=1){const i=this._children._removeNodes(e,s);for(const r of i)r.parent=null;return i}static fromJSON(e){let s;if(e.children){s=[];for(const i of e.children)i.name?s.push(ne.fromJSON(i)):s.push(j.fromJSON(i))}return new ne(e.name,e.attributes,s)}}ne.prototype.is=function(t,n){return n?n===this.name&&(t==="element"||t==="model:element"):t==="element"||t==="model:element"||t==="node"||t==="model:node"};function Wh(t){return typeof t=="string"?[new j(t)]:(we(t)||(t=[t]),Array.from(t).map(n=>typeof n=="string"?new j(n):n instanceof Me?new j(n.data,n.getAttributes()):n))}class tt{constructor(n){h(this,"direction");h(this,"boundaries");h(this,"singleCharacters");h(this,"shallow");h(this,"ignoreElementEnd");h(this,"_position");h(this,"_boundaryStartParent");h(this,"_boundaryEndParent");h(this,"_visitedParent");if(!n||!n.boundaries&&!n.startPosition)throw new m("model-tree-walker-no-start-position",null);const e=n.direction||"forward";if(e!="forward"&&e!="backward")throw new m("model-tree-walker-unknown-direction",n,{direction:e});this.direction=e,this.boundaries=n.boundaries||null,n.startPosition?this._position=n.startPosition.clone():this._position=x._createAt(this.boundaries[this.direction=="backward"?"end":"start"]),this.position.stickiness="toNone",this.singleCharacters=!!n.singleCharacters,this.shallow=!!n.shallow,this.ignoreElementEnd=!!n.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null,this._visitedParent=this.position.parent}[Symbol.iterator](){return this}get position(){return this._position}skip(n){let e,s,i,r;do i=this.position,r=this._visitedParent,{done:e,value:s}=this.next();while(!e&&n(s));e||(this._position=i,this._visitedParent=r)}next(){return this.direction=="forward"?this._next():this._previous()}_next(){const n=this.position,e=this.position.clone(),s=this._visitedParent;if(s.parent===null&&e.offset===s.maxOffset)return{done:!0,value:void 0};if(s===this._boundaryEndParent&&e.offset==this.boundaries.end.offset)return{done:!0,value:void 0};const i=at(e,s),r=i||_i(e,s,i);if(r instanceof ne){if(!this.shallow)e.path.push(0),this._visitedParent=r;else{if(this.boundaries&&this.boundaries.end.isBefore(e))return{done:!0,value:void 0};e.offset++}return this._position=e,Re("elementStart",r,n,e,1)}if(r instanceof j){let o;if(this.singleCharacters)o=1;else{let c=r.endOffset;this._boundaryEndParent==s&&this.boundaries.end.offset<c&&(c=this.boundaries.end.offset),o=c-e.offset}const a=e.offset-r.startOffset,l=new Me(r,a,o);return e.offset+=o,this._position=e,Re("text",l,n,e,o)}return e.path.pop(),e.offset++,this._position=e,this._visitedParent=s.parent,this.ignoreElementEnd?this._next():Re("elementEnd",s,n,e)}_previous(){const n=this.position,e=this.position.clone(),s=this._visitedParent;if(s.parent===null&&e.offset===0)return{done:!0,value:void 0};if(s==this._boundaryStartParent&&e.offset==this.boundaries.start.offset)return{done:!0,value:void 0};const i=e.parent,r=at(e,i),o=r||yi(e,i,r);if(o instanceof ne)return e.offset--,this.shallow?(this._position=e,Re("elementStart",o,n,e,1)):(e.path.push(o.maxOffset),this._position=e,this._visitedParent=o,this.ignoreElementEnd?this._previous():Re("elementEnd",o,n,e));if(o instanceof j){let a;if(this.singleCharacters)a=1;else{let f=o.startOffset;this._boundaryStartParent==s&&this.boundaries.start.offset>f&&(f=this.boundaries.start.offset),a=e.offset-f}const l=e.offset-o.startOffset,c=new Me(o,l-a,a);return e.offset-=a,this._position=e,Re("text",c,n,e,a)}return e.path.pop(),this._position=e,this._visitedParent=s.parent,Re("elementStart",s,n,e,1)}}function Re(t,n,e,s,i){return{done:!1,value:{type:t,item:n,previousPosition:e,nextPosition:s,length:i}}}class x extends Ae{constructor(e,s,i="toNone"){super();h(this,"root");h(this,"path");h(this,"stickiness");if(!e.is("element")&&!e.is("documentFragment"))throw new m("model-position-root-invalid",e);if(!(s instanceof Array)||s.length===0)throw new m("model-position-path-incorrect-format",e,{path:s});e.is("rootElement")?s=s.slice():(s=[...e.getPath(),...s],e=e.root),this.root=e,this.path=s,this.stickiness=i}get offset(){return this.path[this.path.length-1]}set offset(e){this.path[this.path.length-1]=e}get parent(){let e=this.root;for(let s=0;s<this.path.length-1;s++)if(e=e.getChildAtOffset(this.path[s]),!e)throw new m("model-position-path-incorrect",this,{position:this});if(e.is("$text"))throw new m("model-position-path-incorrect",this,{position:this});return e}get index(){return this.parent.offsetToIndex(this.offset)}get textNode(){return at(this,this.parent)}get nodeAfter(){const e=this.parent;return _i(this,e,at(this,e))}get nodeBefore(){const e=this.parent;return yi(this,e,at(this,e))}get isAtStart(){return this.offset===0}get isAtEnd(){return this.offset==this.parent.maxOffset}isValid(){if(this.offset<0)return!1;let e=this.root;for(let s=0;s<this.path.length-1;s++)if(e=e.getChildAtOffset(this.path[s]),!e)return!1;return this.offset<=e.maxOffset}compareWith(e){if(this.root!=e.root)return"different";const s=G(this.path,e.path);switch(s){case"same":return"same";case"prefix":return"before";case"extension":return"after";default:return this.path[s]<e.path[s]?"before":"after"}}getLastMatchingPosition(e,s={}){s.startPosition=this;const i=new tt(s);return i.skip(e),i.position}getParentPath(){return this.path.slice(0,-1)}getAncestors(){const e=this.parent;return e.is("documentFragment")?[e]:e.getAncestors({includeSelf:!0})}findAncestor(e){const s=this.parent;return s.is("element")?s.findAncestor(e,{includeSelf:!0}):null}getCommonPath(e){if(this.root!=e.root)return[];const s=G(this.path,e.path),i=typeof s=="string"?Math.min(this.path.length,e.path.length):s;return this.path.slice(0,i)}getCommonAncestor(e){const s=this.getAncestors(),i=e.getAncestors();let r=0;for(;s[r]==i[r]&&s[r];)r++;return r===0?null:s[r-1]}getShiftedBy(e){const s=this.clone(),i=s.offset+e;return s.offset=i<0?0:i,s}isAfter(e){return this.compareWith(e)=="after"}isBefore(e){return this.compareWith(e)=="before"}isEqual(e){return this.compareWith(e)=="same"}isTouching(e){if(this.root!==e.root)return!1;const s=Math.min(this.path.length,e.path.length);for(let i=0;i<s;i++){const r=this.path[i]-e.path[i];if(r<-1||r>1)return!1;if(r===1)return ms(e,this,i);if(r===-1)return ms(this,e,i)}return this.path.length===e.path.length?!0:this.path.length>e.path.length?on(this.path,s):on(e.path,s)}hasSameParentAs(e){if(this.root!==e.root)return!1;const s=this.getParentPath(),i=e.getParentPath();return G(s,i)=="same"}getTransformedByOperation(e){let s;switch(e.type){case"insert":s=this._getTransformedByInsertOperation(e);break;case"move":case"remove":case"reinsert":s=this._getTransformedByMoveOperation(e);break;case"split":s=this._getTransformedBySplitOperation(e);break;case"merge":s=this._getTransformedByMergeOperation(e);break;default:s=x._createAt(this);break}return s}_getTransformedByInsertOperation(e){return this._getTransformedByInsertion(e.position,e.howMany)}_getTransformedByMoveOperation(e){return this._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany)}_getTransformedBySplitOperation(e){const s=e.movedRange;return s.containsPosition(this)||s.start.isEqual(this)&&this.stickiness=="toNext"?this._getCombined(e.splitPosition,e.moveTargetPosition):e.graveyardPosition?this._getTransformedByMove(e.graveyardPosition,e.insertionPosition,1):this._getTransformedByInsertion(e.insertionPosition,1)}_getTransformedByMergeOperation(e){const s=e.movedRange,i=s.containsPosition(this)||s.start.isEqual(this);let r;return i?(r=this._getCombined(e.sourcePosition,e.targetPosition),e.sourcePosition.isBefore(e.targetPosition)&&(r=r._getTransformedByDeletion(e.deletionPosition,1))):this.isEqual(e.deletionPosition)?r=x._createAt(e.deletionPosition):r=this._getTransformedByMove(e.deletionPosition,e.graveyardPosition,1),r}_getTransformedByDeletion(e,s){const i=x._createAt(this);if(this.root!=e.root)return i;if(G(e.getParentPath(),this.getParentPath())=="same"){if(e.offset<this.offset){if(e.offset+s>this.offset)return null;i.offset-=s}}else if(G(e.getParentPath(),this.getParentPath())=="prefix"){const r=e.path.length-1;if(e.offset<=this.path[r]){if(e.offset+s>this.path[r])return null;i.path[r]-=s}}return i}_getTransformedByInsertion(e,s){const i=x._createAt(this);if(this.root!=e.root)return i;if(G(e.getParentPath(),this.getParentPath())=="same")(e.offset<this.offset||e.offset==this.offset&&this.stickiness!="toPrevious")&&(i.offset+=s);else if(G(e.getParentPath(),this.getParentPath())=="prefix"){const r=e.path.length-1;e.offset<=this.path[r]&&(i.path[r]+=s)}return i}_getTransformedByMove(e,s,i){if(s=s._getTransformedByDeletion(e,i),e.isEqual(s))return x._createAt(this);const r=this._getTransformedByDeletion(e,i);return r===null||e.isEqual(this)&&this.stickiness=="toNext"||e.getShiftedBy(i).isEqual(this)&&this.stickiness=="toPrevious"?this._getCombined(e,s):r._getTransformedByInsertion(s,i)}_getCombined(e,s){const i=e.path.length-1,r=x._createAt(s);return r.stickiness=this.stickiness,r.offset=r.offset+this.path[i]-e.offset,r.path=[...r.path,...this.path.slice(i+1)],r}toJSON(){return{root:this.root.toJSON(),path:Array.from(this.path),stickiness:this.stickiness}}clone(){return new this.constructor(this.root,this.path,this.stickiness)}static _createAt(e,s,i="toNone"){if(e instanceof x)return new x(e.root,e.path,e.stickiness);{const r=e;if(s=="end")s=r.maxOffset;else{if(s=="before")return this._createBefore(r,i);if(s=="after")return this._createAfter(r,i);if(s!==0&&!s)throw new m("model-createpositionat-offset-required",[this,e])}if(!r.is("element")&&!r.is("documentFragment"))throw new m("model-position-parent-incorrect",[this,e]);const o=r.getPath();return o.push(s),new this(r.root,o,i)}}static _createAfter(e,s){if(!e.parent)throw new m("model-position-after-root",[this,e],{root:e});return this._createAt(e.parent,e.endOffset,s)}static _createBefore(e,s){if(!e.parent)throw new m("model-position-before-root",e,{root:e});return this._createAt(e.parent,e.startOffset,s)}static fromJSON(e,s){if(e.root==="$graveyard"){const i=new x(s.graveyard,e.path);return i.stickiness=e.stickiness,i}if(!s.getRoot(e.root))throw new m("model-position-fromjson-no-root",s,{rootName:e.root});return new x(s.getRoot(e.root),e.path,e.stickiness)}}x.prototype.is=function(t){return t==="position"||t==="model:position"};function at(t,n){const e=n.getChildAtOffset(t.offset);return e&&e.is("$text")&&e.startOffset<t.offset?e:null}function _i(t,n,e){return e!==null?null:n.getChildAtOffset(t.offset)}function yi(t,n,e){return e!==null?null:n.getChild(n.offsetToIndex(t.offset)-1)}function ms(t,n,e){return!(e+1===t.path.length||!on(n.path,e+1)||!Gh(t,e+1))}function on(t,n){for(;n<t.length;){if(t[n]!==0)return!1;n++}return!0}function Gh(t,n){let e=t.parent,s=t.path.length-1,i=0;for(;s>=n;){if(t.path[s]+i!==e.maxOffset)return!1;i=1,s--,e=e.parent}return!0}class w extends Ae{constructor(e,s){super();h(this,"start");h(this,"end");this.start=x._createAt(e),this.end=s?x._createAt(s):x._createAt(e),this.start.stickiness=this.isCollapsed?"toNone":"toNext",this.end.stickiness=this.isCollapsed?"toNone":"toPrevious"}*[Symbol.iterator](){yield*new tt({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){const e=this.start.getParentPath(),s=this.end.getParentPath();return G(e,s)=="same"}get root(){return this.start.root}containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end)}containsRange(e,s=!1){e.isCollapsed&&(s=!1);const i=this.containsPosition(e.start)||s&&this.start.isEqual(e.start),r=this.containsPosition(e.end)||s&&this.end.isEqual(e.end);return i&&r}containsItem(e){const s=x._createBefore(e);return this.containsPosition(s)||this.start.isEqual(s)}isEqual(e){return this.start.isEqual(e.start)&&this.end.isEqual(e.end)}isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}getDifference(e){const s=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&s.push(new w(this.start,e.start)),this.containsPosition(e.end)&&s.push(new w(e.end,this.end))):s.push(new w(this.start,this.end)),s}getIntersection(e){if(this.isIntersecting(e)){let s=this.start,i=this.end;return this.containsPosition(e.start)&&(s=e.start),this.containsPosition(e.end)&&(i=e.end),new w(s,i)}return null}getJoined(e,s=!1){let i=this.isIntersecting(e);if(i||(this.start.isBefore(e.start)?i=s?this.end.isTouching(e.start):this.end.isEqual(e.start):i=s?e.end.isTouching(this.start):e.end.isEqual(this.start)),!i)return null;let r=this.start,o=this.end;return e.start.isBefore(r)&&(r=e.start),e.end.isAfter(o)&&(o=e.end),new w(r,o)}getMinimalFlatRanges(){const e=[],s=this.start.getCommonPath(this.end).length,i=x._createAt(this.start);let r=i.parent;for(;i.path.length>s+1;){const o=r.maxOffset-i.offset;o!==0&&e.push(new w(i,i.getShiftedBy(o))),i.path=i.path.slice(0,-1),i.offset++,r=r.parent}for(;i.path.length<=this.end.path.length;){const o=this.end.path[i.path.length-1],a=o-i.offset;a!==0&&e.push(new w(i,i.getShiftedBy(a))),i.offset=o,i.path.push(0)}return e}getWalker(e={}){return e.boundaries=this,new tt(e)}*getItems(e={}){e.boundaries=this,e.ignoreElementEnd=!0;const s=new tt(e);for(const i of s)yield i.item}*getPositions(e={}){e.boundaries=this;const s=new tt(e);yield s.position;for(const i of s)yield i.nextPosition}getTransformedByOperation(e){switch(e.type){case"insert":return this._getTransformedByInsertOperation(e);case"move":case"remove":case"reinsert":return this._getTransformedByMoveOperation(e);case"split":return[this._getTransformedBySplitOperation(e)];case"merge":return[this._getTransformedByMergeOperation(e)]}return[new w(this.start,this.end)]}getTransformedByOperations(e){const s=[new w(this.start,this.end)];for(const i of e)for(let r=0;r<s.length;r++){const o=s[r].getTransformedByOperation(i);s.splice(r,1,...o),r+=o.length-1}for(let i=0;i<s.length;i++){const r=s[i];for(let o=i+1;o<s.length;o++){const a=s[o];(r.containsRange(a)||a.containsRange(r)||r.isEqual(a))&&s.splice(o,1)}}return s}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;const e=this.start.nodeAfter,s=this.end.nodeBefore;return e&&e.is("element")&&e===s?e:null}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}clone(){return new this.constructor(this.start,this.end)}_getTransformedByInsertOperation(e,s=!1){return this._getTransformedByInsertion(e.position,e.howMany,s)}_getTransformedByMoveOperation(e,s=!1){const i=e.sourcePosition,r=e.howMany,o=e.targetPosition;return this._getTransformedByMove(i,o,r,s)}_getTransformedBySplitOperation(e){const s=this.start._getTransformedBySplitOperation(e);let i=this.end._getTransformedBySplitOperation(e);return this.end.isEqual(e.insertionPosition)&&(i=this.end.getShiftedBy(1)),s.root!=i.root&&(i=this.end.getShiftedBy(-1)),new w(s,i)}_getTransformedByMergeOperation(e){if(this.start.isEqual(e.targetPosition)&&this.end.isEqual(e.deletionPosition))return new w(this.start);let s=this.start._getTransformedByMergeOperation(e),i=this.end._getTransformedByMergeOperation(e);return s.root!=i.root&&(i=this.end.getShiftedBy(-1)),s.isAfter(i)?(e.sourcePosition.isBefore(e.targetPosition)?(s=x._createAt(i),s.offset=0):(e.deletionPosition.isEqual(s)||(i=e.deletionPosition),s=e.targetPosition),new w(s,i)):new w(s,i)}_getTransformedByInsertion(e,s,i=!1){if(i&&this.containsPosition(e))return[new w(this.start,e),new w(e.getShiftedBy(s),this.end._getTransformedByInsertion(e,s))];{const r=new w(this.start,this.end);return r.start=r.start._getTransformedByInsertion(e,s),r.end=r.end._getTransformedByInsertion(e,s),[r]}}_getTransformedByMove(e,s,i,r=!1){if(this.isCollapsed){const y=this.start._getTransformedByMove(e,s,i);return[new w(y)]}const o=w._createFromPositionAndShift(e,i),a=s._getTransformedByDeletion(e,i);if(this.containsPosition(s)&&!r&&(o.containsPosition(this.start)||o.containsPosition(this.end))){const y=this.start._getTransformedByMove(e,s,i),_=this.end._getTransformedByMove(e,s,i);return[new w(y,_)]}let l;const c=this.getDifference(o);let f=null;const p=this.getIntersection(o);if(c.length==1?f=new w(c[0].start._getTransformedByDeletion(e,i),c[0].end._getTransformedByDeletion(e,i)):c.length==2&&(f=new w(this.start,this.end._getTransformedByDeletion(e,i))),f?l=f._getTransformedByInsertion(a,i,p!==null||r):l=[],p){const y=new w(p.start._getCombined(o.start,a),p.end._getCombined(o.start,a));l.length==2?l.splice(1,0,y):l.push(y)}return l}_getTransformedByDeletion(e,s){let i=this.start._getTransformedByDeletion(e,s),r=this.end._getTransformedByDeletion(e,s);return i==null&&r==null?null:(i==null&&(i=e),r==null&&(r=e),new w(i,r))}static _createFromPositionAndShift(e,s){const i=e,r=e.getShiftedBy(s);return s>0?new this(i,r):new this(r,i)}static _createIn(e){return new this(x._createAt(e,0),x._createAt(e,e.maxOffset))}static _createOn(e){return this._createFromPositionAndShift(x._createBefore(e),e.offsetSize)}static _createFromRanges(e){if(e.length===0)throw new m("range-create-from-ranges-empty-array",null);if(e.length==1)return e[0].clone();const s=e[0];e.sort((o,a)=>o.start.isAfter(a.start)?1:-1);const i=e.indexOf(s),r=new this(s.start,s.end);for(let o=i-1;o>=0&&e[o].end.isEqual(r.start);o--)r.start=x._createAt(e[o].start);for(let o=i+1;o<e.length&&e[o].start.isEqual(r.end);o++)r.end=x._createAt(e[o].end);return r}static fromJSON(e,s){return new this(x.fromJSON(e.start,s),x.fromJSON(e.end,s))}}w.prototype.is=function(t){return t==="range"||t==="model:range"};class It extends q(Ae){constructor(...e){super();h(this,"_lastRangeBackward",!1);h(this,"_attrs",new Map);h(this,"_ranges",[]);e.length&&this.setTo(...e)}get anchor(){if(this._ranges.length>0){const e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.end:e.start}return null}get focus(){if(this._ranges.length>0){const e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.start:e.end}return null}get isCollapsed(){return this._ranges.length===1?this._ranges[0].isCollapsed:!1}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}isEqual(e){if(this.rangeCount!=e.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;for(const s of this._ranges){let i=!1;for(const r of e._ranges)if(s.isEqual(r)){i=!0;break}if(!i)return!1}return!0}*getRanges(){for(const e of this._ranges)yield new w(e.start,e.end)}getFirstRange(){let e=null;for(const s of this._ranges)(!e||s.start.isBefore(e.start))&&(e=s);return e?new w(e.start,e.end):null}getLastRange(){let e=null;for(const s of this._ranges)(!e||s.end.isAfter(e.end))&&(e=s);return e?new w(e.start,e.end):null}getFirstPosition(){const e=this.getFirstRange();return e?e.start.clone():null}getLastPosition(){const e=this.getLastRange();return e?e.end.clone():null}setTo(...e){let[s,i,r]=e;if(typeof i=="object"&&(r=i,i=void 0),s===null)this._setRanges([]);else if(s instanceof It)this._setRanges(s.getRanges(),s.isBackward);else if(s&&typeof s.getRanges=="function")this._setRanges(s.getRanges(),s.isBackward);else if(s instanceof w)this._setRanges([s],!!r&&!!r.backward);else if(s instanceof x)this._setRanges([new w(s)]);else if(s instanceof We){const o=!!r&&!!r.backward;let a;if(i=="in")a=w._createIn(s);else if(i=="on")a=w._createOn(s);else if(i!==void 0)a=new w(x._createAt(s,i));else throw new m("model-selection-setto-required-second-parameter",[this,s]);this._setRanges([a],o)}else if(we(s))this._setRanges(s,r&&!!r.backward);else throw new m("model-selection-setto-not-selectable",[this,s])}_setRanges(e,s=!1){const i=Array.from(e),r=i.some(o=>{if(!(o instanceof w))throw new m("model-selection-set-ranges-not-range",[this,e]);return this._ranges.every(a=>!a.isEqual(o))});i.length===this._ranges.length&&!r||(this._replaceAllRanges(i),this._lastRangeBackward=!!s,this.fire("change:range",{directChange:!0}))}setFocus(e,s){if(this.anchor===null)throw new m("model-selection-setfocus-no-ranges",[this,e]);const i=x._createAt(e,s);if(i.compareWith(this.focus)=="same")return;const r=this.anchor;this._ranges.length&&this._popRange(),i.compareWith(r)=="before"?(this._pushRange(new w(i,r)),this._lastRangeBackward=!0):(this._pushRange(new w(r,i)),this._lastRangeBackward=!1),this.fire("change:range",{directChange:!0})}getAttribute(e){return this._attrs.get(e)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}hasAttribute(e){return this._attrs.has(e)}removeAttribute(e){this.hasAttribute(e)&&(this._attrs.delete(e),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}setAttribute(e,s){this.getAttribute(e)!==s&&(this._attrs.set(e,s),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}*getSelectedBlocks(){const e=new WeakSet;for(const s of this.getRanges()){const i=_s(s.start,e);Zh(i,s)&&(yield i);for(const o of s.getWalker()){const a=o.item;o.type=="elementEnd"&&Kh(a,e,s)&&(yield a)}const r=_s(s.end,e);Hh(r,s)&&(yield r)}}containsEntireContent(e=this.anchor.root){const s=x._createAt(e,0),i=x._createAt(e,"end");return s.isTouching(this.getFirstPosition())&&i.isTouching(this.getLastPosition())}_pushRange(e){this._checkRange(e),this._ranges.push(new w(e.start,e.end))}_checkRange(e){for(let s=0;s<this._ranges.length;s++)if(e.isIntersecting(this._ranges[s]))throw new m("model-selection-range-intersects",[this,e],{addedRange:e,intersectingRange:this._ranges[s]})}_replaceAllRanges(e){this._removeAllRanges();for(const s of e)this._pushRange(s)}_removeAllRanges(){for(;this._ranges.length>0;)this._popRange()}_popRange(){this._ranges.pop()}}It.prototype.is=function(t){return t==="selection"||t==="model:selection"};function wi(t,n){return n.has(t)?!1:(n.add(t),t.root.document.model.schema.isBlock(t)&&!!t.parent)}function Kh(t,n,e){return wi(t,n)&&xn(t,e)}function _s(t,n){const s=t.parent.root.document.model.schema,i=t.parent.getAncestors({parentFirst:!0,includeSelf:!0});let r=!1;const o=i.find(a=>r?!1:(r=s.isLimit(a),!r&&wi(a,n)));return i.forEach(a=>n.add(a)),o}function xn(t,n){const e=Yh(t);return e?!n.containsRange(w._createOn(e),!0):!0}function Zh(t,n){return t?n.isCollapsed||t.isEmpty?!0:n.start.isTouching(x._createAt(t,t.maxOffset))?!1:xn(t,n):!1}function Hh(t,n){return t?n.isCollapsed||t.isEmpty?!0:n.end.isTouching(x._createAt(t,0))?!1:xn(t,n):!1}function Yh(t){const n=t.root.document.model.schema;let e=t.parent;for(;e;){if(n.isBlock(e))return e;e=e.parent}}class jt extends q(w){constructor(n,e){super(n,e),Qh.call(this)}detach(){this.stopListening()}toRange(){return new w(this.start,this.end)}static fromRange(n){return new jt(n.start,n.end)}}jt.prototype.is=function(t){return t==="liveRange"||t==="model:liveRange"||t=="range"||t==="model:range"};function Qh(){this.listenTo(this.root.document.model,"applyOperation",(t,n)=>{const e=n[0];e.isDocumentOperation&&Xh.call(this,e)},{priority:"low"})}function Xh(t){const n=this.getTransformedByOperation(t),e=w._createFromRanges(n),s=!e.isEqual(this),i=eu(this,t);let r=null;if(s){e.root.rootName=="$graveyard"&&(t.type=="remove"?r=t.sourcePosition:r=t.deletionPosition);const o=this.toRange();this.start=e.start,this.end=e.end,this.fire("change:range",o,{deletionPosition:r})}else i&&this.fire("change:content",this.toRange(),{deletionPosition:r})}function eu(t,n){switch(n.type){case"insert":return t.containsPosition(n.position);case"move":case"remove":case"reinsert":case"merge":return t.containsPosition(n.sourcePosition)||t.start.isEqual(n.sourcePosition)||t.containsPosition(n.targetPosition);case"split":return t.containsPosition(n.splitPosition)||t.containsPosition(n.insertionPosition)}return!1}const gt="selection:";class tu extends q(Ae){constructor(e){super();h(this,"_selection");this._selection=new nu(e),this._selection.delegate("change:range").to(this),this._selection.delegate("change:attribute").to(this),this._selection.delegate("change:marker").to(this)}get isCollapsed(){return this._selection.isCollapsed}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get rangeCount(){return this._selection.rangeCount}get hasOwnRange(){return this._selection.hasOwnRange}get isBackward(){return this._selection.isBackward}get isGravityOverridden(){return this._selection.isGravityOverridden}get markers(){return this._selection.markers}get _ranges(){return this._selection._ranges}getRanges(){return this._selection.getRanges()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getSelectedBlocks(){return this._selection.getSelectedBlocks()}getSelectedElement(){return this._selection.getSelectedElement()}containsEntireContent(e){return this._selection.containsEntireContent(e)}destroy(){this._selection.destroy()}getAttributeKeys(){return this._selection.getAttributeKeys()}getAttributes(){return this._selection.getAttributes()}getAttribute(e){return this._selection.getAttribute(e)}hasAttribute(e){return this._selection.hasAttribute(e)}refresh(){this._selection.updateMarkers(),this._selection._updateAttributes(!1)}observeMarkers(e){this._selection.observeMarkers(e)}_setFocus(e,s){this._selection.setFocus(e,s)}_setTo(...e){this._selection.setTo(...e)}_setAttribute(e,s){this._selection.setAttribute(e,s)}_removeAttribute(e){this._selection.removeAttribute(e)}_getStoredAttributes(){return this._selection.getStoredAttributes()}_overrideGravity(){return this._selection.overrideGravity()}_restoreGravity(e){this._selection.restoreGravity(e)}static _getStoreAttributeKey(e){return gt+e}static _isStoreAttributeKey(e){return e.startsWith(gt)}}tu.prototype.is=function(t){return t==="selection"||t=="model:selection"||t=="documentSelection"||t=="model:documentSelection"};class nu extends It{constructor(e){super();h(this,"markers",new dh({idProperty:"name"}));h(this,"_model");h(this,"_document");h(this,"_attributePriority",new Map);h(this,"_selectionRestorePosition",null);h(this,"_hasChangedRange",!1);h(this,"_overriddenGravityRegister",new Set);h(this,"_observedMarkers",new Set);this._model=e.model,this._document=e,this.listenTo(this._model,"applyOperation",(s,i)=>{const r=i[0];!r.isDocumentOperation||r.type=="marker"||r.type=="rename"||r.type=="noop"||(this._ranges.length==0&&this._selectionRestorePosition&&this._fixGraveyardSelection(this._selectionRestorePosition),this._selectionRestorePosition=null,this._hasChangedRange&&(this._hasChangedRange=!1,this.fire("change:range",{directChange:!1})))},{priority:"lowest"}),this.on("change:range",()=>{this._validateSelectionRanges(this.getRanges())}),this.listenTo(this._model.markers,"update",(s,i,r,o)=>{this._updateMarker(i,o)}),this.listenTo(this._document,"change",(s,i)=>{su(this._model,i)})}get isCollapsed(){return this._ranges.length===0?this._document._getDefaultRange().isCollapsed:super.isCollapsed}get anchor(){return super.anchor||this._document._getDefaultRange().start}get focus(){return super.focus||this._document._getDefaultRange().end}get rangeCount(){return this._ranges.length?this._ranges.length:1}get hasOwnRange(){return this._ranges.length>0}get isGravityOverridden(){return!!this._overriddenGravityRegister.size}destroy(){for(let e=0;e<this._ranges.length;e++)this._ranges[e].detach();this.stopListening()}*getRanges(){this._ranges.length?yield*super.getRanges():yield this._document._getDefaultRange()}getFirstRange(){return super.getFirstRange()||this._document._getDefaultRange()}getLastRange(){return super.getLastRange()||this._document._getDefaultRange()}setTo(...e){super.setTo(...e),this._updateAttributes(!0),this.updateMarkers()}setFocus(e,s){super.setFocus(e,s),this._updateAttributes(!0),this.updateMarkers()}setAttribute(e,s){if(this._setAttribute(e,s)){const i=[e];this.fire("change:attribute",{attributeKeys:i,directChange:!0})}}removeAttribute(e){if(this._removeAttribute(e)){const s=[e];this.fire("change:attribute",{attributeKeys:s,directChange:!0})}}overrideGravity(){const e=$t();return this._overriddenGravityRegister.add(e),this._overriddenGravityRegister.size===1&&this._updateAttributes(!0),e}restoreGravity(e){if(!this._overriddenGravityRegister.has(e))throw new m("document-selection-gravity-wrong-restore",this,{uid:e});this._overriddenGravityRegister.delete(e),this.isGravityOverridden||this._updateAttributes(!0)}observeMarkers(e){this._observedMarkers.add(e),this.updateMarkers()}_replaceAllRanges(e){this._validateSelectionRanges(e),super._replaceAllRanges(e)}_popRange(){this._ranges.pop().detach()}_pushRange(e){const s=this._prepareRange(e);s&&this._ranges.push(s)}_validateSelectionRanges(e){for(const s of e)if(!this._document._validateSelectionRange(s))throw new m("document-selection-wrong-position",this,{range:s})}_prepareRange(e){if(this._checkRange(e),e.root==this._document.graveyard)return;const s=jt.fromRange(e);return s.on("change:range",(i,r,o)=>{if(this._hasChangedRange=!0,s.root==this._document.graveyard){this._selectionRestorePosition=o.deletionPosition;const a=this._ranges.indexOf(s);this._ranges.splice(a,1),s.detach()}}),s}updateMarkers(){if(!this._observedMarkers.size)return;const e=[];let s=!1;for(const r of this._model.markers){const o=r.name.split(":",1)[0];if(!this._observedMarkers.has(o))continue;const a=r.getRange();for(const l of this.getRanges())a.containsRange(l,!l.isCollapsed)&&e.push(r)}const i=Array.from(this.markers);for(const r of e)this.markers.has(r)||(this.markers.add(r),s=!0);for(const r of Array.from(this.markers))e.includes(r)||(this.markers.remove(r),s=!0);s&&this.fire("change:marker",{oldMarkers:i,directChange:!1})}_updateMarker(e,s){const i=e.name.split(":",1)[0];if(!this._observedMarkers.has(i))return;let r=!1;const o=Array.from(this.markers),a=this.markers.has(e);if(!s)a&&(this.markers.remove(e),r=!0);else{let l=!1;for(const c of this.getRanges())if(s.containsRange(c,!c.isCollapsed)){l=!0;break}l&&!a?(this.markers.add(e),r=!0):!l&&a&&(this.markers.remove(e),r=!0)}r&&this.fire("change:marker",{oldMarkers:o,directChange:!1})}_updateAttributes(e){const s=dt(this._getSurroundingAttributes()),i=dt(this.getAttributes());if(e)this._attributePriority=new Map,this._attrs=new Map;else for(const[o,a]of this._attributePriority)a=="low"&&(this._attrs.delete(o),this._attributePriority.delete(o));this._setAttributesTo(s);const r=[];for(const[o,a]of this.getAttributes())(!i.has(o)||i.get(o)!==a)&&r.push(o);for(const[o]of i)this.hasAttribute(o)||r.push(o);r.length>0&&this.fire("change:attribute",{attributeKeys:r,directChange:!1})}_setAttribute(e,s,i=!0){const r=i?"normal":"low";return r=="low"&&this._attributePriority.get(e)=="normal"||super.getAttribute(e)===s?!1:(this._attrs.set(e,s),this._attributePriority.set(e,r),!0)}_removeAttribute(e,s=!0){const i=s?"normal":"low";return i=="low"&&this._attributePriority.get(e)=="normal"||(this._attributePriority.set(e,i),!super.hasAttribute(e))?!1:(this._attrs.delete(e),!0)}_setAttributesTo(e){const s=new Set;for(const[i,r]of this.getAttributes())e.get(i)!==r&&this._removeAttribute(i,!1);for(const[i,r]of e)this._setAttribute(i,r,!1)&&s.add(i);return s}*getStoredAttributes(){const e=this.getFirstPosition().parent;if(this.isCollapsed&&e.isEmpty)for(const s of e.getAttributeKeys())s.startsWith(gt)&&(yield[s.substr(gt.length),e.getAttribute(s)])}_getSurroundingAttributes(){const e=this.getFirstPosition(),s=this._model.schema;if(e.root.rootName=="$graveyard")return null;let i=null;if(this.isCollapsed){const r=e.textNode?e.textNode:e.nodeBefore,o=e.textNode?e.textNode:e.nodeAfter;if(this.isGravityOverridden||(i=Xe(r,s)),i||(i=Xe(o,s)),!this.isGravityOverridden&&!i){let a=r;for(;a&&!i;)a=a.previousSibling,i=Xe(a,s)}if(!i){let a=o;for(;a&&!i;)a=a.nextSibling,i=Xe(a,s)}i||(i=this.getStoredAttributes())}else{const r=this.getFirstRange();for(const o of r){if(o.item.is("element")&&s.isObject(o.item)){i=Xe(o.item,s);break}if(o.type=="text"){i=o.item.getAttributes();break}}}return i}_fixGraveyardSelection(e){const s=this._model.schema.getNearestSelectionRange(e);s&&this._pushRange(s)}}function Xe(t,n){if(!t)return null;if(t instanceof Me||t instanceof j)return t.getAttributes();if(!n.isInline(t))return null;if(!n.isObject(t))return[];const e=[];for(const[s,i]of t.getAttributes())n.checkAttribute("$text",s)&&n.getAttributeProperties(s).copyFromObject!==!1&&e.push([s,i]);return e}function su(t,n){const e=t.document.differ;for(const s of e.getChanges()){if(s.type!="insert")continue;const i=s.position.parent;s.length===i.maxOffset&&t.enqueueChange(n,o=>{const a=Array.from(i.getAttributeKeys()).filter(l=>l.startsWith(gt));for(const l of a)o.removeAttribute(l,i)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class X{constructor(n){h(this,"baseVersion");h(this,"isDocumentOperation");h(this,"batch");this.baseVersion=n,this.isDocumentOperation=this.baseVersion!==null,this.batch=null}_validate(){}toJSON(){const n=Object.assign({},this);return n.__className=this.constructor.className,delete n.batch,delete n.isDocumentOperation,n}static get className(){return"Operation"}static fromJSON(n,e){return new this(n.baseVersion)}}function vn(t,n){const e=bi(n),s=e.reduce((o,a)=>o+a.offsetSize,0),i=t.parent;_t(t);const r=t.index;return i._insertChild(r,e),mt(i,r+e.length),mt(i,r),new w(t,t.getShiftedBy(s))}function iu(t){if(!t.isFlat)throw new m("operation-utils-remove-range-not-flat",this);const n=t.start.parent;_t(t.start),_t(t.end);const e=n._removeChildren(t.start.index,t.end.index-t.start.index);return mt(n,t.start.index),e}function pt(t,n){if(!t.isFlat)throw new m("operation-utils-move-range-not-flat",this);const e=iu(t);return n=n._getTransformedByDeletion(t.start,t.end.offset-t.start.offset),vn(n,e)}function ru(t,n,e){_t(t.start),_t(t.end);for(const s of t.getItems({shallow:!0})){const i=s.is("$textProxy")?s.textNode:s;e!==null?i._setAttribute(n,e):i._removeAttribute(n),mt(i.parent,i.index)}mt(t.end.parent,t.end.index)}function bi(t){const n=[];function e(s){if(typeof s=="string")n.push(new j(s));else if(s instanceof Me)n.push(new j(s.data,s.getAttributes()));else if(s instanceof We)n.push(s);else if(we(s))for(const i of s)e(i)}e(t);for(let s=1;s<n.length;s++){const i=n[s],r=n[s-1];i instanceof j&&r instanceof j&&xi(i,r)&&(n.splice(s-1,2,new j(r.data+i.data,r.getAttributes())),s--)}return n}function mt(t,n){const e=t.getChild(n-1),s=t.getChild(n);if(e&&s&&e.is("$text")&&s.is("$text")&&xi(e,s)){const i=new j(e.data+s.data,e.getAttributes());t._removeChildren(n-1,2),t._insertChild(n-1,i)}}function _t(t){const n=t.textNode,e=t.parent;if(n){const s=t.offset-n.startOffset,i=n.index;e._removeChildren(i,1);const r=new j(n.data.substr(0,s),n.getAttributes()),o=new j(n.data.substr(s),n.getAttributes());e._insertChild(i,[r,o])}}function xi(t,n){const e=t.getAttributes(),s=n.getAttributes();for(const i of e){if(i[1]!==n.getAttribute(i[0]))return!1;s.next()}return s.next().done}class $ extends X{constructor(e,s,i,r){super(r);h(this,"sourcePosition");h(this,"howMany");h(this,"targetPosition");this.sourcePosition=e.clone(),this.sourcePosition.stickiness="toNext",this.howMany=s,this.targetPosition=i.clone(),this.targetPosition.stickiness="toNone"}get type(){return this.targetPosition.root.rootName=="$graveyard"?"remove":this.sourcePosition.root.rootName=="$graveyard"?"reinsert":"move"}get affectedSelectable(){return[w._createFromPositionAndShift(this.sourcePosition,this.howMany),w._createFromPositionAndShift(this.targetPosition,0)]}clone(){return new $(this.sourcePosition,this.howMany,this.targetPosition,this.baseVersion)}getMovedRangeStart(){return this.targetPosition._getTransformedByDeletion(this.sourcePosition,this.howMany)}getReversed(){const e=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new $(this.getMovedRangeStart(),this.howMany,e,this.baseVersion+1)}_validate(){const e=this.sourcePosition.parent,s=this.targetPosition.parent,i=this.sourcePosition.offset,r=this.targetPosition.offset;if(i+this.howMany>e.maxOffset)throw new m("move-operation-nodes-do-not-exist",this);if(e===s&&i<r&&r<i+this.howMany)throw new m("move-operation-range-into-itself",this);if(this.sourcePosition.root==this.targetPosition.root&&G(this.sourcePosition.getParentPath(),this.targetPosition.getParentPath())=="prefix"){const o=this.sourcePosition.path.length-1;if(this.targetPosition.path[o]>=i&&this.targetPosition.path[o]<i+this.howMany)throw new m("move-operation-node-into-itself",this)}}_execute(){pt(w._createFromPositionAndShift(this.sourcePosition,this.howMany),this.targetPosition)}toJSON(){const e=super.toJSON();return e.sourcePosition=this.sourcePosition.toJSON(),e.targetPosition=this.targetPosition.toJSON(),e}static get className(){return"MoveOperation"}static fromJSON(e,s){const i=x.fromJSON(e.sourcePosition,s),r=x.fromJSON(e.targetPosition,s);return new this(i,e.howMany,r,e.baseVersion)}}class J extends X{constructor(e,s,i){super(i);h(this,"position");h(this,"nodes");h(this,"shouldReceiveAttributes");this.position=e.clone(),this.position.stickiness="toNone",this.nodes=new ot(bi(s)),this.shouldReceiveAttributes=!1}get type(){return"insert"}get howMany(){return this.nodes.maxOffset}get affectedSelectable(){return this.position.clone()}clone(){const e=new ot([...this.nodes].map(i=>i._clone(!0))),s=new J(this.position,e,this.baseVersion);return s.shouldReceiveAttributes=this.shouldReceiveAttributes,s}getReversed(){const e=this.position.root.document.graveyard,s=new x(e,[0]);return new $(this.position,this.nodes.maxOffset,s,this.baseVersion+1)}_validate(){const e=this.position.parent;if(!e||e.maxOffset<this.position.offset)throw new m("insert-operation-position-invalid",this)}_execute(){const e=this.nodes;this.nodes=new ot([...e].map(s=>s._clone(!0))),vn(this.position,e)}toJSON(){const e=super.toJSON();return e.position=this.position.toJSON(),e.nodes=this.nodes.toJSON(),e}static get className(){return"InsertOperation"}static fromJSON(e,s){const i=[];for(const o of e.nodes)o.name?i.push(ne.fromJSON(o)):i.push(j.fromJSON(o));const r=new J(x.fromJSON(e.position,s),i,e.baseVersion);return r.shouldReceiveAttributes=e.shouldReceiveAttributes,r}}class F extends X{constructor(e,s,i,r,o){super(o);h(this,"splitPosition");h(this,"howMany");h(this,"insertionPosition");h(this,"graveyardPosition");this.splitPosition=e.clone(),this.splitPosition.stickiness="toNext",this.howMany=s,this.insertionPosition=i,this.graveyardPosition=r?r.clone():null,this.graveyardPosition&&(this.graveyardPosition.stickiness="toNext")}get type(){return"split"}get moveTargetPosition(){const e=this.insertionPosition.path.slice();return e.push(0),new x(this.insertionPosition.root,e)}get movedRange(){const e=this.splitPosition.getShiftedBy(Number.POSITIVE_INFINITY);return new w(this.splitPosition,e)}get affectedSelectable(){const e=[w._createFromPositionAndShift(this.splitPosition,0),w._createFromPositionAndShift(this.insertionPosition,0)];return this.graveyardPosition&&e.push(w._createFromPositionAndShift(this.graveyardPosition,0)),e}clone(){return new F(this.splitPosition,this.howMany,this.insertionPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const e=this.splitPosition.root.document.graveyard,s=new x(e,[0]);return new W(this.moveTargetPosition,this.howMany,this.splitPosition,s,this.baseVersion+1)}_validate(){const e=this.splitPosition.parent,s=this.splitPosition.offset;if(!e||e.maxOffset<s)throw new m("split-operation-position-invalid",this);if(e.parent){if(this.howMany!=e.maxOffset-this.splitPosition.offset)throw new m("split-operation-how-many-invalid",this);if(this.graveyardPosition&&!this.graveyardPosition.nodeAfter)throw new m("split-operation-graveyard-position-invalid",this)}else throw new m("split-operation-split-in-root",this)}_execute(){const e=this.splitPosition.parent;if(this.graveyardPosition)pt(w._createFromPositionAndShift(this.graveyardPosition,1),this.insertionPosition);else{const i=e._clone();vn(this.insertionPosition,i)}const s=new w(x._createAt(e,this.splitPosition.offset),x._createAt(e,e.maxOffset));pt(s,this.moveTargetPosition)}toJSON(){const e=super.toJSON();return e.splitPosition=this.splitPosition.toJSON(),e.insertionPosition=this.insertionPosition.toJSON(),this.graveyardPosition&&(e.graveyardPosition=this.graveyardPosition.toJSON()),e}static get className(){return"SplitOperation"}static getInsertionPosition(e){const s=e.path.slice(0,-1);return s[s.length-1]++,new x(e.root,s,"toPrevious")}static fromJSON(e,s){const i=x.fromJSON(e.splitPosition,s),r=x.fromJSON(e.insertionPosition,s),o=e.graveyardPosition?x.fromJSON(e.graveyardPosition,s):null;return new this(i,e.howMany,r,o,e.baseVersion)}}class W extends X{constructor(e,s,i,r,o){super(o);h(this,"sourcePosition");h(this,"howMany");h(this,"targetPosition");h(this,"graveyardPosition");this.sourcePosition=e.clone(),this.sourcePosition.stickiness="toPrevious",this.howMany=s,this.targetPosition=i.clone(),this.targetPosition.stickiness="toNext",this.graveyardPosition=r.clone()}get type(){return"merge"}get deletionPosition(){return new x(this.sourcePosition.root,this.sourcePosition.path.slice(0,-1))}get movedRange(){const e=this.sourcePosition.getShiftedBy(Number.POSITIVE_INFINITY);return new w(this.sourcePosition,e)}get affectedSelectable(){const e=this.sourcePosition.parent;return[w._createOn(e),w._createFromPositionAndShift(this.targetPosition,0),w._createFromPositionAndShift(this.graveyardPosition,0)]}clone(){return new W(this.sourcePosition,this.howMany,this.targetPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const e=this.targetPosition._getTransformedByMergeOperation(this),s=this.sourcePosition.path.slice(0,-1),i=new x(this.sourcePosition.root,s)._getTransformedByMergeOperation(this);return new F(e,this.howMany,i,this.graveyardPosition,this.baseVersion+1)}_validate(){const e=this.sourcePosition.parent,s=this.targetPosition.parent;if(e.parent)if(s.parent){if(this.howMany!=e.maxOffset)throw new m("merge-operation-how-many-invalid",this)}else throw new m("merge-operation-target-position-invalid",this);else throw new m("merge-operation-source-position-invalid",this)}_execute(){const e=this.sourcePosition.parent,s=w._createIn(e);pt(s,this.targetPosition),pt(w._createOn(e),this.graveyardPosition)}toJSON(){const e=super.toJSON();return e.sourcePosition=e.sourcePosition.toJSON(),e.targetPosition=e.targetPosition.toJSON(),e.graveyardPosition=e.graveyardPosition.toJSON(),e}static get className(){return"MergeOperation"}static fromJSON(e,s){const i=x.fromJSON(e.sourcePosition,s),r=x.fromJSON(e.targetPosition,s),o=x.fromJSON(e.graveyardPosition,s);return new this(i,e.howMany,r,o,e.baseVersion)}}class Q extends X{constructor(e,s,i,r,o,a){super(a);h(this,"name");h(this,"oldRange");h(this,"newRange");h(this,"affectsData");h(this,"_markers");this.name=e,this.oldRange=s?s.clone():null,this.newRange=i?i.clone():null,this.affectsData=o,this._markers=r}get type(){return"marker"}get affectedSelectable(){const e=[];return this.oldRange&&e.push(this.oldRange.clone()),this.newRange&&(this.oldRange?e.push(...this.newRange.getDifference(this.oldRange)):e.push(this.newRange.clone())),e}clone(){return new Q(this.name,this.oldRange,this.newRange,this._markers,this.affectsData,this.baseVersion)}getReversed(){return new Q(this.name,this.newRange,this.oldRange,this._markers,this.affectsData,this.baseVersion+1)}_execute(){this.newRange?this._markers._set(this.name,this.newRange,!0,this.affectsData):this._markers._remove(this.name)}toJSON(){const e=super.toJSON();return this.oldRange&&(e.oldRange=this.oldRange.toJSON()),this.newRange&&(e.newRange=this.newRange.toJSON()),delete e._markers,e}static get className(){return"MarkerOperation"}static fromJSON(e,s){return new Q(e.name,e.oldRange?w.fromJSON(e.oldRange,s):null,e.newRange?w.fromJSON(e.newRange,s):null,s.model.markers,e.affectsData,e.baseVersion)}}class z extends X{constructor(e,s,i,r,o){super(o);h(this,"range");h(this,"key");h(this,"oldValue");h(this,"newValue");this.range=e.clone(),this.key=s,this.oldValue=i===void 0?null:i,this.newValue=r===void 0?null:r}get type(){return this.oldValue===null?"addAttribute":this.newValue===null?"removeAttribute":"changeAttribute"}get affectedSelectable(){return this.range.clone()}clone(){return new z(this.range,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new z(this.range,this.key,this.newValue,this.oldValue,this.baseVersion+1)}toJSON(){const e=super.toJSON();return e.range=this.range.toJSON(),e}_validate(){if(!this.range.isFlat)throw new m("attribute-operation-range-not-flat",this);for(const e of this.range.getItems({shallow:!0})){if(this.oldValue!==null&&!ns(e.getAttribute(this.key),this.oldValue))throw new m("attribute-operation-wrong-old-value",this,{item:e,key:this.key,value:this.oldValue});if(this.oldValue===null&&this.newValue!==null&&e.hasAttribute(this.key))throw new m("attribute-operation-attribute-exists",this,{node:e,key:this.key})}}_execute(){ns(this.oldValue,this.newValue)||ru(this.range,this.key,this.newValue)}static get className(){return"AttributeOperation"}static fromJSON(e,s){return new z(w.fromJSON(e.range,s),e.key,e.oldValue,e.newValue,e.baseVersion)}}class V extends X{get type(){return"noop"}get affectedSelectable(){return null}clone(){return new V(this.baseVersion)}getReversed(){return new V(this.baseVersion+1)}_execute(){}static get className(){return"NoOperation"}}class H extends X{constructor(e,s,i,r){super(r);h(this,"position");h(this,"oldName");h(this,"newName");this.position=e,this.position.stickiness="toNext",this.oldName=s,this.newName=i}get type(){return"rename"}get affectedSelectable(){return this.position.nodeAfter}clone(){return new H(this.position.clone(),this.oldName,this.newName,this.baseVersion)}getReversed(){return new H(this.position.clone(),this.newName,this.oldName,this.baseVersion+1)}_validate(){const e=this.position.nodeAfter;if(e instanceof ne){if(e.name!==this.oldName)throw new m("rename-operation-wrong-name",this)}else throw new m("rename-operation-wrong-position",this)}_execute(){const e=this.position.nodeAfter;e.name=this.newName}toJSON(){const e=super.toJSON();return e.position=this.position.toJSON(),e}static get className(){return"RenameOperation"}static fromJSON(e,s){return new H(x.fromJSON(e.position,s),e.oldName,e.newName,e.baseVersion)}}class xe extends X{constructor(e,s,i,r,o){super(o);h(this,"root");h(this,"key");h(this,"oldValue");h(this,"newValue");this.root=e,this.key=s,this.oldValue=i===void 0?null:i,this.newValue=r===void 0?null:r}get type(){return this.oldValue===null?"addRootAttribute":this.newValue===null?"removeRootAttribute":"changeRootAttribute"}get affectedSelectable(){return this.root}clone(){return new xe(this.root,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new xe(this.root,this.key,this.newValue,this.oldValue,this.baseVersion+1)}_validate(){if(this.root!=this.root.root||this.root.is("documentFragment"))throw new m("rootattribute-operation-not-a-root",this,{root:this.root,key:this.key});if(this.oldValue!==null&&this.root.getAttribute(this.key)!==this.oldValue)throw new m("rootattribute-operation-wrong-old-value",this,{root:this.root,key:this.key});if(this.oldValue===null&&this.newValue!==null&&this.root.hasAttribute(this.key))throw new m("rootattribute-operation-attribute-exists",this,{root:this.root,key:this.key})}_execute(){this.newValue!==null?this.root._setAttribute(this.key,this.newValue):this.root._removeAttribute(this.key)}toJSON(){const e=super.toJSON();return e.root=this.root.toJSON(),e}static get className(){return"RootAttributeOperation"}static fromJSON(e,s){if(!s.getRoot(e.root))throw new m("rootattribute-operation-fromjson-no-root",this,{rootName:e.root});return new xe(s.getRoot(e.root),e.key,e.oldValue,e.newValue,e.baseVersion)}}class ve extends X{constructor(e,s,i,r,o){super(o);h(this,"rootName");h(this,"elementName");h(this,"isAdd");h(this,"_document");if(this.rootName=e,this.elementName=s,this.isAdd=i,this._document=r,!this._document.getRoot(this.rootName)){const a=this._document.createRoot(this.elementName,this.rootName);a._isAttached=!1}}get type(){return this.isAdd?"addRoot":"detachRoot"}get affectedSelectable(){return this._document.getRoot(this.rootName)}clone(){return new ve(this.rootName,this.elementName,this.isAdd,this._document,this.baseVersion)}getReversed(){return new ve(this.rootName,this.elementName,!this.isAdd,this._document,this.baseVersion+1)}_execute(){this._document.getRoot(this.rootName)._isAttached=this.isAdd}toJSON(){const e=super.toJSON();return delete e._document,e}static get className(){return"RootOperation"}static fromJSON(e,s){return new ve(e.rootName,e.elementName,e.isAdd,s,e.baseVersion)}}const se={};se[z.className]=z;se[J.className]=J;se[Q.className]=Q;se[$.className]=$;se[V.className]=V;se[X.className]=X;se[H.className]=H;se[xe.className]=xe;se[ve.className]=ve;se[F.className]=F;se[W.className]=W;const ys=new Map;function O(t,n,e){let s=ys.get(t);s||(s=new Map,ys.set(t,s)),s.set(n,e)}O(z,z,(t,n,e)=>{if(t.key===n.key&&t.range.start.hasSameParentAs(n.range.start)){const s=t.range.getDifference(n.range).map(r=>new z(r,t.key,t.oldValue,t.newValue,0)),i=t.range.getIntersection(n.range);return i&&e.aIsStrong&&s.push(new z(i,n.key,n.newValue,t.newValue,0)),s.length==0?[new V(0)]:s}else return[t]});O(z,J,(t,n)=>{if(t.range.start.hasSameParentAs(n.position)&&t.range.containsPosition(n.position)){const s=t.range._getTransformedByInsertion(n.position,n.howMany,!n.shouldReceiveAttributes).map(i=>new z(i,t.key,t.oldValue,t.newValue,t.baseVersion));if(n.shouldReceiveAttributes){const i=vi(n,t.key,t.oldValue);i&&s.unshift(i)}return s}return t.range=t.range._getTransformedByInsertion(n.position,n.howMany,!1)[0],[t]});function vi(t,n,e){const i=t.nodes.getNode(0).getAttribute(n);if(i==e)return null;const r=new w(t.position,t.position.getShiftedBy(t.howMany));return new z(r,n,i,e,0)}O(z,W,(t,n)=>{const e=[];t.range.start.hasSameParentAs(n.deletionPosition)&&(t.range.containsPosition(n.deletionPosition)||t.range.start.isEqual(n.deletionPosition))&&e.push(w._createFromPositionAndShift(n.graveyardPosition,1));const s=t.range._getTransformedByMergeOperation(n);return s.isCollapsed||e.push(s),e.map(i=>new z(i,t.key,t.oldValue,t.newValue,t.baseVersion))});O(z,$,(t,n)=>ou(t.range,n).map(s=>new z(s,t.key,t.oldValue,t.newValue,t.baseVersion)));function ou(t,n){const e=w._createFromPositionAndShift(n.sourcePosition,n.howMany);let s=null,i=[];e.containsRange(t,!0)?s=t:t.start.hasSameParentAs(e.start)?(i=t.getDifference(e),s=t.getIntersection(e)):i=[t];const r=[];for(let o of i){o=o._getTransformedByDeletion(n.sourcePosition,n.howMany);const a=n.getMovedRangeStart(),l=o.start.hasSameParentAs(a),c=o._getTransformedByInsertion(a,n.howMany,l);r.push(...c)}return s&&r.push(s._getTransformedByMove(n.sourcePosition,n.targetPosition,n.howMany,!1)[0]),r}O(z,F,(t,n)=>{if(t.range.end.isEqual(n.insertionPosition))return n.graveyardPosition||t.range.end.offset++,[t];if(t.range.start.hasSameParentAs(n.splitPosition)&&t.range.containsPosition(n.splitPosition)){const e=t.clone();return e.range=new w(n.moveTargetPosition.clone(),t.range.end._getCombined(n.splitPosition,n.moveTargetPosition)),t.range.end=n.splitPosition.clone(),t.range.end.stickiness="toPrevious",[t,e]}return t.range=t.range._getTransformedBySplitOperation(n),[t]});O(J,z,(t,n)=>{const e=[t];if(t.shouldReceiveAttributes&&t.position.hasSameParentAs(n.range.start)&&n.range.containsPosition(t.position)){const s=vi(t,n.key,n.newValue);s&&e.push(s)}return e});O(J,J,(t,n,e)=>t.position.isEqual(n.position)&&e.aIsStrong?[t]:(t.position=t.position._getTransformedByInsertOperation(n),[t]));O(J,$,(t,n)=>(t.position=t.position._getTransformedByMoveOperation(n),[t]));O(J,F,(t,n)=>(t.position=t.position._getTransformedBySplitOperation(n),[t]));O(J,W,(t,n)=>(t.position=t.position._getTransformedByMergeOperation(n),[t]));O(Q,J,(t,n)=>(t.oldRange&&(t.oldRange=t.oldRange._getTransformedByInsertOperation(n)[0]),t.newRange&&(t.newRange=t.newRange._getTransformedByInsertOperation(n)[0]),[t]));O(Q,Q,(t,n,e)=>{if(t.name==n.name)if(e.aIsStrong)t.oldRange=n.newRange?n.newRange.clone():null;else return[new V(0)];return[t]});O(Q,W,(t,n)=>(t.oldRange&&(t.oldRange=t.oldRange._getTransformedByMergeOperation(n)),t.newRange&&(t.newRange=t.newRange._getTransformedByMergeOperation(n)),[t]));O(Q,$,(t,n)=>{const e=[t];if(t.oldRange&&(t.oldRange=w._createFromRanges(t.oldRange._getTransformedByMoveOperation(n))),t.newRange){const s=t.newRange._getTransformedByMoveOperation(n);t.newRange=s[0];for(let i=1;i<s.length;i++){const r=t.clone();r.oldRange=null,r.newRange=s[i],r.baseVersion=-1,e.push(r)}}return e});O(Q,F,(t,n,e)=>{if(t.oldRange&&(t.oldRange=t.oldRange._getTransformedBySplitOperation(n)),t.newRange){if(e.abRelation){const s=t.newRange._getTransformedBySplitOperation(n);return t.newRange.start.isEqual(n.splitPosition)&&e.abRelation.wasStartBeforeMergedElement?t.newRange.start=x._createAt(n.insertionPosition):t.newRange.start.isEqual(n.splitPosition)&&!e.abRelation.wasInLeftElement?t.newRange.start=x._createAt(n.moveTargetPosition):t.newRange.start=s.start,t.newRange.end.isEqual(n.splitPosition)&&e.abRelation.wasInRightElement?t.newRange.end=x._createAt(n.moveTargetPosition):t.newRange.end.isEqual(n.splitPosition)&&e.abRelation.wasEndBeforeMergedElement?t.newRange.end=x._createAt(n.insertionPosition):t.newRange.end=s.end,[t]}t.newRange=t.newRange._getTransformedBySplitOperation(n)}return[t]});O(W,J,(t,n)=>(t.sourcePosition.hasSameParentAs(n.position)&&(t.howMany+=n.howMany),t.sourcePosition=t.sourcePosition._getTransformedByInsertOperation(n),t.targetPosition=t.targetPosition._getTransformedByInsertOperation(n),[t]));O(W,W,(t,n,e)=>{if(t.sourcePosition.isEqual(n.sourcePosition)&&t.targetPosition.isEqual(n.targetPosition))if(e.bWasUndone){const s=n.graveyardPosition.path.slice();return s.push(0),t.sourcePosition=new x(n.graveyardPosition.root,s),t.howMany=0,[t]}else return[new V(0)];if(t.sourcePosition.isEqual(n.sourcePosition)&&!t.targetPosition.isEqual(n.targetPosition)&&!e.bWasUndone&&e.abRelation!="splitAtSource"){const s=t.targetPosition.root.rootName=="$graveyard",i=n.targetPosition.root.rootName=="$graveyard";if(i&&!s||!(s&&!i)&&e.aIsStrong){const l=n.targetPosition._getTransformedByMergeOperation(n),c=t.targetPosition._getTransformedByMergeOperation(n);return[new $(l,t.howMany,c,0)]}else return[new V(0)]}return t.sourcePosition.hasSameParentAs(n.targetPosition)&&(t.howMany+=n.howMany),t.sourcePosition=t.sourcePosition._getTransformedByMergeOperation(n),t.targetPosition=t.targetPosition._getTransformedByMergeOperation(n),(!t.graveyardPosition.isEqual(n.graveyardPosition)||!e.aIsStrong)&&(t.graveyardPosition=t.graveyardPosition._getTransformedByMergeOperation(n)),[t]});O(W,$,(t,n,e)=>{const s=w._createFromPositionAndShift(n.sourcePosition,n.howMany);return n.type=="remove"&&!e.bWasUndone&&t.deletionPosition.hasSameParentAs(n.sourcePosition)&&s.containsPosition(t.sourcePosition)?[new V(0)]:(n.sourcePosition.getShiftedBy(n.howMany).isEqual(t.sourcePosition)?t.sourcePosition.stickiness="toNone":n.targetPosition.isEqual(t.sourcePosition)&&e.abRelation=="mergeSourceAffected"?t.sourcePosition.stickiness="toNext":n.sourcePosition.isEqual(t.targetPosition)?(t.targetPosition.stickiness="toNone",t.howMany-=n.howMany):n.targetPosition.isEqual(t.targetPosition)&&e.abRelation=="mergeTargetWasBefore"?(t.targetPosition.stickiness="toPrevious",t.howMany+=n.howMany):(t.sourcePosition.hasSameParentAs(n.targetPosition)&&(t.howMany+=n.howMany),t.sourcePosition.hasSameParentAs(n.sourcePosition)&&(t.howMany-=n.howMany)),t.sourcePosition=t.sourcePosition._getTransformedByMoveOperation(n),t.targetPosition=t.targetPosition._getTransformedByMoveOperation(n),t.sourcePosition.stickiness="toPrevious",t.targetPosition.stickiness="toNext",t.graveyardPosition.isEqual(n.targetPosition)||(t.graveyardPosition=t.graveyardPosition._getTransformedByMoveOperation(n)),[t])});O(W,F,(t,n,e)=>{if(n.graveyardPosition&&(t.graveyardPosition=t.graveyardPosition._getTransformedByDeletion(n.graveyardPosition,1),t.deletionPosition.isEqual(n.graveyardPosition)&&(t.howMany=n.howMany)),t.targetPosition.isEqual(n.splitPosition)&&(n.graveyardPosition&&t.deletionPosition.isEqual(n.graveyardPosition)||e.abRelation=="mergeTargetNotMoved"))return t.sourcePosition=t.sourcePosition._getTransformedBySplitOperation(n),[t];if(t.sourcePosition.isEqual(n.splitPosition)){if(e.abRelation=="mergeSourceNotMoved")return t.howMany=0,t.targetPosition=t.targetPosition._getTransformedBySplitOperation(n),[t];if(e.abRelation=="mergeSameElement"||t.sourcePosition.offset>0)return t.sourcePosition=n.moveTargetPosition.clone(),t.targetPosition=t.targetPosition._getTransformedBySplitOperation(n),[t]}return t.sourcePosition.hasSameParentAs(n.splitPosition)&&(t.howMany=n.splitPosition.offset),t.sourcePosition=t.sourcePosition._getTransformedBySplitOperation(n),t.targetPosition=t.targetPosition._getTransformedBySplitOperation(n),[t]});O($,J,(t,n)=>{const s=w._createFromPositionAndShift(t.sourcePosition,t.howMany)._getTransformedByInsertOperation(n,!1)[0];return t.sourcePosition=s.start,t.howMany=s.end.offset-s.start.offset,t.targetPosition.isEqual(n.position)||(t.targetPosition=t.targetPosition._getTransformedByInsertOperation(n)),[t]});O($,$,(t,n,e)=>{const s=w._createFromPositionAndShift(t.sourcePosition,t.howMany),i=w._createFromPositionAndShift(n.sourcePosition,n.howMany);let r=e.aIsStrong,o=!e.aIsStrong;e.abRelation=="insertBefore"||e.baRelation=="insertAfter"?o=!0:(e.abRelation=="insertAfter"||e.baRelation=="insertBefore")&&(o=!1);let a;if(t.targetPosition.isEqual(n.targetPosition)&&o?a=t.targetPosition._getTransformedByDeletion(n.sourcePosition,n.howMany):a=t.targetPosition._getTransformedByMove(n.sourcePosition,n.targetPosition,n.howMany),ws(t,n)&&ws(n,t))return[n.getReversed()];if(s.containsPosition(n.targetPosition)&&s.containsRange(i,!0))return s.start=s.start._getTransformedByMove(n.sourcePosition,n.targetPosition,n.howMany),s.end=s.end._getTransformedByMove(n.sourcePosition,n.targetPosition,n.howMany),Ve([s],a);if(i.containsPosition(t.targetPosition)&&i.containsRange(s,!0))return s.start=s.start._getCombined(n.sourcePosition,n.getMovedRangeStart()),s.end=s.end._getCombined(n.sourcePosition,n.getMovedRangeStart()),Ve([s],a);const f=G(t.sourcePosition.getParentPath(),n.sourcePosition.getParentPath());if(f=="prefix"||f=="extension")return s.start=s.start._getTransformedByMove(n.sourcePosition,n.targetPosition,n.howMany),s.end=s.end._getTransformedByMove(n.sourcePosition,n.targetPosition,n.howMany),Ve([s],a);t.type=="remove"&&n.type!="remove"&&!e.aWasUndone&&!e.forceWeakRemove?r=!0:t.type!="remove"&&n.type=="remove"&&!e.bWasUndone&&!e.forceWeakRemove&&(r=!1);const p=[],y=s.getDifference(i);for(const P of y){P.start=P.start._getTransformedByDeletion(n.sourcePosition,n.howMany),P.end=P.end._getTransformedByDeletion(n.sourcePosition,n.howMany);const R=G(P.start.getParentPath(),n.getMovedRangeStart().getParentPath())=="same",C=P._getTransformedByInsertion(n.getMovedRangeStart(),n.howMany,R);p.push(...C)}const _=s.getIntersection(i);return _!==null&&r&&(_.start=_.start._getCombined(n.sourcePosition,n.getMovedRangeStart()),_.end=_.end._getCombined(n.sourcePosition,n.getMovedRangeStart()),p.length===0?p.push(_):p.length==1?i.start.isBefore(s.start)||i.start.isEqual(s.start)?p.unshift(_):p.push(_):p.splice(1,0,_)),p.length===0?[new V(t.baseVersion)]:Ve(p,a)});O($,F,(t,n,e)=>{let s=t.targetPosition.clone();(!t.targetPosition.isEqual(n.insertionPosition)||!n.graveyardPosition||e.abRelation=="moveTargetAfter")&&(s=t.targetPosition._getTransformedBySplitOperation(n));const i=w._createFromPositionAndShift(t.sourcePosition,t.howMany);if(i.end.isEqual(n.insertionPosition))return n.graveyardPosition||t.howMany++,t.targetPosition=s,[t];if(i.start.hasSameParentAs(n.splitPosition)&&i.containsPosition(n.splitPosition)){let a=new w(n.splitPosition,i.end);a=a._getTransformedBySplitOperation(n);const l=[new w(i.start,n.splitPosition),a];return Ve(l,s)}t.targetPosition.isEqual(n.splitPosition)&&e.abRelation=="insertAtSource"&&(s=n.moveTargetPosition),t.targetPosition.isEqual(n.insertionPosition)&&e.abRelation=="insertBetween"&&(s=t.targetPosition);const o=[i._getTransformedBySplitOperation(n)];if(n.graveyardPosition){const a=i.start.isEqual(n.graveyardPosition)||i.containsPosition(n.graveyardPosition);t.howMany>1&&a&&!e.aWasUndone&&o.push(w._createFromPositionAndShift(n.insertionPosition,1))}return Ve(o,s)});O($,W,(t,n,e)=>{const s=w._createFromPositionAndShift(t.sourcePosition,t.howMany);if(n.deletionPosition.hasSameParentAs(t.sourcePosition)&&s.containsPosition(n.sourcePosition)){if(t.type=="remove"&&!e.forceWeakRemove){if(!e.aWasUndone){const o=[];let a=n.graveyardPosition.clone(),l=n.targetPosition._getTransformedByMergeOperation(n);const c=t.targetPosition.getTransformedByOperation(n);t.howMany>1&&(o.push(new $(t.sourcePosition,t.howMany-1,c,0)),a=a._getTransformedByMove(t.sourcePosition,c,t.howMany-1),l=l._getTransformedByMove(t.sourcePosition,c,t.howMany-1));const f=n.deletionPosition._getCombined(t.sourcePosition,c),p=new $(a,1,f,0),y=p.getMovedRangeStart().path.slice();y.push(0);const _=new x(p.targetPosition.root,y);l=l._getTransformedByMove(a,f,1);const P=new $(l,n.howMany,_,0);return o.push(p),o.push(P),o}}else if(t.howMany==1)return e.bWasUndone?(t.sourcePosition=n.graveyardPosition.clone(),t.targetPosition=t.targetPosition._getTransformedByMergeOperation(n),[t]):[new V(0)]}const r=w._createFromPositionAndShift(t.sourcePosition,t.howMany)._getTransformedByMergeOperation(n);return t.sourcePosition=r.start,t.howMany=r.end.offset-r.start.offset,t.targetPosition=t.targetPosition._getTransformedByMergeOperation(n),[t]});O(H,J,(t,n)=>(t.position=t.position._getTransformedByInsertOperation(n),[t]));O(H,W,(t,n)=>t.position.isEqual(n.deletionPosition)?(t.position=n.graveyardPosition.clone(),t.position.stickiness="toNext",[t]):(t.position=t.position._getTransformedByMergeOperation(n),[t]));O(H,$,(t,n)=>(t.position=t.position._getTransformedByMoveOperation(n),[t]));O(H,H,(t,n,e)=>{if(t.position.isEqual(n.position))if(e.aIsStrong)t.oldName=n.newName;else return[new V(0)];return[t]});O(H,F,(t,n)=>{const e=t.position.path,s=n.splitPosition.getParentPath();if(G(e,s)=="same"&&!n.graveyardPosition){const i=new H(t.position.getShiftedBy(1),t.oldName,t.newName,0);return[t,i]}return t.position=t.position._getTransformedBySplitOperation(n),[t]});O(xe,xe,(t,n,e)=>{if(t.root===n.root&&t.key===n.key){if(!e.aIsStrong||t.newValue===n.newValue)return[new V(0)];t.oldValue=n.newValue}return[t]});O(ve,ve,(t,n)=>t.rootName===n.rootName&&t.isAdd===n.isAdd?[new V(0)]:[t]);O(F,J,(t,n)=>(t.splitPosition.hasSameParentAs(n.position)&&t.splitPosition.offset<n.position.offset&&(t.howMany+=n.howMany),t.splitPosition=t.splitPosition._getTransformedByInsertOperation(n),t.insertionPosition=t.insertionPosition._getTransformedByInsertOperation(n),[t]));O(F,W,(t,n,e)=>{if(!t.graveyardPosition&&!e.bWasUndone&&t.splitPosition.hasSameParentAs(n.sourcePosition)){const s=n.graveyardPosition.path.slice();s.push(0);const i=new x(n.graveyardPosition.root,s),r=F.getInsertionPosition(new x(n.graveyardPosition.root,s)),o=new F(i,0,r,null,0);return t.splitPosition=t.splitPosition._getTransformedByMergeOperation(n),t.insertionPosition=F.getInsertionPosition(t.splitPosition),t.graveyardPosition=o.insertionPosition.clone(),t.graveyardPosition.stickiness="toNext",[o,t]}return t.splitPosition.hasSameParentAs(n.deletionPosition)&&!t.splitPosition.isAfter(n.deletionPosition)&&t.howMany--,t.splitPosition.hasSameParentAs(n.targetPosition)&&(t.howMany+=n.howMany),t.splitPosition=t.splitPosition._getTransformedByMergeOperation(n),t.insertionPosition=F.getInsertionPosition(t.splitPosition),t.graveyardPosition&&(t.graveyardPosition=t.graveyardPosition._getTransformedByMergeOperation(n)),[t]});O(F,$,(t,n,e)=>{const s=w._createFromPositionAndShift(n.sourcePosition,n.howMany);if(t.graveyardPosition){const r=s.start.isEqual(t.graveyardPosition)||s.containsPosition(t.graveyardPosition);if(!e.bWasUndone&&r){const o=t.splitPosition._getTransformedByMoveOperation(n),a=t.graveyardPosition._getTransformedByMoveOperation(n),l=a.path.slice();l.push(0);const c=new x(a.root,l);return[new $(o,t.howMany,c,0)]}t.graveyardPosition=t.graveyardPosition._getTransformedByMoveOperation(n)}const i=t.splitPosition.isEqual(n.targetPosition);if(i&&(e.baRelation=="insertAtSource"||e.abRelation=="splitBefore"))return t.howMany+=n.howMany,t.splitPosition=t.splitPosition._getTransformedByDeletion(n.sourcePosition,n.howMany),t.insertionPosition=F.getInsertionPosition(t.splitPosition),[t];if(i&&e.abRelation&&e.abRelation.howMany){const{howMany:r,offset:o}=e.abRelation;return t.howMany+=r,t.splitPosition=t.splitPosition.getShiftedBy(o),[t]}if(t.splitPosition.hasSameParentAs(n.sourcePosition)&&s.containsPosition(t.splitPosition)){const r=n.howMany-(t.splitPosition.offset-n.sourcePosition.offset);return t.howMany-=r,t.splitPosition.hasSameParentAs(n.targetPosition)&&t.splitPosition.offset<n.targetPosition.offset&&(t.howMany+=n.howMany),t.splitPosition=n.sourcePosition.clone(),t.insertionPosition=F.getInsertionPosition(t.splitPosition),[t]}return n.sourcePosition.isEqual(n.targetPosition)||(t.splitPosition.hasSameParentAs(n.sourcePosition)&&t.splitPosition.offset<=n.sourcePosition.offset&&(t.howMany-=n.howMany),t.splitPosition.hasSameParentAs(n.targetPosition)&&t.splitPosition.offset<n.targetPosition.offset&&(t.howMany+=n.howMany)),t.splitPosition.stickiness="toNone",t.splitPosition=t.splitPosition._getTransformedByMoveOperation(n),t.splitPosition.stickiness="toNext",t.graveyardPosition?t.insertionPosition=t.insertionPosition._getTransformedByMoveOperation(n):t.insertionPosition=F.getInsertionPosition(t.splitPosition),[t]});O(F,F,(t,n,e)=>{if(t.splitPosition.isEqual(n.splitPosition)){if(!t.graveyardPosition&&!n.graveyardPosition)return[new V(0)];if(t.graveyardPosition&&n.graveyardPosition&&t.graveyardPosition.isEqual(n.graveyardPosition))return[new V(0)];if(e.abRelation=="splitBefore")return t.howMany=0,t.graveyardPosition=t.graveyardPosition._getTransformedBySplitOperation(n),[t]}if(t.graveyardPosition&&n.graveyardPosition&&t.graveyardPosition.isEqual(n.graveyardPosition)){const s=t.splitPosition.root.rootName=="$graveyard",i=n.splitPosition.root.rootName=="$graveyard";if(i&&!s||!(s&&!i)&&e.aIsStrong){const l=[];return n.howMany&&l.push(new $(n.moveTargetPosition,n.howMany,n.splitPosition,0)),t.howMany&&l.push(new $(t.splitPosition,t.howMany,t.moveTargetPosition,0)),l}else return[new V(0)]}if(t.graveyardPosition&&(t.graveyardPosition=t.graveyardPosition._getTransformedBySplitOperation(n)),t.splitPosition.isEqual(n.insertionPosition)&&e.abRelation=="splitBefore")return t.howMany++,[t];if(n.splitPosition.isEqual(t.insertionPosition)&&e.baRelation=="splitBefore"){const s=n.insertionPosition.path.slice();s.push(0);const i=new x(n.insertionPosition.root,s),r=new $(t.insertionPosition,1,i,0);return[t,r]}return t.splitPosition.hasSameParentAs(n.splitPosition)&&t.splitPosition.offset<n.splitPosition.offset&&(t.howMany-=n.howMany),t.splitPosition=t.splitPosition._getTransformedBySplitOperation(n),t.insertionPosition=F.getInsertionPosition(t.splitPosition),[t]});function ws(t,n){return t.targetPosition._getTransformedByDeletion(n.sourcePosition,n.howMany)===null}function Ve(t,n){const e=[];for(let s=0;s<t.length;s++){const i=t[s],r=new $(i.start,i.end.offset-i.start.offset,n,0);e.push(r);for(let o=s+1;o<t.length;o++)t[o]=t[o]._getTransformedByMove(r.sourcePosition,r.targetPosition,r.howMany)[0];n=n._getTransformedByMove(r.sourcePosition,r.targetPosition,r.howMany)}return e}class au extends q(x){constructor(n,e,s="toNone"){if(super(n,e,s),!this.root.is("rootElement"))throw new m("model-liveposition-root-not-rootelement",n);lu.call(this)}detach(){this.stopListening()}toPosition(){return new x(this.root,this.path.slice(),this.stickiness)}static fromPosition(n,e){return new this(n.root,n.path.slice(),e||n.stickiness)}}au.prototype.is=function(t){return t==="livePosition"||t==="model:livePosition"||t=="position"||t==="model:position"};function lu(){this.listenTo(this.root.document.model,"applyOperation",(t,n)=>{const e=n[0];e.isDocumentOperation&&cu.call(this,e)},{priority:"low"})}function cu(t){const n=this.getTransformedByOperation(t);if(!this.isEqual(n)){const e=this.toPosition();this.path=n.path,this.root=n.root,this.fire("change",e)}}class hu extends ne{constructor(e,s,i="main"){super(s);h(this,"rootName");h(this,"_document");h(this,"_isAttached",!0);h(this,"_isLoaded",!0);this._document=e,this.rootName=i}get document(){return this._document}isAttached(){return this._isAttached}toJSON(){return this.rootName}}hu.prototype.is=function(t,n){return n?n===this.name&&(t==="rootElement"||t==="model:rootElement"||t==="element"||t==="model:element"):t==="rootElement"||t==="model:rootElement"||t==="element"||t==="model:element"||t==="node"||t==="model:node"};class uu extends q(Ae){constructor(e,s,i,r){super();h(this,"name");h(this,"_managedUsingOperations");h(this,"_affectsData");h(this,"_liveRange");this.name=e,this._liveRange=this._attachLiveRange(s),this._managedUsingOperations=i,this._affectsData=r}get managedUsingOperations(){if(!this._liveRange)throw new m("marker-destroyed",this);return this._managedUsingOperations}get affectsData(){if(!this._liveRange)throw new m("marker-destroyed",this);return this._affectsData}getData(){return{range:this.getRange(),affectsData:this.affectsData,managedUsingOperations:this.managedUsingOperations}}getStart(){if(!this._liveRange)throw new m("marker-destroyed",this);return this._liveRange.start.clone()}getEnd(){if(!this._liveRange)throw new m("marker-destroyed",this);return this._liveRange.end.clone()}getRange(){if(!this._liveRange)throw new m("marker-destroyed",this);return this._liveRange.toRange()}_attachLiveRange(e){return this._liveRange&&this._detachLiveRange(),e.delegate("change:range").to(this),e.delegate("change:content").to(this),this._liveRange=e,e}_detachLiveRange(){this._liveRange.stopDelegating("change:range",this),this._liveRange.stopDelegating("change:content",this),this._liveRange.detach(),this._liveRange=null}}uu.prototype.is=function(t){return t==="marker"||t==="model:marker"};class Pn extends Ae{constructor(e){super();h(this,"markers",new Map);h(this,"_children",new ot);e&&this._insertChild(0,e)}[Symbol.iterator](){return this.getChildren()}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}get nextSibling(){return null}get previousSibling(){return null}get root(){return this}get parent(){return null}get document(){return null}isAttached(){return!1}getAncestors(){return[]}getChild(e){return this._children.getNode(e)}getChildAtOffset(e){return this._children.getNodeAtOffset(e)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(e){return this._children.getNodeIndex(e)}getChildStartOffset(e){return this._children.getNodeStartOffset(e)}getPath(){return[]}getNodeByPath(e){let s=this;for(const i of e)s=s.getChildAtOffset(i);return s}offsetToIndex(e){return this._children.offsetToIndex(e)}toJSON(){const e=[];for(const s of this._children)e.push(s.toJSON());return e}static fromJSON(e){const s=[];for(const i of e)i.name?s.push(ne.fromJSON(i)):s.push(j.fromJSON(i));return new Pn(s)}_appendChild(e){this._insertChild(this.childCount,e)}_insertChild(e,s){const i=fu(s);for(const r of i)r.parent!==null&&r._remove(),r.parent=this;this._children._insertNodes(e,i)}_removeChildren(e,s=1){const i=this._children._removeNodes(e,s);for(const r of i)r.parent=null;return i}}Pn.prototype.is=function(t){return t==="documentFragment"||t==="model:documentFragment"};function fu(t){return typeof t=="string"?[new j(t)]:(we(t)||(t=[t]),Array.from(t).map(n=>typeof n=="string"?new j(n):n instanceof Me?new j(n.data,n.getAttributes()):n))}var du={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};const yt=du,Pi={};for(const t of Object.keys(yt))Pi[yt[t]]=t;const v={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};var ki=v;for(const t of Object.keys(v)){if(!("channels"in v[t]))throw new Error("missing channels property: "+t);if(!("labels"in v[t]))throw new Error("missing channel labels property: "+t);if(v[t].labels.length!==v[t].channels)throw new Error("channel and label counts mismatch: "+t);const{channels:n,labels:e}=v[t];delete v[t].channels,delete v[t].labels,Object.defineProperty(v[t],"channels",{value:n}),Object.defineProperty(v[t],"labels",{value:e})}v.rgb.hsl=function(t){const n=t[0]/255,e=t[1]/255,s=t[2]/255,i=Math.min(n,e,s),r=Math.max(n,e,s),o=r-i;let a,l;r===i?a=0:n===r?a=(e-s)/o:e===r?a=2+(s-n)/o:s===r&&(a=4+(n-e)/o),a=Math.min(a*60,360),a<0&&(a+=360);const c=(i+r)/2;return r===i?l=0:c<=.5?l=o/(r+i):l=o/(2-r-i),[a,l*100,c*100]};v.rgb.hsv=function(t){let n,e,s,i,r;const o=t[0]/255,a=t[1]/255,l=t[2]/255,c=Math.max(o,a,l),f=c-Math.min(o,a,l),p=function(y){return(c-y)/6/f+1/2};return f===0?(i=0,r=0):(r=f/c,n=p(o),e=p(a),s=p(l),o===c?i=s-e:a===c?i=1/3+n-s:l===c&&(i=2/3+e-n),i<0?i+=1:i>1&&(i-=1)),[i*360,r*100,c*100]};v.rgb.hwb=function(t){const n=t[0],e=t[1];let s=t[2];const i=v.rgb.hsl(t)[0],r=1/255*Math.min(n,Math.min(e,s));return s=1-1/255*Math.max(n,Math.max(e,s)),[i,r*100,s*100]};v.rgb.cmyk=function(t){const n=t[0]/255,e=t[1]/255,s=t[2]/255,i=Math.min(1-n,1-e,1-s),r=(1-n-i)/(1-i)||0,o=(1-e-i)/(1-i)||0,a=(1-s-i)/(1-i)||0;return[r*100,o*100,a*100,i*100]};function gu(t,n){return(t[0]-n[0])**2+(t[1]-n[1])**2+(t[2]-n[2])**2}v.rgb.keyword=function(t){const n=Pi[t];if(n)return n;let e=1/0,s;for(const i of Object.keys(yt)){const r=yt[i],o=gu(t,r);o<e&&(e=o,s=i)}return s};v.keyword.rgb=function(t){return yt[t]};v.rgb.xyz=function(t){let n=t[0]/255,e=t[1]/255,s=t[2]/255;n=n>.04045?((n+.055)/1.055)**2.4:n/12.92,e=e>.04045?((e+.055)/1.055)**2.4:e/12.92,s=s>.04045?((s+.055)/1.055)**2.4:s/12.92;const i=n*.4124+e*.3576+s*.1805,r=n*.2126+e*.7152+s*.0722,o=n*.0193+e*.1192+s*.9505;return[i*100,r*100,o*100]};v.rgb.lab=function(t){const n=v.rgb.xyz(t);let e=n[0],s=n[1],i=n[2];e/=95.047,s/=100,i/=108.883,e=e>.008856?e**(1/3):7.787*e+16/116,s=s>.008856?s**(1/3):7.787*s+16/116,i=i>.008856?i**(1/3):7.787*i+16/116;const r=116*s-16,o=500*(e-s),a=200*(s-i);return[r,o,a]};v.hsl.rgb=function(t){const n=t[0]/360,e=t[1]/100,s=t[2]/100;let i,r,o;if(e===0)return o=s*255,[o,o,o];s<.5?i=s*(1+e):i=s+e-s*e;const a=2*s-i,l=[0,0,0];for(let c=0;c<3;c++)r=n+1/3*-(c-1),r<0&&r++,r>1&&r--,6*r<1?o=a+(i-a)*6*r:2*r<1?o=i:3*r<2?o=a+(i-a)*(2/3-r)*6:o=a,l[c]=o*255;return l};v.hsl.hsv=function(t){const n=t[0];let e=t[1]/100,s=t[2]/100,i=e;const r=Math.max(s,.01);s*=2,e*=s<=1?s:2-s,i*=r<=1?r:2-r;const o=(s+e)/2,a=s===0?2*i/(r+i):2*e/(s+e);return[n,a*100,o*100]};v.hsv.rgb=function(t){const n=t[0]/60,e=t[1]/100;let s=t[2]/100;const i=Math.floor(n)%6,r=n-Math.floor(n),o=255*s*(1-e),a=255*s*(1-e*r),l=255*s*(1-e*(1-r));switch(s*=255,i){case 0:return[s,l,o];case 1:return[a,s,o];case 2:return[o,s,l];case 3:return[o,a,s];case 4:return[l,o,s];case 5:return[s,o,a]}};v.hsv.hsl=function(t){const n=t[0],e=t[1]/100,s=t[2]/100,i=Math.max(s,.01);let r,o;o=(2-e)*s;const a=(2-e)*i;return r=e*i,r/=a<=1?a:2-a,r=r||0,o/=2,[n,r*100,o*100]};v.hwb.rgb=function(t){const n=t[0]/360;let e=t[1]/100,s=t[2]/100;const i=e+s;let r;i>1&&(e/=i,s/=i);const o=Math.floor(6*n),a=1-s;r=6*n-o,o&1&&(r=1-r);const l=e+r*(a-e);let c,f,p;switch(o){default:case 6:case 0:c=a,f=l,p=e;break;case 1:c=l,f=a,p=e;break;case 2:c=e,f=a,p=l;break;case 3:c=e,f=l,p=a;break;case 4:c=l,f=e,p=a;break;case 5:c=a,f=e,p=l;break}return[c*255,f*255,p*255]};v.cmyk.rgb=function(t){const n=t[0]/100,e=t[1]/100,s=t[2]/100,i=t[3]/100,r=1-Math.min(1,n*(1-i)+i),o=1-Math.min(1,e*(1-i)+i),a=1-Math.min(1,s*(1-i)+i);return[r*255,o*255,a*255]};v.xyz.rgb=function(t){const n=t[0]/100,e=t[1]/100,s=t[2]/100;let i,r,o;return i=n*3.2406+e*-1.5372+s*-.4986,r=n*-.9689+e*1.8758+s*.0415,o=n*.0557+e*-.204+s*1.057,i=i>.0031308?1.055*i**(1/2.4)-.055:i*12.92,r=r>.0031308?1.055*r**(1/2.4)-.055:r*12.92,o=o>.0031308?1.055*o**(1/2.4)-.055:o*12.92,i=Math.min(Math.max(0,i),1),r=Math.min(Math.max(0,r),1),o=Math.min(Math.max(0,o),1),[i*255,r*255,o*255]};v.xyz.lab=function(t){let n=t[0],e=t[1],s=t[2];n/=95.047,e/=100,s/=108.883,n=n>.008856?n**(1/3):7.787*n+16/116,e=e>.008856?e**(1/3):7.787*e+16/116,s=s>.008856?s**(1/3):7.787*s+16/116;const i=116*e-16,r=500*(n-e),o=200*(e-s);return[i,r,o]};v.lab.xyz=function(t){const n=t[0],e=t[1],s=t[2];let i,r,o;r=(n+16)/116,i=e/500+r,o=r-s/200;const a=r**3,l=i**3,c=o**3;return r=a>.008856?a:(r-16/116)/7.787,i=l>.008856?l:(i-16/116)/7.787,o=c>.008856?c:(o-16/116)/7.787,i*=95.047,r*=100,o*=108.883,[i,r,o]};v.lab.lch=function(t){const n=t[0],e=t[1],s=t[2];let i;i=Math.atan2(s,e)*360/2/Math.PI,i<0&&(i+=360);const o=Math.sqrt(e*e+s*s);return[n,o,i]};v.lch.lab=function(t){const n=t[0],e=t[1],i=t[2]/360*2*Math.PI,r=e*Math.cos(i),o=e*Math.sin(i);return[n,r,o]};v.rgb.ansi16=function(t,n=null){const[e,s,i]=t;let r=n===null?v.rgb.hsv(t)[2]:n;if(r=Math.round(r/50),r===0)return 30;let o=30+(Math.round(i/255)<<2|Math.round(s/255)<<1|Math.round(e/255));return r===2&&(o+=60),o};v.hsv.ansi16=function(t){return v.rgb.ansi16(v.hsv.rgb(t),t[2])};v.rgb.ansi256=function(t){const n=t[0],e=t[1],s=t[2];return n===e&&e===s?n<8?16:n>248?231:Math.round((n-8)/247*24)+232:16+36*Math.round(n/255*5)+6*Math.round(e/255*5)+Math.round(s/255*5)};v.ansi16.rgb=function(t){let n=t%10;if(n===0||n===7)return t>50&&(n+=3.5),n=n/10.5*255,[n,n,n];const e=(~~(t>50)+1)*.5,s=(n&1)*e*255,i=(n>>1&1)*e*255,r=(n>>2&1)*e*255;return[s,i,r]};v.ansi256.rgb=function(t){if(t>=232){const r=(t-232)*10+8;return[r,r,r]}t-=16;let n;const e=Math.floor(t/36)/5*255,s=Math.floor((n=t%36)/6)/5*255,i=n%6/5*255;return[e,s,i]};v.rgb.hex=function(t){const e=(((Math.round(t[0])&255)<<16)+((Math.round(t[1])&255)<<8)+(Math.round(t[2])&255)).toString(16).toUpperCase();return"000000".substring(e.length)+e};v.hex.rgb=function(t){const n=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!n)return[0,0,0];let e=n[0];n[0].length===3&&(e=e.split("").map(a=>a+a).join(""));const s=parseInt(e,16),i=s>>16&255,r=s>>8&255,o=s&255;return[i,r,o]};v.rgb.hcg=function(t){const n=t[0]/255,e=t[1]/255,s=t[2]/255,i=Math.max(Math.max(n,e),s),r=Math.min(Math.min(n,e),s),o=i-r;let a,l;return o<1?a=r/(1-o):a=0,o<=0?l=0:i===n?l=(e-s)/o%6:i===e?l=2+(s-n)/o:l=4+(n-e)/o,l/=6,l%=1,[l*360,o*100,a*100]};v.hsl.hcg=function(t){const n=t[1]/100,e=t[2]/100,s=e<.5?2*n*e:2*n*(1-e);let i=0;return s<1&&(i=(e-.5*s)/(1-s)),[t[0],s*100,i*100]};v.hsv.hcg=function(t){const n=t[1]/100,e=t[2]/100,s=n*e;let i=0;return s<1&&(i=(e-s)/(1-s)),[t[0],s*100,i*100]};v.hcg.rgb=function(t){const n=t[0]/360,e=t[1]/100,s=t[2]/100;if(e===0)return[s*255,s*255,s*255];const i=[0,0,0],r=n%1*6,o=r%1,a=1-o;let l=0;switch(Math.floor(r)){case 0:i[0]=1,i[1]=o,i[2]=0;break;case 1:i[0]=a,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=o;break;case 3:i[0]=0,i[1]=a,i[2]=1;break;case 4:i[0]=o,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=a}return l=(1-e)*s,[(e*i[0]+l)*255,(e*i[1]+l)*255,(e*i[2]+l)*255]};v.hcg.hsv=function(t){const n=t[1]/100,e=t[2]/100,s=n+e*(1-n);let i=0;return s>0&&(i=n/s),[t[0],i*100,s*100]};v.hcg.hsl=function(t){const n=t[1]/100,s=t[2]/100*(1-n)+.5*n;let i=0;return s>0&&s<.5?i=n/(2*s):s>=.5&&s<1&&(i=n/(2*(1-s))),[t[0],i*100,s*100]};v.hcg.hwb=function(t){const n=t[1]/100,e=t[2]/100,s=n+e*(1-n);return[t[0],(s-n)*100,(1-s)*100]};v.hwb.hcg=function(t){const n=t[1]/100,s=1-t[2]/100,i=s-n;let r=0;return i<1&&(r=(s-i)/(1-i)),[t[0],i*100,r*100]};v.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]};v.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]};v.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]};v.gray.hsl=function(t){return[0,0,t[0]]};v.gray.hsv=v.gray.hsl;v.gray.hwb=function(t){return[0,100,t[0]]};v.gray.cmyk=function(t){return[0,0,0,t[0]]};v.gray.lab=function(t){return[t[0],0,0]};v.gray.hex=function(t){const n=Math.round(t[0]/100*255)&255,s=((n<<16)+(n<<8)+n).toString(16).toUpperCase();return"000000".substring(s.length)+s};v.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]};const Rt=ki;function pu(){const t={},n=Object.keys(Rt);for(let e=n.length,s=0;s<e;s++)t[n[s]]={distance:-1,parent:null};return t}function mu(t){const n=pu(),e=[t];for(n[t].distance=0;e.length;){const s=e.pop(),i=Object.keys(Rt[s]);for(let r=i.length,o=0;o<r;o++){const a=i[o],l=n[a];l.distance===-1&&(l.distance=n[s].distance+1,l.parent=s,e.unshift(a))}}return n}function _u(t,n){return function(e){return n(t(e))}}function yu(t,n){const e=[n[t].parent,t];let s=Rt[n[t].parent][t],i=n[t].parent;for(;n[i].parent;)e.unshift(n[i].parent),s=_u(Rt[n[i].parent][i],s),i=n[i].parent;return s.conversion=e,s}var wu=function(t){const n=mu(t),e={},s=Object.keys(n);for(let i=s.length,r=0;r<i;r++){const o=s[r];n[o].parent!==null&&(e[o]=yu(o,n))}return e};const an=ki,bu=wu,et={},xu=Object.keys(an);function vu(t){const n=function(...e){const s=e[0];return s==null?s:(s.length>1&&(e=s),t(e))};return"conversion"in t&&(n.conversion=t.conversion),n}function Pu(t){const n=function(...e){const s=e[0];if(s==null)return s;s.length>1&&(e=s);const i=t(e);if(typeof i=="object")for(let r=i.length,o=0;o<r;o++)i[o]=Math.round(i[o]);return i};return"conversion"in t&&(n.conversion=t.conversion),n}xu.forEach(t=>{et[t]={},Object.defineProperty(et[t],"channels",{value:an[t].channels}),Object.defineProperty(et[t],"labels",{value:an[t].labels});const n=bu(t);Object.keys(n).forEach(s=>{const i=n[s];et[t][s]=Pu(i),et[t][s].raw=vu(i)})});/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */var ku='<svg viewBox="0 0 10 8" xmlns="http://www.w3.org/2000/svg"><path d="M9.055.263v3.972h-6.77M1 4.216l2-2.038m-2 2 2 2.038"/></svg>';new DOMParser().parseFromString(ku,"image/svg+xml").firstChild;/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Su=[{listStyle:"disc",typeAttribute:"disc",listType:"bulleted"},{listStyle:"circle",typeAttribute:"circle",listType:"bulleted"},{listStyle:"square",typeAttribute:"square",listType:"bulleted"},{listStyle:"decimal",typeAttribute:"1",listType:"numbered"},{listStyle:"decimal-leading-zero",typeAttribute:null,listType:"numbered"},{listStyle:"lower-roman",typeAttribute:"i",listType:"numbered"},{listStyle:"upper-roman",typeAttribute:"I",listType:"numbered"},{listStyle:"lower-alpha",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-alpha",typeAttribute:"A",listType:"numbered"},{listStyle:"lower-latin",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-latin",typeAttribute:"A",listType:"numbered"}];for(const{listStyle:t,typeAttribute:n,listType:e}of Su);function Si(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}let Ge=Si();function Au(t){Ge=t}const Tu=/[&<>"']/,Eu=/[&<>"']/g,Ou=/[<>"']|&(?!#?\w+;)/,Ru=/[<>"']|&(?!#?\w+;)/g,Cu={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},bs=t=>Cu[t];function D(t,n){if(n){if(Tu.test(t))return t.replace(Eu,bs)}else if(Ou.test(t))return t.replace(Ru,bs);return t}const Nu=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function Ai(t){return t.replace(Nu,(n,e)=>(e=e.toLowerCase(),e==="colon"?":":e.charAt(0)==="#"?e.charAt(1)==="x"?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):""))}const Mu=/(^|[^\[])\^/g;function M(t,n){t=t.source||t,n=n||"";const e={replace:(s,i)=>(i=i.source||i,i=i.replace(Mu,"$1"),t=t.replace(s,i),e),getRegex:()=>new RegExp(t,n)};return e}const Bu=/[^\w:]/g,$u=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function xs(t,n,e){if(t){let s;try{s=decodeURIComponent(Ai(e)).replace(Bu,"").toLowerCase()}catch{return null}if(s.indexOf("javascript:")===0||s.indexOf("vbscript:")===0||s.indexOf("data:")===0)return null}n&&!$u.test(e)&&(e=Lu(n,e));try{e=encodeURI(e).replace(/%25/g,"%")}catch{return null}return e}const Pt={},Iu=/^[^:]+:\/*[^/]*$/,ju=/^([^:]+:)[\s\S]*$/,Fu=/^([^:]+:\/*[^/]*)[\s\S]*$/;function Lu(t,n){Pt[" "+t]||(Iu.test(t)?Pt[" "+t]=t+"/":Pt[" "+t]=At(t,"/",!0)),t=Pt[" "+t];const e=t.indexOf(":")===-1;return n.substring(0,2)==="//"?e?n:t.replace(ju,"$1")+n:n.charAt(0)==="/"?e?n:t.replace(Fu,"$1")+n:t+n}const Ct={exec:function(){}};function ie(t){let n=1,e,s;for(;n<arguments.length;n++){e=arguments[n];for(s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t}function vs(t,n){const e=t.replace(/\|/g,(r,o,a)=>{let l=!1,c=o;for(;--c>=0&&a[c]==="\\";)l=!l;return l?"|":" |"}),s=e.split(/ \|/);let i=0;if(s[0].trim()||s.shift(),s.length>0&&!s[s.length-1].trim()&&s.pop(),s.length>n)s.splice(n);else for(;s.length<n;)s.push("");for(;i<s.length;i++)s[i]=s[i].trim().replace(/\\\|/g,"|");return s}function At(t,n,e){const s=t.length;if(s===0)return"";let i=0;for(;i<s;){const r=t.charAt(s-i-1);if(r===n&&!e)i++;else if(r!==n&&e)i++;else break}return t.substr(0,s-i)}function zu(t,n){if(t.indexOf(n[1])===-1)return-1;const e=t.length;let s=0,i=0;for(;i<e;i++)if(t[i]==="\\")i++;else if(t[i]===n[0])s++;else if(t[i]===n[1]&&(s--,s<0))return i;return-1}function Ti(t){t&&t.sanitize&&!t.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function Ps(t,n){if(n<1)return"";let e="";for(;n>1;)n&1&&(e+=t),n>>=1,t+=t;return e+t}function ks(t,n,e,s){const i=n.href,r=n.title?D(n.title):null,o=t[1].replace(/\\([\[\]])/g,"$1");if(t[0].charAt(0)!=="!"){s.state.inLink=!0;const a={type:"link",raw:e,href:i,title:r,text:o,tokens:s.inlineTokens(o,[])};return s.state.inLink=!1,a}else return{type:"image",raw:e,href:i,title:r,text:D(o)}}function Du(t,n){const e=t.match(/^(\s+)(?:```)/);if(e===null)return n;const s=e[1];return n.split(`
`).map(i=>{const r=i.match(/^\s+/);if(r===null)return i;const[o]=r;return o.length>=s.length?i.slice(s.length):i}).join(`
`)}class kn{constructor(n){this.options=n||Ge}space(n){const e=this.rules.block.newline.exec(n);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(n){const e=this.rules.block.code.exec(n);if(e){const s=e[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?s:At(s,`
`)}}}fences(n){const e=this.rules.block.fences.exec(n);if(e){const s=e[0],i=Du(s,e[3]||"");return{type:"code",raw:s,lang:e[2]?e[2].trim():e[2],text:i}}}heading(n){const e=this.rules.block.heading.exec(n);if(e){let s=e[2].trim();if(/#$/.test(s)){const r=At(s,"#");(this.options.pedantic||!r||/ $/.test(r))&&(s=r.trim())}const i={type:"heading",raw:e[0],depth:e[1].length,text:s,tokens:[]};return this.lexer.inline(i.text,i.tokens),i}}hr(n){const e=this.rules.block.hr.exec(n);if(e)return{type:"hr",raw:e[0]}}blockquote(n){const e=this.rules.block.blockquote.exec(n);if(e){const s=e[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:e[0],tokens:this.lexer.blockTokens(s,[]),text:s}}}list(n){let e=this.rules.block.list.exec(n);if(e){let s,i,r,o,a,l,c,f,p,y,_,P,R=e[1].trim();const C=R.length>1,T={type:"list",raw:"",ordered:C,start:C?+R.slice(0,-1):"",loose:!1,items:[]};R=C?`\\d{1,9}\\${R.slice(-1)}`:`\\${R}`,this.options.pedantic&&(R=C?R:"[*+-]");const g=new RegExp(`^( {0,3}${R})((?: [^\\n]*)?(?:\\n|$))`);for(;n&&(P=!1,!(!(e=g.exec(n))||this.rules.block.hr.test(n)));){if(s=e[0],n=n.substring(s.length),f=e[2].split(`
`,1)[0],p=n.split(`
`,1)[0],this.options.pedantic?(o=2,_=f.trimLeft()):(o=e[2].search(/[^ ]/),o=o>4?1:o,_=f.slice(o),o+=e[1].length),l=!1,!f&&/^ *$/.test(p)&&(s+=p+`
`,n=n.substring(p.length+1),P=!0),!P){const K=new RegExp(`^ {0,${Math.min(3,o-1)}}(?:[*+-]|\\d{1,9}[.)])`);for(;n&&(y=n.split(`
`,1)[0],f=y,this.options.pedantic&&(f=f.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!K.test(f));){if(f.search(/[^ ]/)>=o||!f.trim())_+=`
`+f.slice(o);else if(!l)_+=`
`+f;else break;!l&&!f.trim()&&(l=!0),s+=y+`
`,n=n.substring(y.length+1)}}T.loose||(c?T.loose=!0:/\n *\n *$/.test(s)&&(c=!0)),this.options.gfm&&(i=/^\[[ xX]\] /.exec(_),i&&(r=i[0]!=="[ ] ",_=_.replace(/^\[[ xX]\] +/,""))),T.items.push({type:"list_item",raw:s,task:!!i,checked:r,loose:!1,text:_}),T.raw+=s}T.items[T.items.length-1].raw=s.trimRight(),T.items[T.items.length-1].text=_.trimRight(),T.raw=T.raw.trimRight();const re=T.items.length;for(a=0;a<re;a++){this.lexer.state.top=!1,T.items[a].tokens=this.lexer.blockTokens(T.items[a].text,[]);const K=T.items[a].tokens.filter(he=>he.type==="space"),Z=K.every(he=>{const Le=he.raw.split("");let Te=0;for(const Ee of Le)if(Ee===`
`&&(Te+=1),Te>1)return!0;return!1});!T.loose&&K.length&&Z&&(T.loose=!0,T.items[a].loose=!0)}return T}}html(n){const e=this.rules.block.html.exec(n);if(e){const s={type:"html",raw:e[0],pre:!this.options.sanitizer&&(e[1]==="pre"||e[1]==="script"||e[1]==="style"),text:e[0]};return this.options.sanitize&&(s.type="paragraph",s.text=this.options.sanitizer?this.options.sanitizer(e[0]):D(e[0]),s.tokens=[],this.lexer.inline(s.text,s.tokens)),s}}def(n){const e=this.rules.block.def.exec(n);if(e)return e[3]&&(e[3]=e[3].substring(1,e[3].length-1)),{type:"def",tag:e[1].toLowerCase().replace(/\s+/g," "),raw:e[0],href:e[2],title:e[3]}}table(n){const e=this.rules.block.table.exec(n);if(e){const s={type:"table",header:vs(e[1]).map(i=>({text:i})),align:e[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:e[3]&&e[3].trim()?e[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(s.header.length===s.align.length){s.raw=e[0];let i=s.align.length,r,o,a,l;for(r=0;r<i;r++)/^ *-+: *$/.test(s.align[r])?s.align[r]="right":/^ *:-+: *$/.test(s.align[r])?s.align[r]="center":/^ *:-+ *$/.test(s.align[r])?s.align[r]="left":s.align[r]=null;for(i=s.rows.length,r=0;r<i;r++)s.rows[r]=vs(s.rows[r],s.header.length).map(c=>({text:c}));for(i=s.header.length,o=0;o<i;o++)s.header[o].tokens=[],this.lexer.inlineTokens(s.header[o].text,s.header[o].tokens);for(i=s.rows.length,o=0;o<i;o++)for(l=s.rows[o],a=0;a<l.length;a++)l[a].tokens=[],this.lexer.inlineTokens(l[a].text,l[a].tokens);return s}}}lheading(n){const e=this.rules.block.lheading.exec(n);if(e){const s={type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:[]};return this.lexer.inline(s.text,s.tokens),s}}paragraph(n){const e=this.rules.block.paragraph.exec(n);if(e){const s={type:"paragraph",raw:e[0],text:e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1],tokens:[]};return this.lexer.inline(s.text,s.tokens),s}}text(n){const e=this.rules.block.text.exec(n);if(e){const s={type:"text",raw:e[0],text:e[0],tokens:[]};return this.lexer.inline(s.text,s.tokens),s}}escape(n){const e=this.rules.inline.escape.exec(n);if(e)return{type:"escape",raw:e[0],text:D(e[1])}}tag(n){const e=this.rules.inline.tag.exec(n);if(e)return!this.lexer.state.inLink&&/^<a /i.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(e[0]):D(e[0]):e[0]}}link(n){const e=this.rules.inline.link.exec(n);if(e){const s=e[2].trim();if(!this.options.pedantic&&/^</.test(s)){if(!/>$/.test(s))return;const o=At(s.slice(0,-1),"\\");if((s.length-o.length)%2===0)return}else{const o=zu(e[2],"()");if(o>-1){const l=(e[0].indexOf("!")===0?5:4)+e[1].length+o;e[2]=e[2].substring(0,o),e[0]=e[0].substring(0,l).trim(),e[3]=""}}let i=e[2],r="";if(this.options.pedantic){const o=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);o&&(i=o[1],r=o[3])}else r=e[3]?e[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(this.options.pedantic&&!/>$/.test(s)?i=i.slice(1):i=i.slice(1,-1)),ks(e,{href:i&&i.replace(this.rules.inline._escapes,"$1"),title:r&&r.replace(this.rules.inline._escapes,"$1")},e[0],this.lexer)}}reflink(n,e){let s;if((s=this.rules.inline.reflink.exec(n))||(s=this.rules.inline.nolink.exec(n))){let i=(s[2]||s[1]).replace(/\s+/g," ");if(i=e[i.toLowerCase()],!i||!i.href){const r=s[0].charAt(0);return{type:"text",raw:r,text:r}}return ks(s,i,s[0],this.lexer)}}emStrong(n,e,s=""){let i=this.rules.inline.emStrong.lDelim.exec(n);if(!i||i[3]&&s.match(/[\p{L}\p{N}]/u))return;const r=i[1]||i[2]||"";if(!r||r&&(s===""||this.rules.inline.punctuation.exec(s))){const o=i[0].length-1;let a,l,c=o,f=0;const p=i[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(p.lastIndex=0,e=e.slice(-1*n.length+o);(i=p.exec(e))!=null;){if(a=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!a)continue;if(l=a.length,i[3]||i[4]){c+=l;continue}else if((i[5]||i[6])&&o%3&&!((o+l)%3)){f+=l;continue}if(c-=l,c>0)continue;if(l=Math.min(l,l+c+f),Math.min(o,l)%2){const _=n.slice(1,o+i.index+l);return{type:"em",raw:n.slice(0,o+i.index+l+1),text:_,tokens:this.lexer.inlineTokens(_,[])}}const y=n.slice(2,o+i.index+l-1);return{type:"strong",raw:n.slice(0,o+i.index+l+1),text:y,tokens:this.lexer.inlineTokens(y,[])}}}}codespan(n){const e=this.rules.inline.code.exec(n);if(e){let s=e[2].replace(/\n/g," ");const i=/[^ ]/.test(s),r=/^ /.test(s)&&/ $/.test(s);return i&&r&&(s=s.substring(1,s.length-1)),s=D(s,!0),{type:"codespan",raw:e[0],text:s}}}br(n){const e=this.rules.inline.br.exec(n);if(e)return{type:"br",raw:e[0]}}del(n){const e=this.rules.inline.del.exec(n);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2],[])}}autolink(n,e){const s=this.rules.inline.autolink.exec(n);if(s){let i,r;return s[2]==="@"?(i=D(this.options.mangle?e(s[1]):s[1]),r="mailto:"+i):(i=D(s[1]),r=i),{type:"link",raw:s[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}}}url(n,e){let s;if(s=this.rules.inline.url.exec(n)){let i,r;if(s[2]==="@")i=D(this.options.mangle?e(s[0]):s[0]),r="mailto:"+i;else{let o;do o=s[0],s[0]=this.rules.inline._backpedal.exec(s[0])[0];while(o!==s[0]);i=D(s[0]),s[1]==="www."?r="http://"+i:r=i}return{type:"link",raw:s[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(n,e){const s=this.rules.inline.text.exec(n);if(s){let i;return this.lexer.state.inRawBlock?i=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(s[0]):D(s[0]):s[0]:i=D(this.options.smartypants?e(s[0]):s[0]),{type:"text",raw:s[0],text:i}}}}const S={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)( [^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:Ct,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};S._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;S._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;S.def=M(S.def).replace("label",S._label).replace("title",S._title).getRegex();S.bullet=/(?:[*+-]|\d{1,9}[.)])/;S.listItemStart=M(/^( *)(bull) */).replace("bull",S.bullet).getRegex();S.list=M(S.list).replace(/bull/g,S.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+S.def.source+")").getRegex();S._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";S._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;S.html=M(S.html,"i").replace("comment",S._comment).replace("tag",S._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();S.paragraph=M(S._paragraph).replace("hr",S.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",S._tag).getRegex();S.blockquote=M(S.blockquote).replace("paragraph",S.paragraph).getRegex();S.normal=ie({},S);S.gfm=ie({},S.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"});S.gfm.table=M(S.gfm.table).replace("hr",S.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",S._tag).getRegex();S.gfm.paragraph=M(S._paragraph).replace("hr",S.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",S.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",S._tag).getRegex();S.pedantic=ie({},S.normal,{html:M(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",S._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Ct,paragraph:M(S.normal._paragraph).replace("hr",S.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",S.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const b={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:Ct,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:Ct,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};b._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~";b.punctuation=M(b.punctuation).replace(/punctuation/g,b._punctuation).getRegex();b.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g;b.escapedEmSt=/\\\*|\\_/g;b._comment=M(S._comment).replace("(?:-->|$)","-->").getRegex();b.emStrong.lDelim=M(b.emStrong.lDelim).replace(/punct/g,b._punctuation).getRegex();b.emStrong.rDelimAst=M(b.emStrong.rDelimAst,"g").replace(/punct/g,b._punctuation).getRegex();b.emStrong.rDelimUnd=M(b.emStrong.rDelimUnd,"g").replace(/punct/g,b._punctuation).getRegex();b._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g;b._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;b._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;b.autolink=M(b.autolink).replace("scheme",b._scheme).replace("email",b._email).getRegex();b._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;b.tag=M(b.tag).replace("comment",b._comment).replace("attribute",b._attribute).getRegex();b._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;b._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;b._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;b.link=M(b.link).replace("label",b._label).replace("href",b._href).replace("title",b._title).getRegex();b.reflink=M(b.reflink).replace("label",b._label).replace("ref",S._label).getRegex();b.nolink=M(b.nolink).replace("ref",S._label).getRegex();b.reflinkSearch=M(b.reflinkSearch,"g").replace("reflink",b.reflink).replace("nolink",b.nolink).getRegex();b.normal=ie({},b);b.pedantic=ie({},b.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:M(/^!?\[(label)\]\((.*?)\)/).replace("label",b._label).getRegex(),reflink:M(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",b._label).getRegex()});b.gfm=ie({},b.normal,{escape:M(b.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/});b.gfm.url=M(b.gfm.url,"i").replace("email",b.gfm._extended_email).getRegex();b.breaks=ie({},b.gfm,{br:M(b.br).replace("{2,}","*").getRegex(),text:M(b.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});function qu(t){return t.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function Ss(t){let n="",e,s;const i=t.length;for(e=0;e<i;e++)s=t.charCodeAt(e),Math.random()>.5&&(s="x"+s.toString(16)),n+="&#"+s+";";return n}class pe{constructor(n){this.tokens=[],this.tokens.links=Object.create(null),this.options=n||Ge,this.options.tokenizer=this.options.tokenizer||new kn,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const e={block:S.normal,inline:b.normal};this.options.pedantic?(e.block=S.pedantic,e.inline=b.pedantic):this.options.gfm&&(e.block=S.gfm,this.options.breaks?e.inline=b.breaks:e.inline=b.gfm),this.tokenizer.rules=e}static get rules(){return{block:S,inline:b}}static lex(n,e){return new pe(e).lex(n)}static lexInline(n,e){return new pe(e).inlineTokens(n)}lex(n){n=n.replace(/\r\n|\r/g,`
`).replace(/\t/g,"    "),this.blockTokens(n,this.tokens);let e;for(;e=this.inlineQueue.shift();)this.inlineTokens(e.src,e.tokens);return this.tokens}blockTokens(n,e=[]){this.options.pedantic&&(n=n.replace(/^ +$/gm,""));let s,i,r,o;for(;n;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>(s=a.call({lexer:this},n,e))?(n=n.substring(s.raw.length),e.push(s),!0):!1))){if(s=this.tokenizer.space(n)){n=n.substring(s.raw.length),s.raw.length===1&&e.length>0?e[e.length-1].raw+=`
`:e.push(s);continue}if(s=this.tokenizer.code(n)){n=n.substring(s.raw.length),i=e[e.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+s.raw,i.text+=`
`+s.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text):e.push(s);continue}if(s=this.tokenizer.fences(n)){n=n.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.heading(n)){n=n.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.hr(n)){n=n.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.blockquote(n)){n=n.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.list(n)){n=n.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.html(n)){n=n.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.def(n)){n=n.substring(s.raw.length),i=e[e.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+s.raw,i.text+=`
`+s.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text):this.tokens.links[s.tag]||(this.tokens.links[s.tag]={href:s.href,title:s.title});continue}if(s=this.tokenizer.table(n)){n=n.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.lheading(n)){n=n.substring(s.raw.length),e.push(s);continue}if(r=n,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const l=n.slice(1);let c;this.options.extensions.startBlock.forEach(function(f){c=f.call({lexer:this},l),typeof c=="number"&&c>=0&&(a=Math.min(a,c))}),a<1/0&&a>=0&&(r=n.substring(0,a+1))}if(this.state.top&&(s=this.tokenizer.paragraph(r))){i=e[e.length-1],o&&i.type==="paragraph"?(i.raw+=`
`+s.raw,i.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):e.push(s),o=r.length!==n.length,n=n.substring(s.raw.length);continue}if(s=this.tokenizer.text(n)){n=n.substring(s.raw.length),i=e[e.length-1],i&&i.type==="text"?(i.raw+=`
`+s.raw,i.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):e.push(s);continue}if(n){const a="Infinite loop on byte: "+n.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,e}inline(n,e){this.inlineQueue.push({src:n,tokens:e})}inlineTokens(n,e=[]){let s,i,r,o=n,a,l,c;if(this.tokens.links){const f=Object.keys(this.tokens.links);if(f.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(o))!=null;)f.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,a.index)+"["+Ps("a",a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.blockSkip.exec(o))!=null;)o=o.slice(0,a.index)+"["+Ps("a",a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(a=this.tokenizer.rules.inline.escapedEmSt.exec(o))!=null;)o=o.slice(0,a.index)+"++"+o.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;n;)if(l||(c=""),l=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(f=>(s=f.call({lexer:this},n,e))?(n=n.substring(s.raw.length),e.push(s),!0):!1))){if(s=this.tokenizer.escape(n)){n=n.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.tag(n)){n=n.substring(s.raw.length),i=e[e.length-1],i&&s.type==="text"&&i.type==="text"?(i.raw+=s.raw,i.text+=s.text):e.push(s);continue}if(s=this.tokenizer.link(n)){n=n.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.reflink(n,this.tokens.links)){n=n.substring(s.raw.length),i=e[e.length-1],i&&s.type==="text"&&i.type==="text"?(i.raw+=s.raw,i.text+=s.text):e.push(s);continue}if(s=this.tokenizer.emStrong(n,o,c)){n=n.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.codespan(n)){n=n.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.br(n)){n=n.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.del(n)){n=n.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.autolink(n,Ss)){n=n.substring(s.raw.length),e.push(s);continue}if(!this.state.inLink&&(s=this.tokenizer.url(n,Ss))){n=n.substring(s.raw.length),e.push(s);continue}if(r=n,this.options.extensions&&this.options.extensions.startInline){let f=1/0;const p=n.slice(1);let y;this.options.extensions.startInline.forEach(function(_){y=_.call({lexer:this},p),typeof y=="number"&&y>=0&&(f=Math.min(f,y))}),f<1/0&&f>=0&&(r=n.substring(0,f+1))}if(s=this.tokenizer.inlineText(r,qu)){n=n.substring(s.raw.length),s.raw.slice(-1)!=="_"&&(c=s.raw.slice(-1)),l=!0,i=e[e.length-1],i&&i.type==="text"?(i.raw+=s.raw,i.text+=s.text):e.push(s);continue}if(n){const f="Infinite loop on byte: "+n.charCodeAt(0);if(this.options.silent){console.error(f);break}else throw new Error(f)}}return e}}class Sn{constructor(n){this.options=n||Ge}code(n,e,s){const i=(e||"").match(/\S*/)[0];if(this.options.highlight){const r=this.options.highlight(n,i);r!=null&&r!==n&&(s=!0,n=r)}return n=n.replace(/\n$/,"")+`
`,i?'<pre><code class="'+this.options.langPrefix+D(i,!0)+'">'+(s?n:D(n,!0))+`</code></pre>
`:"<pre><code>"+(s?n:D(n,!0))+`</code></pre>
`}blockquote(n){return`<blockquote>
`+n+`</blockquote>
`}html(n){return n}heading(n,e,s,i){return this.options.headerIds?"<h"+e+' id="'+this.options.headerPrefix+i.slug(s)+'">'+n+"</h"+e+`>
`:"<h"+e+">"+n+"</h"+e+`>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(n,e,s){const i=e?"ol":"ul",r=e&&s!==1?' start="'+s+'"':"";return"<"+i+r+`>
`+n+"</"+i+`>
`}listitem(n){return"<li>"+n+`</li>
`}checkbox(n){return"<input "+(n?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(n){return"<p>"+n+`</p>
`}table(n,e){return e&&(e="<tbody>"+e+"</tbody>"),`<table>
<thead>
`+n+`</thead>
`+e+`</table>
`}tablerow(n){return`<tr>
`+n+`</tr>
`}tablecell(n,e){const s=e.header?"th":"td";return(e.align?"<"+s+' align="'+e.align+'">':"<"+s+">")+n+"</"+s+`>
`}strong(n){return"<strong>"+n+"</strong>"}em(n){return"<em>"+n+"</em>"}codespan(n){return"<code>"+n+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(n){return"<del>"+n+"</del>"}link(n,e,s){if(n=xs(this.options.sanitize,this.options.baseUrl,n),n===null)return s;let i='<a href="'+D(n)+'"';return e&&(i+=' title="'+e+'"'),i+=">"+s+"</a>",i}image(n,e,s){if(n=xs(this.options.sanitize,this.options.baseUrl,n),n===null)return s;let i='<img src="'+n+'" alt="'+s+'"';return e&&(i+=' title="'+e+'"'),i+=this.options.xhtml?"/>":">",i}text(n){return n}}class Ei{strong(n){return n}em(n){return n}codespan(n){return n}del(n){return n}html(n){return n}text(n){return n}link(n,e,s){return""+s}image(n,e,s){return""+s}br(){return""}}class Oi{constructor(){this.seen={}}serialize(n){return n.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(n,e){let s=n,i=0;if(this.seen.hasOwnProperty(s)){i=this.seen[n];do i++,s=n+"-"+i;while(this.seen.hasOwnProperty(s))}return e||(this.seen[n]=i,this.seen[s]=0),s}slug(n,e={}){const s=this.serialize(n);return this.getNextSafeSlug(s,e.dryrun)}}class me{constructor(n){this.options=n||Ge,this.options.renderer=this.options.renderer||new Sn,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Ei,this.slugger=new Oi}static parse(n,e){return new me(e).parse(n)}static parseInline(n,e){return new me(e).parseInline(n)}parse(n,e=!0){let s="",i,r,o,a,l,c,f,p,y,_,P,R,C,T,g,re,K,Z,he;const Le=n.length;for(i=0;i<Le;i++){if(_=n[i],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[_.type]&&(he=this.options.extensions.renderers[_.type].call({parser:this},_),he!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(_.type))){s+=he||"";continue}switch(_.type){case"space":continue;case"hr":{s+=this.renderer.hr();continue}case"heading":{s+=this.renderer.heading(this.parseInline(_.tokens),_.depth,Ai(this.parseInline(_.tokens,this.textRenderer)),this.slugger);continue}case"code":{s+=this.renderer.code(_.text,_.lang,_.escaped);continue}case"table":{for(p="",f="",a=_.header.length,r=0;r<a;r++)f+=this.renderer.tablecell(this.parseInline(_.header[r].tokens),{header:!0,align:_.align[r]});for(p+=this.renderer.tablerow(f),y="",a=_.rows.length,r=0;r<a;r++){for(c=_.rows[r],f="",l=c.length,o=0;o<l;o++)f+=this.renderer.tablecell(this.parseInline(c[o].tokens),{header:!1,align:_.align[o]});y+=this.renderer.tablerow(f)}s+=this.renderer.table(p,y);continue}case"blockquote":{y=this.parse(_.tokens),s+=this.renderer.blockquote(y);continue}case"list":{for(P=_.ordered,R=_.start,C=_.loose,a=_.items.length,y="",r=0;r<a;r++)g=_.items[r],re=g.checked,K=g.task,T="",g.task&&(Z=this.renderer.checkbox(re),C?g.tokens.length>0&&g.tokens[0].type==="paragraph"?(g.tokens[0].text=Z+" "+g.tokens[0].text,g.tokens[0].tokens&&g.tokens[0].tokens.length>0&&g.tokens[0].tokens[0].type==="text"&&(g.tokens[0].tokens[0].text=Z+" "+g.tokens[0].tokens[0].text)):g.tokens.unshift({type:"text",text:Z}):T+=Z),T+=this.parse(g.tokens,C),y+=this.renderer.listitem(T,K,re);s+=this.renderer.list(y,P,R);continue}case"html":{s+=this.renderer.html(_.text);continue}case"paragraph":{s+=this.renderer.paragraph(this.parseInline(_.tokens));continue}case"text":{for(y=_.tokens?this.parseInline(_.tokens):_.text;i+1<Le&&n[i+1].type==="text";)_=n[++i],y+=`
`+(_.tokens?this.parseInline(_.tokens):_.text);s+=e?this.renderer.paragraph(y):y;continue}default:{const Te='Token with "'+_.type+'" type was not found.';if(this.options.silent){console.error(Te);return}else throw new Error(Te)}}}return s}parseInline(n,e){e=e||this.renderer;let s="",i,r,o;const a=n.length;for(i=0;i<a;i++){if(r=n[i],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[r.type]&&(o=this.options.extensions.renderers[r.type].call({parser:this},r),o!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(r.type))){s+=o||"";continue}switch(r.type){case"escape":{s+=e.text(r.text);break}case"html":{s+=e.html(r.text);break}case"link":{s+=e.link(r.href,r.title,this.parseInline(r.tokens,e));break}case"image":{s+=e.image(r.href,r.title,r.text);break}case"strong":{s+=e.strong(this.parseInline(r.tokens,e));break}case"em":{s+=e.em(this.parseInline(r.tokens,e));break}case"codespan":{s+=e.codespan(r.text);break}case"br":{s+=e.br();break}case"del":{s+=e.del(this.parseInline(r.tokens,e));break}case"text":{s+=e.text(r.text);break}default:{const l='Token with "'+r.type+'" type was not found.';if(this.options.silent){console.error(l);return}else throw new Error(l)}}}return s}}function A(t,n,e){if(typeof t>"u"||t===null)throw new Error("marked(): input parameter is undefined or null");if(typeof t!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");if(typeof n=="function"&&(e=n,n=null),n=ie({},A.defaults,n||{}),Ti(n),e){const s=n.highlight;let i;try{i=pe.lex(t,n)}catch(a){return e(a)}const r=function(a){let l;if(!a)try{n.walkTokens&&A.walkTokens(i,n.walkTokens),l=me.parse(i,n)}catch(c){a=c}return n.highlight=s,a?e(a):e(null,l)};if(!s||s.length<3||(delete n.highlight,!i.length))return r();let o=0;A.walkTokens(i,function(a){a.type==="code"&&(o++,setTimeout(()=>{s(a.text,a.lang,function(l,c){if(l)return r(l);c!=null&&c!==a.text&&(a.text=c,a.escaped=!0),o--,o===0&&r()})},0))}),o===0&&r();return}try{const s=pe.lex(t,n);return n.walkTokens&&A.walkTokens(s,n.walkTokens),me.parse(s,n)}catch(s){if(s.message+=`
Please report this to https://github.com/markedjs/marked.`,n.silent)return"<p>An error occurred:</p><pre>"+D(s.message+"",!0)+"</pre>";throw s}}A.options=A.setOptions=function(t){return ie(A.defaults,t),Au(A.defaults),A};A.getDefaults=Si;A.defaults=Ge;A.use=function(...t){const n=ie({},...t),e=A.defaults.extensions||{renderers:{},childTokens:{}};let s;t.forEach(i=>{if(i.extensions&&(s=!0,i.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if(r.renderer){const o=e.renderers?e.renderers[r.name]:null;o?e.renderers[r.name]=function(...a){let l=r.renderer.apply(this,a);return l===!1&&(l=o.apply(this,a)),l}:e.renderers[r.name]=r.renderer}if(r.tokenizer){if(!r.level||r.level!=="block"&&r.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");e[r.level]?e[r.level].unshift(r.tokenizer):e[r.level]=[r.tokenizer],r.start&&(r.level==="block"?e.startBlock?e.startBlock.push(r.start):e.startBlock=[r.start]:r.level==="inline"&&(e.startInline?e.startInline.push(r.start):e.startInline=[r.start]))}r.childTokens&&(e.childTokens[r.name]=r.childTokens)})),i.renderer){const r=A.defaults.renderer||new Sn;for(const o in i.renderer){const a=r[o];r[o]=(...l)=>{let c=i.renderer[o].apply(r,l);return c===!1&&(c=a.apply(r,l)),c}}n.renderer=r}if(i.tokenizer){const r=A.defaults.tokenizer||new kn;for(const o in i.tokenizer){const a=r[o];r[o]=(...l)=>{let c=i.tokenizer[o].apply(r,l);return c===!1&&(c=a.apply(r,l)),c}}n.tokenizer=r}if(i.walkTokens){const r=A.defaults.walkTokens;n.walkTokens=function(o){i.walkTokens.call(this,o),r&&r.call(this,o)}}s&&(n.extensions=e),A.setOptions(n)})};A.walkTokens=function(t,n){for(const e of t)switch(n.call(A,e),e.type){case"table":{for(const s of e.header)A.walkTokens(s.tokens,n);for(const s of e.rows)for(const i of s)A.walkTokens(i.tokens,n);break}case"list":{A.walkTokens(e.items,n);break}default:A.defaults.extensions&&A.defaults.extensions.childTokens&&A.defaults.extensions.childTokens[e.type]?A.defaults.extensions.childTokens[e.type].forEach(function(s){A.walkTokens(e[s],n)}):e.tokens&&A.walkTokens(e.tokens,n)}};A.parseInline=function(t,n){if(typeof t>"u"||t===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof t!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");n=ie({},A.defaults,n||{}),Ti(n);try{const e=pe.lexInline(t,n);return n.walkTokens&&A.walkTokens(e,n.walkTokens),me.parseInline(e,n)}catch(e){if(e.message+=`
Please report this to https://github.com/markedjs/marked.`,n.silent)return"<p>An error occurred:</p><pre>"+D(e.message+"",!0)+"</pre>";throw e}};A.Parser=me;A.parser=me.parse;A.Renderer=Sn;A.TextRenderer=Ei;A.Lexer=pe;A.lexer=pe.lex;A.Tokenizer=kn;A.Slugger=Oi;A.parse=A;A.options;A.setOptions;A.use;A.walkTokens;A.parseInline;me.parse;pe.lex;var An=typeof window<"u"?window:{};function Vu(){var t=An.DOMParser,n=!1;try{new t().parseFromString("","text/html")&&(n=!0)}catch{}return n}function Ju(){var t=function(){};return Uu()?t.prototype.parseFromString=function(n){var e=new window.ActiveXObject("htmlfile");return e.designMode="on",e.open(),e.write(n),e.close(),e}:t.prototype.parseFromString=function(n){var e=document.implementation.createHTMLDocument("");return e.open(),e.write(n),e.close(),e},t}function Uu(){var t=!1;try{document.implementation.createHTMLDocument("").open()}catch{An.ActiveXObject&&(t=!0)}return t}Vu()?An.DOMParser:Ju();/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */rt.arrowup,rt.arrowdown,rt.esc;rt.enter,rt.tab;function Uf(){const[t,n]=Y.useState(!1),{job_positions:e}=Ze(d=>d.job_positions),{departments:s}=Ze(d=>d.departments),{accounts:i}=Ze(d=>d.accounts),{users:r}=Ze(d=>d.app),[o,a]=Y.useState(!1),[l,c]=Y.useState(!1),[f,p]=Y.useState(null),[y,_]=Y.useState(null),[P,R]=Y.useState({}),[C,T]=Y.useState(0),{applicantForm:g}=Ze(d=>d.applicants),[re,K]=Y.useState([]),[Z,he]=Y.useState([]),[Le,Te]=Y.useState([]),Ee=Bi();Y.useEffect(()=>{t&&(wt.dispatch(Ji()),wt.dispatch(Ui()))},[t]),Y.useEffect(()=>{(async()=>{T(0)})(),_(!1)},[]),console.log("query",g);async function Tn(d){d.preventDefault(),_(!0);const k=new FormData;k.append("files",f),k.append("site",g.site??""),k.append("app_id",g.app_id??""),k.append("fname",g.fname??""),k.append("mname",g.mname??""),k.append("lname",g.lname??""),k.append("suffix",g.suffix??""),k.append("dob",g.dob??""),k.append("religion",g.religion??""),k.append("email",g.email??""),k.append("nationality",g.nationality??""),k.append("phone",g.phone??""),k.append("mmname",g.mmname??""),k.append("ffname",g.ffname??""),k.append("courset",g.courset??""),k.append("hired",g.hired??""),k.append("lot",g.lot??""),k.append("sss",g.sss??""),k.append("pagibig",g.pagibig??""),k.append("tin",g.tin??""),k.append("philh",g.philh??""),k.append("ename",g.ename??""),k.append("eaddress",g.eaddress??""),k.append("relationship",g.relationship??""),k.append("ephone",g.ephone??""),k.append("marital",g.marital??""),k.append("gender",g.gender??""),k.append("account",g.account??""),k.append("region",g.region??""),k.append("city",g.city??""),k.append("brgy",g.brgy??""),k.append("position",g.position??""),k.append("dept",g.dept??""),k.append("account",g.account??""),k.append("sup_id",g.sup_id??""),k.append("province",g.province??""),k.append("status",g.status??"");try{g.work_experience.forEach(ee=>{k.append("work_experience[]",JSON.stringify({app_id:g.app_id,company:ee.company,position:ee.position,started_at:ee.started_at,end_at:ee.end_at}))}),await Ee(He({...g,submitted:Li().format("YYYY-MM-DD"),app_id:g.app_id})),await wt.dispatch(Vi(k)),await wt.dispatch(qi()),En.success("Employee Saved successfully"),_(!1),n(!1)}catch{En.error("Employee failed to saved"),_(!1)}}const Ri=d=>{a(d.target.checked),c(!1)},Ci=d=>{c(d.target.checked),a(!1)};function E(d){if(d.target.name=="region"){const k=JSON.parse(d.target.value),ee=Ii.filter(Ke=>Ke.region_code===k.region_code);K(ee),Ee(He({...g,[d.target.name]:k.name}))}else if(d.target.name=="province"){const k=JSON.parse(d.target.value),ee=ji.filter(Ke=>Ke.province_code===k.province_code);he(ee),Ee(He({...g,[d.target.name]:k.name}))}else if(d.target.name=="city"){const k=JSON.parse(d.target.value),ee=Fi.filter(Ke=>Ke.city_code===k.city_code);Te(ee),Ee(He({...g,[d.target.name]:k.name}))}else Ee(He({...g,[d.target.name]:d.target.value}))}return console.log("ssssssssss",r),u.jsxs("div",{className:"my-2",children:[u.jsx("div",{class:"inline-flex rounded-md shadow-sm",role:"group",children:u.jsxs("button",{type:"button",onClick:()=>n(!0),class:"inline-flex items-center px-4 py-2 text-sm font-medium text-blue-500 bg-transparent border border-blue-500 rounded-e-lg hover:bg-blue-500 hover:text-white focus:z-10 focus:ring-2 focus:ring-blue-500 focus:bg-blue-500 focus:text-white      gap-1",children:[u.jsx(Gi,{className:"text-xl"}),"Add Existing Employee"]})}),u.jsx(Wi,{title:"Existing Employee",confirmLoading:y,open:t,onOk:Tn,onCancel:()=>n(!1),width:1200,okText:"Save",cancelText:"Cancel",children:u.jsxs("form",{className:"border rounded-lg p-3.5",onSubmit:Tn,children:[u.jsx("div",{children:u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:u.jsxs("select",{onChange:d=>E(d),name:"site",className:"border p-2 rounded w-full",children:[u.jsx("option",{disabled:!0,selected:!0,children:"Select Site"}),u.jsx("option",{value:"San Carlos",children:"San Carlos "}),u.jsx("option",{value:"Carcar",children:"Carcar "})]})})}),u.jsx("h1",{className:"text-xl font-semibold mb-3 text-gray-900  mt-6 text-center",children:"Personal Information"}),u.jsx("div",{className:"mb-4",children:u.jsx(L,{onChange:d=>E(d),value:g.app_id??"",required:!!(P!=null&&P.app_id),name:"app_id",label:"Employee No.",type:"text"})}),u.jsx("div",{className:"flex flex-1 gap-4",children:u.jsxs("div",{className:"flex flex-col w-full mb-4",children:[u.jsx("label",{htmlFor:"",children:u.jsx("b",{children:"Full Name"})}),u.jsxs("div",{className:"flex flex-1 gap-3",children:[u.jsx(L,{onChange:d=>E(d),value:g.fname??"",required:!!(P!=null&&P.fname),name:"fname",label:"First Name",type:"text"}),u.jsx(L,{onChange:d=>E(d),value:g.mname??"",name:"mname",label:"Middle Name",type:"text"}),u.jsx(L,{onChange:d=>E(d),value:g.lname??"",required:!!(P!=null&&P.lname),name:"lname",label:"Last Name",type:"text"}),u.jsxs("select",{onChange:d=>E(d),name:"suffix",className:"border p-2 rounded  w-1/5",children:[u.jsx("option",{disabled:!0,selected:!0,children:"Suffix"}),u.jsx("option",{children:" Sr."}),u.jsx("option",{children:" Jr."}),u.jsx("option",{children:" II"}),u.jsx("option",{children:" III"}),u.jsx("option",{children:" IV"}),u.jsx("option",{children:" V"})]})]})]})}),u.jsxs("div",{className:"flex flex-1 gap-4",children:[u.jsx("div",{className:"flex w-full",children:u.jsxs("div",{className:"flex flex-col gap-4 mb-4 w-full",children:[u.jsx("div",{className:"flex flex-col w-full",children:u.jsxs("select",{onChange:d=>E(d),name:"gender",className:"border p-2 rounded w-full",children:[u.jsx("option",{disabled:!0,selected:!0,children:"Gender"}),u.jsx("option",{children:" Male"}),u.jsx("option",{children:" Female"})]})}),u.jsx("div",{className:"flex flex-col w-full",children:u.jsx(L,{onChange:d=>E(d),value:g.dob??"",required:!!(P!=null&&P.dob),name:"dob",label:"Date of Birth",type:"date"})}),u.jsx("div",{className:" w-full",children:u.jsx(L,{onChange:d=>E(d),value:g.email??"",required:!!(P!=null&&P.email),name:"email",label:"Email",type:"email"})}),u.jsx("div",{className:"w-full",children:u.jsx(L,{onChange:d=>E(d),value:g.phone??"",required:!!(P!=null&&P.phone),name:"phone",label:"Phone Number",type:"number"})})]})}),u.jsx("div",{className:"flex w-full",children:u.jsxs("div",{className:"flex flex-col gap-4 mb-4 w-full",children:[u.jsx("div",{className:"flex flex-col w-full",children:u.jsxs("select",{onChange:d=>E(d),name:"marital",className:"border p-2 rounded w-full",children:[u.jsx("option",{disabled:!0,selected:!0,children:"Marital Status"}),u.jsx("option",{children:" Single"}),u.jsx("option",{children:" Married"}),u.jsx("option",{children:" Widowed"}),u.jsx("option",{children:" Divorced"})]})}),u.jsx("div",{className:"flex flex-col w-full",children:u.jsx(L,{onChange:d=>E(d),value:g.religion??"",required:!!(P!=null&&P.religion),name:"religion",label:"Religion",type:"text"})}),u.jsx("div",{className:"flex flex-col w-full",children:u.jsx(L,{onChange:d=>E(d),value:g.nationality??"",required:!!(P!=null&&P.nationality),name:"nationality",label:"Nationality",type:"text"})})]})})]}),u.jsx("div",{className:"mb-4",children:u.jsx(L,{onChange:d=>E(d),value:g.mmname??"",name:"mmname",label:"Mothers maiden name",type:"text"})}),u.jsx("div",{className:"mb-4",children:u.jsx(L,{onChange:d=>E(d),value:g.ffname??"",name:"ffname",label:"Fathers fullname",type:"text"})}),u.jsxs("div",{className:"flex flex-1 gap-4 mb-4",children:[u.jsx("div",{className:"w-full",children:u.jsxs("select",{onChange:d=>E(d),name:"educ",className:"border p-2 rounded w-full",children:[u.jsx("option",{disabled:!0,selected:!0,children:"Select Educational Attainment"}),u.jsx("option",{children:" Elementary Undergraduate"}),u.jsx("option",{children:" Elementary Graduate"}),u.jsx("option",{children:" Highschool/K-12 Undergraduate"}),u.jsx("option",{children:" Highschool/K-12 Graduate"}),u.jsx("option",{children:" College Level"}),u.jsx("option",{children:" College Graduate"}),u.jsx("option",{children:" Vocational Graduate"}),u.jsx("option",{children:" Masteral Degree"}),u.jsx("option",{children:" Doctoral Degree"})]})}),u.jsx("div",{className:"w-full",children:u.jsx(L,{onChange:d=>E(d),value:g.courset??"",name:"courset",label:"Course taken",type:"text"})})]}),u.jsx("div",{className:"flex flex-1 gap-4",children:u.jsx("div",{className:"flex flex-col w-full mb-4",children:u.jsxs("div",{className:"flex flex-1 gap-3",children:[u.jsxs("select",{onChange:d=>E(d),name:"position",className:"border p-2 rounded  w-full",children:[u.jsx("option",{disabled:!0,selected:!0,children:"Job Position"}),e.filter(d=>d.site==="San Carlos").map((d,k)=>u.jsx("option",{value:d.jPosition,children:d.jPosition},k))]}),u.jsxs("select",{onChange:d=>E(d),name:"dept",className:"border p-2 rounded  w-full",children:[u.jsx("option",{disabled:!0,selected:!0,children:"Department"}),s.filter(d=>d.site==="San Carlos").map((d,k)=>u.jsx("option",{value:d.dept,children:d.dept},k))]}),u.jsxs("select",{onChange:d=>E(d),name:"account",className:"border p-2 rounded  w-full",children:[u.jsx("option",{disabled:!0,selected:!0,children:"Account (If Applicable)"}),i.map((d,k)=>u.jsx("option",{value:d.acc,children:d.acc},k))]})]})})}),u.jsx("div",{className:"flex flex-1 gap-4",children:u.jsx("div",{className:"flex flex-col w-full mb-4",children:u.jsxs("div",{className:"flex flex-1 gap-3",children:[u.jsxs("select",{onChange:d=>E(d),name:"sup_id",value:g.sup_id,className:"border p-2 rounded  w-full",children:[u.jsx("option",{disabled:!0,selected:!0,children:"Supervisor"}),r.filter(d=>d.site==="San Carlos"&&["Manager","Account Manager","Supervisor","Team Leader","Director","CEO"].includes(d.position)).map(d=>u.jsxs("option",{value:d.id,children:[d.employee_fname," ",d.employee_lname]},d.id))]}),u.jsx(L,{onChange:d=>E(d),value:g.hired??"",name:"hired",label:"Hired Date",type:"date"}),u.jsxs("select",{onChange:d=>E(d),name:"status",className:"border p-2 rounded  w-full",required:!0,children:[u.jsx("option",{disabled:!0,selected:!0,children:"Status"}),u.jsx("option",{children:" Probationary"}),u.jsx("option",{children:" Regular"})]})]})})}),u.jsx("h1",{className:"text-xl font-semibold mb-3 text-gray-900  mt-9",children:"Address Information"}),u.jsxs("div",{className:"flex flex-1 gap-4 mb-4 w-full",children:[u.jsx("div",{className:"flex flex-col w-full",children:u.jsx(bt,{onChange:d=>E(d),options:$i.map(d=>({label:d.region_name,value:JSON.stringify({name:d.region_name,region_code:d.region_code})})),required:"true",name:"region",label:"Region"})}),u.jsx("div",{className:"flex flex-col w-full",children:u.jsx(bt,{onChange:d=>E(d),options:re.map(d=>({label:d.province_name,value:JSON.stringify({name:d.province_name,province_code:d.province_code})})),required:"true",name:"province",label:"Province"})}),u.jsx("div",{className:"flex flex-col w-full",children:u.jsx(bt,{onChange:d=>E(d),options:Z.map(d=>({label:d.city_name,value:JSON.stringify({name:d.city_name,city_code:d.city_code})})),required:"true",name:"city",label:"City/Municipality"})})]}),u.jsxs("div",{className:"flex flex-1 gap-4 mb-4",children:[u.jsx("div",{className:"flex flex-col  w-1/2",children:u.jsx(bt,{onChange:d=>E(d),options:Le.map(d=>({label:d.brgy_name,value:d.brgy_name})),required:"true",name:"brgy",label:"Barangay"})}),u.jsx("div",{className:"flex flex-col w-full",children:u.jsx(L,{onChange:d=>E(d),value:g.lot??"",name:"lot",label:"House/Lot No., Street, Purok/Sitio",type:"text"})})]}),u.jsx("h1",{className:"text-xl font-semibold mb-3 text-gray-900  mt-9",children:"Government ID Information"}),u.jsxs("div",{className:"flex flex-1 gap-4 mb-4",children:[u.jsx("div",{className:"w-full",children:u.jsx(L,{onChange:d=>E(d),value:g.sss??"",name:"sss",label:"SSS No.",type:"text"})}),u.jsx("div",{className:"w-full",children:u.jsx(L,{onChange:d=>E(d),value:g.pagibig??"",name:"pagibig",label:"Pag-IBIG No.",type:"text"})})]}),u.jsxs("div",{className:"flex flex-1 gap-4 mb-4",children:[u.jsx("div",{className:"w-full",children:u.jsx(L,{onChange:d=>E(d),value:g.tin??"",name:"tin",label:"Tin No.",type:"text"})}),u.jsx("div",{className:"w-full",children:u.jsx(L,{onChange:d=>E(d),value:g.philh??"",name:"philh",label:"Philhealth No.",type:"text"})})]}),u.jsxs("div",{className:"flex items-center mb-4",children:[u.jsx("input",{id:"with-working-experience-checkbox",type:"checkbox",value:"",checked:o,onChange:Ri,className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500  -gray-800 focus:ring-2  "}),u.jsx("label",{htmlFor:"with-working-experience-checkbox",className:"ms-2 text-md font-medium text-gray-900 ",children:u.jsx("b",{children:"with Working Experience"})})]}),u.jsxs("div",{className:"flex items-center mb-4",children:[u.jsx("input",{id:"first-time-jobseeker-checkbox",type:"checkbox",value:"",checked:l,onChange:Ci,className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500  -gray-800 focus:ring-2  ",disabled:o}),u.jsx("label",{htmlFor:"first-time-jobseeker-checkbox",className:"ms-2 text-md font-medium text-gray-900 ",children:u.jsx("b",{children:"First Time Jobseeker"})})]}),o&&u.jsx(Di,{}),u.jsx("h1",{className:"text-xl font-semibold mb-3 text-gray-900  mt-9",children:"Emergency Contact Information"}),u.jsx("div",{className:"mb-4 w-full",children:u.jsx(L,{onChange:d=>E(d),value:g.ename??"",name:"ename",label:"Emergency Contact Fullname",type:"text"})}),u.jsx("div",{className:"mb-4 w-full",children:u.jsx(L,{onChange:d=>E(d),value:g.eaddress??"",name:"eaddress",label:"Address",type:"text"})}),u.jsxs("div",{className:"flex flex-1 gap-4 mb-4",children:[u.jsx("div",{className:"w-full",children:u.jsx(L,{onChange:d=>E(d),value:g.relationship??"",name:"relationship",label:"Relationship",type:"text"})}),u.jsx("div",{className:"w-full",children:u.jsx(L,{onChange:d=>E(d),value:g.ephone??"",name:"ephone",label:"Contact No.",type:"number"})})]}),u.jsx(zi,{files:f,setFiles:p})]})})]})}export{Uf as default};
